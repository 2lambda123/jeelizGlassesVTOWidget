/**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( JeelizÂ® - https://jeeliz.com )
 *
 * This software library is the proprietary and confidential information of
 * Jeeliz ("Licensor"). You may only use this software library if
 * you have obtained a valid commercial license from Licensor. If you have not
 * obtained a valid commercial license from Licensor, please check out
 * https://jeeliz.com/#pricing for licensing options and pricing.
 *
 * Unauthorized use, reproduction, or distribution of this software library or
 * any portion thereof may result in severe civil and criminal penalties, and
 * will be prosecuted to the maximum extent possible under the law.
 *
 * THIS SOFTWARE LIBRARY IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE LIBRARY, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(la,na){return Object.prototype.hasOwnProperty.call(la,na)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(la,na,qa){if(la==Array.prototype||la==Object.prototype)return la;la[na]=qa.value;return la};
$jscomp.getGlobal=function(la){la=["object"==typeof globalThis&&globalThis,la,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var na=0;na<la.length;++na){var qa=la[na];if(qa&&qa.Math==Math)return qa}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(la,na){var qa=$jscomp.propertyToPolyfillSymbol[na];if(null==qa)return la[na];qa=la[qa];return void 0!==qa?qa:la[na]};$jscomp.polyfill=function(la,na,qa,Ma){na&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(la,na,qa,Ma):$jscomp.polyfillUnisolated(la,na,qa,Ma))};
$jscomp.polyfillUnisolated=function(la,na,qa,Ma){qa=$jscomp.global;la=la.split(".");for(Ma=0;Ma<la.length-1;Ma++){var wa=la[Ma];if(!(wa in qa))return;qa=qa[wa]}la=la[la.length-1];Ma=qa[la];na=na(Ma);na!=Ma&&null!=na&&$jscomp.defineProperty(qa,la,{configurable:!0,writable:!0,value:na})};
$jscomp.polyfillIsolated=function(la,na,qa,Ma){var wa=la.split(".");la=1===wa.length;Ma=wa[0];Ma=!la&&Ma in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var nb=0;nb<wa.length-1;nb++){var sa=wa[nb];if(!(sa in Ma))return;Ma=Ma[sa]}wa=wa[wa.length-1];qa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===qa?Ma[wa]:null;na=na(qa);null!=na&&(la?$jscomp.defineProperty($jscomp.polyfills,wa,{configurable:!0,writable:!0,value:na}):na!==qa&&($jscomp.propertyToPolyfillSymbol[wa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(wa):
$jscomp.POLYFILL_PREFIX+wa,wa=$jscomp.propertyToPolyfillSymbol[wa],$jscomp.defineProperty(Ma,wa,{configurable:!0,writable:!0,value:na})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(la,na){for(var qa=1;qa<arguments.length;qa++){var Ma=arguments[qa];if(Ma)for(var wa in Ma)$jscomp.owns(Ma,wa)&&(la[wa]=Ma[wa])}return la};$jscomp.polyfill("Object.assign",function(la){return la||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(la){var na=0;return function(){return na<la.length?{done:!1,value:la[na++]}:{done:!0}}};$jscomp.arrayIterator=function(la){return{next:$jscomp.arrayIteratorImpl(la)}};$jscomp.makeIterator=function(la){var na="undefined"!=typeof Symbol&&Symbol.iterator&&la[Symbol.iterator];return na?na.call(la):$jscomp.arrayIterator(la)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(la){function na(){this.batch_=null}function qa(sa){return sa instanceof wa?sa:new wa(function(Ha,Ra){Ha(sa)})}if(la&&!$jscomp.FORCE_POLYFILL_PROMISE)return la;na.prototype.asyncExecute=function(sa){if(null==this.batch_){this.batch_=[];var Ha=this;this.asyncExecuteFunction(function(){Ha.executeBatch_()})}this.batch_.push(sa)};var Ma=$jscomp.global.setTimeout;na.prototype.asyncExecuteFunction=function(sa){Ma(sa,0)};na.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var sa=this.batch_;this.batch_=[];for(var Ha=0;Ha<sa.length;++Ha){var Ra=sa[Ha];sa[Ha]=null;try{Ra()}catch(db){this.asyncThrow_(db)}}}this.batch_=null};na.prototype.asyncThrow_=function(sa){this.asyncExecuteFunction(function(){throw sa;})};var wa=function(sa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ha=this.createResolveAndReject_();try{sa(Ha.resolve,Ha.reject)}catch(Ra){Ha.reject(Ra)}};wa.prototype.createResolveAndReject_=function(){function sa(db){return function(ob){Ra||
(Ra=!0,db.call(Ha,ob))}}var Ha=this,Ra=!1;return{resolve:sa(this.resolveTo_),reject:sa(this.reject_)}};wa.prototype.resolveTo_=function(sa){if(sa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(sa instanceof wa)this.settleSameAsPromise_(sa);else{a:switch(typeof sa){case "object":var Ha=null!=sa;break a;case "function":Ha=!0;break a;default:Ha=!1}Ha?this.resolveToNonPromiseObj_(sa):this.fulfill_(sa)}};wa.prototype.resolveToNonPromiseObj_=function(sa){var Ha=void 0;
try{Ha=sa.then}catch(Ra){this.reject_(Ra);return}"function"==typeof Ha?this.settleSameAsThenable_(Ha,sa):this.fulfill_(sa)};wa.prototype.reject_=function(sa){this.settle_(2,sa)};wa.prototype.fulfill_=function(sa){this.settle_(1,sa)};wa.prototype.settle_=function(sa,Ha){if(0!=this.state_)throw Error("Cannot settle("+sa+", "+Ha+"): Promise already settled in state"+this.state_);this.state_=sa;this.result_=Ha;this.executeOnSettledCallbacks_()};wa.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var sa=0;sa<this.onSettledCallbacks_.length;++sa)nb.asyncExecute(this.onSettledCallbacks_[sa]);this.onSettledCallbacks_=null}};var nb=new na;wa.prototype.settleSameAsPromise_=function(sa){var Ha=this.createResolveAndReject_();sa.callWhenSettled_(Ha.resolve,Ha.reject)};wa.prototype.settleSameAsThenable_=function(sa,Ha){var Ra=this.createResolveAndReject_();try{sa.call(Ha,Ra.resolve,Ra.reject)}catch(db){Ra.reject(db)}};wa.prototype.then=function(sa,Ha){function Ra(ub,Db){return"function"==
typeof ub?function(Nb){try{db(ub(Nb))}catch(Sb){ob(Sb)}}:Db}var db,ob,Tb=new wa(function(ub,Db){db=ub;ob=Db});this.callWhenSettled_(Ra(sa,db),Ra(Ha,ob));return Tb};wa.prototype.catch=function(sa){return this.then(void 0,sa)};wa.prototype.callWhenSettled_=function(sa,Ha){function Ra(){switch(db.state_){case 1:sa(db.result_);break;case 2:Ha(db.result_);break;default:throw Error("Unexpected state: "+db.state_);}}var db=this;null==this.onSettledCallbacks_?nb.asyncExecute(Ra):this.onSettledCallbacks_.push(Ra)};
wa.resolve=qa;wa.reject=function(sa){return new wa(function(Ha,Ra){Ra(sa)})};wa.race=function(sa){return new wa(function(Ha,Ra){for(var db=$jscomp.makeIterator(sa),ob=db.next();!ob.done;ob=db.next())qa(ob.value).callWhenSettled_(Ha,Ra)})};wa.all=function(sa){var Ha=$jscomp.makeIterator(sa),Ra=Ha.next();return Ra.done?qa([]):new wa(function(db,ob){function Tb(Nb){return function(Sb){ub[Nb]=Sb;Db--;0==Db&&db(ub)}}var ub=[],Db=0;do ub.push(void 0),Db++,qa(Ra.value).callWhenSettled_(Tb(ub.length-1),ob),
Ra=Ha.next();while(!Ra.done)})};return wa},"es6","es3");$jscomp.polyfill("Math.log2",function(la){return la?la:function(na){return Math.log(na)/Math.LN2}},"es6","es3");$jscomp.findInternal=function(la,na,qa){la instanceof String&&(la=String(la));for(var Ma=la.length,wa=0;wa<Ma;wa++){var nb=la[wa];if(na.call(qa,nb,wa,la))return{i:wa,v:nb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(la){return la?la:function(na,qa){return $jscomp.findInternal(this,na,qa).v}},"es6","es3");
$jscomp.polyfill("Object.is",function(la){return la?la:function(na,qa){return na===qa?0!==na||1/na===1/qa:na!==na&&qa!==qa}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(la){return la?la:function(na,qa){var Ma=this;Ma instanceof String&&(Ma=String(Ma));var wa=Ma.length;qa=qa||0;for(0>qa&&(qa=Math.max(qa+wa,0));qa<wa;qa++){var nb=Ma[qa];if(nb===na||Object.is(nb,na))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(la,na,qa){if(null==la)throw new TypeError("The 'this' value for String.prototype."+qa+" must not be null or undefined");if(na instanceof RegExp)throw new TypeError("First argument to String.prototype."+qa+" must not be a regular expression");return la+""};$jscomp.polyfill("String.prototype.includes",function(la){return la?la:function(na,qa){return-1!==$jscomp.checkStringArgs(this,na,"includes").indexOf(na,qa||0)}},"es6","es3");
$jscomp.polyfill("Promise.prototype.finally",function(la){return la?la:function(na){return this.then(function(qa){return Promise.resolve(na()).then(function(){return qa})},function(qa){return Promise.resolve(na()).then(function(){throw qa;})})}},"es9","es3");$jscomp.polyfill("Math.sign",function(la){return la?la:function(na){na=Number(na);return 0===na||isNaN(na)?na:0<na?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function la(){Qa.mode=lb.realtime;Qa.isRT=!0;Aa.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(Aa.adjust){Aa.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");Aa.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");Aa.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");Aa.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var U=Aa.adjust;U&&U.addEventListener("click",Tb,!1);(U=Aa.adjustExit)&&
U.addEventListener("click",ub,!1);[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(qa)}Ub.enabled&&Ta.do_instantDetection(Ub.interval,Ub.callback);$b&&($b(!0),$b=null)}function na(){var U=document.createElement("style");U.setAttribute("type","text/css");U.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var ua=document.getElementsByTagName("head");1<=ua.length?ua[0].appendChild(U):document.body.appendChild(U)}function qa(U){U&&
(U.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(U).display&&U.classList.add("_jeelizVTOForceShow"))}function Ma(U){U&&(U.classList.add("_jeelizVTOForceHide"),U.classList.remove("_jeelizVTOForceShow"))}function wa(U,ua){if(U)for(var Na in ua)U.style[Na]=ua[Na]}function nb(U){if(!U)return{width:0,height:0};U=U.getBoundingClientRect();return{width:U.width,height:U.height}}function sa(U){return new Promise(function(ua,Na){var Ka=new XMLHttpRequest;Ka.open("GET",U,!0);Ka.onreadystatechange=
function(){if(4===Ka.readyState)if(200===Ka.status||0===Ka.status)try{var Za=JSON.parse(Ka.responseText);ua(Za)}catch(cb){Na("INVALID JSON")}else Na("HTTP ERROR "+Ka.status)};Ka.send()})}function Ha(U,ua){return new Promise(function(Na,Ka){sa(U).then(function(Za){Ta.set_modelStandalone(Za,Nb.bind(null,ua,Na),ua)}).catch(Ka)})}function Ra(){xb.toggle_loading(!1);Qa.mode=lb.realtime;db("INVALID_SKU")}function db(U){wc.error?wc.error(U):console.log("ERROR:",U)}function ob(){var U=nb(Aa.container),ua=
Math.abs(hb.displayHeight-U.height);if(1>=Math.abs(hb.displayWidth-U.width)&&1>=ua)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(hb.displayWidth=U.width,hb.displayHeight=U.height,console.log("INFO in JeelizVTOWidget.resize: width = "+hb.displayWidth.toString()+" height = "+hb.displayHeight.toString()+" oFactor = "+(1).toString()),hb.cvWidth=Math.round(1*hb.displayWidth),hb.cvHeight=Math.round(1*hb.displayHeight),wa(Aa.cv,{width:hb.displayWidth.toString()+
"px",height:hb.displayHeight.toString()+"px"}),Aa.cv.width=hb.cvWidth,Aa.cv.height=hb.cvHeight,Ta)if(Qa.mode===lb.notLoaded)Ta.set_size(hb.cvWidth,hb.cvHeight,!1);else Ta.onLoad(function(){Ta.resize(hb.cvWidth,hb.cvHeight,!1)})}function Tb(){[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(Ma);Qa.mode=lb.adjust;[Aa.adjustNotice,Aa.adjustExit].forEach(qa);Aa.cv.style.cursor="move";Ta.switch_modeInteractor("movePinch");nc("ADJUST_START")}function ub(){[Aa.adjustNotice,Aa.adjustExit].forEach(Ma);
[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(qa);Aa.cv.style.cursor="auto";Qa.mode=Qa.realtime;Ta.switch_modeInteractor("idle");nc("ADJUST_END")}function Db(){if(!Aa.trackIframe){var U=oc.appstaticURL+"jeewidget/";Aa.trackIframe=document.createElement("iframe");Aa.trackIframe.width="10";Aa.trackIframe.height="10";Aa.trackIframe.src=U+"trackIframe.html";wa(Aa.trackIframe,{position:"absolute",zIndex:-1,bottom:"0",right:"0"});Aa.container.appendChild(Aa.trackIframe)}}function Nb(U,
ua){Qa.mode=lb.realtime;ua&&ua();xb.toggle_loading(!1);if(Aa.trackIframe){ua=location.href.split("?").shift().split("://").pop();ua=ua.split("/").shift();ua=ua.split("www.").pop();try{Aa.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:ua,sku:U},"*")}catch(Na){}}}function Sb(U,ua,Na,Ka){var Za=ua.mod+".json";ua.isStandalone?Ha(xc+"models3DStandalone/"+Za,U).then(Na):Ta.load_model(Za,ua.mats,Nb.bind(null,U,Na),U,Ka)}function nc(U){(U=Ic[U])&&U()}var Ta=function(){function U(a,
b){return a[0]*(1-b)+a[1]*b}function ua(a,b){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||b(e.responseText)};e.send()}function Na(a,b){ua(a+"",function(e){b(JSON.parse(e))})}function Ka(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var e in a)a[e]=Ka(a[e],b);return a}function Za(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function cb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";
case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Eb(a,b){var e=b%8;return a[(b-e)/8]>>7-e&1}function La(a,b,e){var f=1,l=0;for(e=b+e-1;e>=b;--e)l+=f*Eb(a,e),f*=2;return l}function ib(a){a=a.data;
a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,e=new Uint8Array(b),f=0;f<b;++f)e[f]=a.charCodeAt(f);return e}function rb(a){return"string"===typeof a?JSON.parse(a):a}function Kb(a){return"undefined"===typeof rb(a).nb?Ob(a):zb(a)}function zb(a){var b=rb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var e=b.n;b=ib(b);for(var f=new Uint32Array(e),l=0;l<e;++l)f[l]=La(b,l*a,a);return f}function Ob(a){var b=rb(a);a=b.ne;var e=b.nf,f=b.n;b=ib(b);for(var l=
new Float32Array(f),q=new Float32Array(e),x=a+e+1,k=0;k<f;++k){var m=x*k,r=0===Eb(b,m)?1:-1,z=La(b,m+1,a);m=m+1+a;for(var H=q.length,y=0,G=m;G<m+H;++G)q[y]=Eb(b,G),++y;for(H=m=0;H<e;++H)m+=q[H]*Math.pow(2,-H-1);l[k]=0===m&&0===z?0:r*(1+m)*Math.pow(2,1+z-Math.pow(2,a-1))}return l}function ac(a){var b=null,e=null,f=null,l=0,q=this,x=null,k={Kc:[],Xd:"none",ag:!1,Wd:null,grid:null};this.m=function(){this.Lk(x.Kc);f.lo({Xd:x.Xd,ag:x.ag,Wd:x.Wd})};this.Pl=function(m){return b[m]};this.re=function(m){["s32",
"s34","s27"].forEach(function(r){Z.j(r,[{type:"2f",name:"u20",value:m}])});b&&b.forEach(function(r){r.re(m)})};this.Lk=function(m){var r=null;l=m.length;var z=null!==x.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),H=z?x.grid:[1,1];z&&this.re(H);b=m.map(function(y,G){y=Object.assign({},y,{index:G,parent:q,be:r,xm:G===l-1,Fc:z,Aa:H});return r=0===G?Zc.instance(y):$c.instance(y)});e=b[0];f=b[l-1];b.forEach(function(y,G){0!==G&&y.kn()})};this.wa=function(m){m.h(0);var r=m;b.forEach(function(z){r=
z.wa(r,!1)});return r};this.Sh=function(){return e.Ol()};this.Cc=function(){return f.Sl()};this.Oh=function(){return f.Oh()};this.v=function(){b&&(b.forEach(function(m){m.v()}),f=e=b=null,l=0)};"undefined"!==typeof a&&(x=Object.assign({},k,a),this.m())}function Fb(a,b){a[b]=!0;a.setAttribute(b,"true")}function bc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function cc(a){if(!a)return a;var b=null;if(a.video){var e=function(f){return f&&
"object"===typeof f?Object.assign({},f):f};b={};"undefined"!==typeof a.video.width&&(b.width=e(a.video.width));"undefined"!==typeof a.video.height&&(b.height=e(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=e(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&dc(b,a.deviceId);return b}function dc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function ec(a){var b=a.video.width;a.video.width=
a.video.height;a.video.height=b;return a}function yc(a){function b(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(G,u){return Math.abs(G-y)-Math.abs(u-y)})}function e(y){var G=cc(a);y=y(G);l.push(y);f(y)}function f(y){if(y.video&&y.video.facingMode&&y.video.facingMode.exact){var G=y.video.facingMode.exact;y=cc(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=G;l.push(y)}}var l=[];if(!a||!a.video)return l;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&
a.video.height.ideal){var q=b(a.video.width.ideal).slice(0,3),x=b(a.video.height.ideal).slice(0,3),k={},m=0;for(k.ob=void 0;m<q.length;k={ob:k.ob},++m){k.ob=q[m];var r={},z=0;for(r.mb=void 0;z<x.length;r={mb:r.mb},++z)if(r.mb=x[z],k.ob!==a.video.width.ideal||r.mb!==a.video.height.ideal){var H=Math.max(k.ob,r.mb)/Math.min(k.ob,r.mb);H<4/3-.1||H>16/9+.1||e(function(y,G){return function(u){u.video.width.ideal=y.ob;u.video.height.ideal=G.mb;return u}}(k,r))}}}e(function(y){return ec(y)})}a.video.width&&
a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&e(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),e(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(e(function(y){delete y.video.facingMode;return y}),a.video.width&&a.video.height&&e(function(y){ec(y);delete y.video.facingMode;return y}));l.push({audio:a.audio,video:!0});return l}function fc(a){a.volume=0;Fb(a,"muted");if(bc()){if(1===a.volume){var b=function(){a.volume=
0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Fb(a,"muted")},5)}}function gc(a){var b=Ca.element,e=Ca.ph;return null===b?Promise.resolve():new Promise(function(f,l){if(b.srcObject&&b.srcObject.getVideoTracks){var q=b.srcObject.getVideoTracks();1!==q.length?l("INVALID_TRACKNUMBER"):(q=q[0],a?hc(b,f,l,e):(q.stop(),f()))}else l("BAD_IMPLEMENTATION")})}
function ic(a,b,e,f){function l(x){q||(q=!0,e(x))}var q=!1;navigator.mediaDevices.getUserMedia(f).then(function(x){function k(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)l("VIDEO_NULLSIZE");else{r={Tk:null,Ag:null,Sm:null};try{var z=x.getVideoTracks()[0];z&&(r.Sm=z,r.Tk=z.getCapabilities(),r.Ag=z.getSettings())}catch(H){}q||b(a,x,r)}}else l("VIDEO_NOTSTARTED")},700)}function m(){a.removeEventListener("loadeddata",m,!1);var r=a.play();fc(a);"undefined"===
typeof r?k():r.then(function(){k()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=x:(a.src=window.URL.createObjectURL(x),a.videoStream=x);fc(a);a.addEventListener("loadeddata",m,!1)}).catch(function(x){l(x)})}function hc(a,b,e,f){a?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(Fb(a,"autoplay"),Fb(a,"playsinline"),f&&f.audio?a.volume=0:Fb(a,"muted"),ad(f).then(function(){ic(a,b,function(){function l(x){if(0===x.length)e("INVALID_FALLBACKCONSTRAINTS");
else{var k=x.shift();ic(a,b,function(){l(x)},k)}}var q=yc(f);l(q)},f)})):e&&e("MEDIASTREAMAPI_NOTFOUND"):e&&e("VIDEO_NOTPROVIDED")}function ad(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var e={user:[],environment:["camera2 0"]}[b];return e&&0!==e.length?new Promise(function(f){Jc(function(l){l?(l=l.find(function(q){var x=
q.label;return x?e.some(function(k){return x.includes(k)}):!1}))?(a.video.deviceId={exact:l.deviceId},f("SUCCESS")):f("NO_PREFERRED_DEVICE_FOUND"):f("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Jc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(e){return e.kind&&-1!==e.kind.toLowerCase().indexOf("video")&&e.label&&e.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,
"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function bd(){function a(K){K=K?pc.ff:1;R.width=K*J.width;R.height=K*J.height;return R}function b(K){var S=K.length-1,ia=K[S];if("data:"===ia.substring(0,5))return ia;for(ia="";0<=S;--S){var ra=K[S],Ea="http"===ra.substring(0,4).toLowerCase();ia=ra+ia;if(Ea)break}return ia}function e(K,S,ia){return new Promise(function(ra){ya.yj(S);Ba.$();Oa.isEnabled=!0;Da.isEnabled=!1;Oa.Oa||(Oa.Oa=jc.instance({}));K.Th()&&(Oa.Oa.mj(K.Th()),ya.pa(Oa.Oa));K.set();Da.isEnabled=
!1;z();var Ea=jb.Qh(ia);setTimeout(function(){Oa.isEnabled=!1;ya.yj(!1);ra(Ea)},1)})}function f(K,S){ja.Vc=.5;return new Promise(function(ia){Da.$b=K;Da.isEnabled=!0;Da.B=function(){var ra=Kc.instance(S());Da.B=null;ia(ra)}})}function l(K,S){return new Promise(function(ia,ra){Na(S+K,function(Ea){Ea.error?ra("SKU_NOT_FOUND"):ia({Tm:Ea.intrinsic.mod+".json",Rm:Ea.intrinsic.mats})})})}function q(K,S){var ia=b([J.ca,J.ua,J.Td+"/"]);S=S.map(function(ra){return ia+ra});V.model={url:b([J.ca,J.ua,J.Ud+"/"+
K]),Nc:S,Jb:!1,Ib:!1};return new Promise(function(ra){Pa.yi(V.model,function(){T.isBusy=!1;ra()})})}function x(K,S){if(!S)return K;K=K.slice(0);var ia=gb.Tl().map(function(qb){return qb.toLowerCase()}),ra;for(ra in S){var Ea=ia.indexOf(ra.toLowerCase());-1!==Ea&&(K[Ea]=S[ra])}return K}function k(K,S){return new Promise(function(ia,ra){T.set_model(K,function(){T.set_materials(S,function(){T.isBusy=!1;ia()})},function(){T.isBusy=!1;ra("CANNOT_LOAD_MODEL")})})}function m(){T.load_model=function(K,S,
ia,ra,Ea,qb){if(T.isBusy)return!1;T.isBusy=!0;S=x(S,Ea);(V.model?k(K,S):q(K,S)).then(ia).catch(qb);return!0};T.set_offset=function(K){P=K;Pa.se()};T.set_scale=function(K){D=K;Pa.te()};T.set_rx=function(K){X=K;Pa.Mj()};T.switch_shadow=ya.Fg;T.switch_bgBlur=ya.Eg;T.set_zoom=ya.rg;T.is_viewer3D=function(){return ka===ha.Ha};T.switch_viewer3D=function(K,S){if(ka===ha.kc||ka===ha.lc||ka===ha.W&&!K||ka===ha.Ha&&K||Da.isEnabled)return!1;if(ka===ha.ta)return mb!==ha.Ha||K?mb===ha.W&&K?(mb=ha.Ha,ya.pa(ja.Eb),
ya.cb(1),S&&S(),!0):!1:(mb=ha.W,ya.pa(ja.Ga),ya.cb(0),S&&S(),!0);var ia=0,ra=-1,Ea=0;ka===ha.W?(ka=ha.kc,ra=J.To):ka===ha.Ha&&(ka=ha.lc,ra=J.Wo);var qb=zc.lf();Sa=setInterval(function(){var kb=zc.lf();ia+=(kb-qb)/ra;1<=ia&&(ia=1,ka===ha.kc?(ka=ha.Ha,ya.pa(ja.Eb)):(ka=ha.W,ya.pa(ja.Ga)),S&&S(),clearInterval(Sa),Sa=null);var Lb=ka===ha.lc||ka===ha.W?1-J.Ro(ia):J.Qo(ia);ya.cb(Lb);ka!==ha.lc&&ka!==ha.kc||0!==Ea++%2||(ya.pa(ja.Vf),ja.Vf.eo(Lb));qb=kb},.016);return!0};T.capture_image=function(K,S,ia,ra){Da.$b=
K;Da.isEnabled=!0;"undefined"===typeof isAllocate&&(ia=!1);(ra="undefined"===typeof ra?!1:ra)&&ya.ke(!1);g();Da.B=function(){ya.Vi(0);c.flush();var Ea=jb.Qh(ia);S(Ea);ra&&ya.ke(!0)}};T.capture_detection=function(K,S){var ia=null===ma.Fb?ma.kb:ma.Yc;f(K,function(){return{nd:oa.nc.clone(),Wf:gb.Wh(),Sf:gb.Uh(),background:ia.clone(),Oa:xa.Ia.Xh().clone(),Rf:Xa}}).then(S)};T.process_image=function(K){function S(){return new Promise(function(vb,pb){Da.Pg=kb.updateLightInterval;f(kb.nSteps,ia).then(function(fb){Da.Pg=
3;fb?1>=fb.Vl().data[0]?(fb.H(),pb("FACE_NOT_FOUND")):e(fb,kb.isMask,!0).then(function(cd){ya.pa(ja.Ga);fb.H();vb(cd)}):pb("CRITICAL")});z()})}function ia(){return{nd:oa.nc.clone(),Wf:!1,Sf:!1,background:J.oq?!1:ma.kb.clone(!0),Oa:xa.Ia.Xh().clone()}}function ra(){return new Promise(function(vb,pb){l(kb.modelSKU,kb.glassesDBURL).then(function(fb){T.load_model(fb.Tm,fb.Rm,function(){vb()},kb.modelSKU,null,function(){pb("CANNOT_LOAD_MODEL")})}).catch(function(fb){pb(fb)})})}function Ea(){if(kb.image){var vb=
kb.image;qb(vb);return Promise.resolve(vb)}return new Promise(function(pb){var fb=new Image;fb.onload=function(){qb(fb);pb()};fb.src=kb.imageBase64})}function qb(vb){var pb=vb.width,fb=vb.height;if(pb!==J.width||fb!==J.height)Ca.Ld&&(Ca.element.width=pb,Ca.element.height=fb),I(pb,fb,kb.overSamplingFactor);Ca.Dh.drawImage(vb,0,0);g()}var kb=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",
isMask:!0},K);if(J.Ic)throw Error("This feature cannot be called");var Lb=$a.FOVforced;kb.FOVHztDeg&&($a.FOVforced=kb.FOVHztDeg);ya.pa(ja.Ga);return new Promise(function(vb,pb){return ra().then(Ea).then(function(){S().then(function(fb){$a.FOVforced=Lb;vb(fb)}).catch(pb)}).catch(pb).catch(pb)})};T.process_offlineRendering=function(K,S,ia,ra,Ea){Pa.Fn();ra&&(T.Yj.drawImage(jb.ub(),0,0),jb.ub().parentNode.insertBefore(T.Gb,jb.ub()),T.Gb.setAttribute("class","jeefitMask"));T.set_model(S,function(){T.set_materials(ia,
function(){setTimeout(function(){e(K,ra).then(Ea);Pa.Cn(ra?function(){jb.ub().parentNode.removeChild(T.Gb)}:!1)},1)})})};T.serialize_detection=function(K){return K.ac()};T.unserialize_detection=function(K,S,ia){return Kc.Xc(K,S,ia)};T.do_instantDetection=function(K,S){Lc.m(oa.nc);Lc.start(K,S)};T.relieve_DOM=function(K,S){if(Q.Ub)return!1;y(S||160);Ia=!1;da&&clearTimeout(da);da=setTimeout(function(){y(J.ya);da=!1;u()},K);return!0};T.switch_slow=function(K,S){if(Q.Ub)return!1;"undefined"===typeof S&&
(S=J.fk);da&&(y(J.ya),u(),clearTimeout(da),da=!1);K?Ia=!1:u();y(K?S:J.ya);return!0};T.switch_deepSleep=function(K){if(ab===K)return!1;ab=!1;T.switch_sleep(K);ab=K;return!0};T.switch_sleep=function(K,S){function ia(){T.isBusy=!1;K?(mb=ka,ka=ha.ta):(ka=mb,z())}if(Q.Ub||ab||T.isBusy)return S?Promise.reject():null;if(K&&ka===ha.ta||!K&&ka!==ha.ta)return S?Promise.resolve(!1):!1;Sa&&(clearInterval(Sa),Sa=null);ka===ha.lc?(ka=ha.W,ya.pa(ja.Ga),ya.cb(0)):ka===ha.kc&&(ka=ha.Ha,ya.pa(ja.Eb),ya.cb(1));Ab.stop();
var ra=null;T.isBusy=!0;S?ra=gc(!K).then(ia):ia();return S?ra:!0};T.set_modelStandalone=function(K,S){ya.le(!1);Ac.instance({url:K.model,Nc:K.materials,Jb:!1,Ib:!1,B:function(ia){Mb=[0,0,0];ca=1;va=F=A=0;Ya=J.Lc;T.ready&&Pa.ue();S&&S();H(ia);Pa.Cg();ya.le(!0)}})};T.start_rendering=Pa.Cg;T.update_material=function(K,S){gb&&gb.Fo(K,S)};T.set_model=function(K,S,ia){gb&&(K=b([J.ca,J.ua,J.Ud+"/",K]),gb.replace(K,function(){S&&S(gb.Xk())},ia))};T.set_tweaker=function(K,S){function ia(ra){T.dh(ra);S&&S()}
"string"===typeof K?ua(J.ca+J.ua+J.xo+"/"+K,ia):ia(K)};T.dh=function(K){K&&(K.preOffset&&(Mb=K.preOffset),K.preScale&&(ca=K.preScale),K.rx&&(A=K.rx),K.beginBendZ&&(F=K.beginBendZ),K.bendStrength&&(va=K.bendStrength),K.maskBranchStartEnd&&(Ya=K.maskBranchStartEnd),T.ready&&Pa.ue())};T.set_materials=function(K,S){if(gb){var ia=b([J.ca,J.ua,J.Td+"/"]);K=K.map(function(ra){var Ea=ra;"string"===typeof ra&&(Ea=ia+ra,Ea=Ea.replace(/([^:])\/\//,"$1/"));return Ea});gb.sg(K,S)}}}function r(){ea.Sg(pc.zl);Pa.Wc();
J.Yb&&(Ba.reset(),xa.Ia.hh(Ca.ha),xa.Ia.gh());T.ready=!0;T.cd.forEach(function(K){K()});T.cd.splice(0)}function z(){Gb.reset();Ab.stop();Ba.$();G(0)}function H(K){gb&&(ya.wn(gb),gb.remove());ya.ak(K);gb=K}function y(K){O=K;Ab.update({ya:O})}function G(K){pa=-1;Da.isEnabled?pa=Da.$b:Oa.isEnabled?pa=Oa.$b:Ia?(g(),pa=ka===ha.W?Gb.V():1):(pa=J.$c[0],g());Ba.$();if(!Oa.isEnabled)for(var S=0;S<pa;++S)Z.set("s64"),ma.Cf.M(),ma.kb.h(0),oa.Oc.h(1),W.l(!1,!1),v.wa(ma.Cf),Da.isEnabled&&0===(S+1)%Da.Pg&&C();
Da.isEnabled?(Da.B&&Da.B(),Da.isEnabled=!1,c.flush(),ka!==ha.ta&&Ab.mg(G)):(ya.animate(K),ma.ig&&Math.abs(za-ja.vi)>ja.Bj&&J.Yb&&ka===ha.W&&(Ba.$(),C(),Ba.ba()),Oa.isEnabled||(Ia&&(Gb.Fj(),S=Gb.Ph(1),Y=U(J.dk,S),J.Yb&&ka===ha.W&&(ja.Bj=U(J.xi,S),ja.Vc=U(J.Km,S),ja.Vc=Math.min(ja.Vc,.5))),za=K,ka!==ha.ta&&Ab.mg(G)))}function u(){za=zc.lf();Ia=!0}function g(){var K=15;if(!Ca.Ld){var S=Ca.element.currentTime;K=S-qc;0>K&&(qc=S);if(1E3*K<J.Lo)return}Ca.ha.refresh();qc+=K;Ca.ud=K;Fa=!0;Ba.$();Z.set("s0");
oa.jg.M();oa.Oc.Ik(0);W.l(!0,!0);Z.set("s62");ma.kb.M();Ca.ha.h(0);W.l(!1,!1);null!==ma.Fb&&(Z.set("s63"),ma.Yc.o(),ma.kb.h(0),ma.Fb.h(1),W.l(!1,!1))}function h(){ma.Qj=ba.instance({isPot:!0,isLinear:!0,isFloat:!1,url:J.ca+J.ua+J.Mo});var K={isPot:!1,isLinear:!0,isFloat:!1,width:R.width,height:R.height};ma.kb=ba.instance(K);ma.Yc=ba.instance(K);Q.Cj.push(ma.kb,ma.Yc);ma.Cf=ba.instance({isPot:!0,isFloat:!1,width:v.Sh()});J.Qd&&(sb=ba.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(J.Qf||-1!==J.Pf.indexOf("//")?
"":J.ca+J.ua)+J.Pf}))}function B(){function K(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var S={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};oa.Oc=Mc.instance(K());oa.jg=ba.instance(K());oa.nc=ba.instance(K());oa.Zd=Mc.instance(K());oa.$e=ba.instance(S);S={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};oa.Tg=ba.instance(S);oa.we=ba.instance(S);ja.$d=ba.instance({width:1,
height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function M(K){ma.ig=K;if(Fa){Fa=!1;Z.set("s70");oa.Tg.M();oa.we.h(2);var S=U(J.Kk,Gb.Ph(.5));Z.G("u67",S);oa.jg.h(1);Z.G("u68",1E3*Ca.ud);W.l(!1,!1);Z.set("s71");oa.we.o();oa.Tg.h(0);W.l(!1,!1)}K.h(0);oa.Oc.ij(1);c.viewport(0,0,1,1);Z.set("s65");Z.yg("u47",Nc.get(0));W.l(!1,!1);Z.set("s66");c.viewport(1,0,2,1);W.l(!1,!1);oa.$e.M();Z.set("s67");Z.N("u58",J.He[0]*Y,J.He[1]);oa.Oc.h(0);oa.Zd.h(1);W.l(!1,!1);Z.set("s68");oa.Zd.ij(1);oa.$e.h(0);
oa.we.h(2);oa.Oc.h(3);W.l(!1,!1);Z.set("s69");oa.Zd.h(0);oa.nc.o();W.l(!1,!1)}function C(){ja.vi=za;ja.$d.M();Z.set(aa.ki?"s73":"s72");ma.ig.h(0);W.l(!1,!1);xa.Ia.Pj(Ca.ha,ja.$d,ja.Vc)}function n(){return new Promise(function(K){var S=J.ca,ia=J.Zc.split("://").shift();if("http"===ia||"https"===ia)S="";S+=J.Zc;"json"!==S.split(".").pop()&&(S+=J.neuralNetworkPath);ua(S,function(ra){ra=JSON.parse(ra);if(ra.exportData){var Ea=ra.exportData;aa.ab=aa.ab||Ea.rotationEulerAnglesFactors;aa.zc=aa.zc||Ea.deformScaleXFactor;
aa.ra=aa.ra||Ea.translationScalingFactors;aa.Ch=Ea.dyOffset||0;aa.Ah=Ea.dsOffset||0;aa.ki=Ea.isLThetaSplitCosSin||!1}v=new ac({Kc:ra.layers,Xd:"gpuRawAvg",Wd:M});K()})})}function d(K){a(K);K=J.width;var S=J.height;L.rb[0]=1;L.rb[1]=K/S;Nc.m({Yd:J.scanOverlapFactors,Fi:J.scanNScaleLevels,Z:K,yf:S,aj:J.scanScale0Factor,ra:aa.ra,ng:!0});rc=K>S?[K/S,1]:[1,S/K];Q.Ma=!0}function w(){Z.j("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:L.rb},{type:"1f",name:"u43",
value:aa.zc},{type:"1f",name:"u45",value:aa.Ch},{type:"1f",name:"u44",value:aa.Ah}]);Z.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:J.vo},{type:"1f",name:"u52",value:J.dl},{type:"3f",name:"u48",value:[aa.ra[0]*L.rb[0],aa.ra[1]*L.rb[1],aa.ra[2]]},{type:"3f",name:"u49",value:[J.mc[0][0],J.mc[1][0],J.mc[2][0]]},{type:"3f",name:"u50",value:[J.mc[0][1],J.mc[1][1],J.mc[2][1]]}]);Z.j("s66",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},
{type:"2f",name:"u55",value:J.nn},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:J.Ej},{type:"1f",name:"u56",value:J.Al}]);Z.j("s67",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:J.He},{type:"1f",name:"u59",value:J.Dn},{type:"1f",name:"u60",value:J.mn}]);Z.j("s68",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:L.rb},{type:"1f",name:"u65",
value:v.Sh()},{type:"2f",name:"u64",value:J.zn}]);Z.j("s69",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",value:J.Gn}]);Z.j("s70",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:J.Ej}]);Z.j("s71",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:J.wo},{type:"2f",name:"u71",value:J.En}]);Z.j("s72",[{type:"1i",name:"u46",value:0}]);Z.j("s73",[{type:"1i",name:"u46",value:0}]);
Z.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function I(K,S,ia){var ra=0===ia,Ea=a(ra);J.width=K;J.height=S;d(ra);w();Q.Cj.forEach(function(qb){qb.resize(K,S)});ia=ra?1:ia;ea.resize(Ea.width*ia,Ea.height*ia);Pa.Wc();eb.zg(Ca.element.videoWidth||Ca.element.width,Ca.element.videoHeight||Ca.element.height);eb.Gg();eb.zj()}function N(){Ab.stop();Q.hb&&(clearTimeout(Q.hb),Q.hb=null);if(!Q.Ub){var K=Q.width,S=Q.height;if(J.width===K&&J.height===S)z();else if(ka!==ha.W&&ka!==
ha.Ha)Q.hb=setTimeout(N,J.Zi);else{var ia="undefined"===typeof yb?!1:yb.get_mode(),ra=ka;ka=ha.ta;Q.Ub=!0;Da.isEnabled=!0;Da.B=function(){Da.isEnabled=!1;Q.Ub=!1;u();y(J.ya);da&&clearTimeout(da);da=!1;ka=ra};I(K,S,0);z();ka===ha.Ha&&(ka=ha.W,T.switch_viewer3D(!0,!1));ia&&yb.switch_mode(ia)}}}var A,F,L={rb:[-1,-1]},p=null,t=[.5,0,0,.5],R={width:-1,height:-1},Q={width:-1,height:-1,hb:null,Ub:!1,Ma:!1,Cj:[]},fa=[0,J.ae[1],J.ae[2]],aa={ab:[-J.ab[0],-J.ab[1],J.ab[2]],zc:J.zc,ra:J.ra,Ch:0,Ah:0,ki:!1},O=
J.ya,da=null,v=null;a(!0);var P=[0,0,0],D=1,X=0,ma={kb:null,Yc:null,Cf:null,Qj:null,ig:null,Fb:null},oa={jg:null,nc:null,Zd:null,$e:null,Tg:null,we:null},za=0,Fa=!1,ja={Ga:null,Eb:null,Vf:null,vi:0,Bj:J.xi[1],Vc:.1,$d:null},ta=!1,Ia=!0,Y=1,pa=-1,ha={ta:-1,W:0,Ha:1,kc:2,lc:3},ka=ha.W,Sa=null,mb=ha.W,ab=!1,Da={isEnabled:!1,$b:1,Pg:3,B:null},Oa={isEnabled:!1,Oa:null,$b:0},sb=null,rc=-1,Bb=!1,Hb=!1,Pb=!1,kc=[0,0,0],Qb=1,Vb,lc,Ua,Mb=[0,0,0],ca=1,va=F=A=0,Ya=J.Lc,Ja=[0,0,0],Xa={scale:1,offsetX:0,offsetY:0},
qc=0,Pa={m:function(){Z.sc([{id:"s62",name:"_",u:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",I:["a0"],R:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
I:["a0"],R:[2],i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s65",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.),f=vec4(0.),e=vec4(.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s67",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.),j=vec4(0.,0.,0.,0.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 k=texture2D(u41,vv0),l=texture2D(u57,vv0),q=texture2D(u41,g),m=texture2D(u57,g);float n=pow(m.a,u60),o=mix(u58.y,u58.x,n),b=step(.66,vv0.x),c=step(.34,vv0.x)*(1.-b);vec4 a=mix(h,i,c);a=mix(a,j,b);vec4 d=max(o*f,a);d*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),c);vec4 p=k-l;gl_FragColor=p*d;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 w=vec4(0.),x=vec4(1.);const vec2 j=vec2(.25,.5),k=vec2(.75,.5),g=vec2(.16,.5),l=vec2(.5,.5);varying vec2 vv0;bool f(float a){return (a<0.||0.<a||a==0.)&&a+1.!=a?false:true;}void main(){float y=step(vv0.x,.33),m=step(.33,vv0.x)*step(vv0.x,.66),z=step(.66,vv0.x);vec4 n=texture2D(u63,l);float b=n.a;b*=texture2D(u62,j).a,b*=texture2D(u62,k).a;vec4 o=texture2D(u57,vv0),p=texture2D(u61,vv0),c=o+p;c.a=mix(c.a,b,m);vec4 e=texture2D(u57,g),q=texture2D(u63,g);vec2 r=e.gb,s=q.gb;float t=e.a;vec2 h=u65*abs(r-s)/(u42*t);float u=max(h.x,h.y),v=smoothstep(u64.x,u64.y,u);vec4 i=texture2D(u63,vv0),a=mix(c,i,v);if(f(a.x)||f(a.y)||f(a.z)||f(a.w)){gl_FragColor=i;return;}gl_FragColor=a;}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s71",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s72",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s73",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s63",name:"_",g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);B();Ab.m({ji:!1,ya:O});Gb.m({Yf:0,n:J.$c[1]-J.$c[0]+1,wi:J.$c[0]});T.set_videoRotation=function(K){$a.rotate=K;T.ready&&(eb.zg(Ca.element.videoWidth,Ca.element.videoHeight),eb.Gg())};T.set_viewRotation=function(){};T.set_LUT=function(K){return new Promise(function(S){K?ba.instance({url:K,isFloat:!1,isFlipY:!1,B:function(ia){ma.Fb=ia;Pa.Wc();S()}}):(ma.Fb=null,Pa.Wc(),S())})};T.resize=function(K,S,ia){T.ready&&(Q.hb&&(clearTimeout(Q.hb),Q.hb=null),Ab.stop(),ia=ia?pc.ff:1,Q.width=
K*ia,Q.height=S*ia,Q.hb=setTimeout(N,J.Zi))};return n()},so:function(){h();d(!0);w();Pa.zj();m();T.bd.forEach(function(K){K()});T.bd.splice(0);V.model&&!T.isBusy?Pa.yi(V.model):J.Ic||r();return Promise.resolve()},Ul:function(){return R},v:function(){Ab.v();return new Promise(function(K){T.switch_sleep(!0,!0).finally(function(){v&&v.v();ea.v();jb.v();c&&(c=null);v=null;J.Qf=!1;gb=null;Ia=!0;Y=1;pa=-1;ka=ha.W;Sa=null;mb=ha.W;Object.assign(Ca,Oc);Object.assign(J,Pc);K()}).catch(function(S){throw Error(S);
})})},Wc:function(){ya.gj(oa.nc,null===ma.Fb?ma.kb:ma.Yc,ja.$d,ma.Qj)},Rl:function(){return Xa},oj:function(K){Xa=K},se:function(){Ja[0]=P[0]-Xa.offsetX;Ja[1]=P[1]+Xa.offsetY;Ja[2]=P[2];ya.Mn(fa,Mb,Ja)},te:function(){ya.Nn(D*J.hn,ca,Xa.scale)},Mj:function(){ya.On(X+A)},Co:function(){ya.Kn(J.gd+F,J.Lb+va)},Eo:function(){ya.Ln(Ya)},ue:function(){Pa.se();Pa.te();Pa.Mj();Pa.Co();Pa.Eo()},Fn:function(){Ab.stop();Sa&&(clearInterval(Sa),Sa=null);Oa.isEnabled=!0;Oa.$b=0;Bb=ya.Ql();Hb=gb.Wh();Pb=gb.Uh();Qb=
ca;kc=Mb;Vb=Ya;lc=F;Ua=va;Da.isEnabled=!1;ya.ke(!1)},Cn:function(K){function S(){2===++ia&&(Oa.isEnabled=!1,ca=Qb,Mb=kc,Ya=Vb,F=lc,va=Ua,Pa.ue(),ya.pa(Bb),z(),K&&K())}var ia=0;ka===ha.kc?ka=ha.Ha:ka===ha.lc&&(ka=ha.W);ya.cb(ka===ha.W?0:1);gb.replace(Hb,S);gb.sg(Pb,S);Pa.Wc();ya.ke(!0)},zj:function(){var K=Math.tan(Ca.Pb/2);ya.fj({hf:J.hf/K,Hn:K,ln:Ca.Qi,Ea:J.Ea,Xf:J.Xf,Tj:L.rb,Xj:J.Po,Dc:J.Dc,xf:J.xf,vf:J.vf,wf:J.wf,Lc:Ya,Ie:J.Ie,Ve:J.Ve,lg:J.lg,hc:J.hc,mo:J.tj,no:J.uj,je:J.je,ic:J.ic,od:J.od,Ye:J.Ye,
Xe:J.Xe,We:J.We,Le:J.Le,Ke:J.ca+J.ua+J.Ke,gd:J.gd+F,Lb:J.Lb+va,tf:J.tf,Yg:J.Yg,Xg:J.Xg,ze:J.ze,Vo:J.Uo,ye:Ca.ye,Qd:J.Qd,Mm:sb,Pd:J.Pd,Rd:J.Rd,Of:J.Of,Lm:rc,Hg:J.Hg})},Uk:function(){var K=$a.Ce,S=$a.Be,ia=1/Math.tan(Ca.Pb/2),ra=jb.Y()/jb.O();Ca.Qi=[ia,0,0,0,0,ia/ra,0,0,0,0,-(S+K)/(S-K),-1,0,0,-2*K*S/(S-K),0];Ca.ye=1/Math.tan(J.So*Math.PI/360)/ia},zg:function(K,S){p=[.5,.5];K=S/K;S=jb.Y()/jb.O();90===Math.abs($a.rotate)&&(K=1/K);K>S?p[1]*=S/K:p[0]*=K/S;t[0]=0;t[1]=0;t[2]=0;t[3]=0;switch($a.rotate){case 0:t[0]=
p[0];t[3]=p[1];break;case 180:t[0]=-p[0];t[3]=-p[1];break;case 90:t[1]=p[0];t[2]=-p[1];break;case -90:t[1]=-p[0],t[2]=p[1]}J.li||(t[0]*=-1,t[1]*=-1);S=$a.FOVforced;Ca.Pb=2*Math.atan(2*p[0]*Math.tan((S?S:1<K?$a.FOVmobile:$a.FOVdesktop)*Math.PI/180/2));Pa.Uk()},Gg:function(){Z.j("s62",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:t}])},Bf:function(K,S){return new Promise(function(ia,ra){Pa.km(K,S);Promise.all([Pa.m(),Pa.lm()]).then(function(){Pa.di();ia()}).catch(function(Ea){T.qb&&T.qb("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");ra(Ea)})})},km:function(K,S){T.Hb=document.createElement("canvas");T.Gb=document.createElement("canvas");T.Gb.width=J.width;T.Gb.height=J.height;T.Yj=T.Gb.getContext("2d");T.replace_video=function(ia){Ca.element=ia;Ca.Ng.ka=Ca.element;return!0};T.rc=T.Hb.getContext("2d");T.capture_background=function(ia,ra){ia="undefined"===typeof ia?K:ia;ra="undefined"===typeof ra?S:ra;T.Hb.width=ia;T.Hb.height=ra;var Ea=ia/ra,qb=0,kb=0;if(K/S>Ea){var Lb=S*Ea;Ea=S;qb=Math.round((K-Lb)/2)}else Lb=
K,Ea=K/Ea,kb=Math.round((S-Ea)/2);T.rc.save();T.rc.translate(ia,0);T.rc.scale(-1,1);T.rc.drawImage(Ca.element,qb,kb,Lb,Ea,0,0,ia,ra);T.rc.restore();ia=document.createElement("canvas");ia.width=T.Hb.width;ia.height=T.Hb.height;ia.getContext("2d").drawImage(T.Hb,0,0);return ia}},di:function(){window.CanvasListeners&&(yb.init({qa:jb.ub()}),T.init_listeners=Pa.di,T.add_listener=yb.add_listener,T.remove_listener=yb.remove_listener,T.animate_swipe=yb.animate_swipe,T.switch_modeInteractor=yb.switch_mode,
T.get_modeInteractor=yb.get_mode,yb.add_listener("move",function(K,S){ka===ha.W&&(J.Nm&&(Xa.offsetX-=S[0]*J.Ai,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-J.Sd),J.Sd)),Xa.offsetY-=S[1]*J.Ai,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-J.Sd),J.Sd),Pa.se())},!0).add_listener("pinch",function(K,S){ka===ha.W&&(Xa.scale+=S*J.Om,Xa.scale=Math.min(Math.max(Xa.scale,J.Bi[0]),J.Bi[1]),Pa.te())},!0))},lm:function(){return new Promise(function(K,S){ea.m({Jd:!1,Sk:!1,expand:!1,qa:jb.ub(),Qb:jb,onload:function(){ja.Eb=
jc.instance({Kb:J.ca+J.ua+bb.No,uc:J.ca+J.ua+bb.Oo,tc:bb.Rj,vc:bb.Sj});J.Yb?(ja.Ga=jc.instance({}),xa.Ia.pa(ja.Ga)):ja.Ga=ja.Eb;ya.pa(ja.Ga);ja.Vf=J.Yb?dd.instance({Jm:ja.Ga,Hm:ja.Eb}):ja.Eb;K()}})||S("CANNOT_INIT_JE3D")})},Cg:function(){ta||(ta=!0,Pa.ue(),r(),za=0,J.Ic&&z())},yi:function(K,S){K=Ac.instance({Me:function(){Pa.Cg();S&&S()},url:K.url,Nc:K.Nc,Jb:K.Jb,Ib:K.Ib});H(K)},Aj:function(){if(J.Yb){var K=Object.assign({},bb,{Ab:b([J.ca,J.ua,bb.Ab])});xa.Ia.ib(K)}}};return Pa}function ed(){return new Promise(function(a,
b){T.Ee&&T.Ee();Ca.Ld=!1;var e={width:{min:$a.minWidth,max:$a.maxWidth,ideal:$a.idealWidth},height:{min:$a.minHeight,max:$a.maxHeight,ideal:$a.idealHeight},facingMode:{ideal:"user"}},f={video:e,audio:!1};Ca.ph=f;e&&-1!==Ca.deviceId&&dc(f,Ca.deviceId);hc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(l){T.Fe&&T.Fe(l);Qc(l).then(a).catch(b)},function(l){T.qb&&T.qb("WEBCAM_UNAVAILABLE",l);b(l)},f)})}function Qc(a){Ca.element=a;a=Ca.element.videoWidth||
Ca.element.width;var b=Ca.element.videoHeight||Ca.element.height;Ca.Ng={ka:Ca.element,isPot:!1,isFloat:!1,isFlipY:!0};Ca.ha=ba.instance(Ca.Ng);eb.zg(a,b);return eb.Bf(a,b).then(function(){eb.Gg();return eb.so()}).catch(function(e){return Promise.reject(e)})}function fd(){var a=document.createElement("canvas");a.width=J.width;a.height=J.height;Ca.Dh=a.getContext("2d");Ca.Ld=!0;return Qc(a)}function Wb(a){return 3===arguments.length?this.sb(arguments):this.set(a)}function Rc(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.X=(b>>8&255)/255;a.b=(b&255)/255}function gd(a,b){function e(k){void 0!==k&&1>parseFloat(k)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var f;if(f=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var l=f[2];switch(f[1]){case "rgb":case "rgba":if(f=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(255,parseInt(f[1],10))/255;a.X=Math.min(255,parseInt(f[2],10))/255;a.b=Math.min(255,parseInt(f[3],10))/255;e(f[5]);return}if(f=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(100,parseInt(f[1],10))/100;a.X=Math.min(100,parseInt(f[2],10))/100;a.b=Math.min(100,parseInt(f[3],10))/100;e(f[5]);return}break;case "hsl":case "hsla":if(f=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){l=parseFloat(f[1])/360;var q=parseInt(f[2],10)/100,x=parseInt(f[3],10)/100;e(f[5]);a.Jn(l,q,x);return}}}else if(f=/^#([A-Fa-f0-9]+)$/.exec(b)){f=f[1];l=f.length;if(3===l){a.r=
parseInt(f.charAt(0)+f.charAt(0),16)/255;a.X=parseInt(f.charAt(1)+f.charAt(1),16)/255;a.b=parseInt(f.charAt(2)+f.charAt(2),16)/255;return}if(6===l){a.r=parseInt(f.charAt(0)+f.charAt(1),16)/255;a.X=parseInt(f.charAt(2)+f.charAt(3),16)/255;a.b=parseInt(f.charAt(4)+f.charAt(5),16)/255;return}}b&&0<b.length&&(f=hd[b],void 0!==f?Rc(a,f):console.warn("JETHREE.Color: Unknown color "+b))}function sc(a,b,e,f){this.C=a||0;this.D=b||0;this.F=e||0;this.S=void 0!==f?f:1}function Sc(a,b,e){var f=b.C,l=b.D,q=b.F;
b=b.S;var x=e.C,k=e.D,m=e.F;e=e.S;a.C=f*e+b*x+l*m-q*k;a.D=l*e+b*k+q*x-f*m;a.F=q*e+b*m+f*k-l*x;a.S=b*e-f*x-l*k-q*m;return a}function Xb(a,b){this.x=a||0;this.y=b||0}function Va(a,b,e){this.x=a||0;this.y=b||0;this.z=e||0}function Tc(a,b){var e=a.x,f=a.y,l=a.z;a.x=f*b.z-l*b.y;a.y=l*b.x-e*b.z;a.z=e*b.y-f*b.x}function Yb(a,b,e,f){this.C=a||0;this.D=b||0;this.F=e||0;this.Ra=f||Yb.Uj}function Bc(a,b){this.min=void 0!==a?a:new Va(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Va(-Infinity,-Infinity,
-Infinity)}function tc(a){return(new Va).dd(a.min,a.max).Ca(.5)}function id(a,b){a.min.min(b);a.max.max(b)}function Zb(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Uc(a,b,e){var f=b.elements,l=e.elements;e=a.elements;b=f[0];var q=f[4],x=f[8],k=f[12],m=f[1],r=f[5],z=f[9],H=f[13],y=f[2],G=f[6],u=f[10],g=f[14],h=f[3],B=f[7],M=f[11];f=f[15];var C=l[0],n=
l[4],d=l[8],w=l[12],I=l[1],N=l[5],A=l[9],F=l[13],L=l[2],p=l[6],t=l[10],R=l[14],Q=l[3],fa=l[7],aa=l[11];l=l[15];e[0]=b*C+q*I+x*L+k*Q;e[4]=b*n+q*N+x*p+k*fa;e[8]=b*d+q*A+x*t+k*aa;e[12]=b*w+q*F+x*R+k*l;e[1]=m*C+r*I+z*L+H*Q;e[5]=m*n+r*N+z*p+H*fa;e[9]=m*d+r*A+z*t+H*aa;e[13]=m*w+r*F+z*R+H*l;e[2]=y*C+G*I+u*L+g*Q;e[6]=y*n+G*N+u*p+g*fa;e[10]=y*d+G*A+u*t+g*aa;e[14]=y*w+G*F+u*R+g*l;e[3]=h*C+B*I+M*L+f*Q;e[7]=h*n+B*N+M*p+f*fa;e[11]=h*d+B*A+M*t+f*aa;e[15]=h*w+B*F+M*R+f*l;return a}function Cc(a,b,e,f,l,q){this.a=
a;this.b=b;this.c=e;this.Da=f instanceof Va?f:new Va;this.xe=Array.isArray(f)?f:[];this.color=l instanceof Wb?l:new Wb;this.Vg=Array.isArray(l)?l:[];this.Zb=void 0!==q?q:0}function jd(a,b,e){var f=new XMLHttpRequest;f.open("GET",a,!0);var l=f.withCredentials=!1;f.onreadystatechange=function(){404!==f.status||l||(l=!0,e&&e(404));if(4===f.readyState&&200===f.status){var q=null;try{q=JSON.parse(f.responseText)}catch(x){e&&e(-1)}b&&q&&b(q)}};f.onerror=function(){e&&e(0)};f.send()}function Dc(a,b,e){"object"===
typeof a?b(a):jd(a,b,e)}function kd(a){return new Promise(function(b,e){Dc(a,b,e)})}function ld(a,b){for(var e=new Va,f=new Va,l=0,q=b.length;l<q;l++){var x=b[l],k=a[x.a],m=a[x.b],r=a[x.c];k&&m&&r&&(e.gb(r,m),f.gb(k,m),Tc(e,f),0!==e.Jf()&&(e.normalize(),x.Da.L(e)))}}function md(a,b){for(var e=Array(a.length),f=0,l=a.length;f<l;++f)e[f]=new Va;f=new Va;l=new Va;for(var q=0,x=b.length;q<x;++q){var k=b[q],m=a[k.a],r=a[k.b],z=a[k.c];m&&r&&z&&(f.gb(z,r),l.gb(m,r),Tc(f,l),e[k.a].add(f),e[k.b].add(f),e[k.c].add(f))}f=
0;for(a=a.length;f<a;++f)e[f].normalize();a=0;for(f=b.length;a<f;++a)k=b[a],l=k.xe,q=e[k.a],x=e[k.b],k=e[k.c],q&&x&&k&&(3===l.length?(l[0].L(q),l[1].L(x),l[2].L(k)):(l[0]=q.clone(),l[1]=x.clone(),l[2]=k.clone()));return e}function nd(a,b,e,f){function l(w){n.L(b[w]);d.L(n);var I=k[w];M.L(I);M.sub(n.Ca(n.qd(I))).normalize();var N=d.x,A=d.y,F=d.z,L=I.x,p=I.y;I=I.z;C.x=A*I-F*p;C.y=F*L-N*I;C.z=N*p-A*L;N=0>C.qd(m[w])?-1:1;x[4*w]=M.x;x[4*w+1]=M.y;x[4*w+2]=M.z;x[4*w+3]=N}for(var q=a.length,x=new Float32Array(4*
q),k=Array(q),m=Array(q),r=0;r<q;r++)k[r]=new Va,m[r]=new Va;var z=new Va,H=new Va,y=new Va,G=new Xb,u=new Xb,g=new Xb,h=new Va,B=new Va;f.forEach(function(w){var I=w.a,N=w.b;w=w.c;z.L(a[I]);H.L(a[N]);y.L(a[w]);G.L(e[I]);u.L(e[N]);g.L(e[w]);var A=H.x-z.x,F=y.x-z.x,L=H.y-z.y,p=y.y-z.y,t=H.z-z.z,R=y.z-z.z,Q=u.x-G.x,fa=g.x-G.x,aa=u.y-G.y,O=g.y-G.y,da=1/(Q*O-fa*aa);h.set((O*A-aa*F)*da,(O*L-aa*p)*da,(O*t-aa*R)*da);B.set((Q*F-fa*A)*da,(Q*p-fa*L)*da,(Q*R-fa*t)*da);k[I].add(h);k[N].add(h);k[w].add(h);m[I].add(B);
m[N].add(B);m[w].add(B)});var M=new Va,C=new Va,n=new Va,d=new Va;f.forEach(function(w){l(w.a);l(w.b);l(w.c)});return x}function Vc(a,b,e,f){return Math.sqrt((a-e)*(a-e)+(b-f)*(b-f))}var V={sh:!0,vp:!1,wp:!1,cl:!1,rh:!1,up:!1,Pa:!1,Jd:!1,fq:!1,ca:"",Di:"",Ak:700,zk:200,th:!1,Ho:!1,Io:!1,Go:!1,gk:3,Nb:!1,eh:!0,Kb:"images/backgrounds/interior2.jpg",uc:"images/backgrounds/interior_light.jpg",Ck:[256,256,512,512],tc:2.1,vc:8,Bk:[64,128,256,256],rm:[60,96,160,250],qm:[8,12,18,40],Pc:2.2,fg:1,Ne:300,ih:500,
Oe:50,Mk:0,Nk:0,jp:45,lp:1,kp:1E3,jh:20,Xo:10,Yo:10,Zo:5,gn:.1,Ki:20,Ni:100,Oi:100,fn:-Math.PI/3,en:Math.PI/3,Mi:0,Dj:0,ud:[40,32,16,16],ek:[0,.87,.92,.9],bn:2,Wm:100,ea:!1,hk:16,ik:.4,kk:[.72,.73,.72,.74],vk:1.2,sk:[.5,.5,.5,1],xk:140,wk:280,yk:1.2,lk:20,mk:40,uk:[6,9,9,12],rk:[.03,.02,.02,.018],qk:[.35,.35,.4,.5],nk:[.2,.2,.2,.2],jk:[.1,.15,.15,.15],tk:[200,200,150,120],pk:[1,2,3,5],oo:1.1,zq:[.25,.5,1,2],Aq:256,yq:256,xq:200,po:[40,80,200,500],qo:[35,45,80,120],Yk:!0,Zk:"CCW"},Wc={},Z=function(){function a(p,
t,R){t=p.createShader(t);p.shaderSource(t,R);p.compileShader(t);return p.getShaderParameter(t,p.COMPILE_STATUS)?t:null}function b(p,t,R){t=a(p,p.VERTEX_SHADER,t);R=a(p,p.FRAGMENT_SHADER,R);p===c&&k.push(t,R);var Q=p.createProgram();p.attachShader(Q,t);p.attachShader(Q,R);p.linkProgram(Q);return Q}function e(p){return["float","sampler2D","int"].map(function(t){return"precision "+p+" "+t+";\n"}).join("")}function f(p,t){t.P=t.P?!0:!1;if(!t.P){t.u=t.u||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
t.I=t.I||["a0"];t.R=t.R||[2];t.precision=t.precision||y;t.id=z++;void 0!==t.bj&&(t.bj.forEach(function(fa,aa){t.g=t.g.replace(fa,t.Fa[aa])}),t.bj.splice(0));t.Wg=0;t.R.forEach(function(fa){t.Wg+=4*fa});var R=e(t.precision);t.oa=b(p,R+t.u,R+t.g);t.A={};t.i.forEach(function(fa){t.A[fa]=p.getUniformLocation(t.oa,fa)});t.attributes={};t.va=[];t.I.forEach(function(fa){var aa=p.getAttribLocation(t.oa,fa);t.attributes[fa]=aa;t.va.push(aa)});if(t.s){p.useProgram(t.oa);r=t;m=t.id;for(var Q in t.s)p.uniform1i(t.A[Q],
t.s[Q])}t.Ma=!0}}function l(p){wb.rj(L);m!==p.id&&(L.K(),m=p.id,r=p,c.useProgram(p.oa),p.va.forEach(function(t){0!==t&&c.enableVertexAttribArray(t)}))}function q(p,t,R){f(p,t,R);p.useProgram(t.oa);p.enableVertexAttribArray(t.attributes.a0);m=-1;return r=t}function x(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],s:{u1:0}}}var k=[],m=-1,r=null,z=0,H=!1,y="highp",G=["u1"],u=["u0"],g={u1:0},h={u0:0},B={u1:0,u2:1},M={u1:0,u3:1},C=["u1","u3","u4"],
n={u5:0},d=["u6","u7","u8","u9"],w={u6:0,u7:1},I={s0:x(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:G,s:g,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],s:B},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],s:g,P:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:G,s:g},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],s:B},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:G,s:g},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:G,s:g},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],s:h},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],s:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:G,s:g},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],s:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],s:g},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:G,s:g,P:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:G,s:g,P:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],s:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,s:h,P:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,s:h,P:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:u,s:h,P:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,s:h,P:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:u,s:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,s:h},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:u,s:h,P:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],s:{u0:0,u16:1},P:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],s:g},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],s:Object.assign({u19:2},w),P:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:d,s:w},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(d),s:w,P:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(d),s:Object.assign({u25:3,u22:4,u23:5,u24:6},w),P:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(d),s:Object.assign({u3:2},w)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],s:w,P:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:C,s:M},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(C),s:M,P:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:C,s:M,P:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(C),s:M,P:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:C,s:M,P:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:G,s:g,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],s:g,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],s:g,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],s:B,P:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],s:B,P:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],s:n},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
s:n,P:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],s:g,precision:"lowp",P:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
s:g,precision:"lowp",P:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],s:{u1:0,u16:1,u31:2},P:!0}},N={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Fa:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A=null,F=null,L={Xb:function(){return H},m:function(){if(!H){A=Ka(I,2);F=Ka(N,2);y="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var p in A)f(c,A[p],p);Z.set("s0");c.enableVertexAttribArray(0);H=!0}},sc:function(p){p.forEach(function(t){L.ma(t)})},ma:function(p){A[p.id]=p;f(c,p,p.id)},om:function(p,t,
R){t||(t=p);A[t]=Object.create(F[p]);A[t].wm=!0;F[p].Fa&&F[p].Fa.forEach(function(Q,fa){A[t].g=A[t].g.replace(new RegExp(Q,"g"),R[fa])});f(c,A[t],t)},set:function(p){var t=A[p];t.P&&(t.P=!1,f(c,t,p));l(t)},Bb:function(p){return q(p,x(),"s48")},fe:function(p){return q(p,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s49")},yl:function(p){return"undefined"===typeof A[p]?!1:A[p].Ma},K:function(){-1!==m&&(m=-1,r.va.forEach(function(p){0!==p&&c.disableVertexAttribArray(p)}))},he:function(){var p=
0;r.va.forEach(function(t,R){R=r.R[R];c.vertexAttribPointer(t,R,c.FLOAT,!1,r.Wg,p);p+=4*R})},xl:function(){c.enableVertexAttribArray(0)},dc:function(){L.ec(c)},ec:function(p){p.vertexAttribPointer(r.va[0],2,p.FLOAT,!1,8,0)},ge:function(p,t){c.uniform1i(r.A[p],t)},G:function(p,t){c.uniform1f(r.A[p],t)},N:function(p,t,R){c.uniform2f(r.A[p],t,R)},wg:function(p,t){c.uniform2fv(r.A[p],t)},yg:function(p,t){c.uniform3fv(r.A[p],t)},xg:function(p,t,R,Q){c.uniform3f(r.A[p],t,R,Q)},ho:function(p,t,R,Q,fa){c.uniform4f(r.A[p],
t,R,Q,fa)},xa:function(p,t){c.uniform4fv(r.A[p],t)},io:function(p,t){c.uniformMatrix2fv(r.A[p],!1,t)},jo:function(p,t){c.uniformMatrix3fv(r.A[p],!1,t)},Tc:function(p,t){c.uniformMatrix4fv(r.A[p],!1,t)},j:function(p,t){L.set(p);t.forEach(function(R){switch(R.type){case "4f":c.uniform4fv(r.A[R.name],R.value);break;case "3f":c.uniform3fv(r.A[R.name],R.value);break;case "2f":c.uniform2fv(r.A[R.name],R.value);break;case "1f":c.uniform1f(r.A[R.name],R.value);break;case "1i":c.uniform1i(r.A[R.name],R.value);
break;case "mat2":c.uniformMatrix2fv(r.A[R.name],!1,R.value);break;case "mat3":c.uniformMatrix3fv(r.A[R.name],!1,R.value);break;case "mat4":c.uniformMatrix4fv(r.A[R.name],!1,R.value)}})},Kp:function(){return"lowp"},v:function(){L.K();c.disableVertexAttribArray(0);for(var p in A){var t=A[p];t.Ma&&(t.Ma=!1,c.deleteProgram(t.oa));t.wm&&delete A[p]}k.forEach(function(R){c.deleteShader(R)});k.splice(0);z=0;H=!1;r=null;m=-1}};return L}(),c=null,jb=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function e(u,g,h){u.setAttribute("width",g);u.setAttribute("height",h)}function f(u){function g(){Ib.v();Ga.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var h=document.createElement("canvas");e(h,5,5);var B=null;try{B=h.getContext("webgl2",u)}catch(M){return!1}if(!B)return!1;l(B);Ga.Eh(B);u=Ga.Ze(B);if(!u.Wa&&!u.Ya)return g(),!1;u=Ib.kh(B,u);g();return u?!0:!1}function l(u){u.clearColor(0,
0,0,0);u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.FASTEST&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var q=null,x=null,k=null,m=null,r=!0,z=null,H=null,y=[],G={O:function(){return q.width},Y:function(){return q.height},ub:function(){return q},Cl:function(){return c},la:function(){return r},flush:function(){c.flush()},
Sp:function(){Ba.$();G.An()},An:function(){ba.reset();W.reset();Z.K();Z.xl();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);W.kd();Z.dc()},Hl:function(){z||(z=new Uint8Array(q.width*q.height*4));c.readPixels(0,0,q.width,q.height,c.RGBA,c.UNSIGNED_BYTE,z);return z},Fp:function(){return q.toDataURL("image/jpeg")},Gp:function(){Ba.ba();x||(x=document.createElement("canvas"),k=x.getContext("2d"));e(x,q.width,q.height);for(var u=G.Hl(),g=k.createImageData(x.width,x.height),h=x.width,B=x.height,M=g.data,C=
0;C<B;++C)for(var n=B-C-1,d=0;d<h;++d){var w=4*(C*h+d),I=4*(n*h+d);M[w]=u[I];M[w+1]=u[I+1];M[w+2]=u[I+2];M[w+3]=u[I+3]}k.putImageData(g,0,0);return x.toDataURL("image/png")},Qh:function(u){!x&&u&&(x=document.createElement("canvas"),k=x.getContext("2d"));var g=u?x:document.createElement("canvas");e(g,q.width,q.height);(u?k:g.getContext("2d")).drawImage(q,0,0);return g},m:function(u){u=Object.assign({Xa:null,$f:null,qa:null,Ue:null,width:512,height:512,premultipliedAlpha:!1,um:!0,antialias:!1,debug:!1,
tp:!1},u);u.Xa?(c=u.Xa,q=u.Xa.canvas):u.Ue&&!u.qa?q=document.getElementById(u.Ue):u.qa&&(q=u.qa);q||(q=document.createElement("canvas"));q.width=u.width;q.height=u.height;if(c)r=c instanceof WebGL2RenderingContext;else{r=!0;var g={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.um,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(g.antialias=!1);var h=f(g);h||!g.antialias||b()||(g.antialias=!1,h=f(g));h&&(c=q.getContext("webgl2",g));c?r=!0:((c=q.getContext("webgl",g))||(c=q.getContext("experimental-webgl",g)),r=!1)}if(!c)return a("WebGL1 and 2 are not enabled");u.$f&&q.addEventListener&&(m=c.getExtension("WEBGL_lose_context"))&&(H=u.$f,q.addEventListener("webglcontextlost",H,!1));if(!Ga.m())return a("Not enough GL capabilities");l(c);Z.m();W.m();Ib.kh(c,Ga.El());y.forEach(function(B){B(c)});y.splice(0);return!0},ip:function(){return new Promise(function(u){c?
u(c):y.push(u)})},v:function(){c&&(Ga.v(),Z.v(),Ib.v());m&&H&&(q.removeEventListener("webglcontextlost",H,!1),m=H=null);c=z=k=x=q=null;y.splice(0)}};return G}(),wb=function(){function a(){null===b&&("undefined"!==typeof Z?b=Z:"undefined"!==typeof E&&(b=E))}var b=null;return{reset:function(){b=null},rj:function(e){b!==e&&(b&&b.K(),b=e)},Xb:function(){return b.Xb()},dc:function(){return b.dc()},ec:function(e){return b.ec(e)},he:function(){return b.he()},K:function(){return b.K()},set:function(e){a();
return b.set(e)},Bb:function(e){a();return b.Bb(e)},fe:function(e){a();return b.fe(e)}}}(),ba=function(){function a(F){c.bindTexture(c.TEXTURE_2D,F)}function b(F){var L=new Uint16Array(F.length);F.forEach(function(p,t){w[0]=p;var R=I[0];var Q=R>>16&32768;p=R>>12&2047;var fa=R>>23&255;R=103>fa?Q:142<fa?Q|31744|((255==fa?0:1)&&R&8388607):113>fa?(p|=2048,Q|(p>>114-fa)+(p>>113-fa&1)):(Q|fa-112<<10|p>>1)+(p&1);L[t]=R});return L}function e(){if(null!==N.zf)return N.zf;var F=f(b([.5,.5,.5,.5]),!0);return null===
F?!0:N.zf=F}function f(F,L){if(!wb.Xb()||!G)return null;var p=null,t=Math.sqrt(F.length/4);try{var R=c.getError();if("FUCKING_BIG_ERROR"===R)return!1;p=A.instance({isFloat:!1,T:L,array:F,width:t});R=c.getError();if(R!==c.NO_ERROR)return!1}catch(Q){return!1}Ba.ba();c.viewport(0,0,t,t);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);wb.set("s0");p.Ka(0);W.l(!0,!0);F=4*t*t;L=new Uint8Array(F);c.readPixels(0,0,t,t,c.RGBA,c.UNSIGNED_BYTE,L);t=!0;for(R=0;R<F;++R)t=t&&3>Math.abs(L[R]-127);p.remove();Ba.$();
return t}var l=0,q=null,x=0,k=null,m=null,r=null,z=null,H=null,y=null,G=!1,u=[],g={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ka:null,Zh:null,vm:!1,T:!1,B:null,J:4,Tf:0},h=!1,B=null,M=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],n=!1,d=!1,w=new Float32Array(1),I=new Int32Array(w.buffer),N={zf:null,Af:null},A={m:function(){G||(H=[c.RGBA,null,c.RGBA,c.RGBA],y=
[c.RGBA,null,c.RGBA,c.RGBA],q=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],n="undefined"!==typeof ea,d="undefined"!==typeof Ga,k=[-1,-1,-1,-1,-1,-1,-1,-1],z=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],G=!0)},mm:function(){if(!m){for(var F=new Float32Array(16384),L=0;16384>L;++L)F[L]=2*Math.random()-1;m={random:A.instance({isFloat:!0,isPot:!0,array:F,width:64}),Hj:A.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}A.Do()},nj:function(F){c.framebufferTexture2D(Ba.pf(),
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,F,0)},Yh:function(){return m.Hj},Do:function(){z[1]=Ga.mf(c)},ao:function(){y=H=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Wi:function(F){Z.set("s1");Ba.ba();var L=F.O(),p=F.Y();c.viewport(0,0,L,p);F.h(0);W.l(!1,!1)},hq:function(F,L){A.Wi(F);c.readPixels(0,0,F.O(),F.Y(),c.RGBA,c.UNSIGNED_BYTE,L)},iq:function(F,L){A.Wi(F);return Ga.kg(0,0,F.O(),F.Y(),L)},Lh:function(F,L,p,t,R,Q,fa){F.activeTexture(F.TEXTURE0);var aa=F.createTexture();F.bindTexture(F.TEXTURE_2D,aa);R=R instanceof
Float32Array?R:new Float32Array(R);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,Q);F.texImage2D(F.TEXTURE_2D,0,F.RGBA,p,t,0,F.RGBA,F.FLOAT,R);F.bindTexture(F.TEXTURE_2D,null);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);fa&&(Ba.$(),Z.Bb(F));F.viewport(0,0,p,t);F.framebufferTexture2D(F.FRAMEBUFFER,
F.COLOR_ATTACHMENT0,F.TEXTURE_2D,L,0);F.bindTexture(F.TEXTURE_2D,aa);fa?W.l(!0,!0):W.Ob(F);F.deleteTexture(aa);G&&(k[0]=-1,r=null,l=0)},Ge:function(F){F!==l&&(c.activeTexture(q[F]),l=F)},instance:function(F){function L(){ja=void 0!==O.ka.videoWidth?O.ka.videoWidth:O.ka.width;ta=void 0!==O.ka.videoHeight?O.ka.videoHeight:O.ka.height}function p(ca){var va=c.getError();if("FUCKING_BIG_ERROR"===va)return!1;c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca);va=c.getError();va!==c.NO_ERROR&&Da!==c.RGBA&&(Da=c.RGBA,
c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca));return!0}function t(){if(!Y){a(oa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,sb);O.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,O.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,O.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));O.isAnisotropicFiltering&&"undefined"!==typeof V&&c.texParameterf(c.TEXTURE_2D,
ea.Il().TEXTURE_MAX_ANISOTROPY_EXT,V.gk);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,O.isLinear?c.LINEAR:c.NEAREST);O.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,O.isMipmap&&!Bb?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,O.isMipmap&&!Bb?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Da=H[O.J-1];ab=y[O.J-1];Oa=z[v];if(Ga.la()){var ca=Ga.Kl();Da===c.RGBA&&Oa===c.FLOAT?O.isMipmap||O.isLinear?ab=Ib.Ml(c):Ga.fa()?ca&&(ab=ca):ab=c.RGBA16F||c.RGBA:Da===
c.RGB&&Oa===c.FLOAT&&ca&&(ab=ca,Da=c.RGBA)}if(O.T&&!O.isFloat||O.isFloat&&O.isMipmap&&Ib.Dm())ab=Ga.Ll(),Oa=Ga.mf(c);O.Tf&&(Pb=O.Tf);O.isSrgb&&4===O.J&&(Da=ea.em());if(O.ka)p(O.ka);else if(O.url)p(za);else if(Fa){ca=Fa;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,ca),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,ja,ta,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(qc){c.texImage2D(c.TEXTURE_2D,
0,ab,ja,ta,0,Da,Oa,null)}O.isKeepArray||(Fa=null)}else ca=c.getError(),"FUCKING_BIG_ERROR"!==ca&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null),ca=c.getError(),ca!==c.NO_ERROR&&(Da=c.RGBA,O.T&&Oa!==c.FLOAT&&(Oa=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null))));if(O.isMipmap)if(!Bb&&Ua)Ua.zd(),Qb=!0;else if(Bb){ca=Math.log2(Math.min(ja,ta));Hb=Array(1+ca);Hb[0]=oa;for(var va=1;va<=ca;++va){var Ya=Math.pow(2,va),Ja=ja/Ya;Ya=ta/Ya;var Xa=c.createTexture();a(Xa);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ab,Ja,Ya,0,Da,Oa,null);a(null);Hb[va]=Xa}Qb=!0}a(null);k[l]=-1;sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Ia=!0;O.B&&Ua&&(O.B(Ua),O.B=null)}}function R(){for(var ca=ja*ta,va=2*ca,Ya=3*ca,Ja=0;Ja<ca;++Ja)ha[0][Ja]=mb[Ja],ha[1][Ja]=mb[Ja+ca],ha[2][Ja]=mb[Ja+va],ha[3][Ja]=mb[Ja+Ya]}function Q(){var ca=ja*ta*4;ka=[new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca)];
ha=[new Float32Array(ka[0].buffer),new Float32Array(ka[1].buffer),new Float32Array(ka[2].buffer),new Float32Array(ka[3].buffer)];Sa=new Uint8Array(4*ca);mb=new Float32Array(Sa.buffer);pa=!0}function fa(){aa=new Uint8Array(ja*ta*4);lc=new Float32Array(aa.buffer);Vb=!0}var aa,O=Object.assign({},g,F),da=x++;null===O.isFlipY&&(O.isFlipY=O.url?!0:!1);O.data&&(O.array="string"===typeof O.data?Kb(O.data):O.isFloat?new Float32Array(O.data):new Uint8Array(O.data),O.isFlipY=!1);var v=0,P=O.ka?!0:!1,D=null,
X=null,ma=!1;O.T=O.T||O.isFloat;O.T&&(v=1);!O.vm&&O.isFloat&&d&&!Ga.fa()&&(O.isFloat=!1);O.isFloat&&(v=2);O.isAnisotropicFiltering&&n&&!ea.Cm()&&(O.isAnisotropicFiltering=!1);var oa=O.Zh||c.createTexture(),za=null,Fa=!1,ja=0,ta=0,Ia=!1,Y=!1,pa=!1,ha=null,ka=null,Sa=null,mb=null,ab=null,Da=null,Oa=null,sb=O.isFlipY,rc=(F=O.T&&O.isMipmap)&&Ib.Pk(),Bb=F&&!rc?!0:!1,Hb=null,Pb=-1,kc=-1,Qb=!1,Vb=!1,lc=aa=null;O.width&&(ja=O.width,ta=O.height?O.height:ja);var Ua={get:function(){return oa},O:function(){return ja},
Y:function(){return ta},fm:function(){return O.url},ri:function(){return O.isFloat},si:function(){return O.T},vq:function(ca){oa=ca},Zp:function(){return O.isLinear},zd:function(){c.generateMipmap(c.TEXTURE_2D)},Hk:function(ca,va){Bb?(ca||(ca=Ua.Vh()),A.Ge(va),a(Hb[ca]),k[va]=-1):Ua.h(va)},Vh:function(){-1===Pb&&(Pb=Math.log(ja)/Math.log(2));return Pb},Bl:function(ca){ca||(ca=Ua.Vh());if(Bb){Z.set("s12");A.Ge(0);for(var va=ja,Ya=ta,Ja=1;Ja<=ca;++Ja)va/=2,Ya/=2,Z.N("u14",.25/va,.25/Ya),c.viewport(0,
0,va,Ya),a(Hb[Ja-1]),c.framebufferTexture2D(Ba.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Hb[Ja],0),W.l(!1,1===Ja);k[0]=-1}else ca!==kc&&(kc=ca,c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,ca)),Ua.zd()},wq:function(ca){(P=!(Array.isArray(ca)||ca.constructor===Float32Array||ca.constructor===Uint8Array))?(Fa=null,O.ka=ca,L()):Fa=ca},h:function(ca){if(!Ia)return!1;A.Ge(ca);if(k[ca]===da)return!1;a(oa);k[ca]=da;return!0},Ka:function(ca){c.activeTexture(q[ca]);l=ca;a(oa);k[ca]=da},
o:function(){r=Ua;A.nj(oa)},M:function(){c.viewport(0,0,ja,ta);r=Ua;A.nj(oa)},qe:A.qe,Vn:function(ca,va){ja=ca;ta=va},resize:function(ca,va){Ua.Vn(ca,va);t()},clone:function(ca){ca=A.instance({width:ja,height:ta,T:O.T,isFloat:O.isFloat,isLinear:O.isLinear,isMirrorY:O.isMirrorY,isFlipY:ca?!sb:sb,isPot:O.isPot});wb.set("s0");Ba.$();ca.M();Ua.h(0);W.l(!0,!0);return ca},Uc:function(){c.viewport(0,0,ja,ta)},remove:function(){c.deleteTexture(oa);Y=!0;u.splice(u.indexOf(Ua),1);Ua=null},refresh:function(){Ua.Ka(0);
sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);P?c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,O.ka):c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,Fa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Ui:function(){pa||Q();c.readPixels(0,0,ja,4*ta,c.RGBA,c.UNSIGNED_BYTE,Sa);R();return ha},qn:function(){pa||Q();return Ga.kg(0,0,ja,4*ta,Sa).then(function(){R();return ha})},sn:function(){Vb||fa();c.readPixels(0,0,ja,ta,c.RGBA,c.UNSIGNED_BYTE,aa);return lc},rn:function(){Vb||fa();return Ga.kg(0,0,ja,ta,aa)},xh:function(ca){Ba.ba();
Z.set("s15");Ua.h(0);if(ca)c.viewport(0,0,ja,ta),Z.ho("u15",.25,.25,.25,.25),W.l(!1,!0);else for(ca=0;4>ca;++ca)c.viewport(0,ta*ca,ja,ta),Z.xa("u15",C[ca]),W.l(!1,0===ca)},Rg:function(ca){var va;if(va=Oa===z[0])null!==N.Af?va=N.Af:(va=f(new Uint8Array([127,127,127,127]),!1),va=null===va?!0:N.Af=va),va=!va;a(oa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);va?(ma||(D=document.createElement("canvas"),D.width=ja,D.height=ta,X=D.getContext("2d"),X.createImageData(ja,ta),ma=!0),null.data.set(ca),X.putImageData(null,
0,0),c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,D)):c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,ca);k[l]=da;sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Kq:function(ca,va){a(oa);va&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca);k[l]=da;va&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},ac:function(ca,va){var Ya=ja*ta,Ja=4*Ya;ca=O.T?ca?"RGBE":"JSON":"RGBA";va&&(ca=va);va=Ga.la()&&!1;var Xa=null;switch(ca){case "RGBE":Xa="s13";break;case "JSON":Xa=va?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Xa=
"s7"}pa||("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca?(ka=new Uint8Array(Ja),pa=!0):"JSON"!==ca||va||Q());Ba.ba();Z.set(Xa);Ua.h(0);Ja=null;if("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca){c.viewport(0,0,ja,ta);W.l(!0,!0);c.readPixels(0,0,ja,ta,c.RGBA,c.UNSIGNED_BYTE,ka);if("RGBAARRAY"===ca)return{data:ka};h||(B=document.createElement("canvas"),M=B.getContext("2d"),h=!0);B.width=ja;B.height=ta;Ya=M.createImageData(ja,ta);Ya.data.set(ka);M.putImageData(Ya,0,0);Ja=B.toDataURL("image/png")}else if("JSON"===
ca)if(va)Ja=new Float32Array(Ya),c.viewport(0,0,ja,ta),W.l(!0,!0),c.readPixels(0,0,ja,ta,c.RGBA,c.FLOAT,Ja);else{for(Ja=0;4>Ja;++Ja)c.viewport(0,ta*Ja,ja,ta),Z.xa("u15",C[Ja]),W.l(!Ja,!Ja);Ua.Ui();Ja=Array(Ya);for(va=0;va<Ya;++va)Ja[4*va]=ha[0][va],Ja[4*va+1]=ha[1][va],Ja[4*va+2]=ha[2][va],Ja[4*va+3]=ha[3][va]}return{format:ca,data:Ja,width:ja,height:ta,isMirrorY:O.isMirrorY,isFlipY:"RGBA"===ca?O.isFlipY:!O.isFlipY}}};O.isMipmap&&!Bb&&Ia&&!Qb&&(Ua.zd(),Qb=!0);if(O.url)a(oa),c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),za=new Image,za.rp="Anonymous",za.crossOrigin="Anonymous",za.src=O.url,za.onload=function(){ja=za.width;ta=za.height;t()};else if(O.ka){var Mb=function(){L();ja?t():setTimeout(Mb,1)};Mb()}else O.array?(O.T&&!O.isFloat?O.array instanceof Uint16Array?(Fa=O.array,t()):e()?(Fa=b(O.array),t()):(t(),A.Lh(c,oa,Ua.O(),Ua.Y(),O.array,sb,!0)):(Fa=O.isFloat?O.array instanceof Float32Array?O.array:new Float32Array(O.array):O.array instanceof Uint8Array?O.array:new Uint8Array(O.array),
t()),O.isKeepArray||(Fa&&Fa!==O.array&&(Fa=null),delete O.array)):O.Zh?Ia=!0:t();Ua.Op=Ua.O;O.B&&Ia&&(O.B(Ua),O.B=null);u.push(Ua);return Ua},ba:function(F){F!==l&&(c.activeTexture(q[F]),l=F);k[F]=-1;a(null)},Jk:function(F){m.random.h(F)},qe:function(){r=null;c.framebufferTexture2D(Ba.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==l&&c.activeTexture(q[0]);for(var F=0;F<q.length;++F)k[F]=-1;l=-1},lq:function(){l=-1},Jj:function(){for(var F=0;F<q.length;++F)A.ba(F)},H:function(){m&&
(m.random.remove(),m.Hj.remove())},Xc:function(F,L){if("RGBA"===F.format||"RGBE"===F.format){var p=new Image;p.src=F.data;p.onload=function(){A.instance({isMirrorY:F.isMirrorY,isFlipY:F.isFlipY,isFloat:!1,ka:p,B:function(t){if("RGBA"===F.format)L(t);else{var R=F.width,Q=F.height,fa=A.instance({isMirrorY:F.isMirrorY,isFloat:!0,width:R,height:Q,isFlipY:F.isFlipY});Ba.$();c.viewport(0,0,R,Q);Z.set("s14");fa.o();t.h(0);W.l(!0,!0);A.ba(0);L(fa);Ga.flush();t.remove()}}})}}else"JSON"===F.format?L(A.instance({isFloat:!0,
isFlipY:F.isFlipY,width:F.width,height:F.height,array:new Float32Array(F.data)})):L(!1)},Vk:b,v:function(){r&&(Ba.$(),A.qe(),Ba.ba());A.Jj();u.slice(0).forEach(function(F){F.remove()});u.splice(0);G=!1;x=0;"undefined"!==typeof Ib&&Ib.v();m=null}};return A}(),Mc={instance:function(a){var b=[ba.instance(a),ba.instance(a)],e=[b[1],b[0]],f=e,l={ij:function(q){f[1].o();f[0].h(q);l.vj()},Pn:function(q){f[1].M();f[0].h(q);l.vj()},vj:function(){f=f===b?e:b},refresh:function(){f[0].refresh();f[1].refresh()},
h:function(q){f[0].h(q)},Ka:function(q){f[0].Ka(q)},Ik:function(q){f[1].h(q)},Jp:function(){return f[0]},Mp:function(){return f[1]},Rg:function(q){f[0].Rg(q);f[1].Rg(q)},remove:function(){f[0].remove();f[1].remove();f=null},sync:function(){l.Pn(0);Z.set("s0");W.l(!1,!1)}};return l}},W=function(){function a(m){var r={ja:null,indices:null};r.ja=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,r.ja);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);r.indices=m.createBuffer();
m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,r.indices);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),m.STATIC_DRAW);return r}var b=null,e=0,f=!1,l=[],q=-2,x=-2,k={reset:function(){x=q=-2},m:function(){f||(b=a(c),k.kd(),f=!0)},instance:function(m){var r=e++,z=m.indices?m.indices.length:0,H="undefined"===typeof m.mode?c.STATIC_DRAW:m.mode,y=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,y);c.bufferData(c.ARRAY_BUFFER,m.ja instanceof Float32Array?m.ja:new Float32Array(m.ja),H);q=r;var G=null,u=
null,g=null;if(m.indices){G=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,G);var h=null;65536>m.indices.length?(h=Uint16Array,u=c.UNSIGNED_SHORT,g=2):(h=Uint32Array,u=c.UNSIGNED_INT,g=4);h=m.indices instanceof h?m.indices:new h(m.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,H);x=r}var B={wc:function(M){q!==r&&(c.bindBuffer(c.ARRAY_BUFFER,y),q=r);M&&wb.he()},Fk:function(){x!==r&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,G),x=r)},bind:function(M){B.wc(M);B.Fk()},U:function(){c.drawElements(c.TRIANGLES,
z,u,0)},La:function(M,C){c.drawElements(c.TRIANGLES,M,u,C*g)},remove:function(){c.deleteBuffer(y);m.indices&&c.deleteBuffer(G);B=null}};l.push(B);return B},kd:function(){-1!==q&&(c.bindBuffer(c.ARRAY_BUFFER,b.ja),q=-1);-1!==x&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),x=-1)},l:function(m,r){m&&W.kd();r&&wb.dc();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ob:function(m){m=m||c;var r=a(m);m.bindBuffer(m.ARRAY_BUFFER,r.ja);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,r.indices);wb.ec(m);m.clear(m.COLOR_BUFFER_BIT);
m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);m.deleteBuffer(r.ja);m.deleteBuffer(r.indices);k.reset();f&&(k.kd(),wb.dc())},H:function(){var m=c,r=b;m.deleteBuffer(r.ja);m.deleteBuffer(r.indices)},v:function(){k.H();l.forEach(function(m){m.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);k.reset();f=!1;l.splice(0);e=0}};return k}(),Ba=function(){var a=null,b=null,e=null,f=
!1,l=[],q={na:-2,Kh:1},x={Xb:function(){return f},m:function(){if(!f){a=c.createFramebuffer();var k=Ga.la();b=k&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;e=k&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;f=!0}},Jl:function(){return b},Rh:function(){return e},pf:function(){return c.FRAMEBUFFER},Np:function(){return q},Cp:function(){return a},instance:function(k){void 0===k.Ec&&(k.Ec=!1);var m=k.ha?k.ha:null,r=k.width,z=void 0!==k.height?k.height:k.width,H=a,y=null,G=!1,u=!1,g=0;m&&
(r=r?r:m.O(),z=z?z:m.Y());var h={cj:function(){G||(H=c.createFramebuffer(),G=!0,g=q.Kh++)},ed:function(){h.cj();h.o();y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,r,z);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1)},bind:function(B,M){g!==q.na&&(c.bindFramebuffer(b,H),q.na=g);m&&m.o();M&&c.viewport(0,0,r,z);B&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},fh:function(){g!==q.na&&(c.bindFramebuffer(b,
H),q.na=g)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Qe:function(){c.clear(c.COLOR_BUFFER_BIT)},mh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Uc:function(){c.viewport(0,0,r,z)},o:function(){g!==q.na&&(c.bindFramebuffer(b,H),q.na=g)},rtt:function(B){m=B;q.na!==g&&(c.bindFramebuffer(c.FRAMEBUFFER,H),q.na=g);B.o()},ba:function(){c.bindFramebuffer(b,null);q.na=-1},resize:function(B,M){r=B;z=M;y&&(c.bindRenderbuffer(c.RENDERBUFFER,y),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
r,z))},remove:function(){H===a||u||(c.bindFramebuffer(b,H),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),y&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(H),y&&c.deleteRenderbuffer(y));u=!0}};k.Ec&&h.ed();l.push(h);return h},ba:function(){c.bindFramebuffer(b,null);q.na=-1},Iq:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ga.sj();q.na=-1},reset:function(){q.na=-2},$:function(){0!==
q.na&&(c.bindFramebuffer(b,a),q.na=0)},clear:function(){Ga.sj();c.clear(c.COLOR_BUFFER_BIT)},v:function(){x.ba();l.forEach(function(k){k.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);x.reset();f=!1;l.splice(0);q.Kh=1}};return x}(),Ga=function(){function a(){k="undefined"===typeof jb?ea:jb;m=!0}function b(d,w,I){for(var N=0;N<w.length;++N){var A=I.getExtension(w[N]+"_"+d);if(A)return A}return null}function e(){null!==h.pe&&(clearTimeout(h.pe),h.pe=null);h.Sb=!1}function f(d){if(0===h.xb.length){h.za=
c.PIXEL_PACK_BUFFER;h.xb.splice(0);h.Fd.splice(0);for(var w=0;w<h.yc;++w)h.xb.push(c.createBuffer()),h.Fd.push(-1);h.Ta=0;h.Zf=0}c.bindBuffer(h.za,h.xb[h.Ta]);d.byteLength!==h.Fd[h.Ta]&&(c.bufferData(h.za,d.byteLength,c.STREAM_READ),h.Fd[h.Ta]=d.byteLength);h.Tp=!0}function l(){c.bindBuffer(h.za,null)}function q(){h.Rb.forEach(function(d){c.deleteSync(d)});h.Rb.splice(0)}function x(){h.Ta=(h.Ta+1)%h.yc;++h.Zf}var k=null,m=!1,r={hi:!1,Jg:null,Kg:null,ni:!1,Am:!1,Lg:null,oi:!1,Mg:null,ii:!1,Re:null,
sm:!1,Se:null,tm:!1},z=null,H={Wa:!0,Ya:!0,gf:!0,Ti:!1},y=null,G=!0,u=null,g=null,h={Wk:1,yc:-1,Ta:0,Zf:0,Sb:!1,xb:[],Rb:[],Fd:[],za:null,pe:null},B="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),M=["OES","MOZ_OES","WEBKIT_OES"],C="undefined"===typeof window?{}:window,n={m:function(){if(m)return!0;n.reset();m||a();var d=c;if(!z.hi){z.Jg=n.Hh(d);C.GL_EXT_FLOAT=z.Jg;z.ni=z.Jg?!0:!1;if(z.ni||n.la())z.Kg=n.Ih(d),z.Am=z.Kg?!0:!1,C.GL_EXT_FLOATLINEAR=z.Kg;z.hi=!0}if(!z.ii){z.Lg=n.wd(d);z.Lg&&(z.oi=!0,
C.GL_EXT_HALFFLOAT=z.Lg);if(z.oi||n.la())z.Mg=n.Jh(d),C.GL_EXT_HALFFLOATLINEAR=z.Mg;z.Wp=z.Mg?!0:!1;z.ii=!0}z.Re=n.Fh(d);z.sm=z.Re?!0:!1;C.GL_EXT_COLORBUFFERFLOAT=z.Re;z.Se=n.Gh(d);z.tm=z.Se?!0:!1;C.GL_EXT_COLORBUFFERHALFFLOAT=z.Se;Ba.m();ba.m();if(!n.fl())return!1;W.m();ba.mm();return!0},reset:function(){z=Object.assign({},r);y=Object.assign({},H)},O:function(){m||a();return k.O()},Y:function(){m||a();return k.Y()},la:function(){m||a();return k.la()},Eh:function(d){n.Fh(d);n.Gh(d);n.Hh(d);n.Ih(d);
n.wd(d);n.Jh(d)},Fh:b.bind(null,"color_buffer_float",B),Gh:b.bind(null,"color_buffer_half_float",B),Hh:b.bind(null,"texture_float",M),Ih:b.bind(null,"texture_float_linear",M),wd:b.bind(null,"texture_half_float",M),Jh:b.bind(null,"texture_half_float_linear",M),mf:function(d){var w=n.wd(d);return w&&w.HALF_FLOAT_OES?w.HALF_FLOAT_OES:d.HALF_FLOAT||d.FLOAT},Kl:function(){return g||c.RGBA32F||c.RGBA},Ll:function(){return u||c.RGBA16F||c.RGBA},El:function(){return y},fa:function(){return y.Wa},mp:function(){return y.Ya},
Ok:function(){return y.gf},Rk:function(){return y.Ti&&G},Gj:function(d){G=d;!d&&h.Sb&&(q(),c.bindBuffer(h.za,null),h.Sb=!1)},$p:function(){return h.Sb},me:function(d,w,I){function N(){d.bindTexture(d.TEXTURE_2D,null);d.bindFramebuffer(A,null);d.deleteTexture(p);d.deleteFramebuffer(L)}var A=d.FRAMEBUFFER,F=d.NEAREST,L=d.createFramebuffer();d.bindFramebuffer(A,L);var p=d.createTexture();d.activeTexture(d.TEXTURE0);d.bindTexture(d.TEXTURE_2D,p);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!1);d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,F);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,F);d.texImage2D(d.TEXTURE_2D,0,w,3,3,0,d.RGBA,I,null);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,p,0);if(d.checkFramebufferStatus(d.READ_FRAMEBUFFER||d.FRAMEBUFFER)!==d.FRAMEBUFFER_COMPLETE)return N(),!1;wb.fe(d);d.clearColor(0,0,0,0);d.viewport(0,0,3,3);d.disable(d.DEPTH_TEST);
d.clear(d.COLOR_BUFFER_BIT);W.Ob(d);d.bindFramebuffer(A,null);wb.Bb(d);d.activeTexture(d.TEXTURE0);d.bindTexture(d.TEXTURE_2D,p);W.Ob(d);w=new Uint8Array(36);d.readPixels(0,0,3,3,d.RGBA,d.UNSIGNED_BYTE,w);N();for(I=0;36>I;++I)if(3!==I%4&&3<Math.abs(w[I]-127))return!1;return!0},Ze:function(d){var w={Wa:!1,Ya:!1};d.disable(d.BLEND);d.clearColor(0,0,0,0);d.clear(d.COLOR_BUFFER_BIT);d.RGBA32F&&n.me(d,d.RGBA32F,d.FLOAT)&&(w.Wa=!0,g=d.RGBA32F);!w.Wa&&n.me(d,d.RGBA,d.FLOAT)&&(w.Wa=!0,g=d.RGBA);var I=n.mf(d);
u=null;d.RGBA16F&&n.me(d,d.RGBA16F,I)&&(w.Ya=!0,u=d.RGBA16F);!w.Ya&&n.me(d,d.RGBA,I)&&(w.Ya=!0,u=d.RGBA);return w},hl:function(){var d=Ba.instance({width:2});d.cj();var w=ba.instance({width:2,isFloat:!0,J:3});d.o();w.o();n.flush();c.checkFramebufferStatus(Ba.Rh())!==c.FRAMEBUFFER_COMPLETE?(ba.ao(),y.gf=!1):y.gf=!0;d.remove();w.remove()},il:function(){var d=!1;n.la()&&(d="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(w){return"undefined"!==
typeof c[w]}));y.Ti=d},fl:function(){var d=n.Ze(c);Object.assign(y,d);if(!y.Wa&&!y.Ya)return!1;n.hl();n.il();return!0},tn:function(d,w,I,N,A){c.readPixels(d,w,I,N,c.RGBA,c.UNSIGNED_BYTE,A);return Promise.resolve(A,!1)},kg:function(d,w,I,N,A,F,L){if(!n.Rk())return n.tn(d,w,I,N,A);h.yc=L||h.Wk;f(A);c.readPixels(d,w,I,N,c.RGBA,c.UNSIGNED_BYTE,0);h.Rb[h.Ta]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush();var p=!1;return new Promise(function(t,R){function Q(){if(!h.Sb)return e(),l(),x(),R(),!1;var fa=
(h.Ta+1)%h.yc;switch(c.clientWaitSync(h.Rb[fa],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return e(),c.deleteSync(h.Rb[fa]),h.Rb[fa]=null,c.bindBuffer(h.za,h.xb[fa]),c.getBufferSubData(h.za,0,A),l(),x(),t(A,p),!0}h.pe=setTimeout(Q,0);return!1}e();h.Zf+1<h.yc?(l(),x(),t(A,!1)):(h.Sb=!0,Q()||!F||p||(p=!0,F()))})},sj:function(){c.viewport(0,0,n.O(),n.Y())},flush:function(){c.flush()},v:function(){e();q();ba.v();Ba.v();W.v();h.xb.forEach(function(d){c.deleteBuffer(d)});h.xb.splice(0);
wb.reset();m=!1}};return n}(),Ib=function(){function a(d,w,I,N){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,N?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var A=null;if(null!==I)try{A=h.getError();if("FUCKING_BIG_ERROR"===A)return!1;h.texImage2D(h.TEXTURE_2D,0,d,4,4,0,h.RGBA,w,I);A=h.getError();if(A!==h.NO_ERROR)return!1}catch(F){return!1}N&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);W.Ob(h);A=h.getError();if("FUCKING_BIG_ERROR"===A)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,
z);A=h.getError();A===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,z),A=h.getError());if(A!==h.NO_ERROR)return!1;I=!0;for(N=0;16>N;++N)I=I&&4>Math.abs(z[N]-127);I&&(m.Pi=w,m.gi=d);return I}function b(d,w){return B.Wa&&a(d,h.FLOAT,new Float32Array(H),w)?(k=x.bh,!0):!1}function e(d,w,I){if(!B.Ya)return!1;var N=ba.Vk(H),A=Ga.wd(h);if(A&&A.HALF_FLOAT_OES&&a(d,A.HALF_FLOAT_OES,N,w)||h.HALF_FLOAT&&a(d,
h.HALF_FLOAT,N,w))return k=x.qc,!0;N=new Float32Array(H);if(a(d,h.FLOAT,N,w))return k=x.qc,!0;h.bindTexture(h.TEXTURE_2D,I);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(m.rd,n);ba.Lh(h,I,2,2,N,!1,!1);h.bindFramebuffer(m.rd,null);h.bindTexture(h.TEXTURE_2D,I);return a(d,null,null,w)?(k=x.qc,!0):!1}function f(d,w,I){r=!0;if(e(d,!0,I)||b(w,!0))return!0;r=!1;return e(d,!1,I)||b(w,!1)?!0:!1}function l(d){if(k===x.K){h=d||c;k=x.RGBA8;r=!0;Ga.Eh(h);B||(B=Ga.Ze(h));
Ba.reset();n=h.createFramebuffer();m.rd=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(m.rd,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);Z.K();M=Z.Bb(h);d=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,d);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);C=d;var w=d=h.RGBA,I=h.RGBA16F,N=h.RGBA32F;N&&(d=N);I&&(w=I);if((I||N)&&f(w,d,C))return q(),
!0;d=w=h.RGBA;if(f(w,d,C))return q(),!0;k=x.RGBA8;q();return!1}}function q(){h.deleteProgram(M.oa);h.deleteTexture(C);C=M=null}for(var x={K:-1,bh:3,qc:2,RGBA8:0},k=x.K,m={Pi:null,gi:null,rd:null},r=!0,z=new Uint8Array(16),H=Array(64),y=0;4>y;++y)for(var G=0;4>G;++G){var u=0===(G+y)%2?1:0,g=4*y+G;H[4*g]=u;H[4*g+1]=u;H[4*g+2]=u;H[4*g+3]=u}var h=null,B=null,M=null,C=null,n=null;return{Pk:function(d){l(d);return r},kh:function(d,w){k===x.K&&(typeof("undefined"!==w)&&(B=w),l(d));return k!==x.RGBA8},Xp:function(d){l(d);
return k===x.bh},Dm:function(d){l(d);return k===x.qc},Ip:function(d){l(d);return m.Pi},Ml:function(d){l(d);return m.gi},v:function(){h=null;r=!0;k=x.K;B=null}}}(),Zc={instance:function(a){function b(){y&&y.remove();y=ba.instance({isFloat:!1,isPot:!1,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}var e=null,f=!1,l=!1,q=null,x=!1,k=!1,m=null,r="undefined"===typeof a.preprocessing?!1:a.preprocessing,z="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(f=!0,J&&void 0!==J.ca&&(a.mask=
J.ca+a.mask),e=ba.instance({isFloat:!1,url:a.mask}));var H=!1;a.customInputShader&&(H="s50",Z.ma({name:"_",id:H,g:a.customInputShader,Jq:["uSource"],precision:"lowp"}),Z.j(H,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":m="s39";x=!0;break;case "meanNormalization":m="s40";x=!0;break;case "grayScale":m="s36";x=!1;break;case "grayScaleTilt":m="s37";k=!0;x=!1;break;case "rgbGrayTilt":m="s38";k=!0;x=!1;break;case "copy":m=H?H:"s0";break;case "inputLightRegulation":m=H?H:"s36";q=od.instance({fi:z,
Ji:a.size,Ei:a.nBlurPass,Ba:!1});l=!0;break;case "inputMix0":m="none";q=pd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});l=!0;break;case "inputMix1":m="none";q=qd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});l=!0;break;case "inputCut4":m="none";q=rd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Gc:a.isNormalized||!1,eg:a.overlap||0,Ba:!1});z*=q.Nl();l=!0;break;case "direct":case "none":case "abort":m="abort";break;
default:m="s4"}z=Math.ceil(z);k&&Z.j(m,[{name:"u29",type:"1f",value:a.tilt}]);f&&(m+="Mask");var y=null;b();var G={O:function(){return a.size},Ol:function(){return z},qf:function(){return G.O()},Sl:function(){return l?q.Cc():y},re:function(u){a.Aa=u;b()},wa:function(u){Ba.$();if("abort"===m)return u.h(0),u;"none"!==m&&(Z.set(m),x&&Z.G("u30",1/a.size),y.M(),f&&e.h(1),W.l(!1,!1),y.h(0),u=y);l&&q.process(u)},v:function(){y.remove();f&&e.remove()}};return G}},$c={instance:function(a){function b(){if(n.jc){l.input&&
(l.input.remove(),l.Id.remove());var w=a.size*a.sparsity;C=Math.log(w/a.size)/Math.log(2);l.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:w*a.Aa[0],height:w*a.Aa[1],Tf:C});l.Id=ba.instance({isFloat:!0,isPot:!0,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}}function e(){l.zb&&l.zb.remove();l.zb=ba.instance({isFloat:!0,isPot:!x,isLinear:!x&&k.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}function f(w){k.buffer.forEach(function(I,N){k.results[N][0]=w[0][I];k.results[N][1]=w[1][I];k.results[N][2]=
w[2][I];k.results[N][3]=w[3][I]});return k.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,Id:null,zb:null,dg:null,bg:null,cg:null},q=null,x=!0,k={type:"undef",B:null,isLinear:!1,buffer:[],results:[],Kd:!1},m=-1,r=a.isReorganize?a.isReorganize:!1,z=a.kernelsCount?!0:!1,H=[a.Fc?"s32":"s31",a.Fc?"s34":"s33","s35"][a.shiftRGBAMode||0],y={isEnabled:!1},G=1/a.size;a.xm?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.be.qf(),x=!1):"full"===a.connectivityUp&&(a.sparsity=a.be.qf());
var u={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],g=a.sparsity*a.sparsity,h=!1,B=a.size,M="";if(a.maxPooling){switch(a.maxPooling.size){case 2:M="s41";break;case 4:M="s42"}h=!0;B/=a.maxPooling.size;l.bg=ba.instance({isFloat:!0,isPot:!1,width:B})}var C=-1,n=null;x&&e();l.bias=ba.instance(a.bias);var d={O:function(){return a.size},qf:function(){return B},Oh:function(){return a.classesCount},Gk:function(w){q.h(w)},kn:function(){a.remap&&
a.remap.isEnabled&&(y={isEnabled:!0,Qm:ba.instance(a.remap.maskTexture),Kc:a.remap.layers.map(function(w){return a.parent.Pl(w)}),depth:a.remap.depth})},bo:function(){switch(a.connectivityUp){case "direct":n=sd.instance(a.connectivity);break;case "square":n=td.instance(a.connectivity);break;case "squareFast":n=ud.instance(a.connectivity,a.activation);break;case "full":n=vd.instance(Object.assign({Fc:a.Fc},a.connectivity));break;case "conv":m=a.kernelsCount,n=wd.instance(a.connectivity),r&&(l.dg=ba.instance({width:B,
isFloat:!0,isFlipY:!1,isPot:!1}))}b()},wa:function(w,I){q=w;n.jc?(l.input.M(),z&&l.bias.h(2),n.wa(y),l.input.h(0),l.input.Bl(C),l.Id.M(),z?Z.set("s0"):(Z.set(H),Z.G("u4",g),l.bias.h(1)),l.input.Hk(C,0),W.l(!1,!1),Z.set(u),l.zb.o(),l.Id.h(0),W.l(!1,!1)):(l.zb.M(),l.bias.h(1),n.wa());if(x)return I=l.zb,h&&(l.bg.M(),I.h(0),Z.set(M),Z.N("u14",G,G),W.l(!1,!1),I=l.bg),r&&(l.dg.o(),Z.set("s24"),Z.N("u18",m,B/m),I.h(0),W.l(!1,!1),I=l.dg),I.h(0),I;var N=l.zb;if(a.normalize||k.Kd)w=a.normalize,Z.set(k.Kd?"s9":
"s8"),Z.G("u10",w?G:1),l.cg.M(),N.h(0),W.l(!1,!1),N=l.cg;w=null;switch(k.type){case "cpuRGBA2Float":N.xh(!1);I?w=d.on(N).then(k.B):(N=d.pn(N),k.B(N));break;case "cpuMeanFloat":N.xh(!0);if(I)w=N.rn().then(k.B);else{N=N.sn();for(var A=0;A<N.length;++A);k.B(N)}break;case "gpuRawAvg":case "gpuRaw":N.h(0);case "none":null!==k.B&&k.B(N)}I&&null===w&&(w=Promise.resolve());return w},re:function(w){a.Aa=w;b();e()},lo:function(w){w&&(k.type=w.Xd||"none",k.B=w.Wd||null,k.isLinear=w.ag?!0:!1);e();w="undefined"!==
typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var I=0,N=0,A=0;I<w;++I)k.buffer.push(N+(a.size-1-A)*a.size),k.results.push([-1,-1,-1,-1]),++N,N===a.size&&(N=0,++A);k.Kd="gpuRawAvg"===k.type||"cpuMeanFloat"===k.type;if(a.normalize||k.Kd)l.cg=ba.instance({isFloat:!0,isPot:!0,width:a.size})},on:function(w){return w.qn().then(f)},pn:function(w){w=w.Ui();f(w);return k.results},v:function(){for(var w in l){var I=l[w];I&&I.remove()}n&&(n.v(),n=null)}};a.be&&d.bo(a.be);return d}},
sd={instance:function(a){var b=ba.instance(a.weights);return{jc:!0,Cd:function(){return 1},v:function(){b.remove()},gm:function(){return b},wa:function(){Z.set("s30");b.h(1);W.l(!1,!1)}}}},vd={instance:function(a){var b=a.fromLayerSize,e=ba.instance(a.weights),f=a.Fc?"s27":"s26";return{jc:!0,Cd:function(){return b},v:function(){e.remove()},wa:function(l){if(l.isEnabled){Z.set("s28");l.Qm.h(3);for(var q=Math.min(l.Kc.length,l.depth),x=0;x<q;++x)l.Kc[x].Gk(4+x)}else Z.set(f);Z.G("u8",a.toLayerSize);
Z.G("u9",a.fromLayerSize);e.h(1);W.l(!1,!1)}}}},td={instance:function(a){for(var b=a.fromLayerSize,e=a.toLayerSize,f=a.toSparsity,l=f*e,q=l/b,x=b/e,k=0,m=0,r=0,z=Array(f*e*f*e*4),H=Array(f*e*f*e*4),y=Array(b*b),G=0;G<y.length;++G)y[G]=0;G=Math.floor(f/2);for(var u=.5/e,g=.5/b,h=.5/l,B=0;B<e;++B)for(var M=Math.round(B*x),C=0;C<e;++C){var n=Math.round(C*x),d=B/e,w=C/e;d+=u;w+=u;for(var I=0;I<f;++I){var N=M+I-G;0>N&&(N+=b);N>=b&&(N-=b);for(var A=0;A<f;++A){var F=k/l,L=m/l,p=n+A-G;0>p&&(p+=b);p>=b&&(p-=
b);var t=N/b,R=p/b;L=1-L-1/l;t+=g;R+=g;F+=h;L+=h;var Q=B*f+I,fa=C*f+A;fa=e*f-fa-1;Q=fa*e*f+Q;z[4*Q]=F;z[4*Q+1]=L;z[4*Q+2]=t;z[4*Q+3]=R;R=y[p*b+N]++;Q=R%q;t=N*q+Q;p=p*q+(R-Q)/q;p=b*q-1-p;p=p*b*q+t;H[4*p]=F;H[4*p+1]=L;H[4*p+2]=d;H[4*p+3]=w;++k>=l&&(k=0,++m);++r}}}y=null;var aa=ba.instance(a.weights);delete a.weights.data;var O=ba.instance({width:l,isFloat:!0,array:new Float32Array(H),isPot:!0});H=null;var da=ba.instance({width:l,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;return{jc:!0,Cd:function(){return q},
v:function(){O.remove();da.remove();aa.remove()},wa:function(){Z.set("s25");aa.h(1);da.h(2);W.l(!1,!1)}}}},wd={instance:function(a){var b=a.kernelsCount,e=a.toSparsity,f=e*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],q=ba.instance(a.weights);return{jc:!0,Cd:function(){return f},Qp:function(){return e},gm:function(){return q},v:function(){q.remove()},wa:function(){Z.set("s29");Z.wg("u28",l);Z.G("u26",b);Z.G("u27",e);Z.G("u8",a.toLayerSize);Z.G("u9",a.fromLayerSize);q.h(1);W.l(!1,!1)}}}},ud=
{instance:function(a,b){var e=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,q=a.stride?a.stride:1,x=l*f/e,k=f<e,m=e/f,r=ba.instance(a.weights),z="s51"+[e.toString(),f.toString(),l.toString(),q.toString(),b].join("_");Z.yl(z)||(a=cb(b),f=[{type:"1f",name:"u8",value:f},{type:"1f",name:"u32",value:q}],k&&f.push({type:"1f",name:"u9",value:e}),e=[(k?x:l).toFixed(1),a],k&&e.push(m.toFixed(1)),Z.om(k?"s47":"s46",z,e),Z.j(z,f.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",
name:"u7",value:3}])));return{jc:!1,Cd:function(){return x},v:function(){r.remove()},wa:function(){Z.set(z);r.h(3);W.l(!1,!1)}}}},od={instance:function(a){var b=a.Ei?a.Ei:3,e=a.fi?a.fi:64,f=a.Ji?a.Ji:64,l=a.Ba?!0:!1;a={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var q=ba.instance(a),x=ba.instance(a),k=ba.instance(a),m=ba.instance(a),r=ba.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),z=1/e;return{process:function(H){Z.set("s43");m.o();W.l(l,!1);Z.set("s44");for(var y=0;y<b;++y)q.o(),Z.N("u14",z,0),
W.l(l,!1),k.o(),m.h(0),W.l(l,!1),x.o(),q.h(0),Z.N("u14",0,z),W.l(l,!1),m.o(),k.h(0),W.l(l,!1),y!==b-1&&x.h(0);Z.set("s45");r.o();H.h(0);x.h(1);m.h(2);W.l(l,!1);r.h(0)},Cc:function(){return r}}}},pd={instance:function(a){function b(z){return ba.instance({isFloat:z,width:e.Z,isPot:!1,isFlipY:!1})}var e=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),f=b(!1),l=[b(!1),b(!1),b(!1)],q=[b(!1),b(!1),b(!1)],x=b(!0),k=[f,q[0],q[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((e.Sa-1)/2).toFixed(2)).replace("2.2222",(1/e.Z).toFixed(6));var m="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",e.jb.toFixed(4)).replace("2.2222",e.gain.toFixed(4)),r={u1:0};Z.sc([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",s:r,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,s:r,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:m,s:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Z.set("s53");f.M();W.l(e.Ba,!1);Z.set("s54");for(var z=0;3>z;++z)Z.N("u33",1,0),l[z].o(),k[z].h(0),
W.l(!1,!1),Z.N("u33",0,1),q[z].o(),l[z].h(0),W.l(!1,!1);Z.set("s55");x.o();f.h(0);q[0].h(1);q[1].h(2);q[2].h(3);W.l(!1,!1);x.h(0)},Cc:function(){return x}}}},qd={instance:function(a){function b(r){return ba.instance({isFloat:r,width:e.Z,isPot:!1,isFlipY:!1})}var e=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),f=b(!1),l=b(!1),q=b(!1),x=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((e.Sa-1)/2).toFixed(2)).replace("2.2222",(1/e.Z).toFixed(6));var k="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",e.jb.toFixed(4)).replace("2.2222",e.gain.toFixed(4)),m={u1:0};Z.sc([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
s:m,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,s:m,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:k,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Z.set("s56");f.M();W.l(e.Ba,!1);Z.set("s57");Z.N("u33",1,0);l.o();f.h(0);W.l(!1,!1);Z.N("u33",0,1);q.o();l.h(0);W.l(!1,!1);Z.set("s58");x.o();f.h(0);q.h(1);W.l(!1,!1);x.h(0)},Cc:function(){return x}}}},rd={instance:function(a){function b(z){return ba.instance({isFloat:z,width:e.Z,isPot:!1,isFlipY:!1})}var e=Object.assign({jb:.1,
Sa:9,Z:128,gain:1,eg:0,Gc:!1,Ba:!1},a),f=b(!1),l=null,q=null,x=null;e.Gc&&(l=b(!1),q=b(!1),x=b(!0));a={u1:0};var k=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",e.eg.toFixed(4)),s:a,
i:["u1"],precision:"lowp"}];if(e.Gc){var m="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((e.Sa-1)/2).toFixed(2)).replace("2.2222",(1/e.Z).toFixed(6)),r="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
e.jb.toFixed(4)).replace("2.2222",e.gain.toFixed(4));k.push({id:"s60",name:"_",g:m,s:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:r,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Z.sc(k);return{process:function(){Z.set("s59");f.M();W.l(e.Ba,!1);e.Gc?(Z.set("s60"),Z.N("u33",1,0),l.o(),f.h(0),W.l(!1,!1),Z.N("u33",0,1),q.o(),l.h(0),W.l(!1,!1),Z.set("s61"),x.o(),f.h(0),q.h(1),W.l(!1,!1),x.h(0)):f.h(0)},Nl:function(){return 2-e.eg},Cc:function(){return e.Gc?x:f}}}},Gb=function(){function a(g,
h,B,M,C,n,d){if(!G)if(d===n.length)C();else{switch(n[d]){case "A":B();break;case "D":g();break;case "S":h().then(function(w,I){u.Fj();a(g,h,B,I?null:M,C,n,++d)}).catch(function(w){console.log("An error occurred in the WebAR loop: ",w);C()});return;case "R":M&&M()}a(g,h,B,M,C,n,++d)}}var b={n:5,Yf:1,wi:0,yd:[35,49],vd:[2,200],k:.7,Ao:200,dn:.05},e=-1,f=null,l=-1,q=-1,x=0,k=-1,m=-1,r=0,z=0,H=b.vd[1],y=Math.log(2),G=!0,u={V:function(){switch(e){case -1:return-1;case 0:return m+f.wi;case 1:return r}},
Ph:function(g){return Math.pow(Math.min(Math.max(k,0),f.n-1)/(f.n-1),g||1)},m:function(g){f=Object.assign({},b,g);k=m=f.Yf;e=0;u.reset()},Fj:function(g){g=("undefined"===typeof g?Date.now():g)||0;var h=Math.min(Math.max(g-z,f.vd[0]),f.vd[1]);H=h;z=g;var B=-1===l?0:f.k;l=Math.min(Math.max(1E3/h,5),120)*(1-B)+l*B;g-q>f.Ao&&5<++x&&(h=f.k,k=k*(1-h)+(l<f.yd[0]?m-1:l>f.yd[1]?m+1:m)*h,Math.abs(k-m)>1-f.dn&&(h=Math.min(Math.max(Math.round(k),0),f.n-1),h!==m&&(k=m=h,l=(f.yd[1]-f.yd[0])/2)),q=g)},mg:function(g,
h,B,M,C,n){G=!1;a(g,h,B,M,C,n,0)},stop:function(){G=!0},Xn:function(g){r=g;e=1},zo:function(){e=0;u.reset()},reset:function(){H=b.vd[1];q=l=-1;x=0},Cq:function(g,h,B){B=Math.exp(-y*H/B);return(1-B)*g+B*h},Hp:function(){return H}};return u}(),Nc=function(){function a(H,y){var G=H[0]-.5;H=H[1]-.5;var u=y[0]-.5;y=y[1]-.5;return G*G+H*H-(u*u+y*y)}var b={Fi:4,Yd:[1.5,1.5,2],ra:[.1,.1,.1],aj:1,Z:-1,yf:-1,uo:2,an:1,ng:!0,wl:.8},e=null,f=[],l=[],q=[],x=[0],k=[.5,.5,1],m=null,r=0,z=[0,0,0];return{m:function(H){e=
Object.assign({},b,H);f.splice(0);l.splice(0);q.splice(0);r=0;H=e.Yd[0]*e.ra[0];var y=e.Yd[1]*e.ra[1],G=1/(1+e.Yd[2]*e.ra[2]),u=e.aj*Math.min(e.Z,e.yf),g=u/e.Z;u/=e.yf;var h=.5*e.wl;h*=h;for(var B=0;B<e.Fi;++B){var M=[];l.push(M);var C=Math.pow(G,B),n=g*C,d=u*C;C=n*e.an;q.push(C);var w=n*H,I=d*y;n/=2;d/=2;for(var N=1+(1-n-n)/w,A=1+(1-d-d)/I,F=0;F<A;++F)for(var L=d+F*I,p=L-.5,t=0;t<N;++t){var R=n+t*w,Q=R-.5;Q*Q+p*p>h||(R=[R,L,C],f.push(R),M.push(R))}e.ng&&M.sort(a);m=f}e.ng&&f.sort(a)},get:function(H){var y=
m.length;if(0===y)return k;for(;H>=x.length;)x.push(0);x[H]>=y&&(x[H]=0);var G=m[Math.floor(x[H])%y];x[H]=(x[H]+1/e.uo)%y;if(0===r)return G;z[0]=G[0];z[1]=G[1];z[2]=r;return z},gq:function(H){H>=x.length||(x[H]=Math.floor(Math.random()*m.length))},uq:function(H){r=H;if(0===r)m=f;else{for(var y=q.length,G=y-1,u=0;u<y;++u)if(q[u]<=H){G=u;break}m=l[G]}},reset:function(){for(var H=f.length/x.length,y=0;y<x.length;++y)x[y]=Math.floor(y*H);r=0;m=f}}}(),Ab=function(){function a(){e(g+G.Uf);h.port.postMessage("DONE")}
function b(){n.fd=0===G.ya?M(e):M(f)}function e(A){C.Vb&&null!==u&&(A-=g,A=Math.min(Math.max(A,G.Bh[0]),G.Bh[1]),g+=A,q(),d.isEnabled&&d.Hc&&C.Na&&g-d.Hf>G.ah&&(r(),d.Hf=g),u(g))}function f(A){C.Vb&&(n.timeout=setTimeout(e.bind(null,A),G.ya))}function l(){u=null;C.Vb=!1;q()}function q(){n.fd&&(window.cancelAnimationFrame(n.fd),n.fd=null);n.timeout&&(window.clearTimeout(n.timeout),n.timeout=null)}function x(A){A&&!C.Na?(C.Na=!0,B&&Gb.zo(),h.port.postMessage("STOP"),Ga.Gj(!0),b()):!A&&C.Na&&(C.Na=!1,
B&&Gb.Xn(1),Ga.Gj(!1),h.port.postMessage("START"))}function k(A){A.target.hidden?I():w()}function m(A,F,L){F=A.createShader(F);A.shaderSource(F,L);A.compileShader(F);return F}function r(){d.Hc=!1;var A=d.Xa,F=d.Gd,L=d.Hd,p=d.za;A.uniform1f(d.$h,Math.random());d.Wb?F.beginQueryEXT(p,L):A.beginQuery(p,L);A.drawElements(A.POINTS,1,A.UNSIGNED_SHORT,0);d.Wb?F.endQueryEXT(p):A.endQuery(p);Ga.flush();H().then(function(t){0===t||isNaN(t)?(d.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
t)):(t=G.Vj*G.$g*1E3/t,d.ve=(d.ve+1)%G.pc,d.If[d.ve]=t,++d.ui>G.pc&&(d.Md.set(d.If),d.Md.sort(function(R,Q){return R-Q}),t=d.Md[Math.floor(G.pc/2)],d.xd=Math.max(d.xd,t),G.Zg(t/d.xd)),d.Hc=!0)}).catch(function(){d.Hc=!0})}function z(A){var F=d.Xa,L=d.Gd,p=d.Hd;p=d.Wb?L.Bp(p,L.QUERY_RESULT_AVAILABLE_EXT):F.getQueryParameter(p,F.QUERY_RESULT_AVAILABLE);F=F.getParameter(L.GPU_DISJOINT_EXT);p?A(!F):setTimeout(z.bind(null,A),.1)}function H(){return new Promise(function(A,F){z(function(L){if(L){L=d.Xa;
var p=d.Gd,t=d.Hd;L=d.Wb?p.getQueryObjectEXT(t,p.QUERY_RESULT_EXT):L.getQueryParameter(t,L.QUERY_RESULT);A(L)}else F()})})}var y={ji:!0,Bh:[1,200],Uf:20,ya:0,$g:50,Vj:240,ah:3E3,pc:3,Zg:null},G=null,u=null,g=0,h=null,B=!1,M=null,C={Ma:!1,Na:!0,Gf:!1,Ef:!1,Df:!1,Vb:!1},n={fd:null,timeout:null},d={isEnabled:!1,Hc:!1,Xa:null,Gd:null,Hd:null,za:null,$h:null,Wb:!0,Hf:0,ui:0,If:null,Md:null,ve:0,xd:0},w=x.bind(null,!0),I=x.bind(null,!1),N={m:function(A){G=Object.assign(y,A);Object.assign(C,{Na:!0,Ma:!0,
Vb:!1});M=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==G.Zg){A=document.createElement("canvas");A.setAttribute("width","1");A.setAttribute("height","1");var F={antialias:!1};A=A.getContext("webgl2",F)||A.getContext("webgl",F);if(F=A.getExtension("EXT_disjoint_timer_query")||A.getExtension("EXT_disjoint_timer_query_webgl2")){d.Xa=A;d.Gd=F;d.isEnabled=!0;d.Wb=F.beginQueryEXT?!0:!1;var L=m(A,A.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),p=m(A,A.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",G.$g.toString())),t=A.createProgram();A.attachShader(t,L);A.attachShader(t,p);A.linkProgram(t);L=A.getAttribLocation(t,"a0");d.$h=A.getUniformLocation(t,"u39");A.useProgram(t);A.enableVertexAttribArray(L);t=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,t);A.bufferData(A.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),A.STATIC_DRAW);A.vertexAttribPointer(L,4,A.FLOAT,
!1,16,0);t=A.createBuffer();A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,t);A.bufferData(A.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),A.STATIC_DRAW);A.disable(A.DEPTH_TEST);A.disable(A.DITHER);A.disable(A.STENCIL_TEST);A.viewport(0,0,1,1);t=d.Wb?F.createQueryEXT():A.createQuery();d.Hd=t;d.za=F.TIME_ELAPSED_EXT||A.TIME_ELAPSED;d.Hf=-G.ah;d.If=new Float32Array(G.pc);d.Md=new Float32Array(G.pc);d.xd=0;d.ve=0;d.ui=0;d.Hc=!0}}if(G.ji){A=!1;try{if("undefined"===typeof SharedWorker){var R=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
G.Uf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),Q=new Worker(R);Q.addEventListener("message",a);h={Si:Q,port:Q};C.Gf=!0}else{var fa=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
G.Uf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),aa=new SharedWorker(fa);aa.port.start();aa.port.addEventListener("message",a);h={Si:aa,port:aa.port};C.Ef=!0}A=!0}catch(O){}A&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",k):(window.addEventListener("blur",I),window.addEventListener("focus",w)),window.addEventListener("pagehide",
I),window.addEventListener("pageshow",w),C.Df=!0)}B="undefined"!==typeof Gb},v:function(){l();C.Df&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",k):(window.removeEventListener("blur",I),window.removeEventListener("focus",w)),window.removeEventListener("pagehide",I),window.removeEventListener("pageshow",w),C.Df=!1);C.Ef?(h.port.close(),C.Ef=!1):C.Gf&&(h.Si.terminate(),C.Gf=!1);Object.assign(C,{Na:!0,Ma:!1,Vb:!1});u=null},cq:function(){return C.Na},update:function(A){Object.assign(G,
A)},mg:function(A){C.Ma||N.m({});q();C.Vb=!0;u=A;C.Na&&b()},stop:l};return N}(),zc={lf:function(){return Date.now()},Ep:function(){return performance.now()}},yb=function(){function a(Y){switch(w){case d.movePinch:var pa=-Y.deltaY;0===I&&g("pinch",-1,.001*pa,null)}Y.deltaY;Y.preventDefault()}function b(Y){if(-1!==I)switch(w){case d.swipe:if(1!==I)break;m();z(Y,A);var pa=A[0]-N[0];l(pa);Y=pa/(20*M.offsetWidth/100);g("swipeMove",Math.min(Math.max(Y,-1),1),Y,null);break;case d.movePinch:if(2===I||3===
I){z(Y,A);pa=A[0]-N[0];var ha=A[1]-N[1];2===I?(X+=Math.sqrt(pa*pa+ha*ha),10>X?(N[0]=A[0],N[1]=A[1]):(za||(za=!0,g("moveStart",null,null,null)),ma[0]=pa,ma[1]=ha,L[0]=pa-F[0],L[1]=ha-F[1],g("move",ma,L,null),F[0]=ma[0],F[1]=ma[1])):3===I&&(Y=r(Y)/oa,g("pinch",Y,Y-Fa,null),Fa=Y)}}}function e(Y){if(-1!==I)switch(w){case d.swipe:if(1!==I)break;m();z(Y,A);Y=A[0]-N[0];var pa=0>Y;(Y=20<100*Math.abs(Y)/M.offsetWidth)&&pa?g("swipeLeft",p,null,null):Y&&!pa&&g("swipeRight",p,null,null);var ha=function(){setTimeout(function(){k();
I=0;g("swipeEnd",null,null,null)},202)};Y?(Y=function(){var ka=(pa?-1:1)*M.width,Sa=(pa?1:-1)*ka/M.width;p.style.transitionDuration=(400).toString()+"ms";p.style.left=(aa[0]+ka).toString()+"px";p.style.top=aa[1].toString()+"px";p.style.transform="rotate( "+Sa.toString()+"rad )";ha()},fa?Y():O=Y):(p.style.transitionDuration=(200).toString()+"ms",p.style.opacity="0",p.style.left=aa[0].toString()+"px",p.style.top=aa[1].toString()+"px",p.style.transform="",ha());I=-1;break;case d.movePinch:if(2===I||
3===I)I===I.move?g("moveEnd",null,null,null):3===I&&g("pinchEnd",null,null,null),I=0}}function f(Y){Y.preventDefault();if(-1!==I)switch(w){case d.swipe:if(0!==I)break;m();I=1;da=setTimeout(function(){k();da=null;1===I&&(I=0,g("swipeEnd",null,null,null))},1E3);q();g("swipeStart",null,null,null);g("swipeGetCanvas",p,R,t);z(Y,N);break;case d.movePinch:0!==I?2!==I||za||void 0===Y.changedTouches&&void 0===Y.touches||(oa=r(Y),20<oa&&(I=3,Fa=1,g("pinchStart",null,null,null))):3!==I&&(za=!1,z(Y,N),F[0]=0,
F[1]=0,I=2,X=0)}}function l(Y){var pa=0>Y;p.style.left=aa[0]+Y+"px";p.style.transformOrigin=pa?P:v;p.style.transform="rotate( "+((pa?1:-1)*Y/M.width).toString()+"rad )"}function q(){fa=!1;var Y=M.getBoundingClientRect();aa[0]=Y.left;aa[1]=Y.top;p.width=Math.round(M.width/4);p.height=Math.round(M.height/4);t.width=p.width;t.height=p.height;p.style.width=M.offsetWidth+"px";p.style.height=M.offsetHeight+"px";p.style.left=aa[0]+"px";p.style.top=aa[1]+"px";setTimeout(x,0)}function x(){R.drawImage(M,0,
0,p.width,p.height);Q.drawImage(p,0,0);fa=!0;document.body.appendChild(p);O&&(O(),O=!1)}function k(){p.style.transitionDuration="0ms";p.style.opacity="1";p.style.transform="";fa&&(document.body.removeChild(p),fa=!1)}function m(){da&&(window.clearTimeout(da),da=null)}function r(Y){H(Y,ja,0);H(Y,ta,1);return Math.sqrt(ja[0]*ja[0]+ta[0]*ta[0])}function z(Y,pa){void 0!==Y.changedTouches||void 0!==Y.touches?H(Y,pa,0):(pa[0]=Y.pageX,pa[1]=Y.pageY)}function H(Y,pa,ha){Y.touches.length>ha?(pa[0]=Y.touches[ha].pageX,
pa[1]=Y.touches[ha].pageY):(pa[0]=Y.changedTouches[ha].pageX,pa[1]=Y.changedTouches[ha].pageY)}function y(){n.forEach(function(Y){M.removeEventListener(Y.type,Y.tb,!1)});return n.splice(0,n.length)}function G(Y){Y.forEach(function(pa){u(pa.type,pa.tb)})}function u(Y,pa){M.removeEventListener(Y,pa,!1);p.removeEventListener(Y,pa,!1);M.addEventListener(Y,pa,!1);p.addEventListener(Y,pa,!1);0===n.filter(function(ha){return ha.type===Y&&ha.tb===pa}).length&&n.push({type:Y,tb:pa})}function g(Y,pa,ha,ka){C[Y].forEach(function(Sa){Sa.tb(pa,
ha,ka)})}function h(Y){return Y[0]+"% "+(100-Y[1]).toString()+"%"}var B=!1,M=null,C={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},n=[],d={idle:0,swipe:1,movePinch:2},w=d.idle,I=0,N=[0,0],A=[0,0],F=[0,0],L=[0,0],p=document.createElement("canvas"),t=document.createElement("canvas"),R=p.getContext("2d"),Q=t.getContext("2d");p.style.position="fixed";p.style.zIndex="800";p.style.cursor="move";p.style.pointerEvents=
"none";p.className="swipeImage";p.setAttribute("draggable",!1);var fa=!1,aa=[0,0],O=null,da=null,v=h([50,100]),P=h([50,0]),D=null,X=0,ma=[0,0],oa=0,za=!1,Fa=1,ja=[0,0],ta=[0,0],Ia={init:function(Y){if(B)Ia.switch_canvas(Y.qa);else return M=Y.qa,u("mousedown",f),u("mouseup",e),u("mouseout",e),u("mousemove",b),u("mousemove",b),u("wheel",a),u("touchstart",f),u("touchend",e),u("touchmove",b),B=!0,Ia},switch_canvas:function(Y){if(!B)Ia.init({qa:Y});else if(M!==Y){var pa=y();M=Y;G(pa);for(var ha in C)for(Y=
C[ha],pa=Y.length-1;0<=pa;--pa)Y[pa].vn&&Y.splice(pa,1)}},get_mode:function(){for(var Y in d)if(d[Y]===w)return Y;return!1},switch_mode:function(Y){B&&"undefined"!==typeof d[Y]&&(Y=d[Y],w!==Y&&(m(),w=Y,I=0))},add_listener:function(Y,pa,ha){C[Y].push({tb:pa,vn:"undefined"===typeof ha?!1:ha});return Ia},remove_listener:function(Y){C[Y].splice(0,C[Y].length);return Ia},animate_swipe:function(Y,pa){D&&(clearInterval(D),D=null);q();var ha=M.width/(pa/1E3)*("left"===Y?-1:1),ka=0,Sa,mb=Date.now();D=setInterval(function(){D&&
(Sa=Date.now(),ka+=(Sa-mb)/1E3*ha,l(ka),mb=Sa,Math.abs(ka)>.75*M.width&&D&&(clearInterval(D),D=null,k()))},16)}};return Ia}();window.CanvasListeners=yb;var T={VERSION:"4.0.1",cd:[],bd:[],Ee:!1,De:!1,Fe:!1,ready:!1,isBusy:!1},$a={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,Ce:10,Be:8E3},Pc={Ic:!0,Ud:"models3D",Td:"materials",xo:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",
ca:"",ua:"",Zc:"",ya:0,fk:20,width:1024,height:1024,li:!0,cn:[2,3.5],Zi:300,$c:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ra:[.2,.2,.3],mc:[[.8,.5],[.8,.5],[1,1]],vo:30,dl:.9,nn:[.3,.65],mn:1,wo:[.01,.035],En:[.003,.007],Hg:[0,.6],Al:.2,ab:[.698111,1.047166,.122169],Ej:[-.1,0,0],ae:[0,-62,8],hn:1.03,Ea:[0,-60,0],Xf:50,zc:.4,hf:73,He:[.02,1],dk:[4,1],Kk:[0,.5],Gn:.15,Dn:1,zn:[1,4.5],Lo:20,zp:!1,Dc:145,xf:-18,vf:20,wf:3,Lc:[-110,0],hc:1,tj:.4,uj:3,je:[0,0,0],ic:[1.1,1],
od:0,Ye:.95,Xe:90,We:50,gd:30,Lb:.05,tf:!0,Qd:!0,Pf:"images/masks/target.jpg",Qf:!1,Pd:[1/255,175/255,236/255,0],Rd:-.001,Of:3.14,Le:0,Ke:"images/masks/burka.png",Ie:Math.PI-Math.PI/4,Ve:Math.PI/4,lg:[.3,.2,.1],Yb:!0,xi:[700,90],Km:[.2,.04],Mo:"images/backgrounds/viewer3D.png",Yg:[0,0,0],Xg:[0,15,60],ze:.3,Uo:50,Qo:Wc?Za:!1,Ro:Wc?Za:!1,To:1E3,Wo:1E3,So:40,Po:[0,0,-400],Ai:.1,Om:.5,Bi:[.5,1.5],Sd:30,Nm:!0},J=Object.assign({},Pc);V.sh=!0;V.th=!0;V.rh=!1;V.Pa=!0;var bb={ce:3.5,Ab:"images/debug/picsou.png",
Rc:45,Mf:.785,Nf:.3925,Od:5,Nd:2,Lf:0,Kf:0,No:"images/backgrounds/bg1.jpg",Oo:"images/backgrounds/bg1_light.jpg",Rj:1,Sj:2};J.fx=[4,50];J.Lc=[-110,0];J.tj=.25;J.uj=3;J.je=[0,-2,20];J.ic=[.95,1];V.Pc=2.1289;V.fg=1;bb.ce=2.5858;bb.Mf=.4388;bb.Nf=.118;bb.Ab="images/debug/hdri2.png";bb.Rc=180;bb.og=.8065;bb.Od=5.3887;bb.Nd=.5351;bb.Lf=-.3019;bb.Kf=0;bb.Rj=3.5288;bb.Sj=6.2168;var Oc={element:null,Dh:null,Ld:!1,ph:null,ha:null,Ng:null,deviceId:-1,Pb:-1,ud:0,Qi:null,ye:-1},Ca=Object.assign({},Oc),gb=null,
Xc=J.cn,Ec=window.devicePixelRatio?window.devicePixelRatio:1;var pc={zl:Math.max(Xc[0],Ec)/Ec,ff:Math.min(Ec,Xc[1])};var eb=null;T.onLoad=function(a){T.ready?a():T.cd.push(a)};T.onHalfLoad=function(a){T.load_model?a():T.bd.push(a)};T.onWebcamAsk=function(a){T.Ee=a};T.onContextLost=function(a){T.De=a};T.onWebcamGet=function(a){T.Fe=a};T.get_onHalfLoadCallstack=function(){return T.bd};T.set_size=function(a,b,e){e=e?pc.ff:1;J.width=a*e;J.height=b*e};T.get_videoDevices=function(a){Jc(a)};T.set_videoDevice=
function(a){Ca.deviceId=a};T.set_videoSizes=function(a,b,e,f,l,q){$a.idealWidth=a;$a.idealHeight=b;$a.minWidth=e;$a.maxWidth=f;$a.minHeight=l;$a.maxHeight=q};T.set_loading=function(a,b,e){a&&(J.Qf=!0,J.Pf=a);"number"===typeof b&&(a=new Wb(b),J.Pd=[a.r,a.X,a.b,0]);"number"===typeof e&&(J.Rd=e)};T.set_settings=function(a,b,e){a&&Object.assign(J,a);b&&Object.assign($a,b);e&&Object.assign(bb,e)};T.get_size=function(){return{width:J.width,height:J.height}};T.get_cv=function(){return jb.ub()};T.set_NNCPath=
function(a){J.Zc=a};T.set_materialsPath=function(a){J.Td=a};T.set_modelsPath=function(a){J.Ud=a};T.destroy=function(){return eb?eb.v():Promise.resolve()};T.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(bb.Od=a.lightDirFactor);0<=a.lightAmbFactor&&(bb.Nd=a.lightAmbFactor);0<=a.screenLuminosity&&(bb.ce=a.screenLuminosity);0<=a.screenWidthAngle&&(bb.Rc=a.screenWidthAngle);a.screenTextureURL&&
(bb.Ab=a.screenTextureURL);T.ready&&(eb.Aj(),xa.Ia.hh(Ca.ha))};T.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null},a);J.Ic=b.isRequestCamera;T.set_size(b.width,b.height,b.isApplyOverSampling);T.update_lightSettings(a);b.modelsPath&&(J.Ud=b.modelsPath);b.materialsPath&&
(J.Td=b.materialsPath);b.materialTextureBasePath&&(V.Di=b.materialTextureBasePath);b.NNCPath&&(J.Zc=b.NNCPath);J.scanOverlapFactors=b.scanOverlapFactors||J.scanOverlapFactors;J.scanNScaleLevels=b.scanNScaleLevels||J.scanNScaleLevels;J.scanScale0Factor=b.scanScale0Factor||J.scanScale0Factor;J.li=b.isMirror;return new Promise(function(e,f){T.onHalfLoad(e);T.init(b.basePath,function(){},f,b.cv)})};T.init=function(a,b,e,f){eb=bd();T.qb=e?function(l,q){e(l,q);T.qb=!1}:function(){};T.bp=eb;a&&(J.ca=a);
b&&T.cd.push(b);eb.Aj();a=eb.Ul();return jb.m({Ue:"jeefitCanvas",qa:f,width:a.width,height:a.height,debug:!1,$f:function(){T.De&&T.De()},premultipliedAlpha:!0})?J.Ic?ed():fd():(T.qb&&T.qb("GL_INCOMPATIBLE","Cannot init Context"),!1)};window.JEELIZVTO=T;var Lc=function(){function a(){Ba.ba();c.viewport(0,0,1,1);Z.set("s74");f.h(0);W.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,q);b(0<q[0])}var b=null,e=!1,f=null,l=!1,q=null,x={m:function(k){if(l)return!1;f=k;Z.sc([{id:"s74",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Z.j("s74",[{type:"1i",name:"u41",value:0}]);q=new Uint8Array(4);return l=!0},start:function(k,m){x.stop();b=m;e=window.setInterval(a,k)},stop:function(){e&&(window.clearInterval(a),e=!1)}};return x}(),Fc={};Wb.prototype={constructor:Wb,r:1,X:1,b:1,set:function(a){a instanceof Wb?this.L(a):"number"===typeof a?Rc(this,a):"string"===typeof a&&gd(this,a);return this},Jn:function(){function a(b,e,f){0>f&&(f+=1);1<f&&--f;return f<1/6?b+6*(e-b)*f:.5>f?e:f<2/3?b+6*(e-b)*(2/3-
f):b}return function(b,e,f){b=Fc.Math.Ap(b,1);e=Fc.Math.Pe(e,0,1);f=Fc.Math.Pe(f,0,1);0===e?this.r=this.X=this.b=f:(e=.5>=f?f*(1+e):f+e-f*e,f=2*f-e,this.r=a(f,e,b+1/3),this.X=a(f,e,b),this.b=a(f,e,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},L:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ca:function(a){this.r*=
a;this.X*=a;this.b*=a;return this},sb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.X=a[b+1];this.b=a[b+2];return this}};var hd={};sc.prototype={constructor:sc,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get w(){return this.S},set w(a){this.S=a},set:function(a,b,e,f){this.C=a;this.D=b;this.F=e;this.S=f;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.S)},L:function(a){this.C=a.x;
this.D=a.y;this.F=a.z;this.S=a.w;return this},inverse:function(){this.C*=-1;this.D*=-1;this.F*=-1;this.normalize();return this},qd:function(a){return this.C*a.C+this.D*a.D+this.F*a.F+this.S*a.S},Jf:function(){return this.C*this.C+this.D*this.D+this.F*this.F+this.S*this.S},length:function(){return Math.sqrt(this.C*this.C+this.D*this.D+this.F*this.F+this.S*this.S)},normalize:function(){var a=this.length();0===a?(this.F=this.D=this.C=0,this.S=1):(a=1/a,this.C*=a,this.D*=a,this.F*=a,this.S*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),Sc(this,a,b)):Sc(this,this,a)},sb:function(a,b){void 0===b&&(b=0);this.C=a[b];this.D=a[b+1];this.F=a[b+2];this.S=a[b+3];return this}};Xb.prototype={constructor:Xb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},dj:function(a){this.x=a;
return this},ej:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},L:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.dd(a,b);this.x+=a.x;this.y+=a.y;return this},dd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},af:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},qd:function(a){return this.x*a.x+this.y*a.y},Jf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.af(this.length())},
sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Va.prototype={constructor:Va,set:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},dj:function(a){this.x=a;return this},ej:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},L:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.dd(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},dd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},af:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},qd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Jf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.af(this.length())},sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};Yb.Uj="XYZ";Yb.prototype={constructor:Yb,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get order(){return this.Ra},set order(a){this.Ra=a},set:function(a,b,e,f){this.C=
a;this.D=b;this.F=e;this.Ra=f||this.Ra;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.Ra)},L:function(a){this.C=a.C;this.D=a.D;this.F=a.F;this.Ra=a.Ra;return this},sb:function(a){this.C=a[0];this.D=a[1];this.F=a[2];void 0!==a[3]&&(this.Ra=a[3]);return this}};Bc.prototype={constructor:Bc,set:function(a,b){this.min.L(a);this.max.L(b);return this},clone:function(){return(new this.constructor).L(this)},L:function(a){this.min.L(a.min);this.max.L(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Va).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Va).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};Zb.prototype={constructor:Zb,set:function(a,b,e,f,l,q,x,k,m,r,z,H,y,G,u,g){var h=this.elements;h[0]=a;h[4]=b;
h[8]=e;h[12]=f;h[1]=l;h[5]=q;h[9]=x;h[13]=k;h[2]=m;h[6]=r;h[10]=z;h[14]=H;h[3]=y;h[7]=G;h[11]=u;h[15]=g;return this},clone:function(){return(new Zb).sb(this.elements)},L:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Uc(this,a,b)):Uc(this,this,a)},Ca:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,e=a.x,f=a.y;a=a.z;b[0]*=e;b[4]*=f;b[8]*=a;b[1]*=e;b[5]*=f;b[9]*=a;b[2]*=e;b[6]*=f;b[10]*=a;b[3]*=e;b[7]*=f;b[11]*=a;return this},sb:function(a){this.elements.set(a);return this}};Cc.prototype={constructor:Cc,
clone:function(){return(new this.constructor).L(this)},L:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Da.L(a.Da);this.color.L(a.color);this.Zb=a.Zb;for(var b=0,e=a.xe.length;b<e;b++)this.xe[b]=a.xe[b].clone();b=0;for(e=a.Vg.length;b<e;b++)this.Vg[b]=a.Vg[b].clone();return this}};var E=function(){function a(n,d,w){d=n.createShader(d);n.shaderSource(d,w);n.compileShader(d);return n.getShaderParameter(d,n.COMPILE_STATUS)?d:!1}function b(n,d){ea.la()&&(d.g=d.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
d.sf=a(n,n.VERTEX_SHADER,d.u,d.name+" VERTEX");d.rf=a(n,n.FRAGMENT_SHADER,d.g,d.name+" FRAGMENT");var w=n.createProgram();n.attachShader(w,d.sf);n.attachShader(w,d.rf);n.linkProgram(w);return w}function e(n){n.u="#version 300 es\n"+n.u.replace(/varying/g,"out");n.g="#version 300 es\n"+n.g.replace(/varying/g,"in");n.u=n.u.replace(/texture2D\(/g,"texture(");n.g=n.g.replace(/texture2D\(/g,"texture(");n.da||(n.g=n.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),n.g=n.g.replace(/gl_FragColor/g,
"FragColor"));var d=0,w=[];n.u=n.u.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(I,N,A){var F="";A.split(",").forEach(function(L){L=L.trim();F+="layout(location = "+d+") in "+N+" "+L+";\n";w.push(L);++d});return F});n.Zj=w}function f(n){return["float","sampler2D","int"].map(function(d){return"precision "+n+" "+d+";\n"}).join("")}function l(n,d){if(d.ei)return!1;var w=ea.la();V.Vp||w||n.enableVertexAttribArray(0);void 0===d.da&&(d.da=!1);d.da&&(d.ad=w?3:2);d.id=M++;void 0===d.ad&&
(d.ad=2);void 0===d.precision&&(d.precision="highp");d.da&&(d.g=(ea.la()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+d.g);void 0===d.u&&(d.u="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var I=f(d.precision);
d.g=I+d.g;d.u=I+d.u;w&&3<=d.ad&&e(d);d.Fa&&d.Fa.forEach(function(N){d.u=d.u.replace(N.search,N.replace);d.g=d.g.replace(N.search,N.replace)});d.oa=b(n,d);d.A={};d.i.forEach(function(N){d.A[N]=n.getUniformLocation(d.oa,N)});d.attributes={};d.va=[];d.Ug=0;void 0===d.I&&(d.I=["a0"]);void 0===d.R&&(d.R=[2]);d.I.forEach(function(N,A){var F=w&&3<=d.ad?d.Zj.indexOf(N):n.getAttribLocation(d.oa,N);d.attributes[N]=F;d.va.push(F);d.Ug+=4*d.R[A]});d.set=function(){h!==d.id&&(-1!==h&&B.K(),h=d.id,B=d,n.useProgram(d.oa),
d.va.forEach(function(N){0!==N&&n.enableVertexAttribArray(N)}))};d.K=function(){h=-1;d.va.forEach(function(N){0!==N&&n.disableVertexAttribArray(N)})};d.ei=!0}function q(n,d){l(n,d);d.set();h=-1;return d}function x(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function k(){C.j("s105",[{type:"1i",name:"u1",value:0}]);C.j("s106",[{type:"1i",name:"u153",value:0}]);C.j("s107",[{type:"1i",name:"u74",value:0}])}function m(){var n=
"u41 u143 u144 u145 u146 u42 u78".split(" ").concat(G,u);g.s108={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-u145)*u146;k.x+=A*sign(a0.x)*(1.-u85);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u149,u150,a0.z);}",
i:["u149","u150"].concat(n),I:["a0"],precision:"highp"};g.s109={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u147"].concat(H,n),I:["a0","a1"],R:[3,2],precision:"lowp"};g.s110={name:"_",g:"uniform vec3 u147;void main(){gl_FragColor=vec4(u147,0.);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u147"].concat(n),R:[3],precision:"lowp"};g.s111={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 h=s(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 k=u80/t;vec3 l=a0;float z=max(0.,-a0.z-u145)*u146;l.x+=z*sign(a0.x)*(1.-u85);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u78"].concat(n),I:["a0","a2"],precision:"highp"};g.s112={name:"_",g:"uniform sampler2D u153;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u153,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-u145)*u146;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u78","u153"].concat(n),I:["a3","a0","a2","a1"],R:[4,3,3,2],precision:"highp"};g.s113={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u111","u148"].concat(n),precision:"lowp"};g.s114={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u111","u148"].concat(y,n),I:["a0","a1"],R:[3,2],precision:"lowp"};n=["u136","u124","u137"];g.s115={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=1.;}",i:n,precision:"highp"};g.s116={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a2,0.);gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:n,I:["a0","a2"],precision:"highp"};g.s106={name:"_",g:"uniform sampler2D u153;uniform vec3 u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u154),c=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u137*vec4(a2,0.),a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u153","u154"].concat(n),I:["a0","a2","a1","a3"],precision:"highp"};g.s105={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u136*u124*u137*vec4(a0,1.)+f,vv0=a1;}",i:["u147"].concat(H,n),I:["a0","a1"],
Fa:[{search:"0.0005",replace:Ga.fa()?"0.0005":"0.0"}],precision:"lowp"};g.s117={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;void main(){gl_Position=u136*u124*u137*vec4(a0,1.);}",i:["u111"].concat(n),precision:"highp"};g.s107={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;void main(){gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a1;}",i:["u111"].concat(y,n),I:["a0","a1"],R:[3,2],precision:"highp"}}function r(){for(var n in g)l(c,g[n])}var z=!1,H=["u1","u73"],y=["u74","u75"],G="u76 u77 u78 u79 u80 u81".split(" "),u="u82 u83 u84 u85 u86 u87".split(" "),g={},h=-1,B=null,M=0,C={ma:function(n,d){g[n]=d;z&&l(c,g[n])},kq:function(n,d){g[n]=d;d.ei=!1;l(c,g[n])},Xb:function(){return z},m:function(){g.s0=
x();g.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};g.s75={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};g.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12",
"u13"],precision:"highp"};g.s77={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};g.s12={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u88,vv0*u89),c=texture2D(u1,vv0*u89);float a=smoothstep(u90,0.,vv0.y);a+=smoothstep(1.-u90,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u91*f);}",
i:["u1","u89","u88","u90","u91"]};g.s78={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u89;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u88,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u90,0.,vv0.y);b+=smoothstep(1.-u90,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u91*h));gl_FragColor=k;}",
i:["u1","u89","u88","u90","u91"],precision:"highp"};g.s79={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};g.s80={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};g.s81={name:"_",g:"uniform sampler2D u1,u92,u41;uniform vec2 u14,u93;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u93.x+pow(c,2.)*(u93.y-u93.x);vec3 j=mix(b/5.,texture2D(u92,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u92","u14","u41","u93"],precision:"lowp"};g.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};g.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};g.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};g.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};g.s84={name:"_",g:"uniform sampler2D u94,u95;uniform float u96,u97;varying vec2 vv0;void main(){vec3 a=texture2D(u95,vv0).rgb,b=texture2D(u94,vv0).rgb;gl_FragColor=vec4(b*u97+u96*a,1.);}",
i:["u94","u95","u96","u97"],precision:"highp"};g.s85={name:"_",g:"uniform sampler2D u98,u99;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u99,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u98,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u98","u99","u91"],precision:"lowp",Fa:[{search:"8888",replace:V.rm[ea.V()]}]};g.s86={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};g.s87={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};g.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};g.s89={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:"lowp"};g.s90={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};g.s91={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u88,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u88"],precision:"highp"};g.s92={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u88,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u88"],precision:"highp"};g.s93=
{name:"_",g:"uniform sampler2D u1,u100,u2,u101;uniform vec4 u102;uniform vec2 u103;uniform float u104,u105,u106,u107;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u100,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u101,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u103*.5+h).r,l=atan(a.x,a.y),m=-(mod(u104,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u105,b),c=.5+u107*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u102*k;gl_FragColor=mix(d,o,j*u106);}",
i:"u1 u2 u101 u100 u102 u104 u105 u106 u103 u107".split(" "),precision:"lowp"};var n="u108 u109 u110 u111 u98 u112 u3 u113 u100 u114 u115 u116 u117 u118 u14".split(" ");V.ea&&(g.s94={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u119,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u120,u115,u117,u114;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u114;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u108,vv0);vec3 k=texture2D(u100,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u113;vec4 b=texture2D(u111,vv0),m=texture2D(u109,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u110,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u112,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u115-u117,u115+u117,I);h=mix(l(texture2D(u98,H)),u116,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u120*texture2D(u119,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:n.concat(["u119","u120"]),precision:"highp"});g.s95={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u115,u117,u118,u121,u122,u114,u123;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u114;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u108,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u100,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u108,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u113;vec4 c=texture2D(u111,vv0),s=texture2D(u109,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u110,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u121*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u109,v).rgb,R=texture2D(u109,w).rgb,S=texture2D(u109,x).rgb,T=texture2D(u109,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u112,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u115-u117,u115+u117,fa);vec3 ha=r(texture2D(u98,ea));A=mix(ha,u116,ga_*u118);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u121),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u122,q)*m);float ma=mix(la,q,u123);gl_FragColor=vec4(f,ma);}",
i:n.concat(["u123","u121","u122"]),precision:"highp"};V.ea&&(g.s96={name:"_",g:"uniform sampler2D u108,u109;uniform mat4 u124;uniform vec2 u125,u14,u126;uniform float u127,u128,u129,u130,u131,u132,u133,u134,u120;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u126;vec4 pos=texture2D(u108,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u127),s=sin(u127);vec3 no0=texture2D(u109,uvt).rgb;float zv=(u124*vec4(co0,1.)).z;vec3 co;vec2 scale=u125/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u130,u131,1.),ao=dzFactor*clamp(u129*omegaMin*u132,0.,u120);gl_FragColor=vec4(ao,ao,ao,u128);}",
i:"u108 u109 u129 u128 u127 u14 u135 u130 u131 u132 u133 u134 u124 u125 u120".split(" "),Fa:[{search:"8888.8",replace:V.uk[ea.V()].toFixed(1)}],precision:"lowp"},g.s97={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});g.s98={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;void main(){vec4 a=u136*u124*u137*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u136","u124","u137"],precision:"lowp"};g.s99={name:"_",g:"uniform sampler2D u138,u112,u99;uniform mat4 u136,u139;uniform vec2 u140;uniform float u141;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u140*(z-f),0.),B=vec3(u139*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u99,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u136*u,i=h.xyz/h.w;if(texture2D(u138,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u139*vec4(g,0.)),t+=texture2D(u112,y(s));}gl_FragColor=vec4(u141*t.rgb/n,1.);}",
i:"u138 u112 u99 u136 u139 u140 u141".split(" "),Fa:[{search:"8888.8",replace:V.po[ea.V()].toFixed(1)},{search:"9999.9",replace:V.qo[ea.V()].toFixed(1)}],precision:"lowp"};g.s100={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};g.s101={name:"_",g:"uniform sampler2D u1,u142;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124;varying vec2 vv0;void main(){vec4 a=u136*u124*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u136","u124","u1"],I:["a0","a1"],precision:"lowp"};if(ea.aa()){n="u41 u143 u144 u145 u146 u42 u111 u147 u148 u13 u149 u150 u78".split(" ").concat(G,u);ea.pi()||(g.s102={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",da:!0});g.s103={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],da:!0};g.s104NNGLcolor={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-u145)*u146;l.x+=C*sign(a0.x)*(1.-u85);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u149,u150,a0.z),vv0=m,vv3=a0.y;}",
i:n,I:["a0","a2"],R:[3,3],da:!0};g.s104NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(H),I:["a0","a2","a1"],R:[3,3,2],da:!0};g.s104NNGLtextureNormalMap={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform sampler2D u1,u153;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(H,["u153"]),I:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};g.s104NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(H,y),I:["a0","a2","a1"],R:[3,3,2],da:!0};g.s104NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(H,["u153"],y),I:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};n="u136 u124 u137 u111 u147 u148 u13".split(" ");g.s104color={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:n,I:["a0","a2"],da:!0};g.s104={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(H),I:["a0","a2","a1"],da:!0};var d=["u153","u154"];g.s104NormalMap={name:"_",g:"uniform sampler2D u1,u153;uniform vec4 u111,u13;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(H,d),I:["a0","a2","a1","a3"],da:!0};g.s104ParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(H,y),I:["a0","a2","a1"],da:!0};g.s104NormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(H,d,y),I:["a0","a2","a1","a3"],da:!0}}else m();r();n=[{type:"1i",name:"u1",value:0}];C.j("s0",n);C.j("s1",n);C.j("s76",[{type:"1i",name:"u12",value:1}].concat(n));C.j("s77",[{type:"1i",name:"u12",
value:1}].concat(n));C.j("s12",[{type:"1i",name:"u88",value:1}].concat(n));C.j("s78",[{type:"1i",name:"u88",value:1}].concat(n));C.j("s79",n);C.j("s80",n);C.j("s81",[{type:"1i",name:"u92",value:1},{type:"1i",name:"u41",value:2}].concat(n));C.j("s82",n);C.j("s83",n);C.j("s13",n);C.j("s84",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);C.j("s85",[{type:"1i",name:"u98",value:0},{type:"1i",name:"u99",value:1}]);C.j("s86",n);C.j("s87",n);C.j("s88",n);C.j("s89",n);C.j("s90",n);C.j("s91",
[{type:"1i",name:"u88",value:1}].concat(n));C.j("s92",[{type:"1i",name:"u88",value:1}].concat(n));V.ea&&(C.j("s96",[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},{type:"1f",name:"u130",value:V.hk},{type:"1f",name:"u131",value:V.ik},{type:"1f",name:"u132",value:V.vk},{type:"1f",name:"u133",value:V.lk},{type:"1f",name:"u134",value:V.mk},{type:"1f",name:"u129",value:1},{type:"1f",name:"u120",value:1}]),C.j("s97",n));d=[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},
{type:"1i",name:"u110",value:2},{type:"1i",name:"u98",value:3},{type:"1i",name:"u112",value:4},{type:"1i",name:"u111",value:6},{type:"1i",name:"u100",value:7},{type:"1f",name:"u118",value:0},{type:"1f",name:"u115",value:0},{type:"1f",name:"u117",value:0}];V.ea&&C.j("s94",d.concat([{type:"1f",name:"u120",value:V.kk[ea.V()]},{type:"1i",name:"u119",value:5}]));C.j("s95",d.concat([{type:"1f",name:"u121",value:V.Pc},{type:"1f",name:"u122",value:V.fg},{type:"1f",name:"u123",value:0}]));C.j("s99",[{type:"1i",
name:"u138",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u99",value:2},{type:"1f",name:"u141",value:V.oo}]);C.j("s100",n);C.j("s101",n);C.j("s93",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u101",value:2},{type:"1i",name:"u100",value:3},{type:"1f",name:"u106",value:1},{type:"2f",name:"u103",value:[0,0]}].concat(n));ea.aa()?(C.j("s104",n),C.j("s104NormalMap",[{type:"1i",name:"u153",value:1}].concat(n)),C.j("s104ParamsMap",[{type:"1i",name:"u74",value:1}].concat(n)),C.j("s104NormalParamsMap",
[{type:"1i",name:"u153",value:1},{type:"1i",name:"u74",value:2}].concat(n))):k();z=!0},$n:function(){m();r();k()},Bd:function(){return B.id},Dd:function(){return G},Ed:function(){return u},set:function(n){wb.rj(C);g[n].set()},Bb:function(n){return q(n,x())},fe:function(n){return q(n,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},co:function(n){return q(n,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",da:!0})},K:function(){-1!==h&&B.K()},he:function(){var n=0;B.va.forEach(function(d,w){w=B.R[w];c.vertexAttribPointer(d,w,c.FLOAT,!1,B.Ug,n);n+=4*w})},dc:function(){C.ec(c)},ec:function(n){n.vertexAttribPointer(B.va[0],2,n.FLOAT,!1,8,0)},pq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,12,0)},Qa:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0)},jj:function(){c.vertexAttribPointer(B.attributes.a2,
3,c.FLOAT,!1,32,12)},kj:function(){c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},Sc:function(){c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},qq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,20,12)},Qn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},Rn:function(){c.vertexAttribPointer(B.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12)},Sn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},de:function(){c.vertexAttribPointer(B.attributes.a3,4,c.FLOAT,!1,16,0)},ge:function(n,d){c.uniform1i(B.A[n],d)},G:function(n,d){c.uniform1f(B.A[n],d)},N:function(n,d,w){c.uniform2f(B.A[n],d,w)},wg:function(n,d){c.uniform2fv(B.A[n],d)},xg:function(n,d,w,I){c.uniform3f(B.A[n],d,w,I)},yg:function(n,
d){c.uniform3fv(B.A[n],d)},xa:function(n,d){c.uniform4fv(B.A[n],d)},io:function(n,d){c.uniformMatrix2fv(B.A[n],!1,d)},jo:function(n,d){c.uniformMatrix3fv(B.A[n],!1,d)},Tc:function(n,d){c.uniformMatrix4fv(B.A[n],!1,d)},j:function(n,d){C.set(n);d.forEach(function(w){switch(w.type){case "4f":c.uniform4fv(B.A[w.name],w.value);break;case "3f":c.uniform3fv(B.A[w.name],w.value);break;case "2f":c.uniform2fv(B.A[w.name],w.value);break;case "1f":c.uniform1f(B.A[w.name],w.value);break;case "1i":c.uniform1i(B.A[w.name],
w.value);break;case "mat2":c.uniformMatrix2fv(B.A[w.name],!1,w.value);break;case "mat4":c.uniformMatrix4fv(B.A[w.name],!1,w.value)}})},H:function(){for(var n in g){var d=g[n];c.detachShader(d.oa,d.sf);c.detachShader(d.oa,d.rf);c.deleteShader(d.sf);c.deleteShader(d.rf);c.deleteProgram(d.oa)}},v:function(){c.disableVertexAttribArray(0);C.K();C.H();M=0;z=!1;B=null;h=-1}};return C}(),Wa=function(){var a={},b=[],e=!1,f=0,l=0,q=-1,x=-1,k=-1,m=1,r=null,z=!1,H=null,y=!1,G=!1,u=!1,g=!1,h=!1,B=!1,M=!1,C=!1,
n=null,d=null,w=-1,I=-1,N=null,A=-1,F,L=null,p=null,t=null,R=null,Q=null,fa=null,aa=null,O=[{type:"1f",name:"u85",value:0},{type:"1f",name:"u149",value:0},{type:"1f",name:"u150",value:0},{type:"1f",name:"u80",value:1},{type:"1f",name:"u77",value:0},{type:"1f",name:"u87",value:1}],da={m:function(v,P){a.Ag=v;ea.Qg();Gc.ef();Rb.ef(v.ze);q=v.hf;x=v.Vo;k=v.Xf;m=v.ye;var D=[{type:"1f",name:"u80",value:q},{type:"1f",name:"u77",value:k},{type:"1f",name:"u81",value:v.Hn},{type:"mat4",name:"u76",value:v.ln},
{type:"2f",name:"u42",value:v.Tj}];v.Og=D;var X=[{type:"3f",name:"u82",value:[0,0,0]},{type:"3f",name:"u83",value:v.Yg},{type:"3f",name:"u84",value:v.Xg},{type:"1f",name:"u85",value:0},{type:"1f",name:"u86",value:v.ze},{type:"1f",name:"u87",value:1}];v.Kj=X;da.nm(v,P);e||void 0!==v.Ea||(v.Ea=[0,0,120]);C=M=J.tf;if(!e&&M){P=1*ea.wb();var ma=1*ea.vb(),oa={isLinear:!0,isPot:!1,width:P,height:ma};n=ba.instance(oa);d=ba.instance(oa);w=1/P;I=1/ma}D=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",
value:v.Ea},{type:"1f",name:"u145",value:v.gd},{type:"1f",name:"u146",value:v.Lb}].concat(D,X);r=v.Lc;X=[{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}];ea.aa()?(P=[{type:"1i",name:"u1",value:0}],ma=[{type:"1i",name:"u153",value:2}],E.j("s104NNGLcolor",D.concat(X)),E.j("s104NNGLtexture",[].concat(P,D,X)),E.j("s104NNGLtextureNormalMap",[].concat(P,ma,D,X)),E.j("s104NNGLtextureParamsMap",[{type:"1i",name:"u74",value:2}].concat(P,D,X)),E.j("s104NNGLtextureNormalParamsMap",[{type:"1i",
name:"u74",value:3}].concat(P,ma,D,X))):(E.j("s108",D.concat(X)),E.j("s109",[{type:"1i",name:"u1",value:0}].concat(D)),E.j("s110",D),E.j("s111",D),E.j("s112",D.concat([{type:"1i",name:"u153",value:0}])),E.j("s113",D),E.j("s114",D.concat([{type:"1i",name:"u74",value:0}])));E.j("s81",[{type:"2f",name:"u93",value:v.Hg}]);E.j(V.ea?"s94":"s95",[{type:"1f",name:"u115",value:v.Ie},{type:"3f",name:"u116",value:v.lg},{type:"1f",name:"u117",value:v.Ve},{type:"1f",name:"u118",value:1},{type:"3f",name:"u113",
value:v.Xj}]);if(F=v.Qd)N=v.Mm,A=v.Rd,E.j("s93",[{type:"4f",name:"u102",value:v.Pd},{type:"1f",name:"u105",value:v.Of},{type:"2f",name:"u103",value:v.Lm},{type:"1f",name:"u107",value:Math.sign(A)}]);b.forEach(function(za){za.fj(v)});e=!0},bc:function(v){G&&xa.ia.bc(v);g&&xa.sa.bc(v)},nm:function(v,P){void 0!==xa.ia&&v.hc&&ea.aa()&&(xa.ia.m(v),y=!0,P.push(function(D){xa.ia.bc(D);G=!u}));void 0!==xa.sa&&v.od&&(xa.sa.m(v),P.push(function(D){xa.sa.bc(D);g=!0}));void 0!==xa.oc&&v.Le&&(xa.oc.m(v),B=h=!0);
void 0!==xa.pb&&(xa.pb.m(v),H=xa.pb.pm({width:v.Dc,height:2*v.Dc,depth:1.5*v.Dc,vl:-v.xf,Ua:v.vf,$k:v.wf}),z=!0)},fo:function(v,P,D,X){v&&(aa=v,y&&xa.ia.cc(v),g&&xa.sa.cc(v),h&&xa.oc.cc(v),b.forEach(function(ma){ma.cc(v)}));D&&(R=D);X&&(Q=X)},Cb:function(v){ea.aa()?(E.j("s104NNGLcolor",v),E.j("s104NNGLtexture",v),E.j("s104NNGLtextureNormalMap",v),E.j("s104NNGLtextureParamsMap",v),E.j("s104NNGLtextureNormalParamsMap",v)):(E.j("s108",v),E.j("s109",v),E.j("s110",v),E.j("s111",v),E.j("s112",v),E.j("s113",
v),E.j("s114",v))},eb:function(v,P,D){var X=[v[0]+P[0],v[1]+P[1],v[2]+P[2]];X=[X[0]+D[0],X[1]+D[1],X[2]+D[2]];a.ae=X;a.Um=P;a.Jo=D;da.Cb([{type:"3f",name:"u143",value:X}]);ea.aa()&&(y&&xa.ia.eb(v,P,D),g&&xa.sa.eb(X));z&&xa.pb.eb(v,D)},fb:function(v,P,D){var X=v*P*D;a.Vm=P;a.Ko=D;a.hm=v;da.Cb([{type:"1f",name:"u144",value:X}]);ea.aa()&&(y&&xa.ia.fb(v*P,D),g&&xa.sa.fb(X));z&&xa.pb.fb(v,D)},$i:function(){da.eb(a.ae,a.Um,a.Jo);da.fb(a.hm,a.Vm,a.Ko);da.pj(a.rx);da.m(a.Ag);da.lj(a.Dk,a.Lb)},pj:function(v){a.rx=
v;da.Cb([{type:"1f",name:"u79",value:v}]);ea.aa()&&(y&&xa.ia.ug(v),g&&xa.sa.ug(v))},lj:function(v,P){a.Dk=v;a.Lb=P;da.Cb([{type:"1f",name:"u145",value:v},{type:"1f",name:"u146",value:P}])},Yn:function(v){r=v;0===f&&da.Cb([{type:"1f",name:"u149",value:r[0]},{type:"1f",name:"u150",value:r[1]}])},cb:function(v){function P(){z&&xa.pb.toggle(!1);F&&E.j("s93",[{type:"1f",name:"u106",value:0}])}0>=v?(l=0,0!==f&&(f=0,Rb.Bn(),z&&xa.pb.toggle(!0),F&&E.j("s93",[{type:"1f",name:"u106",value:1}]))):1<=v?(l=1,
1!==f&&(f=1,Rb.xj(!0)),P()):(l=v,2!==f&&(Rb.xj(!1),f=2,P()));E.j("s95",[{type:"1f",name:"u118",value:1-v}]);O[0].value=l;O[1].value=r[0]*(1-v)+-300*v;O[2].value=r[1]*(1-v)+-300*v;O[3].value=q*(1-v)+v*x;O[4].value=k*(1-v);O[5].value=1-v+v*m;G&&xa.ia.vg(l,O);g&&xa.sa.vg(l,O);da.Cb(O)},sl:function(v){aa.h(1);v.forEach(function(P){P.nl()});z&&H.U()},Fm:function(){return 1===f},Je:function(v){aa.Ka(v)},bk:function(v){b.push(v)},Fg:function(v){u=!v;G=v&&y},Eg:function(v){B=v&&h},rg:function(v){g&&ea.aa()&&
xa.sa.ko(v)},Db:function(v){ea.aa()&&(y&&xa.ia.Db(v),g&&xa.sa.Db(v))},pl:function(v,P){if(!C)return!1;n.M();v.h(0);E.set("s86");E.N("u14",0,I);W.l(!1,!1);d.o();n.h(0);E.N("u14",w,0);W.l(!1,!1);E.set("s87");P.M();d.h(0);W.l(!1,!1);return!0},wj:function(v){C=v&&M},resize:function(v,P,D){M&&(v*=D,P*=D,n.resize(v,P),d.resize(v,P),w=1/v,I=1/P)},pg:function(v,P){var D=v.O(),X=v.Y(),ma={width:D,height:X,isPot:!1};y&&(t&&t.remove(),t=ba.instance(ma));L&&L.remove();L=Ba.instance({width:D,height:X});h||g?(xa.oc.qg(D,
X),p&&p.remove(),p=ba.instance(ma)):p=v;y&&xa.ia.qg(D,X);P&&(fa&&fa.remove(),fa=ba.instance(ma))},ll:function(v){var P=null;switch(f){case 0:P=v;break;case 2:L.bind(!1,!0);fa.o();E.set("s76");E.G("u13",l);v.h(1);Q.h(0);W.l(!0,!0);P=fa;break;case 1:P=Q}if(!G||1===f||!ea.aa())return P;P.Ka(0);B&&xa.oc.U(P,p);L.bind(!1,!B);g&&(B?P.h(0):(p.o(),E.set("s1"),W.l(!0,!0)),xa.sa.U());p.h(0);R.Ka(2);xa.ia.U();t.o();E.set("s1");B||g?p.h(0):P.h(0);W.l(!0,!V.ea);xa.ia.add();return t},ck:function(v,P){if(!G)return v;
R.Ka(2);xa.ia.U();Ba.$();E.set("s75");P.M();xa.ia.bm().h(0);W.l(!0,!0);E.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);v.h(0);W.l(!1,!1);c.disable(c.BLEND);return P},ql:function(v,P){if(!F)return!1;E.set("s93");E.G("u104",v*A);N.h(1);Wa.Je(2);p?p.h(3):P.h(3);return!0},v:function(){e=!1;l=f=0;k=x=q=-1;m=1;r=null;z=!1;H=null;B=h=g=u=G=y=!1;xa.ia.v();xa.Ia.v()}};return da}(),ya=function(){function a(){k.forEach(function(D){D.tl(t)})}function b(){k.forEach(function(D){D.sd(t)})}
function e(){k.forEach(function(D){D.rl(t)})}function f(){k.forEach(function(D){D.td(t)})}function l(){t?Wa.sl(k):k.forEach(function(D){D.ol()})}function q(){F&&clearTimeout(F);F=setTimeout(function(){d=!1;F=null},16)}function x(D){D()}var k=[],m=[],r={ga_:!1,position:!1,yb:!1},z=[],H=[],y=null,G=0,u=null,g=null,h=null,B=null,M=!1,C=!1,n=!1,d=!1,w=!1,I=!1,N=null,A=null,F=null,L=null,p=!1,t=!1,R=!1,Q=!1,fa=!0,aa=!1,O=!1,da=null,v=null,P={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);
V.Yk?(c.enable(c.CULL_FACE),c.frontFace("CCW"===V.Zk?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);P.qh();var D={isPot:!1,isLinear:!1,width:ea.wb(),height:ea.vb(),J:4,isFloat:!1};u=ba.instance(D);D=Object.assign({},D,{isLinear:!0,width:ea.O(),height:ea.Y()});g=ba.instance(D);h=ba.instance(D);V.Pa&&(D=Object.assign({},D,{isLinear:!1}),B=ba.instance(D));I=Ga.fa();V.Pa||(y=jc.instance({Kb:V.Kb,uc:V.uc,vc:V.vc,tc:V.tc}));M=!0},qh:function(){ea.aa()?r=uc.instance({}):(r.ga_=Jb.instance({fc:V.Pa?
!1:"s105",isFloat:!1,Tb:!0,clearColor:[0,0,0,0],J:4}),r.position=Jb.instance({fc:V.Pa?!1:"s115",isFloat:!0,Tb:!0,clearColor:[0,0,0,0],J:4}),r.yb=Jb.instance({fc:!1,isFloat:!0,Tb:!0,clearColor:[0,0,0,0],J:4}),r.Mc=Jb.instance({fc:!1,isFloat:!1,Tb:!0,clearColor:[0,0,0,0],J:4}))},Ql:function(){return y},pa:function(D){y=D},Hq:function(){},Db:function(D){Wa.Db(D)},fj:function(D){Wa.m(D,z);ea.aa()||(r.ga_.qj(!1),r.position.qj("s108"));t=Q=!0},mq:function(){Wa.$i()},cp:function(D){Wa.bk(D)},Mn:function(D,
X,ma){Wa.eb(D,X,ma)},Nn:function(D,X,ma){Wa.fb(D,X,ma)},Kn:function(D,X){Wa.lj(D,X)},Ln:function(D){Wa.Yn(D)},On:function(D){Wa.pj(D)},cb:function(D){Wa.cb(D)},gj:function(D,X,ma,oa){Wa.fo(D,X,ma,oa);X&&P.pg(X,oa?!0:!1);R=!0},Fg:function(D){Wa.Fg(D)},rg:function(D){Wa.rg(D)},Eg:function(D){Wa.Eg(D)},wj:function(D){Wa.wj(D)},ep:function(D){p&&(O=!0,da&&da.remove(),da=ba.instance({width:L.O(),height:L.Y(),isPot:!1}),v=D)},pg:function(D,X){L="string"===typeof D?ba.instance({url:D,isFloat:!1}):D;t&&Wa.pg(L,
X);p=!0},ak:function(D){k.push(D);0!==z.length&&(z.forEach(function(X){X(D)}),z.splice(0,z.length))},wn:function(D){D=k.indexOf(D);-1!==D&&k.splice(D,1)},fp:function(D){m.push(D)},jq:function(D){D=m.indexOf(D);-1!==D&&m.splice(D,1)},le:function(D){t&&(C=D)},animate:function(D){!V.Pa||t&&R?C&&(d||G>V.Wm&&w?(N&&clearTimeout(N),++G,window.cancelAnimationFrame(P.animate),N=setTimeout(function(){window.requestAnimationFrame(P.animate)},16)):(P.Vi(D),++G,t||C&&window.requestAnimationFrame(P.animate))):
setTimeout(P.animate,100)},hp:function(D){H.push(D)},Vi:function(D){if((!V.Pa||t&&R)&&M){H.forEach(x);ea.aa()?r.set()||ea.la()?(t||Ac.yn(),l(),r.K(),I&&c.depthMask(!1)):(ea.yo(),P.qh(),Jb.ed(),E.$n(),V.Pa&&Wa.$i(),c.flush(),window.requestAnimationFrame(P.animate)):(t&&Wa.Je(1),r.ga_.set(!0,!0,!0),b(),r.ga_.K(),I&&c.depthMask(!1),r.Mc.set(!1,!I,!1),e(),r.Mc.K(),r.position.set(!0,!I,!1),tb.U(),a(),r.position.K(),r.yb.set(!1,!I,!1),f(),r.yb.K());c.disable(c.DEPTH_TEST);I||c.depthMask(!1);V.ea&&Cb.U();
var X=P.Mh();if(null!==X){X.h(7);E.set(V.ea?"s94":"s95");E.N("u14",1/ea.wb(),1/ea.vb());Jb.Ek();u.M();aa?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),E.G("u123",1)):c.disable(c.BLEND);t||tb.df();r.position.h(0);r.yb.h(1);r.ga_.h(2);y.hd(3);r.Mc.h(6);y.jd(4);y.uh();V.ea&&Cb.h(5);W.l(!0,!0);aa&&E.G("u123",0);Ba.$();if(aa){c.disable(c.BLEND);var ma=Wa.ck(u,g);E.set("s83");h.M();ma.h(0);W.l(!1,!1);g.o();h.h(0);W.l(!1,!1);g.h(0)}else Wa.pl(u,
g)||(E.set("s1"),g.M(),u.h(0),W.l(!1,!1)),fa?(E.set("s82"),h.M(),g.h(0),W.l(!1,!1),g.o(),h.h(0),Q&&t?(E.set("s81"),B.h(1),Wa.Je(2),W.l(!1,!1),E.set("s1"),B.M(),g.h(0),W.l(!1,!1)):(E.set("s80"),W.l(!1,!1),g.h(0))):g.h(0);Ba.ba();c.viewport(0,0,ea.O(),ea.Y());!aa&&t&&Wa.ql(D,X)||E.set("s1");W.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Mh:function(){if(!p||aa)return ba.Yh();if(!t)return L;if(O&&!Wa.Fm()){E.set(v);Ba.$();da.Uc();da.o();L.h(0);var D=da;W.l(!0,!0)}else D=L;return Wa.ll(D)},
Dq:function(){V.cl||C||(C=!0,P.animate(Date.now()),n||vc.to(),n||Rb.ib(!1),A&&clearTimeout(A),V.ea&&Cb.ee(),A=setTimeout(P.ta,V.Ak),n||ea.jm(),n=!0)},Eq:function(){C&&(w=C=!1,cancelAnimationFrame(P.animate))},ta:function(){w||!n||d||V.sh||(w=d=!0,A&&clearTimeout(A),F&&clearTimeout(F),tb.kf().Xi(),A=setTimeout(function(){ea.Sg(V.bn);V.ea&&Cb.Lj();G=0;q()},24))},wake:function(){w&&n&&!d&&(d=!0,w=!1,G=0,tb.kf().Xi(),A&&clearTimeout(A),F&&clearTimeout(F),A=setTimeout(function(){ea.Sg(1);V.ea&&Cb.ee();
q()},16))},Rp:function(){},xp:function(){},ke:function(D){Q=D},Gq:function(D){fa=D},yj:function(D){aa=D},Lq:function(){E.j("s95",[{type:"1f",name:"u121",value:V.Pc},{type:"1f",name:"u122",value:V.fg}])},resize:function(D,X,ma){u.resize(D*ma,X*ma);g.resize(D,X);h.resize(D,X);V.Pa&&B.resize(D,X);Wa.resize(D,X,ma);D=[{type:"2f",name:"u14",value:[1/D,1/X]}];E.j("s82",D);E.j("s80",D);E.j("s83",D)},H:function(){N&&clearTimeout(N);A&&clearTimeout(A);F&&clearTimeout(F);k.concat(m).forEach(function(D){D.H()});
k.splice(0,k.length);m.splice(0,m.length);r.ga_.remove();r.yb.remove();r.Mc.remove();r.position.remove();u.remove();g.remove();h.remove();B&&B.remove();d=!0},v:function(){P.H();I=w=d=n=C=t=R=d=!1}};return P}(),xa={},ea=function(){function a(){Jb.resize(e*m,f*m);u.aa()&&uc.resize(e*m,f*m);ya.resize(e,f,m);V.ea&&Cb.resize(e*m,f*m,m);u.Qg()}var b=null,e=0,f=0,l=-1,q=!1,x={oe:!1,Ig:!1,Ij:!1,Bg:!1,drawBuffers:!1,zm:!1,mi:!1,Bm:!1,Ff:!1,Za:!1},k=Object.assign({},x),m=1,r=!1,z=!1,H=!1,y=!1,G=!1,u={m:function(g){void 0!==
g.onload&&g.onload&&(z=g.onload);void 0===g.expand&&(g.expand=!1);void 0===g.Jd&&(g.Jd=!1);void 0===g.qa&&(g.qa=!1);void 0===g.Qb&&(g.Qb=!1);void 0===g.alpha&&(g.alpha=!1);void 0===g.preserveDrawingBuffer&&(g.preserveDrawingBuffer=!1);g.Jd&&(q=!0);b=g.qa?g.qa:document.getElementById(g.Sk);g.expand&&u.expand();try{window.$o=g.Qb?g.Qb.Cl():b.getContext("webgl",{antialias:!1,alpha:g.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:g.preserveDrawingBuffer});y=g.Qb?g.Qb.la():!1;H=
!y;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&u.pd("too few texture image units");if(!Ga.m())return u.pd("invalid config");V.Go&&(k.Ig=c.getExtension("EXT_texture_filter_anisotropic"),k.Ig&&(k.mi=!0));V.Ho&&(k.oe=c.getExtension("WEBGL_compressed_texture_s3tc"),k.oe&&void 0!==k.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&k.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(k.zm=!0));H&&(k.Ij=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
k.Ij&&(k.Bm=!0));!y&&V.Io&&(k.Bg=c.getExtension("EXT_sRGB"),k.Bg&&(k.Ff=!0));H?(k.drawBuffers=c.getExtension("WEBGL_draw_buffers"),k.drawBuffers&&!V.rh&&(k.Za=!0)):k.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(k.Za){var h=u.el();k.Za=k.Za&&h}}catch(B){return u.pd(B)}if(null===c||!c)return u.pd("NO_GL");g.expand&&window.addEventListener("resize",u.expand,!1);b.addEventListener("contextmenu",function(B){B.preventDefault();return!1},!1);e=b.width;f=b.height;u.Bf();return!0},Bf:function(){l=q?3:2;Ga.fa()||
(l=Math.min(l,1));Ga.Ok()||(l=Math.min(l,0));Gc.m();Jb.m();for(var g in xa)xa[g].Qc();E.m();tb.m();Rb.m();ya.m();vc.m();V.ea&&Cb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();u.Qg();u.gl();r=!0;z&&z();return!0},gl:function(){if(k.Za){var g=uc.instance({width:256,height:1});g.bind();c.viewport(0,0,256,1);E.set("s103");E.xa("color",[1,0,0,1]);W.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Ba.ba();E.set("s1");g.yb.h(0);W.l(!1,!1);g=new Uint8Array(1024);c.readPixels(0,
0,256,1,c.RGBA,c.UNSIGNED_BYTE,g);G=1>=g[1020]}},el:function(){var g=uc.instance({width:1,height:1});if(!g.set())return g.remove(),!1;E.co(c);W.Ob(c);c.bindFramebuffer(c.FRAMEBUFFER,null);E.Bb(c);g.ga_.Ka(0);W.Ob(c);var h=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);g.remove();return 3<Math.abs(h[0]-127)?!1:!0},la:function(){return y},O:function(){return e},Y:function(){return f},wb:function(){return m*u.O()},vb:function(){return m*u.Y()},Dl:function(){return e/f},V:function(){return l},
Yp:function(){return 3===l},pi:function(){return G},aa:function(){return k.Za},yo:function(){k.Za=!1},aq:function(){return!1},Qk:function(){return 0<u.V()},np:function(){return u.aa()&&0<u.V()},jf:function(g){var h=c,B="";y||(h=k.drawBuffers,B="_WEBGL");return[h["COLOR_ATTACHMENT0"+B],h["COLOR_ATTACHMENT1"+B],h["COLOR_ATTACHMENT2"+B],h["COLOR_ATTACHMENT3"+B]].splice(0,g)},Ad:function(g){return u.jf(4)[g]},em:function(){return y?c.SRGB?c.SRGB:c.RGBA:k.Ff?k.Bg.SRGB_ALPHA_EXT:c.RGBA},Cm:function(){return k.mi},
Il:function(){return k.Ig},Pm:function(g){u.la()?c.drawBuffers(u.jf(g)):k.drawBuffers.drawBuffersWEBGL(u.jf(g))},expand:function(){ya.wake();u.resize(window.innerWidth,window.innerHeight);ya.ta()},resize:function(g,h){!b||g===e&&h===f||(e=g,f=h,b.width=e,b.height=f,r&&(tb.resize(),a()))},Qg:function(){var g=[{type:"2f",name:"u14",value:[1/ea.wb(),1/ea.vb()]}];E.j("s82",g);E.j("s80",g)},Sg:function(g){m=g;a()},Ja:function(g,h){b.addEventListener(g,h,!1)},pd:function(){l=-1;return!1},lh:function(){return 0<=
l},eq:function(){},nq:function(){},Bq:function(){var g=document.getElementById("loading");g&&(g.style.display="block")},jm:function(){var g=document.getElementById("loading");g&&(g.style.display="none")},H:function(){u.lh()&&(ba.Jj(),ya.H(),W.H(),Jb.H(),V.ea&&Cb.H(),jc.H(),vc.H(),E.H(),ba.H(),c.flush(),c=null)},v:function(){ya.v();Wa.v();E.v();Object.assign(k,x);r=!1}};return u}(),tb=function(){var a=!1,b=!1,e=[];return{m:function(){},instance:function(f){void 0===f.Yi&&(f.Yi=!0);void 0===f.Ce&&(f.Ce=
.1);void 0===f.Be&&(f.Be=100);void 0===f.direction&&(f.direction=[0,0,-1]);void 0===f.Pb&&(f.Pb=45);var l=new Zb,q=new Va(50,-50,-400),x=null;l.setPosition(q);var k=new Int8Array(20),m=new Int8Array(20),r=0,z=0,H=0,y=0,G={U:function(){m[E.Bd()]||(E.Tc("u124",l.elements),m[E.Bd()]=1);k[E.Bd()]||(E.Tc("u136",x),k[E.Bd()]=1)},cf:function(){z||(E.Tc("u124",l.elements),z=1);r||(E.N("u125",x[0],x[5]),r=1)},df:function(){H||(E.xg("u113",q.x,q.y,q.z),H=1)},Mb:function(){y||(E.xg("u154",q.x,q.y,q.z),y=1)},
nh:function(){var u=f.Ce,g=f.Be,h=Math.tan(.5*f.Pb*Math.PI/180);x=[.5/h,0,0,0,0,.5*ea.Dl()/h,0,0,0,0,-(g+u)/(g-u),-1,0,0,-2*g*u/(g-u),0];for(u=0;20>u;++u)k[u]=0;r=0},Zn:function(u,g){q.dj(g[0]).ej(g[1]).z=g[2];l.elements.set(u);for(u=0;20>u;++u)m[u]=0;y=H=z=0},Xi:function(){for(var u=y=H=0;20>u;++u)m[u]=0}};G.nh();a=G;b=!0;f.Yi&&e.push(G);return G},U:function(){b&&a.U()},cf:function(){b&&a.cf()},df:function(){b&&a.df()},Mb:function(){b&&a.Mb()},resize:function(){e.forEach(function(f){f.nh()})},kf:function(){return a}}}(),
Jb=function(){var a=[],b=null;return{m:function(){b=Ba.instance({width:ea.wb(),height:ea.vb(),Ec:!ea.aa()})},instance:function(e){void 0===e.width&&(e.width=ea.wb());void 0===e.height&&(e.height=ea.vb());void 0===e.isFloat&&(e.isFloat=!1);void 0===e.Tb&&(e.Tb=!1);void 0===e.clearColor&&(e.clearColor=[0,0,0,0]);void 0===e.J&&(e.J=4);var f=ba.instance({isFloat:e.isFloat&&Ga.fa(),T:e.isFloat,width:e.width,height:e.height,isPot:!1,isLinear:!1,J:e.J}),l=void 0!==e.fc&&e.fc?!0:!1,q=e.fc,x={set:function(k,
m,r){r&&b.bind(!1,r);f.o();k&&(c.clearColor(e.clearColor[0],e.clearColor[1],e.clearColor[2],e.clearColor[3]),b.Qe());m&&b.mh();l&&E.set(q)},qj:function(k){l=(q=k)?!0:!1},K:function(){f.qe()},h:function(k){f.h(k)},resize:function(k,m){f.resize(k,m)},debug:function(){f.debug()},remove:function(){f.remove()}};e.Tb&&a.push(x);return x},resize:function(e,f){b.resize(e,f);a.forEach(function(l){l.resize(e,f)})},Ek:function(){b.fh()},ed:function(){b.ed()},Uc:function(){b.Uc()},qp:function(){b.mh()},pp:function(){b.Qe()},
op:function(){b.clear()},H:function(){b.remove()}}}(),uc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=ea.wb());void 0===b.height&&(b.height=ea.vb());var e=c.createFramebuffer(),f=b.width,l=b.height,q=!0;b={isFloat:Ga.fa(),T:!0,width:f,height:l,isPot:!1,isLinear:!1,J:4};var x=ba.instance(b),k=ba.instance(b),m=ba.instance(b),r=ba.instance(b),z=Ba.Jl(),H=Ba.Rh();c.bindFramebuffer(z,e);var y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,f,l);c.framebufferRenderbuffer(z,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1);c.framebufferTexture2D(z,ea.Ad(0),c.TEXTURE_2D,x.get(),0);c.framebufferTexture2D(z,ea.Ad(1),c.TEXTURE_2D,k.get(),0);c.framebufferTexture2D(z,ea.Ad(2),c.TEXTURE_2D,r.get(),0);c.framebufferTexture2D(z,ea.Ad(3),c.TEXTURE_2D,m.get(),0);ea.Pm(4);c.bindFramebuffer(z,null);Ba.reset();var G={position:x,yb:k,Mc:m,ga_:r,bind:function(){c.bindFramebuffer(z,e);Ba.reset()},set:function(){q&&c.checkFramebufferStatus(H);
c.bindFramebuffer(z,e);Ba.reset();if(q){if(c.checkFramebufferStatus(H)!==c.FRAMEBUFFER_COMPLETE)return!1;q=!1}c.viewport(0,0,f,l);c.clearColor(0,0,0,0);E.Xb()&&!ea.pi()&&(E.set("s102"),W.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},K:function(){},resize:function(u,g){f=u;l=g;x.resize(u,g);k.resize(u,g);r.resize(u,g);m.resize(u,g);c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,l);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){x.remove();
k.remove();r.remove();m.remove();c.deleteRenderbuffer(y);c.deleteFramebuffer(e);var u=a.indexOf(G);-1!==u&&a.splice(u,1)}};a.push(G);return G},resize:function(b,e){a.forEach(function(f){f.resize(b,e)})}}}(),jc=function(){var a=[],b=V.eh;return{instance:function(e){function f(){m?l():(h=xd.instance({ha:H,ym:b}),k=V.Bk[ea.V()],y=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:k,height:k/2,J:3}),G=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:k,height:k/
2,J:3}),u=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,width:1,height:k/2,J:3}),g=ba.instance({isFloat:Ga.fa()&&!b,T:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:k,height:k/2,J:b?4:3}),m=!0,l(),M.forEach(function(C){C()}),M.splice(0,M.length))}function l(){if(m){Ba.$();h.Tn(H);h.un();y.M();E.set("s85");H.h(0);E.G("u91",V.Pc);ba.Jk(1);W.l(!0,!0);for(var C=V.qm[ea.V()],n=0;n<C;++n)G.o(),E.set("s88"),E.N("u14",1/k,0),y.h(0),W.l(!1,!1),y.o(),E.N("u14",0,2/k),G.h(0),W.l(!1,!1);u.M();E.set("s90");
y.h(0);W.l(!1,!1);E.set(b?"s92":"s91");g.M();y.h(0);u.h(1);W.l(!1,!1);ba.ba(0);ba.ba(1)}}var q=Object.assign({Kb:null,uc:null,tc:0,vc:0},e),x=0,k=0,m=!1,r=null,z=null,H=null,y=null,G=null,u=null,g=null,h=null,B=0,M=[];e={m:function(){function C(){2===++n&&(H=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:x,height:x/2,J:3}),Ba.$(),H.M(),E.set("s84"),E.G("u96",q.vc),E.G("u97",q.tc),r.h(0),z.h(1),W.l(!0,!0),f())}var n=0;x=V.Ck[ea.V()];B=Math.log2(x)-1;q.Kb&&(r=
ba.instance({isPot:!1,url:q.Kb,B:C,J:3,isFlipY:!1}),z=ba.instance({isPot:!1,url:q.uc,B:C,J:3,isFlipY:!1}))},mj:function(C){H=C;f()},hd:function(C){m&&(h.h(C),E.G("u114",h.O()))},jd:function(C){m&&g.h(C)},uh:function(){E.G("u3",B)},Nh:function(){return B},O:function(){return x},ld:function(C){m?C():M.push(C)},H:function(){r&&r.remove();z&&z.remove();y.remove();u.remove();G.remove();h.remove();g.remove();H.remove()}};a.push(e);e.m();return e},H:function(){a.forEach(function(e){e.H()})}}}(),dd={instance:function(a){var b=
a.Jm,e=a.Hm,f=0,l=b.O();a=V.eh;var q=ba.instance({isFloat:Ga.fa()&&!a,T:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:l,J:a?4:3,isFlipY:!1}),x=ba.instance({isFloat:Ga.fa()&&!a,T:!a,isPot:!1,isLinear:!0,Up:!0,isMipmap:!1,width:l,height:l/2,J:a?4:3}),k=Ba.instance({width:l,height:l}),m=a?"s77":"s76";return{eo:function(r){f=r;E.set(m);c.viewport(0,0,l,l);k.o();q.o();E.G("u13",f);b.hd(1);e.hd(0);W.l(!0,!0);c.viewport(0,0,l,l/2);x.o();b.jd(1);e.jd(0);W.l(!1,!1);c.flush()},hd:function(r){q.h(r)},jd:function(r){x.h(r)},
uh:function(){E.G("u3",b.Nh()*(1-f)+e.Nh()*f)}}}},Rb=function(){function a(L){var p=(d-V.Oe)/(V.ih-V.Oe);p=1-Math.pow(1-p,V.Yo);d+=L*(1+p*V.Zo);d=Math.min(Math.max(d,V.Oe),V.ih);F.ib()}function b(L){-1!==k&&(B=h=0,x(),a(V.Xo*L.deltaY/window.innerHeight),L.preventDefault())}function e(){C+=h;n+=B;n=Math.min(Math.max(n,V.fn),V.en);F.ib()}function f(L){if(0===k||-1===k)return!1;var p=void 0!==L.touches&&L.touches.length;L.preventDefault();if(2===k){var t=Vc(L.touches[0].pageX,L.touches[0].pageY,L.touches[1].pageX,
L.touches[1].pageY);a(-(u-t)*V.gn);u=t}else t=p?L.touches[0].clientX:L.clientX,L=p?L.touches[0].clientY:L.clientY,h=2*(t-y)*Math.PI/ea.O(),B=2*(L-G)*Math.PI/ea.Y(),4===k?(A[0]+=h*V.Ki,A[1]-=B*V.Ki,A[0]=Math.min(Math.max(A[0],-V.Ni),V.Ni),A[1]=Math.min(Math.max(A[1],-V.Oi),V.Oi),F.ib()):e(),y=t,G=L}function l(){0!==k&&-1!==k&&(0===h&&0===B||1!==k||!I?ya.ta():(x(),g=Date.now(),w=setInterval(F.Gm,M)),k=0)}function q(L){if(2!==k&&-1!==k){B=h=0;x();ya.wake();var p=void 0!==L.changedTouches&&L.touches.length;
L.preventDefault();p&&2===L.touches.length?(k=2,u=Vc(L.touches[0].pageX,L.touches[0].pageY,L.touches[1].pageX,L.touches[1].pageY)):(k=p||2!==L.button?1:4,y=p?L.touches[0].clientX:L.clientX,G=p?L.touches[0].clientY:L.clientY);return!1}}function x(){w&&(clearInterval(w),w=!1)}var k=0,m=!1,r=!1,z=!1,H=1,y=0,G=0,u=0,g=0,h=0,B=0,M=16,C=V.Dj,n=V.Mi,d=V.Ne,w=!1,I=0,N=new Float32Array([0,0,0,0,0]),A=[V.Mk,V.Nk],F={m:function(){I=V.ek[ea.V()];M=V.ud[ea.V()];ea.Ja("mousedown",q);ea.Ja("mouseup",l);ea.Ja("mouseout",
l);ea.Ja("mousemove",f);ea.Ja("mousemove",f);ea.Ja("wheel",b);ea.Ja("touchstart",q);ea.Ja("touchend",l);ea.Ja("touchmove",f)},ib:function(L){m?(r[0]=-n,r[1]=C,z[1].value=H/V.Ne*d,Wa.Cb(z)):(N[0]=C,N[1]=n,N[2]=d,N[3]=A[0],N[4]=A[1],vc.In(N,L))},Gm:function(){if(1E-4>h&&1E-4>B||-1===k)x(),B=h=0,0===k&&ya.ta();var L=Date.now(),p=L-g;g=L;L=Math.pow(I,p/M);h*=L;B*=L;e()},ef:function(L){m||(m=!0,k=-1,r=[0,0,0],z=[{name:"u82",type:"3f",value:r},{name:"u86",type:"1f",value:1}],H=L)},xj:function(L){-1===k&&
L&&(k=0);L||(k=-1)},Bn:function(){B=h=0;C=V.Dj;n=V.Mi;d=V.Ne;F.ib()},sq:function(L){d=L},tq:function(L){A[0]=L[0];A[1]=L[1];V.jh=L[2]},rq:function(L,p){C=L;n=p}};return F}(),Ac=function(){var a={s104:!1,s104color:!1,s104NormalMap:!1,s104ParamsMap:!1,s104NormalParamsMap:!1};return{instance:function(b){function e(v){if(da){v.tweaker&&window.JEELIZVTO&&"undefined"!==typeof T&&T.dh(v.tweaker);F=v.partsNames||[];A.splice(0);A.push({n:0,offset:0});w.min.set(Infinity,Infinity,Infinity);w.max.set(-Infinity,
-Infinity,-Infinity);var P=v.uvs;P&&(P=P.filter(function(ka){return ka}));aa=P&&0<P.length&&0<P[0].length?!0:!1;"undefined"!==typeof zb&&"string"===typeof v.faces&&(v.faces=zb(v.faces));"undefined"!==typeof Ob&&("string"===typeof v.vertices&&(v.vertices=Ob(v.vertices)),P&&P.length&&P.forEach(function(ka,Sa){"string"===typeof ka&&(P[Sa]=Ob(ka))}));var D=v.metadata.faces,X=1+(aa?1:0);D=(v.faces.length-D)/(v.metadata.faces*X);6!==D&&8!==D||aa||(++X,D/=2);if(4===D){D=6*X+2;for(var ma=4*X+1,oa=Array(v.metadata.faces*
D),za=0;za<v.metadata.faces;++za)for(var Fa=0;Fa<X;++Fa)oa[za*D+4*Fa]=v.faces[za*ma+5*Fa],oa[za*D+4*Fa+1]=v.faces[za*ma+5*Fa+1],oa[za*D+4*Fa+2]=v.faces[za*ma+5*Fa+2],0===Fa&&(oa[za*D+3]=v.faces[za*ma+4]),oa[za*D+4*Fa+3*X+1]=v.faces[za*ma+5*Fa],oa[za*D+4*Fa+3*X+2]=v.faces[za*ma+5*Fa+2],oa[za*D+4*Fa+3*X+3]=v.faces[za*ma+5*Fa+3],0===Fa&&(oa[za*D+3*X+4]=v.faces[za*ma+4]);v.faces=oa;v.metadata.faces*=2}G=Array(v.metadata.vertices);for(D=0;D<v.metadata.vertices;++D)G[D]=new Va(v.vertices[3*D],v.vertices[3*
D+1],v.vertices[3*D+2]),id(w,G[D]);u=Array(v.metadata.faces);X=3*X+1;for(D=0;D<v.metadata.faces;++D)u[D]=new Cc(v.faces[X*D],v.faces[X*D+1],v.faces[X*D+2]),u[D].Zb=v.faces[X*D+3];p=3<G.length;da&&(da.visible=p);ld(G,u);g=md(G,u);if(aa){X=Array(G.length);D=["a","b","c"];for(ma=0;ma<v.metadata.faces;++ma)for(oa=0;3>oa;++oa)if(za=v.faces[7*ma+oa],Fa=v.faces[7*ma+1+oa+3],"undefined"===typeof X[za])X[za]=[[za,Fa]];else if(X[za][0][1]!==Fa){for(var ja=-1,ta=1;ta<X[za].length;++ta)if(X[za][ta][1]===Fa){ja=
X[za][ta][0];break}ta=-1;-1===ja?(ta=G.length,G.push(G[za].clone()),g.push(g[za].clone()),X[za].push([ta,Fa]),X[ta]=[[ta,Fa]]):ta=ja;v.faces[7*ma+oa]=ta;u[ma][D[oa]]=ta}h=Array(G.length);for(v=0;v<G.length;++v)D="undefined"===typeof X[v]?v:X[v][0][1],h[v]=new Xb(P[0][2*D],P[0][2*D+1])}var Ia=tc(w);b.Ib&&(G.forEach(function(ka){ka.x-=Ia.x;ka.z-=Ia.z;ka.y-=w.min.y}),w.min.x-=Ia.x,w.max.x-=Ia.x,w.min.z-=Ia.z,w.max.z-=Ia.z,w.max.y-=w.min.y,w.min.y=0);if(b.Jb){var Y=V.zk/Math.max(w.max.x-w.min.x,w.max.y-
w.min.y,w.max.z-w.min.z);G.forEach(function(ka){ka.Ca(Y)});w.min.Ca(Y);w.max.Ca(Y)}v=aa?8:6;X=new Float32Array(G.length*v);for(D=0;D<G.length;++D)X[v*D]=G[D].x,X[v*D+1]=G[D].y,X[v*D+2]=G[D].z,X[v*D+3]=g[D].x,X[v*D+4]=g[D].y,X[v*D+5]=g[D].z,aa&&(X[v*D+6]=h[D].x,X[v*D+7]=h[D].y);u.sort(function(ka,Sa){return ka.Zb-Sa.Zb});var pa=new (65536>3*u.length?Uint16Array:Uint32Array)(3*u.length),ha=0;u.forEach(function(ka,Sa){ka.Zb===ha?A[ha].n+=3:(A.push({n:3,offset:3*Sa}),++ha);pa[3*Sa]=ka.a;pa[3*Sa+1]=ka.b;
pa[3*Sa+2]=ka.c});B&&B.remove();B=W.instance({ja:X,indices:pa});n=C=!1;fa&&da.oh();t=!0;da.bf();b.B&&(b.B(da),b.B=null)}}function f(v){B.La(v.n,v.offset)}function l(v,P){Q[P]&&(E.set(Q[P].$l()),B.bind(!1),aa?(E.Qa(),E.jj()):(E.bb(),E.kj()),Q[P].Jc()&&(E.Sc(),C.wc(!1),E.de(),tb.Mb()),Q[P].jl(),Q[P].td(),B.La(v.n,v.offset))}function q(v,P){Q[P]&&(E.set(Q[P].am()),B.bind(!1),aa?(E.Qa(),E.jj()):(E.bb(),E.kj()),Q[P].Jc()&&(E.Sc(),C.wc(!1),E.de(),tb.Mb()),da.Ac(),Q[P].td(),B.La(v.n,v.offset))}function x(v,
P){O&&Q[P]&&(Q[P].kl(),B.La(v.n,v.offset))}function k(v,P){O&&Q[P]&&(Q[P].ml(aa),B.La(v.n,v.offset))}function m(v,P){Q[P]&&(E.set(Q[P].Wl()),Q[P].zh(),B.La(v.n,v.offset))}function r(v,P){Q[P]&&(E.set(Q[P].Xl()),da.Ac(),Q[P].zh(),B.La(v.n,v.offset))}function z(v,P){Q[P]&&(E.set(Q[P].Yl()),Q[P].Jc()&&(C.wc(!1),E.de(),tb.Mb()),B.bind(!1),Q[P].wh(aa),B.La(v.n,v.offset))}function H(v,P){if(Q[P]){var D=Q[P].Zl();E.set(D);Q[P].Jc()&&(C.wc(!1),E.de(),tb.Mb(),B.bind(!1));a[D]||(da.Ac(),B.bind(!1),a[D]=!0);
Q[P].wh(aa);B.La(v.n,v.offset)}}function y(v,P){return new Promise(function(D,X){v?(v.B=function(ma){Q[P]&&Q[P].H();Q[P]=ma;fa=fa||ma.Jc();D()},Gc.instance(v)):X()})}if(!ea.lh())return!1;void 0===b.Ib&&(b.Ib=!1);void 0===b.Jb&&(b.Jb=!1);void 0===b.Me&&(b.Me=!1);var G=null,u=null,g=null,h=null,B=null,M=null,C=null,n=!1,d=new Zb,w=new Bc,I=[],N=null,A=[{n:0,offset:0}],F=[],L=[],p=!1,t=!1,R=[],Q=[],fa=!1,aa=!1,O=!1,da={visible:p,Xk:function(){return A.length},Tl:function(){return F},oh:function(){!n&&
aa&&(u=u.filter(function(v){return null!==v}),M=nd(G,g,h,u),C=W.instance({ja:M,indices:!1}),h=g=u=G=M=null,n=!0)},Ac:function(){tb.U();da.yh()},yh:function(){E.Tc("u137",d.elements)},yp:function(){p&&(da.yh(),B.bind(!1),aa?E.Qa():E.bb(),B.U())},tl:function(v){p&&(v||da.Ac(),B.bind(!1),aa?E.Qa():E.bb(),B.U())},ul:function(){p&&(B.bind(!1),aa?E.Qa():E.bb(),A.forEach(x))},vh:function(){p&&(B.bind(!1),aa?E.Qa():E.bb(),L.forEach(f))},rl:function(v){O&&p&&(B.bind(!1),aa?E.Qa():E.bb(),v?A.forEach(m):A.forEach(r))},
sd:function(v){p&&(v||da.Ac(),B.bind(!1),v||(E.Qa(),E.Sc()),O&&A.forEach(k))},td:function(v){O&&p&&(v?A.forEach(l):A.forEach(q))},ol:function(){O&&p&&A.forEach(H)},nl:function(){O&&p&&A.forEach(z)},Wh:function(){return N},Uh:function(){return R},Fo:function(v,P){Q[v].update(P);da.Nj()},sg:function(v,P){R=v;O=!1;Q.forEach(function(D){D.H()});Q=Array(v.length);fa=!1;v=v.map(function(D,X){return"string"===typeof D?kd(-1===D.indexOf(".json")?D+".json":D).then(function(ma){ma.name=D;return y(ma,X,D)}):
y(D,X,!1)});Promise.all(v).then(function(){O=!0;da.ld(function(){fa&&da.oh();da.Nj();ya.Db(da);ya.le(!0);P&&P(da)},4);da.bf()})},Nj:function(){L.splice(0);A.forEach(function(v,P){Q[P]&&Q[P].Em()&&L.push(v)})},ld:function(v,P){t&&O?v(da):I.push({tb:v,order:P?P:0})},bf:function(){t&&O&&(I.sort(function(v,P){return 0>v.order-P.order?1:-1}),I.forEach(function(v){v.tb(da)}),I.splice(0))},remove:function(){da.H();da=null},H:function(){p=t=!1;B&&B.remove();Q.forEach(function(v){v.H()});n&&C.remove();A.splice(0)},
cm:function(){return w.size().x},dm:function(){return w.size().y},Pp:function(){return w.size().z},Fl:function(){return tc(w).x},Gl:function(){return tc(w).y},Dp:function(){return tc(w).z},Lp:function(){return w.min.y},replace:function(v,P,D){if(v===N)return P&&da&&(da.bf(),P(da)),!1;N=v;ya.le(!1);Dc(v,function(X){e(X);P&&P(da)},D);return!0}};b.Nc&&da.sg(b.Nc,b.Me);N=b.url;Dc(b.url,e);return da},yn:function(){a.s104=!1;a.s104color=!1;a.s104NormalMap=!1;a.s104ParamsMap=!1;a.s104NormalParamsMap=!1}}}(),
vc=function(){var a=null,b=!1,e=!1,f=null,l=new Float32Array(16),q=new Float32Array(3),x={data:0},k={m:function(){a=V.Nb?new Worker("js/worker.php"):{postMessage:function(m){x.data=m;Hc.$m(x)},terminate:function(){}};a.onmessage=function(m){switch(m.data[0]){case 3:for(var r=0;16>r;++r)l[r]=m.data[r+1];for(r=0;3>r;++r)q[r]=m.data[r+17];tb.kf().Zn(l,q);break;case 6:k.Un(),b=!0,Rb.ib(!1),V.ea&&(Cb.enable(),Cb.ee())}};f=new Float32Array(6);f[0]=2;V.Nb||Hc.Wn(a)},to:function(){V.th||(e=!0)},Fq:function(){e=
!1},In:function(m,r){if(r||b&&e)f[1]=m[0],f[2]=m[1],f[3]=m[2],f[4]=m[3],f[5]=m[4],a.postMessage(f)},Un:function(){a.postMessage([5,V.jh])},H:function(){V.Nb&&a.terminate()}};return k}(),Hc=function(){var a=0,b=0,e=0,f=[0,0],l=new Zb,q=new sc,x=new sc,k=new Va,m=new Va,r=new Yb,z=0,H=new Float32Array(20);H[0]=3;var y=null,G={data:!1},u={m:function(){"undefined"===typeof V&&(self.ap={Nb:!0});V.Nb&&u.gg([6])},$m:function(g){switch(g.data[0]){case 2:u.tg(g.data);break;case 5:z=g.data[1]}},gg:function(g){V.Nb?
postMessage(g):(G.data=g,y.onmessage(G))},tg:function(g){a=g[1];b=g[2];e=g[3];f[0]=g[4];f[1]=g[5];k.set(f[0],f[1],-e);r.set(b,a,0,"XYZ");if(!1===r instanceof Yb)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");g=Math.cos(r.C/2);var h=Math.cos(r.D/2),B=Math.cos(r.F/2),M=Math.sin(r.C/2),C=Math.sin(r.D/2),n=Math.sin(r.F/2),d=r.order;"XYZ"===d?(q.C=M*h*B+g*C*n,q.D=g*C*B-M*h*n,q.F=g*h*n+M*C*B,q.S=g*h*B-M*C*n):"YXZ"===d?(q.C=M*h*B+g*C*n,q.D=
g*C*B-M*h*n,q.F=g*h*n-M*C*B,q.S=g*h*B+M*C*n):"ZXY"===d?(q.C=M*h*B-g*C*n,q.D=g*C*B+M*h*n,q.F=g*h*n+M*C*B,q.S=g*h*B-M*C*n):"ZYX"===d?(q.C=M*h*B-g*C*n,q.D=g*C*B+M*h*n,q.F=g*h*n-M*C*B,q.S=g*h*B+M*C*n):"YZX"===d?(q.C=M*h*B+g*C*n,q.D=g*C*B+M*h*n,q.F=g*h*n-M*C*B,q.S=g*h*B-M*C*n):"XZY"===d&&(q.C=M*h*B-g*C*n,q.D=g*C*B-M*h*n,q.F=g*h*n+M*C*B,q.S=g*h*B+M*C*n);k.y-=z;g=l.elements;n=q.x;var w=q.y,I=q.z;M=q.w;var N=n+n,A=w+w;C=I+I;h=n*N;B=n*A;n*=C;d=w*A;w*=C;I*=C;N*=M;A*=M;M*=C;g[0]=1-(d+I);g[4]=B-M;g[8]=n+A;g[1]=
B+M;g[5]=1-(h+I);g[9]=w-N;g[2]=n-A;g[6]=w+N;g[10]=1-(h+d);g[3]=0;g[7]=0;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;l.setPosition(k);x.L(q).inverse();g=m.L(k);w=g.x;N=g.y;I=g.z;h=x.x;B=x.y;M=x.z;C=x.w;n=C*w+B*I-M*N;d=C*N+M*w-h*I;A=C*I+h*N-B*w;w=-h*w-B*N-M*I;g.x=n*C+w*-h+d*-M-A*-B;g.y=d*C+w*-B+A*-h-n*-M;g.z=A*C+w*-M+n*-B-d*-h;for(g=1;17>g;++g)H[g]=l.elements[g-1];H[17]=m.x;H[18]=m.y;H[19]=m.z;u.gg(H)},Wn:function(g){y=g;u.gg([6])}};return u}();Hc.m();var Gc=function(){function a(x){var k=x.split(":").shift();
return"data"===k||"blob"===k?x:("undefined"!==typeof J&&J.ca?J:V).ca+V.Di+x}function b(x,k){return Math.min(k+x+k*x,1)}var e=!1,f=null,l=1,q={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],B:null};return{m:function(){f=ba.instance({width:1,height:1,isMipmap:!1,J:4,array:new Uint8Array([255,255,255,255]),Ff:!1})},ef:function(){e=!0;l=2},instance:function(x){function k(){"number"===
typeof h.alpha?(u[0]=h.alpha,u[1]=0,u[2]=0,u[3]=0):(u[0]=h.alpha[0],u[1]=h.alpha[1]-h.alpha[0],u[2]=h.alpha[2],u[3]=h.alpha[3]);var t=1<=h.fresnelPow?h.fresnelMin:h.fresnelMax;g[0]=b(u[0],t);g[1]=b(u[1],t);g[2]=u[2];g[3]=u[3];d={Li:h.fresnelMax,zi:[h.fresnelMin,h.roughness,h.fresnelPow/15,h.metalness],Ci:h.paramsMapMask}}function m(){return new Promise(function(t){(y=h.normalTexture&&ea.Qk()?!0:!1)&&!C.Da?C.Da=ba.instance({url:a(h.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,
J:3,B:t}):t()})}function r(){return new Promise(function(t){(G=h.diffuseTexture&&""!==h.diffuseTexture?!0:!1)&&!C.ga_?(C.ga_=ba.instance({url:a(h.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:t}),M="s109"):(C.ga_||(M="s110",C.ga_=f),t());B=[h.diffuseColor[0]/255,h.diffuseColor[1]/255,h.diffuseColor[2]/255]})}function z(){return new Promise(function(t){(n=h.paramsTexture?!0:!1)&&!C.$a?h.paramsTexture===h.diffuseTexture?(C.$a=C.ga_,
t()):C.$a=ba.instance({url:a(h.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:t}):t()})}function H(t){k();Promise.all([m(),r(),z()]).then(function(){y||n||G?y||n?y&&!n?(w="s104NormalMap",I="s104NNGLtextureNormalMap"):!y&&n?(w="s104ParamsMap",I="s104NNGLtextureParamsMap"):(w="s104NormalParamsMap",I="s104NNGLtextureNormalParamsMap"):(w="s104",I="s104NNGLtexture"):(w="s104color",I="s104NNGLcolor");N=y?"s112":"s111";A=y?"s106":"s116";
F=n?"s114":"s113";L=n?"s107":"s117";h.B&&setTimeout(h.B.bind(null,t),1)})}var y,G,u=[1,0,0,0],g=[0,0,0,0],h=Object.assign({},q,x),B=null,M=null,C={ga_:null,Da:null,$a:null},n=y=G=!1,d=null,w=null,I=null,N=null,A=null,F=null,L=null,p={update:function(t){p.H();Object.assign(h,t);H()},Jc:function(){return y},Em:function(){return.99>u[0]},am:function(){return A},$l:function(){return N},Xl:function(){return L},Wl:function(){return F},Zl:function(){return w},Yl:function(){return I},td:function(){y&&C.Da.h(0)},
ml:function(t){e&&E.set(M);t?E.Qa():E.bb();G&&E.Sc();p.sd()},sd:function(){G&&(E.G("u73",h.colorTextureUsage),C.ga_.h(0));E.yg("u147",B)},zh:function(){n&&(C.$a.h(0),E.xa("u75",d.Ci),E.Sc());E.xa("u111",d.zi);E.G("u148",d.Li)},wh:function(t){n&&!y?C.$a.h(l):y&&(G||f.h(0),C.Da.h(l),n&&C.$a.h(l+1));n&&E.xa("u75",d.Ci);G||y?E.Qn():t?E.Rn():E.Sn();p.sd();E.xa("u13",u);E.xa("u111",d.zi);E.G("u148",d.Li)},jl:function(){E.xa("u13",u)},kl:function(){E.xa("u13",g)},H:function(){G&&C.ga_.remove();y&&C.Da.remove();
n&&h.paramsTexture!==h.diffuseTexture&&C.$a.remove();Object.assign(C,{ga_:null,Da:null,$a:null})}};H(p);return p}}}(),Cb=function(){var a=0,b=0,e=0,f=0,l=0,q=0,x=V.xk,k=V.wk,m=V.yk,r=0,z=0,H=null,y=null,G=0,u=0,g=0,h=0,B=0,M=null,C=0,n=0,d=0,w=Date.now(),I=null,N=!1,A=!1,F=!1,L=1,p=!1,t={m:function(){a=V.sk[ea.V()];b=V.rk[ea.V()];e=V.qk[ea.V()];n=V.tk[ea.V()];f=V.jk[ea.V()];l=V.nk[ea.V()];g=V.pk[ea.V()];h=ea.O();B=ea.Y();r=Math.round(h*a);z=Math.round(B*a);y=Ba.instance({width:r,height:z,Ec:!1});
H=ba.instance({width:r,height:z,isPot:!1,isLinear:!0});M=ba.instance({width:r,height:z,isPot:!1,isLinear:!0,J:1});N=!0},resize:function(R,Q,fa){L=fa;h=R;B=Q;r=Math.round(R*a);z=Math.round(Q*a);y.resize(r,z);A=!0},U:function(){var R=Math.exp(-(Date.now()-w)/n);C=F?d+(1-R)*(1-d):d*R;G=b+C*(e-b);u=f+(1-C)*(1-f);q=l+(1-C)*(1-l);ba.ba(5);if(A&&N)ba.ba(6),M.resize(r,z),E.set("s0"),E.ge("u1",6),y.bind(!1,!0),M.o(),y.Qe(),H.h(6),W.l(!0,!0),H.resize(r,z),H.o(),M.h(6),W.l(!1,!1),E.ge("u1",0),A=!1;else{c.enable(c.BLEND);
c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);R=G/g;c.blendColor(R,R,R,R);c.colorMask(!0,!1,!1,!0);E.set("s96");tb.cf();E.G("u128",G);n&&(E.G("u129",u),E.G("u120",q));var Q=L*(x+Math.pow(Math.random(),m)*(k-x));E.N("u14",Q/h,Q/B);y.fh();y.Uc();H.o();Q=2*Math.PI*Math.random();for(var fa=!0,aa=0;aa<g;++aa)1===aa&&(c.blendFunc(c.SRC_ALPHA,c.ONE),E.G("u128",R)),E.G("u127",Q+aa/g*(Math.PI/2)),E.N("u126",(Math.random()-.5)/h,(Math.random()-.5)/B),W.l(fa,fa),fa=!1;c.disable(c.BLEND);E.set("s97");E.N("u14",
1/r,1/z);M.o();H.h(7);W.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(R){M.h(R)},enable:function(){p=!0},jn:function(){if(F||!p)return!1;I&&clearTimeout(I);t.ee();I=setTimeout(t.Lj,400)},ee:function(){I&&(clearTimeout(I),I=!1);!F&&p&&(window.Wj.disable(),F=!0,w=Date.now(),d=C)},Lj:function(){F&&p&&(I&&(clearTimeout(I),I=null),window.Wj.enable(),F=!1,w=Date.now(),d=C)},H:function(){H.remove();M.remove();y.remove()}};t.jn();return t}(),xd={instance:function(a){var b=a.ha.O(),e=a.ym?!0:!1,f=e?"s78":
"s12",l=ba.instance({isFloat:a.ha.ri()&&Ga.fa()&&!e,T:a.ha.si()&&!e,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,J:e?4:3}),q=ba.instance({isFloat:a.ha.ri()&&Ga.fa(),T:a.ha.si(),isPot:!0,width:1,height:b/2,J:3});q.o();E.set("s90");a.ha.h(0);W.l(!0,!0);var x=Math.round(Math.log(b)/Math.log(2));l.Tn=function(k){a.ha=k};l.un=function(){l.o();E.set(f);E.G("u91",V.Pc);a.ha.h(0);q.h(1);for(var k=0,m=0;m<=x;++m){var r=Math.pow(2,x-m),z=r/2;c.viewport(0,k,b,z);E.N("u89",b/r,1);E.G("u90",Math.min(6/z,
.6));k+=r/2;W.l(0===m,0===m)}};l.xn=l.remove;l.remove=function(){l.xn();q.remove()};return l}};xa.Ia=function(){var a={Rc:45,og:1,Ab:"../../images/debug/picsou.png",ce:.8,Mf:3.14/6,Nf:.314,Od:4,Nd:.5,Lf:-.25,Im:1,Z:256,Kf:.15},b={Va:null,Bc:null,screen:null},e=!1,f=!1,l=-1,q=null,x=null,k=null,m=Math.PI/180,r=[1,1],z=!1,H={m:function(y){l=y.width;y={isFloat:Ga.fa(),T:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:l,height:l/2,J:3};b.Va&&(b.Va.remove(),b.Bc.remove());b.Va=ba.instance(y);b.Bc=
ba.instance(y);E.j("s118",[{type:"1i",name:"u155",value:0}]);E.j("s119",[{type:"1i",name:"u160",value:0}]);H.Oj();z=!0},Oj:function(){E.j("s119",[{type:"1f",name:"u161",value:a.Mf},{type:"1f",name:"u162",value:a.Nf},{type:"1f",name:"u163",value:a.Od},{type:"1f",name:"u164",value:a.Nd},{type:"1f",name:"u165",value:a.Lf}])},bq:function(){return f},pa:function(y){q=y},Qc:function(){x="uniform sampler2D u155;uniform vec2 u156,u157,u10;uniform int u158;uniform float u159,u141;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u156)/u157;float b=1.;if(u158==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u159*g,texture2D(u155,a).rgb*u141,b*g);gl_FragColor=vec4(d,1.);}";
k="uniform sampler2D u160;uniform float u161,u162,u163,u164,u165;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u160,vec2(.5,.5));float d=a.r,j=u163*a.g,k=u164*(a.b+u165),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u161-u162,u161+u162,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";E.ma("s118",{name:"_",
g:x,i:"u155 u156 u158 u157 u159 u141 u10".split(" "),precision:"highp"});E.ma("s119",{name:"_",g:k,i:"u160 u161 u162 u163 u164 u165".split(" "),precision:"highp"})},Dg:function(y,G,u,g,h,B,M){E.N("u156",G,u);E.ge("u158",g?1:0);E.N("u157",h,h/B);E.wg("u10",M);y.h(0);W.l(!1,!1)},$j:function(y){c.viewport(0,0,a.Z,a.Z/2);E.set("s119");y.h(0);W.l(!1,!1)},Xh:function(){return b.Va},hh:function(y){H.m({width:a.Z});H.Pj(y,!1,1);f=!0},gh:function(){e&&b.screen.fm()===a.Ab||(e=!1,b.screen&&b.screen.remove(),
b.screen=ba.instance({url:a.Ab,isFloat:!1,B:function(){e=!0}}))},tg:function(y){Object.assign(a,y)},ib:function(y){H.tg(y);z&&(H.Oj(),H.gh())},Pj:function(y,G,u){var g=a.Z;Ba.$();b.Bc.M();E.set("s0");b.Va.h(0);W.l(!0,!0);b.Va.o();E.set("s118");E.G("u159",a.Kf);E.G("u141",a.Im);H.Dg(y,Math.PI,0,!0,90*m,y.O()/y.Y(),r);e&&(E.G("u141",a.ce),c.viewport(0,0,g/2,g/2),H.Dg(b.screen,0,0,!1,2*a.Rc*m,2*a.og,r),c.viewport(g/2,0,g/2,g/2),H.Dg(b.screen,2*Math.PI,0,!1,2*a.Rc*m,2*a.og,r));c.enable(c.BLEND);c.blendFunc(c.ONE,
c.ONE);G&&H.$j(G);E.set("s0");c.blendColor(0,0,0,1-u);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_CONSTANT_ALPHA);b.Bc.h(0);W.l(!1,!1);c.disable(c.BLEND);q.mj(b.Va)},v:function(){Object.assign(b,{Va:null,Bc:null,screen:null});f=e=!1;l=-1;q=null}};return H}();xa.pb=function(){var a=!1,b=!0,e=null,f=null,l=1,q=null,x={Qc:function(){ea.aa()&&(E.ma("s120",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform float u144;uniform vec2 u42;uniform vec3 u143;const float l=0.,m=0.,D=1.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 E=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u85*e;vec3 c=u85*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u79,0.,0.),u82,c);float t=mix(texture2D(u41,q).r,0.,u85);a.z+=t;mat3 u=r(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 j=u80/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u85);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u78","u143","u144"].concat(E.Dd(),E.Ed()),I:["a0"],R:[3],da:!0}),a=!0)},m:function(k){a&&E.j("s120",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:k.Ea},{type:"1f",name:"u144",value:1},{type:"1f",name:"u79",value:0},{type:"1f",name:"u87",value:1}].concat(k.Og))},fb:function(k,m){f=k;l=m;x.ci()},eb:function(k,m){e=k;q=m;x.ci()},
ci:function(){if(ea.aa()&&f&&e){var k=[e[0]*f,e[1]*f,e[2]*f],m=q;k[0]+=m[0];k[1]+=m[1];k[2]+=m[2];E.j("s120",[{type:"1f",name:"u144",value:l},{type:"3f",name:"u143",value:k}]);E.K()}},pm:function(k){for(var m=k.width/2,r=k.height/2,z=k.depth,H=k.vl,y=k.height/4,G=k.$k,u=2*G+4,g=[],h=[],B=-m+k.Ua,M=-H-k.Ua,C=m-k.Ua,n=-H-k.Ua,d=0;d<u;++d){var w=0,I=0;0===d?(w=-m,I=-H-z):1<=d&&d<=1+G?(I=(d-1)/G*Math.PI/2,w=B-Math.cos(I)*k.Ua,I=M+Math.sin(I)*k.Ua):d>=2+G&&d<=2+2*G?(I=(d-2-G)/G*Math.PI/2,w=C+Math.sin(I)*
k.Ua,I=n+Math.cos(I)*k.Ua):d===u-1&&(w=m,I=-H-z);g.push(w,r+y,I,w,-r+y,I);0!==d&&h.push(2*d,2*d-2,2*d-1,2*d,2*d-1,2*d+1)}return x.instance({ja:g,indices:h})},toggle:function(k){b=k},instance:function(k){var m=W.instance({ja:k.ja,indices:k.indices});return{U:function(){a&&b&&(E.set("s120"),m.bind(!0),m.U())}}}};return x}();xa.ia=function(){function a(p){E.j("s123",p);E.j("s124",p)}var b={uf:-87,im:[85,95],bi:[90,90],ai:[85,70],md:24,sp:12,al:2,hg:[-80,40],Hi:[0,-10],Xm:40,Zm:20,Ii:[70,50],Ym:90,Bo:2,
ie:[0,-15],Ae:1024,lb:512,Vd:4,ro:[6,30],Gi:1.2};b.Ri=b.hg;var e=!1,f=!1,l=!1,q=null,x=null,k=null,m=null,r=null,z=null,H=!1,y=!1,G=null,u=null,g=null,h=null,B=.5,M=[{type:"1f",name:"u167",value:1}],C=null,n=null,d=0,w=["u41","u42","u144","u143"],I=null,N=null,A=null,F=null,L={Qc:function(){E.ma("s121",{name:"_",u:"attribute vec3 a0;uniform vec3 u143;uniform vec2 u168,u169;uniform float u144,u170,u171,u172;varying float vv0,vv1;void main(){vec3 a=(a0+u143)*u144;float b=atan(a.x,a.z-u170),d=2.*(a.y-u171)/(u172-u171)-1.;vv0=a0.y;float g=1.-u168.x*u168.x/(u168.y*u168.y),c=u168.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u170);vv1=smoothstep(u169.x,u169.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u173;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u173;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u144 u143 u168 u169 u170 u171 u172 u13 u173".split(" "),I:["a0"],R:[3],precision:"highp"});E.ma("s122",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});E.ma("s123",{name:"_",u:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 g=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 i=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 l=u80/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u85);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u174,u160;uniform vec2 u89,u175;uniform float u176,u167;varying vec2 vv0;varying float vv1;void main(){vec2 b=u175*u176+u89*vv0;vec4 a=u167*texture2D(u174,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u174 u160 u78 u176 u175 u89 u167".split(" ").concat(E.Dd(),E.Ed(),w),I:["a0","a2","a1"],R:[3,3,2],precision:"lowp"});E.ma("s124",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u85*e;vec3 c=u85*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u79,0.,0.),u82,c);float t=mix(texture2D(u41,q).r,0.,u85);a.z+=t;mat3 u=r(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 j=u80/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u85);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u78"].concat(E.Dd(),E.Ed(),w),I:["a0"],R:[3],precision:"lowp"});e=!0},m:function(p){if(e){if(void 0===p.hc||!p.hc)return!1;if(f)L.hj(p);else{m=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Ae,height:b.Ae/4});var t=b.lb/4,R={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.lb,height:t};k=ba.instance(R);z=ba.instance(R);r=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.lb,height:t*b.Vd});t=[];R=[];var Q=b.Hi[0],fa=b.Hi[1],
aa=b.Xm,O=b.Zm,da=-b.Ii[0]+Q,v=b.Ii[1]+fa,P=b.Ym;t.push(0,Q,fa,.5*-O,da,v,.5*O,da,v,.5*-aa,Q-P,fa,.5*aa,Q-P,fa);R.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);A=W.instance({ja:new Float32Array(t),indices:new Uint16Array(R)});t=.5-.5/p.ic[1];R=.5+.5/p.ic[1];Q=new Float32Array(16*b.md);fa=new Uint16Array(6*(b.md-1));for(aa=0;aa<b.md;++aa){O=2*aa/(b.md-1)-1;O=Math.sign(O)*Math.pow(Math.abs(O),b.al);P=Math.PI*(O+1)/2-Math.PI/2;O=Math.sin(P);var D=Math.cos(P);da=Math.sin(P*b.Gi);v=Math.cos(P*b.Gi);var X=P/(Math.PI*
p.ic[0])+.5;P=b.ai[0]*O;var ma=b.Ri[0],oa=b.ai[1]*D+b.uf,za=X,Fa=t,ja=b.Ri[1];D=b.bi[1]*D+b.uf;var ta=R,Ia=16*aa;Q[Ia]=b.bi[0]*O;Q[Ia+1]=ja;Q[Ia+2]=D;Q[Ia+3]=da;Q[Ia+4]=0;Q[Ia+5]=v;Q[Ia+6]=X;Q[Ia+7]=ta;Q[Ia+8]=P;Q[Ia+9]=ma;Q[Ia+10]=oa;Q[Ia+11]=da;Q[Ia+12]=0;Q[Ia+13]=v;Q[Ia+14]=za;Q[Ia+15]=Fa;0!==aa&&(O=2*aa,da=6*(aa-1),fa[da]=O,fa[da+1]=O-1,fa[da+2]=O-2,fa[da+3]=O,fa[da+4]=O+1,fa[da+5]=O-1)}F=W.instance({ja:Q,indices:fa});L.hj(p);E.j("s122",[{type:"1i",name:"u1",value:0}]);f=!0}}},hj:function(p){B=
p.mo;h=p.je;var t=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:[p.Ea[0],p.Ea[1]-b.ie[0],p.Ea[2]+b.ie[1]]}].concat(p.Og,p.Kj);C=[{type:"1i",name:"u174",value:0},{type:"1i",name:"u160",value:2},{type:"1f",name:"u176",value:p.no},{type:"2f",name:"u89",value:[1,1/b.Vd]},{type:"2f",name:"u175",value:[0,1/b.Vd]},{type:"1f",name:"u167",value:1}].concat(t);n=t;E.j("s123",C);E.j("s124",n)},cc:function(p){q=p},bc:function(p){I=p;I.ld(L.xc)},ti:function(){return l&&null!==I&&null!==N},xc:function(){if(!(l||
y&&H)||null===I||null===N)return!1;d=0;c.viewport(0,0,b.Ae,b.Ae/4);Ba.$();m.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);E.j("s121",[{type:"1f",name:"u170",value:b.uf},{type:"1f",name:"u171",value:b.hg[0]},{type:"1f",name:"u172",value:b.hg[1]},{type:"3f",name:"u143",value:[G[0]+u[0],G[1]+u[1],G[2]+u[2]]},{type:"1f",name:"u173",value:B},{type:"2f",name:"u168",value:b.im},{type:"2f",name:"u169",value:b.ro}]);I.ul();E.set("s1");var p=b.lb/4;c.viewport(0,0,b.lb,p);k.o();m.h(0);m.zd();W.l(!0,
!0);for(var t=0;t<b.Vd;++t)E.set("s122"),0!==t&&c.viewport(0,0,b.lb,p),z.o(),k.h(0),E.N("u14",1/b.lb,0),W.l(!1,!1),k.o(),z.h(0),E.N("u14",0,1/p),W.l(!1,!1),b.bl&&c.colorMask(0===t,1===t,2===t,!0),E.set("s1"),r.o(),k.h(0),c.viewport(0,t*p,b.lb,p),W.l(!1,!1),b.bl&&c.colorMask(!0,!0,!0,!0);return l=!0},U:function(){L.ti()&&0===d++%b.Bo&&(N.bind(!1,!1),x.M(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),E.set("s124"),q.h(1),A.bind(!0),A.U(),
E.set("s123"),r.h(0),F.bind(!0),F.U(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},bm:function(){return x},add:function(){L.ti()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),x.h(0),W.l(!1,!1),c.disable(c.BLEND))},qg:function(p,t){N&&N.remove();N=Ba.instance({width:p,height:t,Ec:!0});x&&x.remove();x=ba.instance({width:p,height:t,isFloat:!1,isPot:!1});L.xc()},eb:function(p,t,R){p||(p=G,t=u,R=g);a([{type:"3f",name:"u143",value:[R[0]+h[0],R[1]+h[1]-b.ie[0],R[2]+h[2]+b.ie[1]]}]);G=p;u=t;g=
R;y=!0;!l&&H&&L.xc();E.K()},fb:function(p,t){E.j("s121",[{type:"1f",name:"u144",value:p}]);a([{type:"1f",name:"u144",value:t}]);H=!0;!l&&y&&L.xc();E.K()},ug:function(p){a([{type:"1f",name:"u79",value:p}]);E.K()},Db:function(p){p&&(I=p);L.xc()},vg:function(p,t){M[0].value=1-p;a(M);a(t)},H:function(){},v:function(){l=f=e=!1;z=r=m=k=x=q=null}};return L}();xa.sa=function(){var a=!1,b=null,e=0,f=0,l=0,q=[{type:"1f",name:"u167",value:1}],x=null,k=null,m=null,r={Qc:function(){E.ma("s125",{name:"_",u:"attribute vec3 a0;uniform vec2 u177,u178;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u178)/u177;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",
g:"uniform vec2 u179;uniform float u180,u181,u182;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u180,u181),a=vv0-b,c=u182*a,d=(c-a)*u179;gl_FragColor=vec4(d,0.,1.);}",i:"u177 u178 u180 u181 u182 u179".split(" "),I:["a0"],R:[3],precision:"highp"});E.ma("s126",{name:"_",u:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u177,u178;uniform float u144;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u85*e;vec3 c=u85*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u79,0.,0.),u82,c);float v=mix(texture2D(u41,s).r,0.,u85);a.z+=v;mat3 w=t(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 j=u80/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u85);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u178)/u177,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u183,u184;uniform float u167;varying vec2 vv0,vv1;void main(){vec2 a=u167*texture2D(u183,vv0).rg;gl_FragColor=texture2D(u184,a+vv1);}",i:"u167 u41 u183 u184 u177 u178 u42 u78 u144 u143".split(" ").concat(E.Dd(),E.Ed()),I:["a0"],R:[3],precision:"lowp"});a=!0},m:function(z){if(a){if(void 0===z.hc||!z.od)return!1;k=ba.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,J:4});m=Ba.instance({width:256,height:128});E.j("s126",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u183",value:2},{type:"1i",name:"u184",value:0},{type:"3f",name:"u78",value:z.Ea},{type:"1f",name:"u167",value:1}].concat(z.Kj,z.Og));f=z.Xe;l=z.We;e=z.Ye}},cc:function(z){b=z},bc:function(z){x=z;x.ld(r.Te)},Te:function(){c.viewport(0,0,256,128);m.o();k.o();var z=x.cm(),H=x.dm(),y=[{type:"2f",name:"u177",value:[z,H]},{type:"2f",name:"u178",value:[x.Fl(),x.Gl()]}];E.j("s125",y.concat([{type:"1f",name:"u180",value:f},{type:"1f",name:"u181",value:l},{type:"1f",name:"u182",value:e},{type:"2f",name:"u179",
value:[1/z,-1/H]}]));x.vh();E.j("s126",y)},U:function(){E.set("s126");b.h(1);k.h(2);x.vh()},eb:function(z){E.j("s126",[{type:"3f",name:"u143",value:z}]);E.K()},fb:function(z){E.j("s126",[{type:"1f",name:"u144",value:z}]);E.K()},ug:function(z){E.j("s126",[{type:"1f",name:"u79",value:z}]);E.K()},ko:function(z){e=z;r.Te();E.K();ya.animate(Date.now())},Db:function(z){z&&(x=z);r.Te()},vg:function(z,H){q.u167=1-z;E.j("s126",q);E.j("s126",H)},H:function(){}};return r}();xa.oc=function(){var a=[0,-.5],b=
!1,e=!1,f=null,l=null,q=null,x=null,k=null,m=-1,r=-1;return{Qc:function(){E.ma("s127",{name:"_",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u185;varying vec2 vv0;void main(){gl_FragColor=texture2D(u185,vv0);}",i:["u41","u185","u42","u11","u10"],precision:"lowp"});
E.ma("s128",{name:"_",g:"uniform sampler2D u2,u186,u187;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u187,vv0).rgb,c=texture2D(u186,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u187","u186"],precision:"lowp"});b=!0},m:function(z){b&&(k=ba.instance({isFloat:!1,isPot:!0,url:z.Ke,B:function(){e=!0}}),E.j("s127",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u185",value:0},{type:"2f",name:"u42",value:z.Tj},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),E.j("s128",[{type:"1i",name:"u186",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u187",value:2}]))},cc:function(z){l=z},qg:function(z,H){var y={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:z,height:H,J:4};m=2/z;r=2/H;q=ba.instance(y);x=ba.instance(y);f=Ba.instance({width:z,height:H})},U:function(z,H){if(e){f.bind(!1,!0);E.set("s89");for(var y=0;2>y;++y){E.N("u14",m,0);q.o();0!==y&&x.h(0);var G=0===y&&!V.ea;W.l(G,G);E.N("u14",0,r);x.o();q.h(0);W.l(!1,
!1)}E.set("s127");l.h(1);k.h(0);q.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);W.l(!1,!1);E.set("s128");H.o();x.h(0);q.h(1);z.h(2);W.l(!1,!1)}},H:function(){}}}();var Kc=function(){var a={instance:function(b){var e=b.Wf,f=b.Sf,l=b.nd,q=b.background?b.background:ba.Yh(),x=b.Oa,k={scale:1,offsetX:0,offsetY:0},m=null;b.Rf&&(k.scale=b.Rf.scale,k.offsetY=b.Rf.offsetY);return{Th:function(){return x},Mh:function(){return q},set:function(){m=eb.Rl();eb.oj(k);eb.se();eb.te();ya.gj(l,q,!1,!1)},K:function(){eb.oj(m)},
ac:function(){return{modelURL:e,materialsURLs:f,background:q.ac(!1),nd:l.ac(!1),Oa:x.ac(!0)}},Vl:function(){return l.ac(!1)},gp:function(r){q.h(r)},H:function(){l.remove();x.remove();b.background&&q.remove()}}},Xc:function(b,e,f){function l(){if(3===++m&&e){var r=a.instance({Wf:b.modelURL,Sf:b.materialsURLs,background:q,nd:x,Oa:k});e(r)}}var q=null,x=null,k=null,m=0;ba.Xc(b.background,function(r){!r&&f?f():(q=r,l())});ba.Xc(b.dataState,function(r){!r&&f?f():(x=r,l())});ba.Xc(b.light,function(r){!r&&
f?f():(k=r,l())})}};return a}();return Ta||window.JEELIZVTO}();(function(U,ua){"function"===typeof define&&define.amd?define(ua):"object"===typeof exports?module.exports=ua():U.ResizeSensor=ua()})("undefined"!==typeof window?window:this,function(){function U(Ka,Za){var cb=Object.prototype.toString.call(Ka),Eb=0,La=Ka.length;if("[object Array]"===cb||"[object NodeList]"===cb||"[object HTMLCollection]"===cb||"[object Object]"===cb||"undefined"!==typeof jQuery&&Ka instanceof jQuery||"undefined"!==typeof Elements&&
Ka instanceof Elements)for(;Eb<La;Eb++)Za(Ka[Eb]);else Za(Ka)}if("undefined"===typeof window)return null;var ua=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(Ka){return window.setTimeout(Ka,20)},Na=function(Ka,Za){function cb(){var La=[];this.add=function(Kb){La.push(Kb)};var ib,rb;this.call=function(){ib=0;for(rb=La.length;ib<rb;ib++)La[ib].call()};this.remove=function(Kb){var zb=[];ib=0;for(rb=La.length;ib<rb;ib++)La[ib]!==Kb&&zb.push(La[ib]);
La=zb};this.length=function(){return La.length}}function Eb(La,ib){if(La)if(La.resizedAttached)La.resizedAttached.add(ib);else{La.resizedAttached=new cb;La.resizedAttached.add(ib);La.resizeSensor=document.createElement("div");La.resizeSensor.className="resize-sensor";La.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";La.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
La.appendChild(La.resizeSensor);La.resizeSensor.offsetParent!==La&&(La.style.position="relative");var rb=La.resizeSensor.childNodes[0],Kb=rb.childNodes[0],zb=La.resizeSensor.childNodes[1],Ob,ac,Fb,bc,cc=La.offsetWidth,dc=La.offsetHeight,ec=function(){Kb.style.width="100000px";Kb.style.height="100000px";rb.scrollLeft=1E5;rb.scrollTop=1E5;zb.scrollLeft=1E5;zb.scrollTop=1E5};ec();var yc=function(){ac=0;Ob&&(cc=Fb,dc=bc,La.resizedAttached&&La.resizedAttached.call())};ib=function(){Fb=La.offsetWidth;bc=
La.offsetHeight;(Ob=Fb!=cc||bc!=dc)&&!ac&&(ac=ua(yc));ec()};var fc=function(gc,ic,hc){gc.attachEvent?gc.attachEvent("on"+ic,hc):gc.addEventListener(ic,hc)};fc(rb,"scroll",ib);fc(zb,"scroll",ib)}}U(Ka,function(La){Eb(La,Za)});this.detach=function(La){Na.detach(Ka,La)}};Na.detach=function(Ka,Za){U(Ka,function(cb){if(cb){if(cb.resizedAttached&&"function"==typeof Za&&(cb.resizedAttached.remove(Za),cb.resizedAttached.length()))return;cb.resizeSensor&&(cb.contains(cb.resizeSensor)&&cb.removeChild(cb.resizeSensor),
delete cb.resizeSensor,delete cb.resizedAttached)}})};return Na});var oc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},lb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Qa={isRT:!0,sku:void 0,materialsReplacements:"",mode:lb.notLoaded},hb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Yc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},Aa=Object.assign({},Yc),yd={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Ic=null,Ub={enabled:!1,callback:null,interval:1E3},wc={error:!1},mc=null,$b=null,xc="undef",xb={start:function(U){console.log("INFO in JeelizVTOWidget.js: start()");if(Qa.mode!==lb.notLoaded)xb.resume();else{na();if(U.settings)for(var ua in U.settings)oc[ua]=U.settings[ua];U.NNCPath&&Ta.set_NNCPath(U.NNCPath);U.faceDetectionCallback&&(Ub.enabled=!0,Ub.callback=U.faceDetectionCallback,Ub.interval="undefined"===typeof U.faceDetectionInterval?1E3:
U.faceDetectionInterval);Ic=Object.assign({},yd,U.callbacks||{});Aa.container=U.placeHolder||document.getElementById("JeelizVTOWidget");if(!Aa.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");Aa.cv=U.canvas||document.getElementById("JeelizVTOWidgetCanvas");Aa.cv||(Aa.cv=document.createElement("canvas"),Aa.container.appendChild(Aa.cv));Aa.cv.style.position="absolute";Aa.loading=document.getElementById("JeelizVTOWidgetLoading");U.onError&&(wc.error=
U.onError);Db();ua=nb(Aa.container);if(!ua.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!ua.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");ob();new ResizeSensor(Aa.container,function(Na){ob()});(U.searchImageMask||U.searchImageColor||U.searchImageRotationSpeed)&&Ta.set_loading(U.searchImageMask,U.searchImageColor,U.searchImageRotationSpeed);U.callbackReady&&($b=U.callbackReady);Qa.mode=lb.init;xc="undefined"===typeof U.assetsPath?oc.appstaticURL+"jeefit/":U.assetsPath;"undefined"!==
typeof U.catalog&&(mc=U.catalog);if(U.onWebcamGet)Ta.onWebcamGet(U.onWebcamGet);return new Promise(function(Na,Ka){Ta.init(xc,la,function(){Qa.isRT=!1;db("NO_ERROR_LABEL");Ka()},Aa.cv);var Za=U.sku?U.sku:null;Ta.onHalfLoad(function(){!1===U.isShadow&&Ta.switch_shadow(!1);xb.load(Za,Na,U.materialsReplacements)})})}},destroy:function(){return Ta.destroy().then(function(){Qa.mode=lb.notLoaded;Qa.sku=void 0;Qa.materialsReplacements="";$b=mc=null;Object.assign(Aa,Yc)})},pause:function(U){if(!Qa.isRT)return Promise.reject();
Qa.mode=lb.paused;var ua=Ta.switch_sleep(!0,U);return U?ua:Promise.resolve(ua)},resume:function(U){if(!Qa.isRT)return Promise.reject();Qa.mode=lb.realtime;var ua=Ta.switch_sleep(!1,U);return U?ua:Promise.resolve(ua)},set_videoRotation:function(U){Qa.isRT&&Ta.set_videoRotation(U)},set_videoSizes:function(U,ua,Na,Ka,Za,cb){Qa.isRT&&Ta.set_videoSizes(U,ua,Na,Ka,Za,cb)},resize:function(){ob()},set_scale:function(U){Ta.set_scale(U)},capture_image:function(U,ua,Na){Ta&&Ta.ready?Ta.capture_image(U,ua,Na,
!1):ua(!1)},toggle_loading:function(U){U?(qa(Aa.loading),nc("LOADING_START")):(Ma(Aa.loading),nc("LOADING_END"))},load_modelStandalone:function(U,ua){if(!Qa.isRT)throw Error("Loading standalone models is only available in RT mode");Qa.mode===lb.paused&&xb.resume();Qa.mode=lb.loadingModel;if("string"===typeof U){var Na=U;Ha(U,Na).then(ua).catch(Ra)}else{var Ka=Na="RANDOM_SKU_"+Date.now().toString();Ta.set_modelStandalone(U,Nb.bind(null,Ka,ua),Ka)}Qa.sku=Na;Qa.materialsReplacements=""},load:function(U,
ua,Na){xb.toggle_loading(!0);Qa.isRT&&xb.load_RT(U,ua,Na)},load_RT:function(U,ua,Na){var Ka=Na?JSON.stringify(Na):"";U===Qa.sku&&Ka===Qa.materialsReplacements?xb.toggle_loading(!1):(Qa.sku=U,Qa.materialsReplacements=Ka,Qa.mode=lb.loadingModel,Qa.mode===lb.paused&&xb.resume(),U?mc&&mc[U]?Sb(U,mc[U],ua,Na):sa(oc.glassesDBURL+U).then(function(Za){if(Za.error)return Ra();Sb(U,Za.intrinsic,ua,Na)}).catch(Ra):(Qa.mode=lb.realtime,xb.toggle_loading(!1),Ta.start_rendering(),ua&&ua()))},enter_adjustMode:Tb,
exit_adjustMode:ub,set_LUT:function(U){return Ta&&Ta.ready?Ta.set_LUT(U||null):Promise.reject("NOT_READY")}};return xb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"4.0.1",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
