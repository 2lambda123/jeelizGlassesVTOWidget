/**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( JeelizÂ® - https://jeeliz.com )
 *
 * This software library is the proprietary and confidential information of
 * Jeeliz ("Licensor"). You may only use this software library if
 * you have obtained a valid commercial license from Licensor. If you have not
 * obtained a valid commercial license from Licensor, please check out
 * https://jeeliz.com/#pricing for licensing options and pricing.
 *
 * Unauthorized use, reproduction, or distribution of this software library or
 * any portion thereof may result in severe civil and criminal penalties, and
 * will be prosecuted to the maximum extent possible under the law.
 *
 * THIS SOFTWARE LIBRARY IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE LIBRARY, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(ja,oa){return Object.prototype.hasOwnProperty.call(ja,oa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ja,oa,ra){if(ja==Array.prototype||ja==Object.prototype)return ja;ja[oa]=ra.value;return ja};
$jscomp.getGlobal=function(ja){ja=["object"==typeof globalThis&&globalThis,ja,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var oa=0;oa<ja.length;++oa){var ra=ja[oa];if(ra&&ra.Math==Math)return ra}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(ja,oa){var ra=$jscomp.propertyToPolyfillSymbol[oa];if(null==ra)return ja[oa];ra=ja[ra];return void 0!==ra?ra:ja[oa]};$jscomp.polyfill=function(ja,oa,ra,Oa){oa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(ja,oa,ra,Oa):$jscomp.polyfillUnisolated(ja,oa,ra,Oa))};
$jscomp.polyfillUnisolated=function(ja,oa,ra,Oa){ra=$jscomp.global;ja=ja.split(".");for(Oa=0;Oa<ja.length-1;Oa++){var va=ja[Oa];if(!(va in ra))return;ra=ra[va]}ja=ja[ja.length-1];Oa=ra[ja];oa=oa(Oa);oa!=Oa&&null!=oa&&$jscomp.defineProperty(ra,ja,{configurable:!0,writable:!0,value:oa})};
$jscomp.polyfillIsolated=function(ja,oa,ra,Oa){var va=ja.split(".");ja=1===va.length;Oa=va[0];Oa=!ja&&Oa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var tb=0;tb<va.length-1;tb++){var ta=va[tb];if(!(ta in Oa))return;Oa=Oa[ta]}va=va[va.length-1];ra=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ra?Oa[va]:null;oa=oa(ra);null!=oa&&(ja?$jscomp.defineProperty($jscomp.polyfills,va,{configurable:!0,writable:!0,value:oa}):oa!==ra&&($jscomp.propertyToPolyfillSymbol[va]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(va):
$jscomp.POLYFILL_PREFIX+va,va=$jscomp.propertyToPolyfillSymbol[va],$jscomp.defineProperty(Oa,va,{configurable:!0,writable:!0,value:oa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(ja,oa){for(var ra=1;ra<arguments.length;ra++){var Oa=arguments[ra];if(Oa)for(var va in Oa)$jscomp.owns(Oa,va)&&(ja[va]=Oa[va])}return ja};$jscomp.polyfill("Object.assign",function(ja){return ja||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(ja){var oa=0;return function(){return oa<ja.length?{done:!1,value:ja[oa++]}:{done:!0}}};$jscomp.arrayIterator=function(ja){return{next:$jscomp.arrayIteratorImpl(ja)}};$jscomp.makeIterator=function(ja){var oa="undefined"!=typeof Symbol&&Symbol.iterator&&ja[Symbol.iterator];return oa?oa.call(ja):$jscomp.arrayIterator(ja)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(ja){function oa(){this.batch_=null}function ra(ta){return ta instanceof va?ta:new va(function(Ja,Ua){Ja(ta)})}if(ja&&!$jscomp.FORCE_POLYFILL_PROMISE)return ja;oa.prototype.asyncExecute=function(ta){if(null==this.batch_){this.batch_=[];var Ja=this;this.asyncExecuteFunction(function(){Ja.executeBatch_()})}this.batch_.push(ta)};var Oa=$jscomp.global.setTimeout;oa.prototype.asyncExecuteFunction=function(ta){Oa(ta,0)};oa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var ta=this.batch_;this.batch_=[];for(var Ja=0;Ja<ta.length;++Ja){var Ua=ta[Ja];ta[Ja]=null;try{Ua()}catch(eb){this.asyncThrow_(eb)}}}this.batch_=null};oa.prototype.asyncThrow_=function(ta){this.asyncExecuteFunction(function(){throw ta;})};var va=function(ta){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ja=this.createResolveAndReject_();try{ta(Ja.resolve,Ja.reject)}catch(Ua){Ja.reject(Ua)}};va.prototype.createResolveAndReject_=function(){function ta(eb){return function(qb){Ua||
(Ua=!0,eb.call(Ja,qb))}}var Ja=this,Ua=!1;return{resolve:ta(this.resolveTo_),reject:ta(this.reject_)}};va.prototype.resolveTo_=function(ta){if(ta===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(ta instanceof va)this.settleSameAsPromise_(ta);else{a:switch(typeof ta){case "object":var Ja=null!=ta;break a;case "function":Ja=!0;break a;default:Ja=!1}Ja?this.resolveToNonPromiseObj_(ta):this.fulfill_(ta)}};va.prototype.resolveToNonPromiseObj_=function(ta){var Ja=void 0;
try{Ja=ta.then}catch(Ua){this.reject_(Ua);return}"function"==typeof Ja?this.settleSameAsThenable_(Ja,ta):this.fulfill_(ta)};va.prototype.reject_=function(ta){this.settle_(2,ta)};va.prototype.fulfill_=function(ta){this.settle_(1,ta)};va.prototype.settle_=function(ta,Ja){if(0!=this.state_)throw Error("Cannot settle("+ta+", "+Ja+"): Promise already settled in state"+this.state_);this.state_=ta;this.result_=Ja;this.executeOnSettledCallbacks_()};va.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var ta=0;ta<this.onSettledCallbacks_.length;++ta)tb.asyncExecute(this.onSettledCallbacks_[ta]);this.onSettledCallbacks_=null}};var tb=new oa;va.prototype.settleSameAsPromise_=function(ta){var Ja=this.createResolveAndReject_();ta.callWhenSettled_(Ja.resolve,Ja.reject)};va.prototype.settleSameAsThenable_=function(ta,Ja){var Ua=this.createResolveAndReject_();try{ta.call(Ja,Ua.resolve,Ua.reject)}catch(eb){Ua.reject(eb)}};va.prototype.then=function(ta,Ja){function Ua(zb,Kb){return"function"==
typeof zb?function(Vb){try{eb(zb(Vb))}catch(Wb){qb(Wb)}}:Kb}var eb,qb,Xb=new va(function(zb,Kb){eb=zb;qb=Kb});this.callWhenSettled_(Ua(ta,eb),Ua(Ja,qb));return Xb};va.prototype.catch=function(ta){return this.then(void 0,ta)};va.prototype.callWhenSettled_=function(ta,Ja){function Ua(){switch(eb.state_){case 1:ta(eb.result_);break;case 2:Ja(eb.result_);break;default:throw Error("Unexpected state: "+eb.state_);}}var eb=this;null==this.onSettledCallbacks_?tb.asyncExecute(Ua):this.onSettledCallbacks_.push(Ua)};
va.resolve=ra;va.reject=function(ta){return new va(function(Ja,Ua){Ua(ta)})};va.race=function(ta){return new va(function(Ja,Ua){for(var eb=$jscomp.makeIterator(ta),qb=eb.next();!qb.done;qb=eb.next())ra(qb.value).callWhenSettled_(Ja,Ua)})};va.all=function(ta){var Ja=$jscomp.makeIterator(ta),Ua=Ja.next();return Ua.done?ra([]):new va(function(eb,qb){function Xb(Vb){return function(Wb){zb[Vb]=Wb;Kb--;0==Kb&&eb(zb)}}var zb=[],Kb=0;do zb.push(void 0),Kb++,ra(Ua.value).callWhenSettled_(Xb(zb.length-1),qb),
Ua=Ja.next();while(!Ua.done)})};return va},"es6","es3");$jscomp.polyfill("Math.log2",function(ja){return ja?ja:function(oa){return Math.log(oa)/Math.LN2}},"es6","es3");$jscomp.findInternal=function(ja,oa,ra){ja instanceof String&&(ja=String(ja));for(var Oa=ja.length,va=0;va<Oa;va++){var tb=ja[va];if(oa.call(ra,tb,va,ja))return{i:va,v:tb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(ja){return ja?ja:function(oa,ra){return $jscomp.findInternal(this,oa,ra).v}},"es6","es3");
$jscomp.polyfill("Object.is",function(ja){return ja?ja:function(oa,ra){return oa===ra?0!==oa||1/oa===1/ra:oa!==oa&&ra!==ra}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(ja){return ja?ja:function(oa,ra){var Oa=this;Oa instanceof String&&(Oa=String(Oa));var va=Oa.length;ra=ra||0;for(0>ra&&(ra=Math.max(ra+va,0));ra<va;ra++){var tb=Oa[ra];if(tb===oa||Object.is(tb,oa))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(ja,oa,ra){if(null==ja)throw new TypeError("The 'this' value for String.prototype."+ra+" must not be null or undefined");if(oa instanceof RegExp)throw new TypeError("First argument to String.prototype."+ra+" must not be a regular expression");return ja+""};$jscomp.polyfill("String.prototype.includes",function(ja){return ja?ja:function(oa,ra){return-1!==$jscomp.checkStringArgs(this,oa,"includes").indexOf(oa,ra||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(ja){return ja?ja:function(oa,ra){return $jscomp.findInternal(this,oa,ra).i}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(ja){return ja?ja:function(oa){return this.then(function(ra){return Promise.resolve(oa()).then(function(){return ra})},function(ra){return Promise.resolve(oa()).then(function(){throw ra;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(ja){return ja?ja:function(oa){oa=Number(oa);return 0===oa||isNaN(oa)?oa:0<oa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function ja(){Sa.mode=ob.realtime;Sa.isRT=!0;Ba.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(Ba.adjust){Ba.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");Ba.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");Ba.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");Ba.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var ea=Ba.adjust;ea&&ea.addEventListener("click",Xb,!1);(ea=
Ba.adjustExit)&&ea.addEventListener("click",zb,!1);[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(ra)}Yb.enabled&&Va.do_instantDetection(Yb.interval,Yb.callback);fc&&(fc(!0),fc=null)}function oa(){var ea=document.createElement("style");ea.setAttribute("type","text/css");ea.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var ha=document.getElementsByTagName("head");1<=ha.length?ha[0].appendChild(ea):document.body.appendChild(ea)}
function ra(ea){ea&&(ea.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(ea).display&&ea.classList.add("_jeelizVTOForceShow"))}function Oa(ea){ea&&(ea.classList.add("_jeelizVTOForceHide"),ea.classList.remove("_jeelizVTOForceShow"))}function va(ea,ha){if(ea)for(var Fa in ha)ea.style[Fa]=ha[Fa]}function tb(ea){if(!ea)return{width:0,height:0};ea=ea.getBoundingClientRect();return{width:ea.width,height:ea.height}}function ta(ea){return new Promise(function(ha,Fa){var Na=new XMLHttpRequest;
Na.open("GET",ea,!0);Na.onreadystatechange=function(){if(4===Na.readyState)if(200===Na.status||0===Na.status)try{var Ka=JSON.parse(Na.responseText);ha(Ka)}catch(vb){Fa("INVALID JSON")}else Fa("HTTP ERROR "+Na.status)};Na.send()})}function Ja(ea,ha){return new Promise(function(Fa,Na){ta(ea).then(function(Ka){Oc(ha,Ka,Fa)}).catch(Na)})}function Ua(){xb.toggle_loading(!1);Sa.mode=ob.realtime;eb("INVALID_SKU")}function eb(ea){Bc.error?Bc.error(ea):console.log("ERROR:",ea)}function qb(ea){var ha=tb(Ba.container),
Fa=Math.abs(kb.displayWidth-ha.width),Na=Math.abs(kb.displayHeight-ha.height);if(!ea&&1>=Fa&&1>=Na)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(kb.displayWidth=ha.width,kb.displayHeight=ha.height,console.log("INFO in JeelizVTOWidget.resize: width = "+kb.displayWidth.toString()+" height = "+kb.displayHeight.toString()+" oFactor = "+(1).toString()),kb.cvWidth=Math.round(1*kb.displayWidth),kb.cvHeight=Math.round(1*kb.displayHeight),va(Ba.cv,{width:kb.displayWidth.toString()+
"px",height:kb.displayHeight.toString()+"px"}),Ba.cv.width=kb.cvWidth,Ba.cv.height=kb.cvHeight,Va)if(Sa.mode===ob.notLoaded)Va.set_size(kb.cvWidth,kb.cvHeight,!1);else Va.onLoad(function(){Va.resize(kb.cvWidth,kb.cvHeight,!1,ea)})}function Xb(){[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(Oa);Sa.mode=ob.adjust;[Ba.adjustNotice,Ba.adjustExit].forEach(ra);Ba.cv.style.cursor="move";Va.switch_modeInteractor("movePinch");qc("ADJUST_START")}function zb(){[Ba.adjustNotice,Ba.adjustExit].forEach(Oa);
[Ba.adjust,Ba.changeModelContainer,Ba.buttonResizeCanvas].forEach(ra);Ba.cv.style.cursor="auto";Sa.mode=Sa.realtime;Va.switch_modeInteractor("idle");qc("ADJUST_END")}function Kb(){if(!Ba.trackIframe){var ea=rc.appstaticURL+"jeewidget/";Ba.trackIframe=document.createElement("iframe");Ba.trackIframe.width="10";Ba.trackIframe.height="10";Ba.trackIframe.src=ea+"trackIframe.html";va(Ba.trackIframe,{position:"absolute",zIndex:-1,bottom:"0",right:"0"});Ba.container.appendChild(Ba.trackIframe)}}function Vb(ea,
ha){Sa.mode=ob.realtime;ha&&ha();xb.toggle_loading(!1);if(Ba.trackIframe){ha=location.href.split("?").shift().split("://").pop();ha=ha.split("/").shift();ha=ha.split("www.").pop();try{Ba.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:ha,sku:ea},"*")}catch(Fa){}}}function Wb(ea,ha,Fa,Na){var Ka=ha.mod+".json";ha.isStandalone?Ja(Cc+"models3DStandalone/"+Ka,ea).then(Fa):Va.load_model(Ka,ha.mats,Vb.bind(null,ea,Fa),ea,Na)}function Oc(ea,ha,Fa){Va.set_modelStandalone(ha,Vb.bind(null,
ea,Fa),ea)}function qc(ea){(ea=Pc[ea])&&ea()}var fd=function(){function ea(a,b){return a[0]*(1-b)+a[1]*b}function ha(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Fa(a,b){ha(a+"",function(d){b(JSON.parse(d))})}function Na(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=Na(a[d],b);return a}function Ka(a){return.5>
a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function vb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return"gl_FragColor=gl_FragColor;\n          vec4 zou=gl_FragColor;\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          gl_FragColor=0.5*zou*(vec4(1.)+tanhZou);";
default:return!1}}function La(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function lb(a,b,d){var f=1,l=0;for(d=b+d-1;d>=b;--d)l+=f*La(a,d),f*=2;return l}function Ab(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),f=0;f<b;++f)d[f]=a.charCodeAt(f);return d}function Fb(a){return"string"===typeof a?JSON.parse(a):a}function Ob(a){return"undefined"===typeof Fb(a).nb?Lb(a):Zb(a)}function Zb(a){var b=Fb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);
var d=b.n;b=Ab(b);for(var f=new Uint32Array(d),l=0;l<d;++l)f[l]=lb(b,l*a,a);return f}function Lb(a){var b=Fb(a);a=b.ne;var d=b.nf,f=b.n;b=Ab(b);for(var l=new Float32Array(f),p=new Float32Array(d),v=a+d+1,k=0;k<f;++k){var m=v*k,q=0===La(b,m)?1:-1,x=lb(b,m+1,a);m=m+1+a;for(var I=p.length,w=0,y=m;y<m+I;++y)p[w]=La(b,y),++w;for(I=m=0;I<d;++I)m+=p[I]*Math.pow(2,-I-1);l[k]=0===m&&0===x?0:q*(1+m)*Math.pow(2,1+x-Math.pow(2,a-1))}return l}function gc(a){var b=null,d=null,f=null,l=0,p=this,v=null,k={Mc:[],
Xd:"none",dg:!1,Wd:null,grid:null};this.m=function(){this.Wk(v.Mc);f.xo({Xd:v.Xd,dg:v.dg,Wd:v.Wd})};this.am=function(m){return b[m]};this.re=function(m){["s32","s34","s27"].forEach(function(q){Y.j(q,[{type:"2f",name:"u20",value:m}])});b&&b.forEach(function(q){q.re(m)})};this.Wk=function(m){var q=null;l=m.length;var x=null!==v.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),I=x?v.grid:[1,1];x&&this.re(I);b=m.map(function(w,y){w=Object.assign({},w,{index:y,parent:p,be:q,Km:y===l-1,Hc:x,Ca:I});
return q=0===y?id.instance(w):jd.instance(w)});d=b[0];f=b[l-1];b.forEach(function(w,y){0!==y&&w.xn()})};this.ya=function(m){m.h(0);var q=m;b.forEach(function(x){q=x.ya(q,!1)});return q};this.Xh=function(){return d.$l()};this.Ec=function(){return f.dm()};this.Th=function(){return f.Th()};this.A=function(){b&&(b.forEach(function(m){m.A()}),f=d=b=null,l=0)};"undefined"!==typeof a&&(v=Object.assign({},k,a),this.m())}function Mb(a,b){a[b]=!0;a.setAttribute(b,"true")}function sc(a,b){window.addEventListener("beforeunload",
function(){b&&b.getTracks&&b.getTracks().forEach(function(d){b.removeTrack(d)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)}function tc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function hc(a){if(!a)return a;var b=null;if(a.video){var d=function(f){return f&&"object"===typeof f?Object.assign({},f):f};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));
"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&uc(b,a.deviceId);return b}function uc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function ic(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}function jc(a){function b(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,z){return Math.abs(y-w)-
Math.abs(z-w)})}function d(w){var y=hc(a);w=w(y);l.push(w);f(w)}function f(w){if(w.video&&w.video.facingMode&&w.video.facingMode.exact){var y=w.video.facingMode.exact;w=hc(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=y;l.push(w)}}var l=[];if(!a||!a.video)return l;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=b(a.video.width.ideal).slice(0,3),v=b(a.video.height.ideal).slice(0,3),k={},m=0;for(k.Gb=void 0;m<p.length;k={Gb:k.Gb},++m){k.Gb=p[m];
var q={},x=0;for(q.xb=void 0;x<v.length;q={xb:q.xb},++x)if(q.xb=v[x],k.Gb!==a.video.width.ideal||q.xb!==a.video.height.ideal){var I=Math.max(k.Gb,q.xb)/Math.min(k.Gb,q.xb);I<4/3-.1||I>16/9+.1||d(function(w,y){return function(z){z.video.width.ideal=w.Gb;z.video.height.ideal=y.xb;return z}}(k,q))}}}d(function(w){return ic(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),d(function(w){delete w.video.width;
delete w.video.height;return w}));a.video.facingMode&&(d(function(w){delete w.video.facingMode;return w}),a.video.width&&a.video.height&&d(function(w){ic(w);delete w.video.facingMode;return w}));l.push({audio:a.audio,video:!0});return l}function kc(a){a.volume=0;Mb(a,"muted");if(tc()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",
b,!1)}setTimeout(function(){a.volume=0;Mb(a,"muted")},5)}}function vc(a){var b=Da.element,d=Da.uh;return null===b?Promise.resolve():new Promise(function(f,l){if(b.srcObject&&b.srcObject.getVideoTracks){var p=b.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=p[0],a?Qc(b,f,l,d):(p.stop(),f()))}else l("BAD_IMPLEMENTATION")})}function Rc(a,b,d,f){function l(v){p||(p=!0,d(v))}var p=!1;navigator.mediaDevices.getUserMedia(f).then(function(v){function k(){setTimeout(function(){if(a.currentTime){var q=
a.videoHeight;if(0===a.videoWidth||0===q)l("VIDEO_NULLSIZE");else{q={dl:null,Eg:null,en:null};try{var x=v.getVideoTracks()[0];x&&(q.en=x,q.dl=x.getCapabilities(),q.Eg=x.getSettings())}catch(I){}p||(sc(a,v),b(a,v,q))}}else l("VIDEO_NOTSTARTED")},700)}function m(){a.removeEventListener("loadeddata",m,!1);var q=a.play();kc(a);"undefined"===typeof q?k():q.then(function(){k()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=v:(a.src=window.URL.createObjectURL(v),
a.videoStream=v);kc(a);a.addEventListener("loadeddata",m,!1)}).catch(function(v){l(v)})}function Qc(a,b,d,f){a?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(Mb(a,"autoplay"),Mb(a,"playsinline"),f&&f.audio?a.volume=0:Mb(a,"muted"),kd(f).then(function(){Rc(a,b,function(){function l(v){if(0===v.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var k=v.shift();Rc(a,b,function(){l(v)},k)}}var p=jc(f);l(p)},f)})):d&&d("MEDIASTREAMAPI_NOT_FOUND"):d&&d("VIDEO_NOT_PROVIDED")}function kd(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[b];return d&&0!==d.length?new Promise(function(f){Sc(function(l){l?(l=l.find(function(p){var v=p.label;return v?d.some(function(k){return v.includes(k)}):!1}))?(a.video.deviceId={exact:l.deviceId},f("SUCCESS")):f("NO_PREFERRED_DEVICE_FOUND"):
f("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Sc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function ld(){function a(K){K=K?wc.ff:1;ia.width=K*J.width;ia.height=K*J.height;
return ia}function b(K){var R=K.length-1,ba=K[R];if("data:"===ba.substring(0,5))return ba;for(ba="";0<=R;--R){var pa=K[R],Ga="http"===pa.substring(0,4).toLowerCase();ba=pa+ba;if(Ga)break}return ba}function d(K,R,ba){return new Promise(function(pa){Aa.Ij(R);Ca.ba();rb.isEnabled=!0;Ya.isEnabled=!1;rb.Pa||(rb.Pa=lc.instance({}));K.Zh()&&(rb.Pa.vg(K.Zh()),Aa.qa(rb.Pa));K.set();Ya.isEnabled=!1;w();var Ga=mb.Vh(ba);setTimeout(function(){rb.isEnabled=!1;Aa.Ij(!1);pa(Ga)},1)})}function f(K,R){wa.Wc=.5;return new Promise(function(ba){Ya.ac=
K;Ya.isEnabled=!0;Ya.D=function(){var pa=Tc.instance(R());Ya.D=null;ba(pa)}})}function l(K,R){return new Promise(function(ba,pa){Fa(R+K,function(Ga){Ga.error?pa("SKU_NOT_FOUND"):ba({fn:Ga.intrinsic.mod+".json",dn:Ga.intrinsic.mats})})})}function p(K,R){var ba=b([J.da,J.va,J.Td+"/"]);R=R.map(function(pa){return ba+pa});U.model={url:b([J.da,J.va,J.Ud+"/"+K]),$b:R,ih:!1,hh:!1};return new Promise(function(pa){Ra.Gi(U.model,function(){S.isBusy=!1;pa()})})}function v(K,R){if(!R)return K;K=K.slice(0);var ba=
ab.rf().map(function(ib){return ib.toLowerCase()}),pa;for(pa in R){var Ga=R[pa],sb=-1;sb="number"===typeof pa?pa:ba.indexOf(pa.toLowerCase());-1!==sb&&(K[sb]=Ga)}return K}function k(K,R){return new Promise(function(ba,pa){S.set_model(K,function(){S.set_materials(R,function(){S.isBusy=!1;ba()})},function(){S.isBusy=!1;pa("CANNOT_LOAD_MODEL")})})}function m(K){K&&(z(),K.preOffset&&(Qb=K.preOffset),K.preScale&&($b=K.preScale),K.rx&&(t=K.rx),K.beginBendZ&&(u=K.beginBendZ),K.bendStrength&&(Rb=K.bendStrength),
K.maskBranchStartEnd&&(Sb=K.maskBranchStartEnd),S.ready&&Ra.ue())}function q(K){K.tweaker?m(K.tweaker):(z(),S.ready&&Ra.ue())}function x(){S.load_model=function(K,R,ba,pa,Ga,sb){if(S.isBusy)return!1;S.isBusy=!0;R=v(R,Ga);(U.model?k(K,R):p(K,R)).then(ba).catch(sb);return!0};S.set_offset=function(K){ma=K;Ra.se()};S.set_scale=function(K){na=K;Ra.te()};S.set_rx=function(K){xa=K;Ra.Xj()};S.switch_shadow=Aa.Jg;S.switch_bgBlur=Aa.Ig;S.set_zoom=Aa.ug;S.is_viewer3D=function(){return Ea===ua.Ja};S.switch_viewer3D=
function(K,R){if(Ea===ua.lc||Ea===ua.mc||Ea===ua.X&&!K||Ea===ua.Ja&&K||Ya.isEnabled)return!1;if(Ea===ua.ua)return wb!==ua.Ja||K?wb===ua.X&&K?(wb=ua.Ja,Aa.qa(wa.Fb),Aa.cb(1),R&&R(),!0):!1:(wb=ua.X,Aa.qa(wa.Ia),Aa.cb(0),R&&R(),!0);var ba=0,pa=-1,Ga=0;Ea===ua.X?(Ea=ua.lc,pa=J.ep):Ea===ua.Ja&&(Ea=ua.mc,pa=J.hp);var sb=Dc.lf();pb=setInterval(function(){var ib=Dc.lf();ba+=(ib-sb)/pa;1<=ba&&(ba=1,Ea===ua.lc?(Ea=ua.Ja,Aa.qa(wa.Fb)):(Ea=ua.X,Aa.qa(wa.Ia)),R&&R(),clearInterval(pb),pb=null);var Pb=Ea===ua.mc||
Ea===ua.X?1-J.bp(ba):J.ap(ba);Aa.cb(Pb);Ea!==ua.mc&&Ea!==ua.lc||0!==Ga++%2||(Aa.qa(wa.Xf),wa.Xf.ro(Pb));sb=ib},.016);return!0};S.capture_image=function(K,R,ba,pa){Ya.ac=K;Ya.isEnabled=!0;"undefined"===typeof isAllocate&&(ba=!1);(pa="undefined"===typeof pa?!1:pa)&&Aa.ke(!1);L();Ya.D=function(){Aa.dj(0);c.flush();var Ga=mb.Vh(ba);R(Ga);pa&&Aa.ke(!0)}};S.capture_detection=function(K,R){var ba=null===ca.Hb?ca.kb:ca.Zc;f(K,function(){return{od:la.oc.clone(),Yf:ab.ci(),Tf:ab.ai(),background:ba.clone(),
Pa:ya.Ka.di().clone(),Sf:nb}}).then(R)};S.process_image=function(K){function R(){return new Promise(function(Bb,ub){Ya.Tg=ib.updateLightInterval;f(ib.nSteps,ba).then(function(jb){Ya.Tg=3;jb?1>=jb.fm().data[0]?(jb.I(),ub("FACE_NOT_FOUND")):d(jb,ib.isMask,!0).then(function(md){Aa.qa(wa.Ia);jb.I();Bb(md)}):ub("CRITICAL")});w()})}function ba(){return{od:la.oc.clone(),Yf:!1,Tf:!1,background:J.yq?!1:ca.kb.clone(!0),Pa:ya.Ka.di().clone()}}function pa(){return new Promise(function(Bb,ub){l(ib.modelSKU,ib.glassesDBURL).then(function(jb){S.load_model(jb.fn,
jb.dn,function(){Bb()},ib.modelSKU,null,function(){ub("CANNOT_LOAD_MODEL")})}).catch(function(jb){ub(jb)})})}function Ga(){if(ib.image){var Bb=ib.image;sb(Bb);return Promise.resolve(Bb)}return new Promise(function(ub){var jb=new Image;jb.onload=function(){sb(jb);ub()};jb.src=ib.imageBase64})}function sb(Bb){var ub=Bb.width,jb=Bb.height;if(ub!==J.width||jb!==J.height)Da.Ld&&(Da.element.width=ub,Da.element.height=jb),E(ub,jb,ib.overSamplingFactor);Da.Ih.drawImage(Bb,0,0);L()}var ib=Object.assign({imageBase64:null,
image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},K);if(J.Kc)throw Error("This feature cannot be called");var Pb=cb.FOVforced;ib.FOVHztDeg&&(cb.FOVforced=ib.FOVHztDeg);Aa.qa(wa.Ia);return new Promise(function(Bb,ub){return pa().then(Ga).then(function(){R().then(function(jb){cb.FOVforced=Pb;Bb(jb)}).catch(ub)}).catch(ub).catch(ub)})};S.process_offlineRendering=function(K,R,ba,pa,Ga){Ra.Sn();
pa&&(S.jk.drawImage(mb.tb(),0,0),mb.tb().parentNode.insertBefore(S.Ib,mb.tb()),S.Ib.setAttribute("class","jeefitMask"));S.set_model(R,function(){S.set_materials(ba,function(){setTimeout(function(){d(K,pa).then(Ga);Ra.Pn(pa?function(){mb.tb().parentNode.removeChild(S.Ib)}:!1)},1)})})};S.serialize_detection=function(K){return K.bc()};S.unserialize_detection=function(K,R,ba){return Tc.Yc(K,R,ba)};S.do_instantDetection=function(K,R){Uc.m(la.oc);Uc.start(K,R)};S.relieve_DOM=function(K,R){if(ka.Vb)return!1;
g(R||160);Pa=!1;O&&clearTimeout(O);O=setTimeout(function(){g(J.Aa);O=!1;G()},K);return!0};S.switch_slow=function(K,R){if(ka.Vb)return!1;"undefined"===typeof R&&(R=J.rk);O&&(g(J.Aa),G(),clearTimeout(O),O=!1);K?Pa=!1:G();g(K?R:J.Aa);return!0};S.switch_sleep=function(K,R){function ba(){S.isBusy=!1;K?(wb=Ea,Ea=ua.ua):(Ea=wb,w())}if(ka.Vb||S.isBusy)return R?Promise.reject():null;if(K&&Ea===ua.ua||!K&&Ea!==ua.ua)return R?Promise.resolve(!1):!1;pb&&(clearInterval(pb),pb=null);Ea===ua.mc?(Ea=ua.X,Aa.qa(wa.Ia),
Aa.cb(0)):Ea===ua.lc&&(Ea=ua.Ja,Aa.qa(wa.Fb),Aa.cb(1));Db.stop();var pa=null;S.isBusy=!0;R?pa=vc(!K).then(ba):ba();return R?pa:!0};S.set_modelStandalone=function(K,R){Aa.le(!1);Ec.instance({md:q,url:K.model,$b:K.materials,Me:function(ba){y(ba);R&&R();Ra.Gg();Aa.le(!0)}})};S.start_rendering=Ra.Gg;S.get_partsNames=function(){return ab?ab.rf():[]};S.update_material=function(K,R,ba){if(!ab)return Promise.reject("MODEL_NOT_LOADED");var pa=-1;switch(typeof K){case "number":pa=K;break;case "string":pa=ab.rf().findIndex(function(Ga){return Ga.includes(K)});
if(-1===pa)return Promise.reject("PART_NOT_FOUND");break;default:return Promise.reject("INVALID_PART_ID")}void 0===ba&&(ba=!0);ab.Wj(pa,R,ba);return Promise.resolve()};S.set_model=function(K,R,ba){ab&&(K=b([J.da,J.va,J.Ud+"/",K]),ab.replace(K,function(){R&&R(ab.hl())},ba))};S.set_tweaker=function(K,R){function ba(pa){m(pa);R&&R()}"string"===typeof K?ha(J.da+J.va+J.Jo+"/"+K,ba):ba(K)};S.get_tweaker=function(){return{preOffset:Qb,preScale:$b,rx:t,beginBendZ:u,bendStrength:Rb,maskBranchStartEnd:Sb}};
S.get_materialsSpec=function(){return ab?ab.$h():Promise.reject("NOT_READY")};S.set_materials=function(K,R){if(ab){var ba=b([J.da,J.va,J.Td+"/"]);K=K.map(function(pa){var Ga=pa;"string"===typeof pa&&(Ga=ba+pa,Ga=Ga.replace(/([^:])\/\//,"$1/"));return Ga});ab.wg(K,R)}};S.replace_material=function(K,R){if(ab)return ab.$h().then(function(ba){ba=Object.assign({isReplaced:!0},ba[R]);ab.Wj(R,K,!0);return ba})}}function I(){fa.Wg(wc.Kl);Ra.Xc();J.Yb&&(Ca.reset(),ya.Ka.mh(Da.$),ya.Ka.lh());S.ready=!0;S.dd.forEach(function(K){K()});
S.dd.splice(0)}function w(){Nb.reset();Db.stop();Ca.ba();h(0)}function y(K){ab&&(Aa.Jn(ab),ab.remove());Aa.lk(K);ab=K}function z(){Qb=[0,0,0];$b=1;Rb=u=t=0;Sb=J.Nc}function g(K){r=K;Db.update({Aa:r})}function h(K){$a=-1;if(Ya.isEnabled)$a=Ya.ac;else if(rb.isEnabled)$a=rb.ac;else if(Pa){if(!L())return;$a=Ea===ua.X?Nb.W():1}else if($a=J.ad[0],!L())return;Ca.ba();if(!rb.isEnabled)for(var R=0;R<$a;++R)Y.set("s64"),ca.Df.L(.25*ia.width,Z.Xh()),ca.kb.h(0),la.Pc.h(1),X.l(!1,!1),Z.ya(ca.Df),Ya.isEnabled&&
0===(R+1)%Ya.Tg&&A();Ya.isEnabled?(Ya.D&&Ya.D(),Ya.isEnabled=!1,c.flush(),Ea!==ua.ua&&Db.pg(h)):(Aa.animate(K),ca.lg&&Math.abs(W-wa.Di)>wa.Lj&&J.Yb&&Ea===ua.X&&(Ca.ba(),A(),Ca.aa()),rb.isEnabled||(Pa&&(Nb.Pj(),R=Nb.Uh(1),bb=ea(J.pk,R),J.Yb&&Ea===ua.X&&(wa.Lj=ea(J.Fi,R),wa.Wc=ea(J.Xm,R),wa.Wc=Math.min(wa.Wc,.5))),W=K,Ea!==ua.ua&&Db.pg(h)))}function G(){W=Dc.lf();Pa=!0}function L(){var K=15;if(!Da.Ld){if(!Da.element.videoWidth)return Db.stop(),S.request_cameraVideoStream().then(w),!1;var R=Da.element.currentTime;
if(!R)return!0;K=R-Fc;0>K&&(Fc=R);if(1E3*K<J.Wo)return!0}Da.$.refresh();Fc+=K;Da.vd=K;sa=!0;Ca.ba();Y.set("s0");la.mg.L();la.Pc.Tk(0);X.l(!0,!0);Y.set("s62");ca.kb.L();Da.$.h(0);X.l(!1,!1);null!==ca.Hb&&(Y.set("s63"),ca.Zc.o(),ca.kb.h(0),ca.Hb.h(1),X.l(!1,!1));return!0}function B(){ca.ak=aa.instance({isPot:!0,isLinear:!0,isFloat:!1,url:J.da+J.va+J.Xo});var K={isPot:!1,isLinear:!0,isFloat:!1,width:ia.width,height:ia.height};ca.kb=aa.instance(K);ca.Zc=aa.instance(K);ka.Mj.push(ca.kb,ca.Zc);ca.Df=nd.instance({});
J.Qd&&(Tb=aa.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(J.Rf||-1!==J.Qf.indexOf("//")?"":J.da+J.va)+J.Qf}))}function n(){function K(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var R={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};la.Pc=Gc.instance(K());la.mg=aa.instance(K());la.oc=aa.instance(K());la.Zd=Gc.instance(K());la.$e=aa.instance(R);R={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,
0,0,0,0,0,0,0])};la.Xg=aa.instance(R);la.we=aa.instance(R);wa.$d=aa.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function e(K){ca.lg=K;if(sa){sa=!1;Y.set("s70");la.Xg.L();la.we.h(2);var R=ea(J.Vk,Nb.Uh(.5));Y.C("u67",R);la.mg.h(1);Y.C("u68",1E3*Da.vd);X.l(!1,!1);Y.set("s71");la.we.o();la.Xg.h(0);X.l(!1,!1)}K.h(0);la.Pc.rj(1);c.viewport(0,0,1,1);Y.set("s65");Y.Cg("u47",Vc.get(0));X.l(!1,!1);Y.set("s66");c.viewport(1,0,2,1);X.l(!1,!1);la.$e.L();Y.set("s67");Y.O("u58",
J.He[0]*bb,J.He[1]);la.Pc.h(0);la.Zd.h(1);X.l(!1,!1);Y.set("s68");la.Zd.rj(1);la.$e.h(0);la.we.h(2);la.Pc.h(3);X.l(!1,!1);Y.set("s69");la.Zd.h(0);la.oc.o();X.l(!1,!1)}function A(){wa.Di=W;wa.$d.L();Y.set(H.si?"s73":"s72");ca.lg.h(0);X.l(!1,!1);ya.Ka.$j(Da.$,wa.$d,wa.Wc)}function F(){return new Promise(function(K){var R=J.da,ba=J.$c.split("://").shift();if("http"===ba||"https"===ba)R="";R+=J.$c;"json"!==R.split(".").pop()&&(R+=J.neuralNetworkPath);ha(R,function(pa){pa=JSON.parse(pa);if(pa.exportData){var Ga=
pa.exportData;H.ab=H.ab||Ga.rotationEulerAnglesFactors;H.Bc=H.Bc||Ga.deformScaleXFactor;H.sa=H.sa||Ga.translationScalingFactors;H.Hh=Ga.dyOffset||0;H.Fh=Ga.dsOffset||0;H.si=Ga.isLThetaSplitCosSin||!1}Z=new gc({Mc:pa.layers,Xd:"gpuRawAvg",Wd:e});K()})})}function N(K){a(K);K=J.width;var R=J.height;Q.pb[0]=1;Q.pb[1]=K/R;Vc.m({Yd:J.scanOverlapFactors,Oi:J.scanNScaleLevels,fa:K,zf:R,jj:J.scanScale0Factor,sa:H.sa,qg:!0});ac=K>R?[K/R,1]:[1,R/K];ka.Na=!0}function C(){Y.j("s64",[{type:"1i",name:"u1",value:0},
{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:Q.pb},{type:"1f",name:"u43",value:H.Bc},{type:"1f",name:"u45",value:H.Hh},{type:"1f",name:"u44",value:H.Fh}]);Y.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:J.Ho},{type:"1f",name:"u52",value:J.ol},{type:"3f",name:"u48",value:[H.sa[0]*Q.pb[0],H.sa[1]*Q.pb[1],H.sa[2]]},{type:"3f",name:"u49",value:[J.nc[0][0],J.nc[1][0],J.nc[2][0]]},{type:"3f",name:"u50",value:[J.nc[0][1],J.nc[1][1],J.nc[2][1]]}]);
Y.j("s66",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u55",value:J.An},{type:"3f",name:"u53",value:H.ab},{type:"3f",name:"u54",value:J.Oj},{type:"1f",name:"u56",value:J.Ll}]);Y.j("s67",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:J.He},{type:"1f",name:"u59",value:J.Qn},{type:"1f",name:"u60",value:J.zn}]);Y.j("s68",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",
name:"u63",value:3},{type:"2f",name:"u42",value:Q.pb},{type:"1f",name:"u65",value:Z.Xh()},{type:"2f",name:"u64",value:J.Mn}]);Y.j("s69",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",value:J.Tn}]);Y.j("s70",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:H.ab},{type:"3f",name:"u54",value:J.Oj}]);Y.j("s71",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:J.Io},{type:"2f",name:"u71",value:J.Rn}]);Y.j("s72",[{type:"1i",
name:"u46",value:0}]);Y.j("s73",[{type:"1i",name:"u46",value:0}]);Y.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function E(K,R,ba){var pa=0===ba,Ga=a(pa);J.width=K;J.height=R;N(pa);C();ka.Mj.forEach(function(sb){sb.resize(K,R)});ba=pa?1:ba;fa.resize(Ga.width*ba,Ga.height*ba);Ra.Xc();fb.Dg(Da.element.videoWidth||Da.element.width,Da.element.videoHeight||Da.element.height);fb.Kg();fb.Jj()}function M(){Db.stop();ka.hb&&(clearTimeout(ka.hb),ka.hb=null);if(!ka.Vb){var K=ka.width,
R=ka.height;if(J.width===K&&J.height===R)w();else if(Ea!==ua.X&&Ea!==ua.Ja)ka.hb=setTimeout(M,J.hj);else{var ba="undefined"===typeof Eb?!1:Eb.get_mode(),pa=Ea;Ea=ua.ua;ka.Vb=!0;Ya.isEnabled=!0;Ya.D=function(){Ya.isEnabled=!1;ka.Vb=!1;G();g(J.Aa);O&&clearTimeout(O);O=!1;Ea=pa};E(K,R,0);w();Ea===ua.Ja&&(Ea=ua.X,S.switch_viewer3D(!0,!1));ba&&Eb.switch_mode(ba)}}}var t,u,Q={pb:[-1,-1]},V=null,T=[.5,0,0,.5],ia={width:-1,height:-1},P={width:-1,height:-1,hb:null,Vb:!1,Na:!1,Mj:[]},ka=Object.assign({},P),
Qa=[0,J.ae[1],J.ae[2]],H={ab:[-J.ab[0],-J.ab[1],J.ab[2]],Bc:J.Bc,sa:J.sa,Hh:0,Fh:0,si:!1},r=J.Aa,O=null,Z=null;a(!0);var ma=[0,0,0],na=1,xa=0,qa={kb:null,Zc:null,Df:null,ak:null,lg:null,Hb:null},ca=Object.assign({},qa),la={mg:null,oc:null,Zd:null,$e:null,Xg:null,we:null},W=0,sa=!1,Ia={Ia:null,Fb:null,Xf:null,Di:0,Lj:J.Fi[1],Wc:.1,$d:null},wa=Object.assign({},Ia),gb=!1,Ta=!1,Pa=!0,bb=1,$a=-1,ua={ua:-1,X:0,Ja:1,lc:2,mc:3},Ea=ua.X,pb=null,wb=ua.X,Ya={isEnabled:!1,ac:1,Tg:3,D:null},rb={isEnabled:!1,Pa:null,
ac:0},Tb=null,ac=-1,mc=!1,Wa=!1,nc=!1,da=[0,0,0],za=1,hb,Ma,Gb,Qb=[0,0,0],$b=1,Rb=u=t=0,Sb=J.Nc,xc=[0,0,0],nb={scale:1,offsetX:0,offsetY:0},Fc=0,Ra={m:function(){Y.tc([{id:"s62",name:"_",v:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",J:["a0"],S:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
v:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",J:["a0"],S:[2],
i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s65",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.),f=vec4(0.),e=vec4(.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s67",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.),j=vec4(0.,0.,0.,0.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 k=texture2D(u41,vv0),l=texture2D(u57,vv0),q=texture2D(u41,g),m=texture2D(u57,g);float n=pow(m.a,u60),o=mix(u58.y,u58.x,n),b=step(.66,vv0.x),c=step(.34,vv0.x)*(1.-b);vec4 a=mix(h,i,c);a=mix(a,j,b);vec4 d=max(o*f,a);d*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),c);vec4 p=k-l;gl_FragColor=p*d;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 w=vec4(0.),x=vec4(1.);const vec2 j=vec2(.25,.5),k=vec2(.75,.5),g=vec2(.16,.5),l=vec2(.5,.5);varying vec2 vv0;bool f(float a){return (a<0.||0.<a||a==0.)&&a+1.!=a?false:true;}void main(){float y=step(vv0.x,.33),m=step(.33,vv0.x)*step(vv0.x,.66),z=step(.66,vv0.x);vec4 n=texture2D(u63,l);float b=n.a;b*=texture2D(u62,j).a,b*=texture2D(u62,k).a;vec4 o=texture2D(u57,vv0),p=texture2D(u61,vv0),c=o+p;c.a=mix(c.a,b,m);vec4 e=texture2D(u57,g),q=texture2D(u63,g);vec2 r=e.gb,s=q.gb;float t=e.a;vec2 h=u65*abs(r-s)/(u42*t);float u=max(h.x,h.y),v=smoothstep(u64.x,u64.y,u);vec4 i=texture2D(u63,vv0),a=mix(c,i,v);if(f(a.x)||f(a.y)||f(a.z)||f(a.w)){gl_FragColor=i;return;}gl_FragColor=a;}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25);const vec3 g=vec3(1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s71",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s72",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s73",name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s63",name:"_",g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);n();Db.m({ri:!1,Aa:r});Nb.m({ag:0,n:J.ad[1]-J.ad[0]+1,Ei:J.ad[0]});S.set_videoRotation=function(K){cb.rotate=K;S.ready&&(fb.Dg(Da.element.videoWidth,Da.element.videoHeight),fb.Kg())};S.set_viewRotation=function(){};S.set_LUT=function(K){return new Promise(function(R){K?aa.instance({url:K,isFloat:!1,isFlipY:!1,D:function(ba){ca.Hb=ba;Ra.Xc();R()}}):(ca.Hb=null,Ra.Xc(),R())})};S.resize=function(K,R,ba,pa){S.ready&&(ka.hb&&(clearTimeout(ka.hb),ka.hb=null),Db.stop(),ba=ba?wc.ff:1,ka.width=
K*ba,ka.height=R*ba,ka.hb=setTimeout(M,pa?0:J.hj))};return F()},Ml:E,Eo:function(){B();N(!0);C();Ra.Jj();x();S.cd.forEach(function(K){K()});S.cd.splice(0);U.model&&!S.isBusy?Ra.Gi(U.model):J.Kc||I();return Promise.resolve()},em:function(){return ia},A:function(){return new Promise(function(K,R){S.ready?(Db.A(),S.switch_sleep(!0,!0).finally(function(){Z&&Z.A();fa.A();mb.A();c&&(c=null);Z=null;J.Rf=!1;ab=null;Ta=gb=!1;Pa=!0;bb=1;$a=-1;Ea=ua.X;pb=null;wb=ua.X;Object.assign(ka,P);Object.assign(Da,Wc);
Object.assign(ca,qa);Object.assign(wa,Ia);S.ready=!1;S.isBusy=!1;S.load_model=null;K()}).catch(function(ba){R(ba)})):R("NOT_READY")})},Xc:function(){Aa.pj(la.oc,null===ca.Hb?ca.kb:ca.Zc,wa.$d,ca.ak)},cm:function(){return nb},xj:function(K){nb=K},se:function(){xc[0]=ma[0]-nb.offsetX;xc[1]=ma[1]+nb.offsetY;xc[2]=ma[2];Aa.Zn(Qa,Qb,xc)},te:function(){Aa.$n(na*J.vn,$b,nb.scale)},Xj:function(){Aa.ao(xa+t)},Oo:function(){Aa.Xn(J.hd+u,J.Lb+Rb)},Qo:function(){Aa.Yn(Sb)},ue:function(){Ra.se();Ra.te();Ra.Xj();
Ra.Oo();Ra.Qo()},Sn:function(){Db.stop();pb&&(clearInterval(pb),pb=null);rb.isEnabled=!0;rb.ac=0;mc=Aa.bm();Wa=ab.ci();nc=ab.ai();za=$b;da=Qb;hb=Sb;Ma=u;Gb=Rb;Ya.isEnabled=!1;Aa.ke(!1)},Pn:function(K){function R(){2===++ba&&(rb.isEnabled=!1,$b=za,Qb=da,Sb=hb,u=Ma,Rb=Gb,Ra.ue(),Aa.qa(mc),w(),K&&K())}var ba=0;Ea===ua.lc?Ea=ua.Ja:Ea===ua.mc&&(Ea=ua.X);Aa.cb(Ea===ua.X?0:1);ab.replace(Wa,R);ab.wg(nc,R);Ra.Xc();Aa.ke(!0)},Jj:function(){var K=Math.tan(Da.Qb/2);Aa.oj({hf:J.hf/K,Un:K,yn:Da.Zi,Ga:J.Ga,Zf:J.Zf,
$f:J.$f,dk:Q.pb,ik:J.$o,Fc:J.Fc,yf:J.yf,wf:J.wf,xf:J.xf,Nc:Sb,Ie:J.Ie,Ve:J.Ve,og:J.og,ic:J.ic,yo:J.Dj,zo:J.Ej,je:J.je,jc:J.jc,pd:J.pd,Ye:J.Ye,Xe:J.Xe,We:J.We,Le:J.Le,Ke:J.da+J.va+J.Ke,hd:J.hd+u,Lb:J.Lb+Rb,uf:J.uf,bh:J.bh,ah:J.ah,ze:J.ze,gp:J.fp,ye:Da.ye,Qd:J.Qd,Zm:Tb,Pd:J.Pd,Rd:J.Rd,Pf:J.Pf,Ym:ac,Lg:J.Lg})},el:function(){var K=cb.Ce,R=cb.Be,ba=1/Math.tan(Da.Qb/2),pa=mb.Z()/mb.P();Da.Zi=[ba,0,0,0,0,ba/pa,0,0,0,0,-(R+K)/(R-K),-1,0,0,-2*K*R/(R-K),0];Da.ye=1/Math.tan(J.cp*Math.PI/360)/ba},Dg:function(K,
R){V=[.5,.5];K=R/K;R=mb.Z()/mb.P();90===Math.abs(cb.rotate)&&(K=1/K);K>R?V[1]*=R/K:V[0]*=K/R;T[0]=0;T[1]=0;T[2]=0;T[3]=0;switch(cb.rotate){case 0:T[0]=V[0];T[3]=V[1];break;case 180:T[0]=-V[0];T[3]=-V[1];break;case 90:T[1]=V[0];T[2]=-V[1];break;case -90:T[1]=-V[0],T[2]=V[1]}J.ui||(T[0]*=-1,T[1]*=-1);R=cb.FOVforced;Da.Qb=2*Math.atan(2*V[0]*Math.tan((R?R:1<K?cb.FOVmobile:cb.FOVdesktop)*Math.PI/180/2));Ra.el()},Kg:function(){Y.j("s62",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:T}])},
Cf:function(K,R){return Ta?Promise.resolve():new Promise(function(ba,pa){Ra.wm(K,R);Promise.all([Ra.m(),Ra.xm()]).then(function(){Ra.ki();Ta=!0;ba()}).catch(function(Ga){S.ob&&S.ob("GL_INCOMPATIBLE","Cannot init JEELIZVTO");pa(Ga)})})},wm:function(K,R){S.Jb=document.createElement("canvas");S.Ib=document.createElement("canvas");S.Ib.width=J.width;S.Ib.height=J.height;S.jk=S.Ib.getContext("2d");S.replace_video=function(ba){Da.element=ba;Da.Rg.la=Da.element;return!0};S.sc=S.Jb.getContext("2d");S.capture_background=
function(ba,pa){ba="undefined"===typeof ba?K:ba;pa="undefined"===typeof pa?R:pa;S.Jb.width=ba;S.Jb.height=pa;var Ga=ba/pa,sb=0,ib=0;if(K/R>Ga){var Pb=R*Ga;Ga=R;sb=Math.round((K-Pb)/2)}else Pb=K,Ga=K/Ga,ib=Math.round((R-Ga)/2);S.sc.save();S.sc.translate(ba,0);S.sc.scale(-1,1);S.sc.drawImage(Da.element,sb,ib,Pb,Ga,0,0,ba,pa);S.sc.restore();ba=document.createElement("canvas");ba.width=S.Jb.width;ba.height=S.Jb.height;ba.getContext("2d").drawImage(S.Jb,0,0);return ba}},ki:function(){window.CanvasListeners&&
(Eb.init({ra:mb.tb()}),S.init_listeners=Ra.ki,S.add_listener=Eb.add_listener,S.remove_listener=Eb.remove_listener,S.animate_swipe=Eb.animate_swipe,S.switch_modeInteractor=Eb.switch_mode,S.get_modeInteractor=Eb.get_mode,Eb.add_listener("move",function(K,R){Ea===ua.X&&(J.$m&&(nb.offsetX-=R[0]*J.Ii,nb.offsetX=Math.min(Math.max(nb.offsetX,-J.Sd),J.Sd)),nb.offsetY-=R[1]*J.Ii,nb.offsetY=Math.min(Math.max(nb.offsetY,-J.Sd),J.Sd),Ra.se())},!0).add_listener("pinch",function(K,R){Ea===ua.X&&(nb.scale+=R*J.an,
nb.scale=Math.min(Math.max(nb.scale,J.Ji[0]),J.Ji[1]),Ra.te())},!0))},xm:function(){return new Promise(function(K,R){fa.m({Jd:!1,cl:!1,expand:!1,ra:mb.tb(),Rb:mb,onload:function(){wa.Fb=lc.instance({Kb:J.da+J.va+db.Yo,vc:J.da+J.va+db.Zo,uc:db.bk,wc:db.ck});J.Yb?(wa.Ia=lc.instance({}),ya.Ka.qa(wa.Ia)):wa.Ia=wa.Fb;Aa.qa(wa.Ia);wa.Xf=J.Yb?od.instance({Wm:wa.Ia,Um:wa.Fb}):wa.Fb;K()}})||R("CANNOT_INIT_JE3D")})},Gg:function(){gb||(gb=!0,Ra.ue(),I(),W=0,J.Kc&&w())},Gi:function(K,R){K=Ec.instance({Me:function(){Ra.Gg();
R&&R()},md:q,url:K.url,$b:K.$b});y(K)},Kj:function(){if(J.Yb){var K=Object.assign({},db,{Bb:b([J.da,J.va,db.Bb])});ya.Ka.ib(K)}}};return Ra}function Xc(){return new Promise(function(a,b){S.Ee&&S.Ee();Da.Ld=!1;var d={width:{min:cb.minWidth,max:cb.maxWidth,ideal:cb.idealWidth},height:{min:cb.minHeight,max:cb.maxHeight,ideal:cb.idealHeight},facingMode:{ideal:"user"}},f={video:d,audio:!1};Da.uh=f;d&&-1!==Da.deviceId&&uc(f,Da.deviceId);Qc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):
!1,function(l){S.Fe&&S.Fe(l);Yc(l).then(a).catch(b)},function(l){S.ob&&S.ob("WEBCAM_UNAVAILABLE",l);b(l)},f)})}function Yc(a){Da.element=a;a=Da.element.videoWidth||Da.element.width;var b=Da.element.videoHeight||Da.element.height;Da.Rg={la:Da.element,isPot:!1,isFloat:!1,isFlipY:!0};Da.$=aa.instance(Da.Rg);fb.Dg(a,b);return fb.Cf(a,b).then(function(){fb.Kg();return fb.Eo()}).catch(function(d){return Promise.reject(d)})}function pd(){var a=document.createElement("canvas");a.width=J.width;a.height=J.height;
Da.Ih=a.getContext("2d");Da.Ld=!0;return Yc(a)}function bc(a){return 3===arguments.length?this.rb(arguments):this.set(a)}function Zc(a,b){b=Math.floor(b);a.r=(b>>16&255)/255;a.Y=(b>>8&255)/255;a.b=(b&255)/255}function qd(a,b){function d(k){void 0!==k&&1>parseFloat(k)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var f;if(f=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var l=f[2];switch(f[1]){case "rgb":case "rgba":if(f=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=
Math.min(255,parseInt(f[1],10))/255;a.Y=Math.min(255,parseInt(f[2],10))/255;a.b=Math.min(255,parseInt(f[3],10))/255;d(f[5]);return}if(f=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(100,parseInt(f[1],10))/100;a.Y=Math.min(100,parseInt(f[2],10))/100;a.b=Math.min(100,parseInt(f[3],10))/100;d(f[5]);return}break;case "hsl":case "hsla":if(f=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){l=parseFloat(f[1])/360;var p=parseInt(f[2],
10)/100,v=parseInt(f[3],10)/100;d(f[5]);a.Wn(l,p,v);return}}}else if(f=/^#([A-Fa-f0-9]+)$/.exec(b)){f=f[1];l=f.length;if(3===l){a.r=parseInt(f.charAt(0)+f.charAt(0),16)/255;a.Y=parseInt(f.charAt(1)+f.charAt(1),16)/255;a.b=parseInt(f.charAt(2)+f.charAt(2),16)/255;return}if(6===l){a.r=parseInt(f.charAt(0)+f.charAt(1),16)/255;a.Y=parseInt(f.charAt(2)+f.charAt(3),16)/255;a.b=parseInt(f.charAt(4)+f.charAt(5),16)/255;return}}b&&0<b.length&&(f=rd[b],void 0!==f?Zc(a,f):console.warn("JETHREE.Color: Unknown color "+
b))}function yc(a,b,d,f){this.F=a||0;this.G=b||0;this.H=d||0;this.T=void 0!==f?f:1}function $c(a,b,d){var f=b.F,l=b.G,p=b.H;b=b.T;var v=d.F,k=d.G,m=d.H;d=d.T;a.F=f*d+b*v+l*m-p*k;a.G=l*d+b*k+p*v-f*m;a.H=p*d+b*m+f*k-l*v;a.T=b*d-f*v-l*k-p*m;return a}function cc(a,b){this.x=a||0;this.y=b||0}function Xa(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function ad(a,b){var d=a.x,f=a.y,l=a.z;a.x=f*b.z-l*b.y;a.y=l*b.x-d*b.z;a.z=d*b.y-f*b.x}function dc(a,b,d,f){this.F=a||0;this.G=b||0;this.H=d||0;this.Sa=f||dc.ek}
function Hc(a,b){this.min=void 0!==a?a:new Xa(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Xa(-Infinity,-Infinity,-Infinity)}function zc(a){return(new Xa).ed(a.min,a.max).Ea(.5)}function sd(a,b){a.min.min(b);a.max.max(b)}function ec(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function bd(a,b,d){var f=b.elements,l=d.elements;d=a.elements;b=f[0];var p=
f[4],v=f[8],k=f[12],m=f[1],q=f[5],x=f[9],I=f[13],w=f[2],y=f[6],z=f[10],g=f[14],h=f[3],G=f[7],L=f[11];f=f[15];var B=l[0],n=l[4],e=l[8],A=l[12],F=l[1],N=l[5],C=l[9],E=l[13],M=l[2],t=l[6],u=l[10],Q=l[14],V=l[3],T=l[7],ia=l[11];l=l[15];d[0]=b*B+p*F+v*M+k*V;d[4]=b*n+p*N+v*t+k*T;d[8]=b*e+p*C+v*u+k*ia;d[12]=b*A+p*E+v*Q+k*l;d[1]=m*B+q*F+x*M+I*V;d[5]=m*n+q*N+x*t+I*T;d[9]=m*e+q*C+x*u+I*ia;d[13]=m*A+q*E+x*Q+I*l;d[2]=w*B+y*F+z*M+g*V;d[6]=w*n+y*N+z*t+g*T;d[10]=w*e+y*C+z*u+g*ia;d[14]=w*A+y*E+z*Q+g*l;d[3]=h*B+G*
F+L*M+f*V;d[7]=h*n+G*N+L*t+f*T;d[11]=h*e+G*C+L*u+f*ia;d[15]=h*A+G*E+L*Q+f*l;return a}function Ic(a,b,d,f,l,p){this.a=a;this.b=b;this.c=d;this.Fa=f instanceof Xa?f:new Xa;this.xe=Array.isArray(f)?f:[];this.color=l instanceof bc?l:new bc;this.Zg=Array.isArray(l)?l:[];this.Zb=void 0!==p?p:0}function td(a,b,d){var f=new XMLHttpRequest;f.open("GET",a,!0);var l=f.withCredentials=!1;f.onreadystatechange=function(){404!==f.status||l||(l=!0,d&&d(404));if(4===f.readyState&&200===f.status){var p=null;try{p=
JSON.parse(f.responseText)}catch(v){d&&d(-1)}b&&p&&b(p)}};f.onerror=function(){d&&d(0)};f.send()}function Jc(a,b,d){"object"===typeof a?b(a):td(a,b,d)}function ud(a){return new Promise(function(b,d){Jc(a,b,d)})}function vd(a,b){for(var d=new Xa,f=new Xa,l=0,p=b.length;l<p;l++){var v=b[l],k=a[v.a],m=a[v.b],q=a[v.c];k&&m&&q&&(d.gb(q,m),f.gb(k,m),ad(d,f),0!==d.Kf()&&(d.normalize(),v.Fa.N(d)))}}function wd(a,b){for(var d=Array(a.length),f=0,l=a.length;f<l;++f)d[f]=new Xa;f=new Xa;l=new Xa;for(var p=0,
v=b.length;p<v;++p){var k=b[p],m=a[k.a],q=a[k.b],x=a[k.c];m&&q&&x&&(f.gb(x,q),l.gb(m,q),ad(f,l),d[k.a].add(f),d[k.b].add(f),d[k.c].add(f))}f=0;for(a=a.length;f<a;++f)d[f].normalize();a=0;for(f=b.length;a<f;++a)k=b[a],l=k.xe,p=d[k.a],v=d[k.b],k=d[k.c],p&&v&&k&&(3===l.length?(l[0].N(p),l[1].N(v),l[2].N(k)):(l[0]=p.clone(),l[1]=v.clone(),l[2]=k.clone()));return d}function xd(a,b,d,f){function l(A){n.N(b[A]);e.N(n);var F=k[A];L.N(F);L.sub(n.Ea(n.rd(F))).normalize();var N=e.x,C=e.y,E=e.z,M=F.x,t=F.y;F=
F.z;B.x=C*F-E*t;B.y=E*M-N*F;B.z=N*t-C*M;N=0>B.rd(m[A])?-1:1;v[4*A]=L.x;v[4*A+1]=L.y;v[4*A+2]=L.z;v[4*A+3]=N}for(var p=a.length,v=new Float32Array(4*p),k=Array(p),m=Array(p),q=0;q<p;q++)k[q]=new Xa,m[q]=new Xa;var x=new Xa,I=new Xa,w=new Xa,y=new cc,z=new cc,g=new cc,h=new Xa,G=new Xa;f.forEach(function(A){var F=A.a,N=A.b;A=A.c;x.N(a[F]);I.N(a[N]);w.N(a[A]);y.N(d[F]);z.N(d[N]);g.N(d[A]);var C=I.x-x.x,E=w.x-x.x,M=I.y-x.y,t=w.y-x.y,u=I.z-x.z,Q=w.z-x.z,V=z.x-y.x,T=g.x-y.x,ia=z.y-y.y,P=g.y-y.y,ka=1/(V*
P-T*ia);h.set((P*C-ia*E)*ka,(P*M-ia*t)*ka,(P*u-ia*Q)*ka);G.set((V*E-T*C)*ka,(V*t-T*M)*ka,(V*Q-T*u)*ka);k[F].add(h);k[N].add(h);k[A].add(h);m[F].add(G);m[N].add(G);m[A].add(G)});var L=new Xa,B=new Xa,n=new Xa,e=new Xa;f.forEach(function(A){l(A.a);l(A.b);l(A.c)});return v}function cd(a,b,d,f){return Math.sqrt((a-d)*(a-d)+(b-f)*(b-f))}var U={xh:!0,Fp:!1,Gp:!1,nl:!1,wh:!1,Ep:!1,Qa:!1,Jd:!1,pq:!1,da:"",Li:"",Lk:700,Kk:200,yh:!1,So:!1,To:!1,Ro:!1,sk:3,Nb:!1,jh:!0,Kb:"images/backgrounds/interior2.jpg",vc:"images/backgrounds/interior_light.jpg",
Nk:[256,256,512,512],uc:2.1,wc:8,Mk:[64,128,256,256],Dm:[60,96,160,250],Cm:[8,12,18,40],Qc:2.2,ig:1,Ne:300,nh:500,Oe:50,Xk:0,Yk:0,tp:45,vp:1,up:1E3,oh:20,ip:10,jp:10,kp:5,un:.1,Ti:20,Wi:100,Xi:100,tn:-Math.PI/3,sn:Math.PI/3,Vi:0,Nj:0,vd:[40,32,16,16],qk:[0,.87,.92,.9],pn:2,jn:100,ga_:!1,tk:16,uk:.4,wk:[.72,.73,.72,.74],Gk:1.2,Dk:[.5,.5,.5,1],Ik:140,Hk:280,Jk:1.2,xk:20,yk:40,Fk:[6,9,9,12],Ck:[.03,.02,.02,.018],Bk:[.35,.35,.4,.5],zk:[.2,.2,.2,.2],vk:[.1,.15,.15,.15],Ek:[200,200,150,120],Ak:[1,2,3,5],
Ao:1.1,Jq:[.25,.5,1,2],Kq:256,Iq:256,Hq:200,Bo:[40,80,200,500],Co:[35,45,80,120],il:!0,jl:"CCW"},dd={},Y=function(){function a(t,u,Q){u=t.createShader(u);t.shaderSource(u,Q);t.compileShader(u);return t.getShaderParameter(u,t.COMPILE_STATUS)?u:null}function b(t,u,Q){u=a(t,t.VERTEX_SHADER,u);Q=a(t,t.FRAGMENT_SHADER,Q);t===c&&k.push(u,Q);var V=t.createProgram();t.attachShader(V,u);t.attachShader(V,Q);t.linkProgram(V);return V}function d(t){return["float","sampler2D","int"].map(function(u){return"precision "+
t+" "+u+";\n"}).join("")}function f(t,u){u.R=u.R?!0:!1;if(!u.R){u.v=u.v||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";u.J=u.J||["a0"];u.S=u.S||[2];u.precision=u.precision||w;u.id=x++;void 0!==u.kj&&(u.kj.forEach(function(T,ia){u.g=u.g.replace(T,u.Ha[ia])}),u.kj.splice(0));u.$g=0;u.S.forEach(function(T){u.$g+=4*T});var Q=d(u.precision);u.pa=b(t,Q+u.v,Q+u.g);u.B={};u.i.forEach(function(T){u.B[T]=t.getUniformLocation(u.pa,T)});
u.attributes={};u.wa=[];u.J.forEach(function(T){var ia=t.getAttribLocation(u.pa,T);u.attributes[T]=ia;u.wa.push(ia)});if(u.u){t.useProgram(u.pa);q=u;m=u.id;for(var V in u.u)t.uniform1i(u.B[V],u.u[V])}u.Na=!0}}function l(t){Cb.Bj(M);m!==t.id&&(M.M(),m=t.id,q=t,c.useProgram(t.pa),t.wa.forEach(function(u){0!==u&&c.enableVertexAttribArray(u)}))}function p(t,u,Q){f(t,u,Q);t.useProgram(u.pa);t.enableVertexAttribArray(u.attributes.a0);m=-1;return q=u}function v(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1"],u:{u1:0}}}var k=[],m=-1,q=null,x=0,I=!1,w="highp",y=["u1"],z=["u0"],g={u1:0},h={u0:0},G={u1:0,u2:1},L={u1:0,u3:1},B=["u1","u3","u4"],n={u5:0},e=["u6","u7","u8","u9"],A={u6:0,u7:1},F={s0:v(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:y,u:g,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],u:G},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",
i:["u1","u10","u11"],u:g,R:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:y,u:g},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],u:G},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:y,u:g},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
i:y,u:g},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",i:["u0","u10"],u:h},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],u:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:y,u:g},
s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",i:["u1","u12","u13"],u:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],u:g},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:y,u:g,R:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:y,u:g,R:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],u:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:z,u:h,R:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:z,u:h,R:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:z,u:h,R:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:z,u:h,R:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:z,u:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:z,u:h},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:z,u:h,R:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],u:{u0:0,u16:1},R:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],u:g},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],u:Object.assign({u19:2},A),R:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:e,u:A},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(e),u:A,R:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(e),u:Object.assign({u25:3,u22:4,u23:5,u24:6},A),R:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(e),u:Object.assign({u3:2},A)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],u:A,R:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:B,u:L},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(B),u:L,R:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:B,u:L,R:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(B),u:L,R:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:B,u:L,R:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:y,u:g,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],u:g,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],u:g,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],u:G,R:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],u:G,R:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],u:n},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
u:n,R:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],u:g,precision:"lowp",R:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
u:g,precision:"lowp",R:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],u:{u1:0,u16:1,u31:2},R:!0}},N={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Ha:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Ha:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},C=null,E=null,M={yb:function(){return I},m:function(){if(!I){C=Na(F,2);E=Na(N,2);w="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var t in C)f(c,C[t],t);Y.set("s0");c.enableVertexAttribArray(0);I=!0}},tc:function(t){t.forEach(function(u){M.oa(u)})},oa:function(t){C[t.id]=t;f(c,t,t.id)},Am:function(t,u,
Q){u||(u=t);C[u]=Object.create(E[t]);C[u].Jm=!0;E[t].Ha&&E[t].Ha.forEach(function(V,T){var ia="";"gl_Frag"===V.substring(0,7)?(V=new RegExp("[,;]?"+V,"g"),ia=";"):V=new RegExp(V,"g");C[u].g=C[u].g.replace(V,ia+Q[T])});f(c,C[u],u)},set:function(t){var u=C[t];u.R&&(u.R=!1,f(c,u,t));l(u)},Cb:function(t){return p(t,v(),"s48")},fe:function(t){return p(t,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s49")},Jl:function(t){return"undefined"===typeof C[t]?!1:C[t].Na},M:function(){-1!==
m&&(m=-1,q.wa.forEach(function(t){0!==t&&c.disableVertexAttribArray(t)}))},he:function(){var t=0;q.wa.forEach(function(u,Q){Q=q.S[Q];c.vertexAttribPointer(u,Q,c.FLOAT,!1,q.$g,t);t+=4*Q})},Il:function(){c.enableVertexAttribArray(0)},ec:function(){M.fc(c)},fc:function(t){t.vertexAttribPointer(q.wa[0],2,t.FLOAT,!1,8,0)},ge:function(t,u){c.uniform1i(q.B[t],u)},C:function(t,u){c.uniform1f(q.B[t],u)},O:function(t,u,Q){c.uniform2f(q.B[t],u,Q)},Ag:function(t,u){c.uniform2fv(q.B[t],u)},Cg:function(t,u){c.uniform3fv(q.B[t],
u)},Bg:function(t,u,Q,V){c.uniform3f(q.B[t],u,Q,V)},to:function(t,u,Q,V,T){c.uniform4f(q.B[t],u,Q,V,T)},za:function(t,u){c.uniform4fv(q.B[t],u)},uo:function(t,u){c.uniformMatrix2fv(q.B[t],!1,u)},vo:function(t,u){c.uniformMatrix3fv(q.B[t],!1,u)},Uc:function(t,u){c.uniformMatrix4fv(q.B[t],!1,u)},j:function(t,u){M.set(t);u.forEach(function(Q){switch(Q.type){case "4f":c.uniform4fv(q.B[Q.name],Q.value);break;case "3f":c.uniform3fv(q.B[Q.name],Q.value);break;case "2f":c.uniform2fv(q.B[Q.name],Q.value);
break;case "1f":c.uniform1f(q.B[Q.name],Q.value);break;case "1i":c.uniform1i(q.B[Q.name],Q.value);break;case "mat2":c.uniformMatrix2fv(q.B[Q.name],!1,Q.value);break;case "mat3":c.uniformMatrix3fv(q.B[Q.name],!1,Q.value);break;case "mat4":c.uniformMatrix4fv(q.B[Q.name],!1,Q.value)}})},Up:function(){return"lowp"},A:function(){M.M();c.disableVertexAttribArray(0);for(var t in C){var u=C[t];u.Na&&(u.Na=!1,c.deleteProgram(u.pa));u.Jm&&delete C[t]}k.forEach(function(Q){c.deleteShader(Q)});k.splice(0);x=
0;I=!1;q=null;m=-1}};return M}(),c=null,mb=function(){function a(y){console.log("ERROR in ContextFF: ",y);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(y,z,g){y.setAttribute("width",z);y.setAttribute("height",g)}function f(y){if(b())return!1;var z=document.createElement("canvas");d(z,5,5);var g=null;try{g=z.getContext("webgl2",y)}catch(h){return!1}if(!g)return!1;l(g);Ha.Jh(g);y=Ha.Ze(g);if(!y.Wa&&!y.Ya)return Hb.A(),Ha.reset(),!1;g=Hb.ph(g,
y);Hb.A();Ha.reset();return g?!0:!1}function l(y){y.clearColor(0,0,0,0);y.disable(y.DEPTH_TEST);y.disable(y.BLEND);y.disable(y.DITHER);y.disable(y.STENCIL_TEST);y.disable(y.CULL_FACE);y.GENERATE_MIPMAP_HINT&&y.FASTEST&&y.hint(y.GENERATE_MIPMAP_HINT,y.FASTEST);y.disable(y.SAMPLE_ALPHA_TO_COVERAGE);y.disable(y.SAMPLE_COVERAGE);y.depthFunc(y.LEQUAL);y.clearDepth(1)}var p=null,v=null,k=null,m=!0,q=null,x=null,I=[],w={P:function(){return p.width},Z:function(){return p.height},tb:function(){return p},Ol:function(){return c},
na:function(){return m},flush:function(){c.flush()},bq:function(){Ca.reset();Ca.ba();w.Nn()},Nn:function(){aa.reset();X.reset();Y.M();Y.Il();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);X.ld();Y.ec()},Tl:function(){q||(q=new Uint8Array(p.width*p.height*4));c.readPixels(0,0,p.width,p.height,c.RGBA,c.UNSIGNED_BYTE,q);return q},Qp:function(){return p.toDataURL("image/jpeg")},Rp:function(){Ca.aa();v||(v=document.createElement("canvas"),k=v.getContext("2d"));d(v,p.width,p.height);for(var y=w.Tl(),z=k.createImageData(v.width,
v.height),g=v.width,h=v.height,G=z.data,L=0;L<h;++L)for(var B=h-L-1,n=0;n<g;++n){var e=4*(L*g+n),A=4*(B*g+n);G[e]=y[A];G[e+1]=y[A+1];G[e+2]=y[A+2];G[e+3]=y[A+3]}k.putImageData(z,0,0);return v.toDataURL("image/png")},Vh:function(y){!v&&y&&(v=document.createElement("canvas"),k=v.getContext("2d"));var z=y?v:document.createElement("canvas");d(z,p.width,p.height);(y?k:z.getContext("2d")).drawImage(p,0,0);return z},m:function(y){y=Object.assign({Xa:null,cg:null,ra:null,Ue:null,width:512,height:512,premultipliedAlpha:!1,
Gm:!0,antialias:!1,debug:!1,Dp:!1},y);y.Xa?(c=y.Xa,p=y.Xa.canvas):y.Ue&&!y.ra?p=document.getElementById(y.Ue):y.ra&&(p=y.ra);p||(p=document.createElement("canvas"));p.width=y.width;p.height=y.height;if(c)m=c instanceof WebGL2RenderingContext;else{m=!0;var z={antialias:y.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:y.premultipliedAlpha,stencil:!1,depth:y.Gm,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(z.antialias=!1);var g=f(z);g||!z.antialias||b()||(z.antialias=!1,g=f(z));g&&(c=p.getContext("webgl2",z));c?m=!0:((c=p.getContext("webgl",z))||(c=p.getContext("experimental-webgl",z)),m=!1)}if(!c)return a("WebGL1 and 2 are not enabled");y.cg&&p.addEventListener&&(x=y.cg,p.addEventListener("webglcontextlost",x,!1));if(!Ha.m())return a("Not enough GL capabilities");l(c);Y.m();X.m();Hb.ph(c,Ha.Ql());I.forEach(function(h){h(c)});I.splice(0);return!0},sp:function(){return new Promise(function(y){c?y(c):
I.push(y)})},A:function(){c&&(Ha.A(),Y.A(),Hb.A());x&&(p.removeEventListener("webglcontextlost",x,!1),x=null);c=q=k=v=p=null;I.splice(0)}};return w}(),Cb=function(){function a(){null===b&&("undefined"!==typeof Y?b=Y:"undefined"!==typeof D&&(b=D))}var b=null;return{reset:function(){b=null},Bj:function(d){b!==d&&(b&&b.M(),b=d)},yb:function(){return b.yb()},ec:function(){return b.ec()},fc:function(d){return b.fc(d)},he:function(){return b.he()},M:function(){return b.M()},set:function(d){a();return b.set(d)},
Cb:function(d){a();return b.Cb(d)},fe:function(d){a();return b.fe(d)}}}(),aa=function(){function a(E){c.bindTexture(c.TEXTURE_2D,E)}function b(E){var M=new Uint16Array(E.length);E.forEach(function(t,u){A[0]=t;var Q=F[0];var V=Q>>16&32768;t=Q>>12&2047;var T=Q>>23&255;Q=103>T?V:142<T?V|31744|((255==T?0:1)&&Q&8388607):113>T?(t|=2048,V|(t>>114-T)+(t>>113-T&1)):(V|T-112<<10|t>>1)+(t&1);M[u]=Q});return M}function d(){if(null!==N.Af)return N.Af;var E=f(b([.5,.5,.5,.5]),!0);return null===E?!0:N.Af=E}function f(E,
M){if(!Cb.yb()||!y)return null;var t=null,u=Math.sqrt(E.length/4);try{var Q=c.getError();if("FUCKING_BIG_ERROR"===Q)return!1;t=C.instance({isFloat:!1,U:M,array:E,width:u});Q=c.getError();if(Q!==c.NO_ERROR)return!1}catch(V){return!1}Ca.aa();c.viewport(0,0,u,u);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);Cb.set("s0");t.xa(0);X.l(!0,!0);E=4*u*u;M=new Uint8Array(E);c.readPixels(0,0,u,u,c.RGBA,c.UNSIGNED_BYTE,M);u=!0;for(Q=0;Q<E;++Q)u=u&&3>Math.abs(M[Q]-127);t.remove();Ca.ba();return u}var l=0,p=
null,v=0,k=null,m=null,q=null,x=null,I=null,w=null,y=!1,z=[],g={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,ti:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,la:null,fi:null,Im:!1,U:!1,D:null,K:4,Uf:0},h=!1,G=null,L=null,B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],n=!1,e=!1,A=new Float32Array(1),F=new Int32Array(A.buffer),N={Af:null,Bf:null},C={m:function(){y||(I=[c.RGBA,null,c.RGBA,c.RGBA],w=[c.RGBA,null,
c.RGBA,c.RGBA],p=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],n="undefined"!==typeof fa,e="undefined"!==typeof Ha,k=[-1,-1,-1,-1,-1,-1,-1,-1],x=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],y=!0)},ym:function(){if(!m){for(var E=new Float32Array(16384),M=0;16384>M;++M)E[M]=2*Math.random()-1;m={random:C.instance({isFloat:!0,isPot:!0,array:E,width:64}),Rj:C.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}C.Po()},wj:function(E){c.framebufferTexture2D(Ca.pf(),
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,E,0)},ei:function(){return m.Rj},Po:function(){x[1]=Ha.mf(c)},oo:function(){w=I=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},ej:function(E){Y.set("s1");Ca.aa();var M=E.P(),t=E.Z();c.viewport(0,0,M,t);E.h(0);X.l(!1,!1)},rq:function(E,M){C.ej(E);c.readPixels(0,0,E.P(),E.Z(),c.RGBA,c.UNSIGNED_BYTE,M)},sq:function(E,M){C.ej(E);return Ha.ng(0,0,E.P(),E.Z(),M)},Qh:function(E,M,t,u,Q,V,T){E.activeTexture(E.TEXTURE0);var ia=E.createTexture();E.bindTexture(E.TEXTURE_2D,ia);Q=Q instanceof
Float32Array?Q:new Float32Array(Q);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST);E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,V);E.texImage2D(E.TEXTURE_2D,0,E.RGBA,t,u,0,E.RGBA,E.FLOAT,Q);E.bindTexture(E.TEXTURE_2D,null);E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1);T&&(Ca.ba(),Y.Cb(E));E.viewport(0,0,t,u);E.framebufferTexture2D(E.FRAMEBUFFER,
E.COLOR_ATTACHMENT0,E.TEXTURE_2D,M,0);E.bindTexture(E.TEXTURE_2D,ia);T?X.l(!0,!0):X.Pb(E);E.deleteTexture(ia);y&&(k[0]=-1,q=null,l=0)},Ge:function(E){E!==l&&(c.activeTexture(p[E]),l=E)},instance:function(E){function M(){qa=void 0!==P.la.videoWidth?P.la.videoWidth:P.la.width;ca=void 0!==P.la.videoHeight?P.la.videoHeight:P.la.height}function t(da){var za=c.getError();if("FUCKING_BIG_ERROR"===za)return!1;c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,da);za=c.getError();za!==c.NO_ERROR&&bb!==c.RGBA&&(bb=c.RGBA,
c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,da));return!0}function u(){if(!W){a(ma);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,ua);P.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,P.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,P.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));P.isAnisotropicFiltering&&"undefined"!==typeof U&&c.texParameterf(c.TEXTURE_2D,
fa.Ul().TEXTURE_MAX_ANISOTROPY_EXT,U.sk);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,P.isLinear?c.LINEAR:c.NEAREST);var da=P.isMipmap&&!pb;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,P.ti?c.LINEAR_MIPMAP_LINEAR:P.isLinear?da?c.NEAREST_MIPMAP_LINEAR:c.LINEAR:da?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);bb=I[P.K-1];Pa=w[P.K-1];$a=x[Qa];Ha.na()&&(da=Ha.Wl(),bb===c.RGBA&&$a===c.FLOAT?P.isMipmap||P.isLinear?Pa=Hb.Yl(c):Ha.ha()?da&&(Pa=da):Pa=c.RGBA16F||c.RGBA:bb===c.RGB&&$a===c.FLOAT&&da&&(Pa=da,
bb=c.RGBA));if(P.U&&!P.isFloat||P.isFloat&&P.isMipmap&&Hb.Qm())Pa=Ha.Xl(),$a=Ha.mf(c);P.Uf&&(Ya=P.Uf);P.isSrgb&&4===P.K&&(bb=fa.qm());if(P.la)t(P.la);else if(P.url)t(na);else if(xa){da=xa;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,da),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,qa,ca,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(Qb){c.texImage2D(c.TEXTURE_2D,0,Pa,qa,
ca,0,bb,$a,null)}P.isKeepArray||(xa=null)}else da=c.getError(),"FUCKING_BIG_ERROR"!==da&&(c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null),da=c.getError(),da!==c.NO_ERROR&&(bb=c.RGBA,P.U&&$a!==c.FLOAT&&($a=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,null))));if(P.isMipmap)if(!pb&&Wa)Wa.Dc(),Tb=!0;else if(pb){da=Math.log2(Math.min(qa,ca));wb=Array(1+da);wb[0]=ma;for(var za=1;za<=da;++za){var hb=Math.pow(2,za),Ma=qa/hb;hb=ca/hb;var Gb=c.createTexture();a(Gb);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,Pa,Ma,hb,0,bb,$a,null);a(null);wb[za]=Gb}Tb=!0}a(null);k[l]=-1;ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);la=!0;P.D&&Wa&&(P.D(Wa),P.D=null)}}function Q(){for(var da=qa*ca,za=2*da,hb=3*da,Ma=0;Ma<da;++Ma)Ia[0][Ma]=Ta[Ma],Ia[1][Ma]=Ta[Ma+da],Ia[2][Ma]=Ta[Ma+za],Ia[3][Ma]=Ta[Ma+hb]}function V(){var da=qa*ca*4;wa=[new Uint8Array(da),new Uint8Array(da),new Uint8Array(da),new Uint8Array(da)];
Ia=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];gb=new Uint8Array(4*da);Ta=new Float32Array(gb.buffer);sa=!0}function T(){ia=new Uint8Array(qa*ca*4);mc=new Float32Array(ia.buffer);ac=!0}var ia,P=Object.assign({},g,E),ka=v++;null===P.isFlipY&&(P.isFlipY=P.url?!0:!1);P.data&&(P.array="string"===typeof P.data?Ob(P.data):P.isFloat?new Float32Array(P.data):new Uint8Array(P.data),P.isFlipY=!1);var Qa=0,H=P.la?!0:!1,r=null,
O=null,Z=!1;P.U=P.U||P.isFloat;P.U&&(Qa=1);!P.Im&&P.isFloat&&e&&!Ha.ha()&&(P.isFloat=!1);P.isFloat&&(Qa=2);P.isAnisotropicFiltering&&n&&!fa.Pm()&&(P.isAnisotropicFiltering=!1);var ma=P.fi||c.createTexture(),na=null,xa=!1,qa=0,ca=0,la=!1,W=!1,sa=!1,Ia=null,wa=null,gb=null,Ta=null,Pa=null,bb=null,$a=null,ua=P.isFlipY,Ea=(E=P.U&&P.isMipmap)&&Hb.$k(),pb=E&&!Ea?!0:!1,wb=null,Ya=-1,rb=-1,Tb=!1,ac=!1,mc=ia=null;P.width&&(qa=P.width,ca=P.height?P.height:qa);var Wa={get:function(){return ma},P:function(){return qa},
Z:function(){return ca},rm:function(){return P.url},zi:function(){return P.isFloat},Ai:function(){return P.U},Fq:function(da){ma=da},jq:function(){return P.isLinear},Dc:function(){c.generateMipmap(c.TEXTURE_2D)},Sk:function(da,za){pb?(da||(da=Wa.bi()),C.Ge(za),a(wb[da]),k[za]=-1):Wa.h(za)},bi:function(){-1===Ya&&(Ya=Math.log2(qa));return Ya},yj:function(da){c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,da)},Nl:function(da){da||(da=Wa.bi());if(pb){Y.set("s12");C.Ge(0);for(var za=
qa,hb=ca,Ma=1;Ma<=da;++Ma)za/=2,hb/=2,Y.O("u14",.25/za,.25/hb),c.viewport(0,0,za,hb),a(wb[Ma-1]),c.framebufferTexture2D(Ca.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,wb[Ma],0),X.l(!1,1===Ma);k[0]=-1}else da!==rb&&(rb=da,Wa.yj(da)),Wa.Dc()},Gq:function(da){(H=!(Array.isArray(da)||da.constructor===Float32Array||da.constructor===Uint8Array))?(xa=null,P.la=da,M()):xa=da},h:function(da){if(!la)return!1;C.Ge(da);if(k[da]===ka)return!1;a(ma);k[da]=ka;return!0},xa:function(da){c.activeTexture(p[da]);l=da;a(ma);
k[da]=ka},o:function(){q=Wa;C.wj(ma)},L:function(){c.viewport(0,0,qa,ca);q=Wa;C.wj(ma)},qe:C.qe,io:function(da,za){qa=da;ca=za},resize:function(da,za){Wa.io(da,za);u()},clone:function(da){da=C.instance({width:qa,height:ca,U:P.U,isFloat:P.isFloat,isLinear:P.isLinear,isMirrorY:P.isMirrorY,isFlipY:da?!ua:ua,isPot:P.isPot});Cb.set("s0");Ca.ba();da.L();Wa.h(0);X.l(!0,!0);return da},Vc:function(){c.viewport(0,0,qa,ca)},remove:function(){c.deleteTexture(ma);W=!0;z.splice(z.indexOf(Wa),1);Wa=null},refresh:function(){Wa.xa(0);
ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);H?c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,P.la):c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,xa);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},cj:function(){sa||V();c.readPixels(0,0,qa,4*ca,c.RGBA,c.UNSIGNED_BYTE,gb);Q();return Ia},Dn:function(){sa||V();return Ha.ng(0,0,qa,4*ca,gb).then(function(){Q();return Ia})},Fn:function(){ac||T();c.readPixels(0,0,qa,ca,c.RGBA,c.UNSIGNED_BYTE,ia);return mc},En:function(){ac||T();return Ha.ng(0,0,qa,ca,ia)},Ch:function(da){Ca.aa();
Y.set("s15");Wa.h(0);if(da)c.viewport(0,0,qa,ca),Y.to("u15",.25,.25,.25,.25),X.l(!1,!0);else for(da=0;4>da;++da)c.viewport(0,ca*da,qa,ca),Y.za("u15",B[da]),X.l(!1,0===da)},Vg:function(da){var za;if(za=$a===x[0])null!==N.Bf?za=N.Bf:(za=f(new Uint8Array([127,127,127,127]),!1),za=null===za?!0:N.Bf=za),za=!za;a(ma);ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);za?(Z||(r=document.createElement("canvas"),r.width=qa,r.height=ca,O=r.getContext("2d"),O.createImageData(qa,ca),Z=!0),null.data.set(da),O.putImageData(null,
0,0),c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,r)):c.texImage2D(c.TEXTURE_2D,0,Pa,qa,ca,0,bb,$a,da);k[l]=ka;ua&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Uq:function(da,za){a(ma);za&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,Pa,bb,$a,da);k[l]=ka;za&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},bc:function(da,za){var hb=qa*ca,Ma=4*hb;da=P.U?da?"RGBE":"JSON":"RGBA";za&&(da=za);za=Ha.na()&&!1;var Gb=null;switch(da){case "RGBE":Gb="s13";break;case "JSON":Gb=za?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Gb=
"s7"}sa||("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da?(wa=new Uint8Array(Ma),sa=!0):"JSON"!==da||za||V());Ca.aa();Y.set(Gb);Wa.h(0);Ma=null;if("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da){c.viewport(0,0,qa,ca);X.l(!0,!0);c.readPixels(0,0,qa,ca,c.RGBA,c.UNSIGNED_BYTE,wa);if("RGBAARRAY"===da)return{data:wa};h||(G=document.createElement("canvas"),L=G.getContext("2d"),h=!0);G.width=qa;G.height=ca;hb=L.createImageData(qa,ca);hb.data.set(wa);L.putImageData(hb,0,0);Ma=G.toDataURL("image/png")}else if("JSON"===
da)if(za)Ma=new Float32Array(hb),c.viewport(0,0,qa,ca),X.l(!0,!0),c.readPixels(0,0,qa,ca,c.RGBA,c.FLOAT,Ma);else{for(Ma=0;4>Ma;++Ma)c.viewport(0,ca*Ma,qa,ca),Y.za("u15",B[Ma]),X.l(!Ma,!Ma);Wa.cj();Ma=Array(hb);for(za=0;za<hb;++za)Ma[4*za]=Ia[0][za],Ma[4*za+1]=Ia[1][za],Ma[4*za+2]=Ia[2][za],Ma[4*za+3]=Ia[3][za]}return{format:da,data:Ma,width:qa,height:ca,isMirrorY:P.isMirrorY,isFlipY:"RGBA"===da?P.isFlipY:!P.isFlipY}}};P.isMipmap&&!pb&&la&&!Tb&&(Wa.Dc(),Tb=!0);if(P.url)a(ma),c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),na=new Image,na.Bp="Anonymous",na.crossOrigin="Anonymous",na.src=P.url,na.onload=function(){qa=na.width;ca=na.height;u()};else if(P.la){var nc=function(){M();qa?u():setTimeout(nc,1)};nc()}else P.array?(P.U&&!P.isFloat?P.array instanceof Uint16Array?(xa=P.array,u()):d()?(xa=b(P.array),u()):(u(),C.Qh(c,ma,Wa.P(),Wa.Z(),P.array,ua,!0)):(xa=P.isFloat?P.array instanceof Float32Array?P.array:new Float32Array(P.array):P.array instanceof Uint8Array?P.array:new Uint8Array(P.array),
u()),P.isKeepArray||(xa&&xa!==P.array&&(xa=null),delete P.array)):P.fi?la=!0:u();Wa.Yp=Wa.P;P.D&&la&&(P.D(Wa),P.D=null);z.push(Wa);return Wa},aa:function(E){E!==l&&(c.activeTexture(p[E]),l=E);k[E]=-1;a(null)},Uk:function(E){m.random.h(E)},qe:function(){q=null;c.framebufferTexture2D(Ca.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==l&&c.activeTexture(p[0]);for(var E=0;E<p.length;++E)k[E]=-1;l=-1},vq:function(){l=-1},Tj:function(){for(var E=0;E<p.length;++E)C.aa(E)},I:function(){m&&
(m.random.remove(),m.Rj.remove())},Yc:function(E,M){if("RGBA"===E.format||"RGBE"===E.format){var t=new Image;t.src=E.data;t.onload=function(){C.instance({isMirrorY:E.isMirrorY,isFlipY:E.isFlipY,isFloat:!1,la:t,D:function(u){if("RGBA"===E.format)M(u);else{var Q=E.width,V=E.height,T=C.instance({isMirrorY:E.isMirrorY,isFloat:!0,width:Q,height:V,isFlipY:E.isFlipY});Ca.ba();c.viewport(0,0,Q,V);Y.set("s14");T.o();u.h(0);X.l(!0,!0);C.aa(0);M(T);Ha.flush();u.remove()}}})}}else"JSON"===E.format?M(C.instance({isFloat:!0,
isFlipY:E.isFlipY,width:E.width,height:E.height,array:new Float32Array(E.data)})):M(!1)},fl:b,A:function(){q&&(Ca.ba(),C.qe(),Ca.aa());C.Tj();z.slice(0).forEach(function(E){E.remove()});z.splice(0);y=!1;v=0;"undefined"!==typeof Hb&&Hb.A();m=null}};return C}(),Gc={instance:function(a){var b=[aa.instance(a),aa.instance(a)],d=[b[1],b[0]],f=d,l={rj:function(p){f[1].o();f[0].h(p);l.Fj()},sj:function(p){f[1].L();f[0].h(p);l.Fj()},Fj:function(){f=f===b?d:b},refresh:function(){f[0].refresh();f[1].refresh()},
h:function(p){f[0].h(p)},xa:function(p){f[0].xa(p)},Tk:function(p){f[1].h(p)},Yh:function(){return f[0]},Wp:function(){return f[1]},Vg:function(p){f[0].Vg(p);f[1].Vg(p)},remove:function(){f[0].remove();f[1].remove();f=null},sync:function(){l.sj(0);Y.set("s0");X.l(!1,!1)}};return l}},X=function(){function a(m){var q={ka:null,indices:null};q.ka=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,q.ka);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);q.indices=m.createBuffer();
m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.indices);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),m.STATIC_DRAW);return q}var b=null,d=0,f=!1,l=[],p=-2,v=-2,k={reset:function(){v=p=-2},m:function(){f||(b=a(c),k.ld(),f=!0)},instance:function(m){var q=d++,x=m.indices?m.indices.length:0,I="undefined"===typeof m.mode?c.STATIC_DRAW:m.mode,w=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,w);c.bufferData(c.ARRAY_BUFFER,m.ka instanceof Float32Array?m.ka:new Float32Array(m.ka),I);p=q;var y=null,z=
null,g=null;if(m.indices){y=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y);var h=null;65536>m.indices.length?(h=Uint16Array,z=c.UNSIGNED_SHORT,g=2):(h=Uint32Array,z=c.UNSIGNED_INT,g=4);h=m.indices instanceof h?m.indices:new h(m.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,I);v=q}var G={xc:function(L){p!==q&&(c.bindBuffer(c.ARRAY_BUFFER,w),p=q);L&&Cb.he()},Qk:function(){v!==q&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y),v=q)},bind:function(L){G.xc(L);G.Qk()},V:function(){c.drawElements(c.TRIANGLES,
x,z,0)},Ma:function(L,B){c.drawElements(c.TRIANGLES,L,z,B*g)},remove:function(){c.deleteBuffer(w);m.indices&&c.deleteBuffer(y);G=null}};l.push(G);return G},ld:function(){-1!==p&&(c.bindBuffer(c.ARRAY_BUFFER,b.ka),p=-1);-1!==v&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),v=-1)},l:function(m,q){m&&X.ld();q&&Cb.ec();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Pb:function(m){m=m||c;var q=a(m);m.bindBuffer(m.ARRAY_BUFFER,q.ka);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,q.indices);Cb.fc(m);m.clear(m.COLOR_BUFFER_BIT);
m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);m.deleteBuffer(q.ka);m.deleteBuffer(q.indices);k.reset();f&&(k.ld(),Cb.ec())},I:function(){var m=c,q=b;m.deleteBuffer(q.ka);m.deleteBuffer(q.indices)},A:function(){k.I();l.forEach(function(m){m.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);k.reset();f=!1;l.splice(0);d=0}};return k}(),Ca=function(){var a=null,b=null,d=null,f=
!1,l=[],p={ma:-2,Ph:1},v={yb:function(){return f},m:function(){if(!f){a=c.createFramebuffer();var k=Ha.na();b=k&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=k&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;f=!0}},Vl:function(){return b},Wh:function(){return d},pf:function(){return c.FRAMEBUFFER},Xp:function(){return p},Np:function(){return a},instance:function(k){void 0===k.Gc&&(k.Gc=!1);var m=k.$?k.$:null,q=k.width,x=void 0!==k.height?k.height:k.width,I=a,w=null,y=!1,z=!1,g=0;m&&
(q=q?q:m.P(),x=x?x:m.Z());var h={lj:function(){y||(I=c.createFramebuffer(),y=!0,g=p.Ph++)},fd:function(){h.lj();h.o();w=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,q,x);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,w);c.clearDepth(1)},bind:function(G,L){g!==p.ma&&(c.bindFramebuffer(b,I),p.ma=g);m&&m.o();L&&c.viewport(0,0,q,x);G&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},kh:function(){g!==p.ma&&(c.bindFramebuffer(b,
I),p.ma=g)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Qe:function(){c.clear(c.COLOR_BUFFER_BIT)},rh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Vc:function(){c.viewport(0,0,q,x)},o:function(){g!==p.ma&&(c.bindFramebuffer(b,I),p.ma=g)},rtt:function(G){m=G;p.ma!==g&&(c.bindFramebuffer(c.FRAMEBUFFER,I),p.ma=g);G.o()},aa:function(){c.bindFramebuffer(b,null);p.ma=-1},resize:function(G,L){q=G;x=L;w&&(c.bindRenderbuffer(c.RENDERBUFFER,w),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
q,x))},remove:function(){I===a||z||(c.bindFramebuffer(b,I),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),w&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),p.ma=-1,c.deleteFramebuffer(I),w&&c.deleteRenderbuffer(w));z=!0}};k.Gc&&h.fd();l.push(h);return h},aa:function(){c.bindFramebuffer(b,null);p.ma=-1},Sq:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ha.Cj();p.ma=-1},reset:function(){p.ma=-2},ba:function(){0!==
p.ma&&(c.bindFramebuffer(b,a),p.ma=0)},clear:function(){Ha.Cj();c.clear(c.COLOR_BUFFER_BIT)},A:function(){v.aa();l.forEach(function(k){k.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);v.reset();f=!1;l.splice(0);p.Ph=1}};return v}(),Ha=function(){function a(){k="undefined"===typeof mb?fa:mb;m=!0}function b(e,A,F){for(var N=0;N<A.length;++N){var C=F.getExtension(A[N]+"_"+e);if(C)return C}return null}function d(){null!==h.pe&&(clearTimeout(h.pe),h.pe=null);h.Tb=!1}function f(e){if(0===h.wb.length){h.Ba=
c.PIXEL_PACK_BUFFER;h.wb.splice(0);h.Fd.splice(0);for(var A=0;A<h.Ac;++A)h.wb.push(c.createBuffer()),h.Fd.push(-1);h.Ua=0;h.bg=0}c.bindBuffer(h.Ba,h.wb[h.Ua]);e.byteLength!==h.Fd[h.Ua]&&(c.bufferData(h.Ba,e.byteLength,c.STREAM_READ),h.Fd[h.Ua]=e.byteLength);h.cq=!0}function l(){c.bindBuffer(h.Ba,null)}function p(){h.Sb.forEach(function(e){c.deleteSync(e)});h.Sb.splice(0)}function v(){h.Ua=(h.Ua+1)%h.Ac;++h.bg}var k=null,m=!1,q={oi:!1,Ng:null,Og:null,wi:!1,Nm:!1,Pg:null,xi:!1,Qg:null,pi:!1,Re:null,
Em:!1,Se:null,Fm:!1},x=null,I={Wa:!0,Ya:!0,gf:!0,bj:!1},w=null,y=!0,z=null,g=null,h={gl:1,Ac:-1,Ua:0,bg:0,Tb:!1,wb:[],Sb:[],Fd:[],Ba:null,pe:null},G="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),L=["OES","MOZ_OES","WEBKIT_OES"],B="undefined"===typeof window?{}:window,n={m:function(){if(m)return!0;n.reset();m||a();var e=c;if(!x.oi){x.Ng=n.Mh(e);B.GL_EXT_FLOAT=x.Ng;x.wi=x.Ng?!0:!1;if(x.wi||n.na())x.Og=n.Nh(e),x.Nm=x.Og?!0:!1,B.GL_EXT_FLOATLINEAR=x.Og;x.oi=!0}if(!x.pi){x.Pg=n.xd(e);x.Pg&&(x.xi=!0,
B.GL_EXT_HALFFLOAT=x.Pg);if(x.xi||n.na())x.Qg=n.Oh(e),B.GL_EXT_HALFFLOATLINEAR=x.Qg;x.gq=x.Qg?!0:!1;x.pi=!0}x.Re=n.Kh(e);x.Em=x.Re?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=x.Re;x.Se=n.Lh(e);x.Fm=x.Se?!0:!1;B.GL_EXT_COLORBUFFERHALFFLOAT=x.Se;Ca.m();aa.m();if(!n.ql())return!1;X.m();aa.ym();return!0},reset:function(){x=Object.assign({},q);w=Object.assign({},I)},P:function(){m||a();return k.P()},Z:function(){m||a();return k.Z()},na:function(){m||a();return k.na()},Jh:function(e){n.Kh(e);n.Lh(e);n.Mh(e);n.Nh(e);
n.xd(e);n.Oh(e)},Kh:b.bind(null,"color_buffer_float",G),Lh:b.bind(null,"color_buffer_half_float",G),Mh:b.bind(null,"texture_float",L),Nh:b.bind(null,"texture_float_linear",L),xd:b.bind(null,"texture_half_float",L),Oh:b.bind(null,"texture_half_float_linear",L),mf:function(e){var A=n.xd(e);return A&&A.HALF_FLOAT_OES?A.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},Wl:function(){return g||c.RGBA32F||c.RGBA},Xl:function(){return z||c.RGBA16F||c.RGBA},Ql:function(){return w},ha:function(){return w.Wa},wp:function(){return w.Ya},
Zk:function(){return w.gf},bl:function(){return w.bj&&y},Qj:function(e){y=e;!e&&h.Tb&&(p(),c.bindBuffer(h.Ba,null),h.Tb=!1)},kq:function(){return h.Tb},me:function(e,A,F){function N(){e.bindTexture(e.TEXTURE_2D,null);e.bindFramebuffer(C,null);e.deleteTexture(t);e.deleteFramebuffer(M)}var C=e.FRAMEBUFFER,E=e.NEAREST,M=e.createFramebuffer();e.bindFramebuffer(C,M);var t=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,E);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,E);e.texImage2D(e.TEXTURE_2D,0,A,3,3,0,e.RGBA,F,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return N(),!1;Cb.fe(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);
e.clear(e.COLOR_BUFFER_BIT);X.Pb(e);e.bindFramebuffer(C,null);Cb.Cb(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);X.Pb(e);A=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,A);N();for(F=0;36>F;++F)if(3!==F%4&&3<Math.abs(A[F]-127))return!1;return!0},Ze:function(e){var A={Wa:!1,Ya:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&n.me(e,e.RGBA32F,e.FLOAT)&&(A.Wa=!0,g=e.RGBA32F);!A.Wa&&n.me(e,e.RGBA,e.FLOAT)&&(A.Wa=!0,g=e.RGBA);var F=n.mf(e);
z=null;e.RGBA16F&&n.me(e,e.RGBA16F,F)&&(A.Ya=!0,z=e.RGBA16F);!A.Ya&&n.me(e,e.RGBA,F)&&(A.Ya=!0,z=e.RGBA);return A},sl:function(){var e=Ca.instance({width:2});e.lj();var A=aa.instance({width:2,isFloat:!0,K:3});e.o();A.o();n.flush();c.checkFramebufferStatus(Ca.Wh())!==c.FRAMEBUFFER_COMPLETE?(aa.oo(),w.gf=!1):w.gf=!0;e.remove();A.remove()},tl:function(){var e=!1;n.na()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(A){return"undefined"!==
typeof c[A]}));w.bj=e},ql:function(){var e=n.Ze(c);Object.assign(w,e);if(!w.Wa&&!w.Ya)return!1;n.sl();n.tl();return!0},Gn:function(e,A,F,N,C){c.readPixels(e,A,F,N,c.RGBA,c.UNSIGNED_BYTE,C);return Promise.resolve(C,!1)},ng:function(e,A,F,N,C,E,M){if(!n.bl())return n.Gn(e,A,F,N,C);h.Ac=M||h.gl;f(C);c.readPixels(e,A,F,N,c.RGBA,c.UNSIGNED_BYTE,0);h.Sb[h.Ua]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush();var t=!1;return new Promise(function(u,Q){function V(){if(!h.Tb)return d(),l(),v(),Q(),!1;var T=
(h.Ua+1)%h.Ac;switch(c.clientWaitSync(h.Sb[T],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(h.Sb[T]),h.Sb[T]=null,c.bindBuffer(h.Ba,h.wb[T]),c.getBufferSubData(h.Ba,0,C),l(),v(),u(C,t),!0}h.pe=setTimeout(V,0);return!1}d();h.bg+1<h.Ac?(l(),v(),u(C,!1)):(h.Tb=!0,V()||!E||t||(t=!0,E()))})},Cj:function(){c.viewport(0,0,n.P(),n.Z())},flush:function(){c.flush()},A:function(){d();p();aa.A();Ca.A();X.A();h.wb.forEach(function(e){c.deleteBuffer(e)});h.wb.splice(0);Cb.reset();
m=!1}};return n}(),Hb=function(){function a(e,A,F,N){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,N?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var C=null;if(null!==F)try{C=h.getError();if("FUCKING_BIG_ERROR"===C)return!1;h.texImage2D(h.TEXTURE_2D,0,e,4,4,0,h.RGBA,A,F);C=h.getError();if(C!==h.NO_ERROR)return!1}catch(E){return!1}N&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);X.Pb(h);C=h.getError();if("FUCKING_BIG_ERROR"===C)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,x);C=h.getError();
C===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,x),C=h.getError());if(C!==h.NO_ERROR)return!1;F=!0;for(N=0;16>N;++N)F=F&&4>Math.abs(x[N]-127);F&&(m.Yi=A,m.ni=e);return F}function b(e,A){return G.Wa&&a(e,h.FLOAT,new Float32Array(I),A)?(k=v.gh,!0):!1}function d(e,A,F){if(!G.Ya)return!1;var N=aa.fl(I),C=Ha.xd(h);if(C&&C.HALF_FLOAT_OES&&a(e,C.HALF_FLOAT_OES,N,A)||h.HALF_FLOAT&&a(e,h.HALF_FLOAT,N,A))return k=
v.rc,!0;N=new Float32Array(I);if(a(e,h.FLOAT,N,A))return k=v.rc,!0;h.bindTexture(h.TEXTURE_2D,F);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(m.sd,n);aa.Qh(h,F,2,2,N,!1,!1);h.bindFramebuffer(m.sd,null);h.bindTexture(h.TEXTURE_2D,F);return a(e,null,null,A)?(k=v.rc,!0):!1}function f(e,A,F){q=!0;if(d(e,!0,F)||b(A,!0))return!0;q=!1;return d(e,!1,F)||b(A,!1)?!0:!1}function l(e){if(k===v.M){h=e||c;k=v.RGBA8;q=!0;Ha.Jh(h);G||(G=Ha.Ze(h));Ca.reset();n=h.createFramebuffer();
m.sd=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(m.sd,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);Y.M();L=Y.Cb(h);e=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,e);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);B=e;var A=e=h.RGBA,F=h.RGBA16F,N=h.RGBA32F;N&&(e=N);F&&(A=F);if((F||N)&&f(A,e,B))return p(),!0;e=A=h.RGBA;if(f(A,e,B))return p(),
!0;k=v.RGBA8;p();return!1}}function p(){h.deleteProgram(L.pa);h.deleteTexture(B);B=L=null}for(var v={M:-1,gh:3,rc:2,RGBA8:0},k=v.M,m={Yi:null,ni:null,sd:null},q=!0,x=new Uint8Array(16),I=Array(64),w=0;4>w;++w)for(var y=0;4>y;++y){var z=0===(y+w)%2?1:0,g=4*w+y;I[4*g]=z;I[4*g+1]=z;I[4*g+2]=z;I[4*g+3]=z}var h=null,G=null,L=null,B=null,n=null;return{$k:function(e){l(e);return q},ph:function(e,A){k===v.M&&(typeof("undefined"!==A)&&(G=A),l(e));return k!==v.RGBA8},hq:function(e){l(e);return k===v.gh},Qm:function(e){l(e);
return k===v.rc},Tp:function(e){l(e);return m.Yi},Yl:function(e){l(e);return m.ni},A:function(){h=null;q=!0;k=v.M;G=null}}}(),id={instance:function(a){function b(){w&&w.remove();w=aa.instance({isFloat:!1,isPot:!1,width:a.size*a.Ca[0],height:a.size*a.Ca[1]})}var d=null,f=!1,l=!1,p=null,v=!1,k=!1,m=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,x="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(f=!0,J&&void 0!==J.da&&(a.mask=J.da+a.mask),d=aa.instance({isFloat:!1,
url:a.mask}));var I=!1;a.customInputShader&&(I="s50",Y.oa({name:"_",id:I,g:a.customInputShader,Tq:["uSource"],precision:"lowp"}),Y.j(I,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":m="s39";v=!0;break;case "meanNormalization":m="s40";v=!0;break;case "grayScale":m="s36";v=!1;break;case "grayScaleTilt":m="s37";k=!0;v=!1;break;case "rgbGrayTilt":m="s38";k=!0;v=!1;break;case "copy":m=I?I:"s0";break;case "inputLightRegulation":m=I?I:"s36";p=yd.instance({mi:x,Si:a.size,Ni:a.nBlurPass,Da:!1});l=
!0;break;case "inputMix0":m="none";p=zd.instance({fa:x,jb:a.varianceMin,Ta:a.blurKernelSizePx,gain:a.gain||1,Da:!1});l=!0;break;case "inputMix1":m="none";p=Ad.instance({fa:x,jb:a.varianceMin,Ta:a.blurKernelSizePx,gain:a.gain||1,Da:!1});l=!0;break;case "inputCut4":m="none";p=Bd.instance({fa:x,jb:a.varianceMin,Ta:a.blurKernelSizePx,gain:a.gain||1,Ic:a.isNormalized||!1,hg:a.overlap||0,Da:!1});x*=p.Zl();l=!0;break;case "direct":case "none":case "abort":m="abort";break;default:m="s4"}x=Math.ceil(x);k&&
Y.j(m,[{name:"u29",type:"1f",value:a.tilt}]);f&&(m+="Mask");var w=null;b();var y={P:function(){return a.size},$l:function(){return x},qf:function(){return y.P()},dm:function(){return l?p.Ec():w},re:function(z){a.Ca=z;b()},ya:function(z){Ca.ba();if("abort"===m)return z.h(0),z;"none"!==m&&(Y.set(m),v&&Y.C("u30",1/a.size),w.L(),f&&d.h(1),X.l(!1,!1),w.h(0),z=w);l&&p.process(z)},A:function(){w.remove();f&&d.remove()}};return y}},jd={instance:function(a){function b(){if(n.kc){l.input&&(l.input.remove(),
l.Id.remove());var A=a.size*a.sparsity;B=Math.log(A/a.size)/Math.log(2);l.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:A*a.Ca[0],height:A*a.Ca[1],Uf:B});l.Id=aa.instance({isFloat:!0,isPot:!0,width:a.size*a.Ca[0],height:a.size*a.Ca[1]})}}function d(){l.Ab&&l.Ab.remove();l.Ab=aa.instance({isFloat:!0,isPot:!v,isLinear:!v&&k.isLinear,width:a.size*a.Ca[0],height:a.size*a.Ca[1]})}function f(A){k.buffer.forEach(function(F,N){k.results[N][0]=A[0][F];k.results[N][1]=A[1][F];k.results[N][2]=A[2][F];
k.results[N][3]=A[3][F]});return k.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,Id:null,Ab:null,gg:null,eg:null,fg:null},p=null,v=!0,k={type:"undef",D:null,isLinear:!1,buffer:[],results:[],Kd:!1},m=-1,q=a.isReorganize?a.isReorganize:!1,x=a.kernelsCount?!0:!1,I=[a.Hc?"s32":"s31",a.Hc?"s34":"s33","s35"][a.shiftRGBAMode||0],w={isEnabled:!1},y=1/a.size;a.Km?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.be.qf(),v=!1):"full"===a.connectivityUp&&(a.sparsity=a.be.qf());var z=
{elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],g=a.sparsity*a.sparsity,h=!1,G=a.size,L="";if(a.maxPooling){switch(a.maxPooling.size){case 2:L="s41";break;case 4:L="s42"}h=!0;G/=a.maxPooling.size;l.eg=aa.instance({isFloat:!0,isPot:!1,width:G})}var B=-1,n=null;v&&d();l.bias=aa.instance(a.bias);var e={P:function(){return a.size},qf:function(){return G},Th:function(){return a.classesCount},Rk:function(A){p.h(A)},xn:function(){a.remap&&a.remap.isEnabled&&
(w={isEnabled:!0,cn:aa.instance(a.remap.maskTexture),Mc:a.remap.layers.map(function(A){return a.parent.am(A)}),depth:a.remap.depth})},po:function(){switch(a.connectivityUp){case "direct":n=Cd.instance(a.connectivity);break;case "square":n=Dd.instance(a.connectivity);break;case "squareFast":n=Ed.instance(a.connectivity,a.activation);break;case "full":n=Fd.instance(Object.assign({Hc:a.Hc},a.connectivity));break;case "conv":m=a.kernelsCount,n=Gd.instance(a.connectivity),q&&(l.gg=aa.instance({width:G,
isFloat:!0,isFlipY:!1,isPot:!1}))}b()},ya:function(A,F){p=A;n.kc?(l.input.L(),x&&l.bias.h(2),n.ya(w),l.input.h(0),l.input.Nl(B),l.Id.L(),x?Y.set("s0"):(Y.set(I),Y.C("u4",g),l.bias.h(1)),l.input.Sk(B,0),X.l(!1,!1),Y.set(z),l.Ab.o(),l.Id.h(0),X.l(!1,!1)):(l.Ab.L(),l.bias.h(1),n.ya());if(v)return F=l.Ab,h&&(l.eg.L(),F.h(0),Y.set(L),Y.O("u14",y,y),X.l(!1,!1),F=l.eg),q&&(l.gg.o(),Y.set("s24"),Y.O("u18",m,G/m),F.h(0),X.l(!1,!1),F=l.gg),F.h(0),F;var N=l.Ab;if(a.normalize||k.Kd)A=a.normalize,Y.set(k.Kd?"s9":
"s8"),Y.C("u10",A?y:1),l.fg.L(),N.h(0),X.l(!1,!1),N=l.fg;A=null;switch(k.type){case "cpuRGBA2Float":N.Ch(!1);F?A=e.Bn(N).then(k.D):(N=e.Cn(N),k.D(N));break;case "cpuMeanFloat":N.Ch(!0);if(F)A=N.En().then(k.D);else{N=N.Fn();for(var C=0;C<N.length;++C);k.D(N)}break;case "gpuRawAvg":case "gpuRaw":N.h(0);case "none":null!==k.D&&k.D(N)}F&&null===A&&(A=Promise.resolve());return A},re:function(A){a.Ca=A;b();d()},xo:function(A){A&&(k.type=A.Xd||"none",k.D=A.Wd||null,k.isLinear=A.dg?!0:!1);d();A="undefined"!==
typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var F=0,N=0,C=0;F<A;++F)k.buffer.push(N+(a.size-1-C)*a.size),k.results.push([-1,-1,-1,-1]),++N,N===a.size&&(N=0,++C);k.Kd="gpuRawAvg"===k.type||"cpuMeanFloat"===k.type;if(a.normalize||k.Kd)l.fg=aa.instance({isFloat:!0,isPot:!0,width:a.size})},Bn:function(A){return A.Dn().then(f)},Cn:function(A){A=A.cj();f(A);return k.results},A:function(){for(var A in l){var F=l[A];F&&F.remove()}n&&(n.A(),n=null)}};a.be&&e.po(a.be);return e}},
Cd={instance:function(a){var b=aa.instance(a.weights);return{kc:!0,Cd:function(){return 1},A:function(){b.remove()},sm:function(){return b},ya:function(){Y.set("s30");b.h(1);X.l(!1,!1)}}}},Fd={instance:function(a){var b=a.fromLayerSize,d=aa.instance(a.weights),f=a.Hc?"s27":"s26";return{kc:!0,Cd:function(){return b},A:function(){d.remove()},ya:function(l){if(l.isEnabled){Y.set("s28");l.cn.h(3);for(var p=Math.min(l.Mc.length,l.depth),v=0;v<p;++v)l.Mc[v].Rk(4+v)}else Y.set(f);Y.C("u8",a.toLayerSize);
Y.C("u9",a.fromLayerSize);d.h(1);X.l(!1,!1)}}}},Dd={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,l=f*d,p=l/b,v=b/d,k=0,m=0,q=0,x=Array(f*d*f*d*4),I=Array(f*d*f*d*4),w=Array(b*b),y=0;y<w.length;++y)w[y]=0;y=Math.floor(f/2);for(var z=.5/d,g=.5/b,h=.5/l,G=0;G<d;++G)for(var L=Math.round(G*v),B=0;B<d;++B){var n=Math.round(B*v),e=G/d,A=B/d;e+=z;A+=z;for(var F=0;F<f;++F){var N=L+F-y;0>N&&(N+=b);N>=b&&(N-=b);for(var C=0;C<f;++C){var E=k/l,M=m/l,t=n+C-y;0>t&&(t+=b);t>=b&&(t-=
b);var u=N/b,Q=t/b;M=1-M-1/l;u+=g;Q+=g;E+=h;M+=h;var V=G*f+F,T=B*f+C;T=d*f-T-1;V=T*d*f+V;x[4*V]=E;x[4*V+1]=M;x[4*V+2]=u;x[4*V+3]=Q;Q=w[t*b+N]++;V=Q%p;u=N*p+V;t=t*p+(Q-V)/p;t=b*p-1-t;t=t*b*p+u;I[4*t]=E;I[4*t+1]=M;I[4*t+2]=e;I[4*t+3]=A;++k>=l&&(k=0,++m);++q}}}w=null;var ia=aa.instance(a.weights);delete a.weights.data;var P=aa.instance({width:l,isFloat:!0,array:new Float32Array(I),isPot:!0});I=null;var ka=aa.instance({width:l,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;return{kc:!0,Cd:function(){return p},
A:function(){P.remove();ka.remove();ia.remove()},ya:function(){Y.set("s25");ia.h(1);ka.h(2);X.l(!1,!1)}}}},Gd={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],p=aa.instance(a.weights);return{kc:!0,Cd:function(){return f},$p:function(){return d},sm:function(){return p},A:function(){p.remove()},ya:function(){Y.set("s29");Y.Ag("u28",l);Y.C("u26",b);Y.C("u27",d);Y.C("u8",a.toLayerSize);Y.C("u9",a.fromLayerSize);p.h(1);X.l(!1,!1)}}}},Ed=
{instance:function(a,b){var d=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,v=l*f/d,k=f<d,m=d/f,q=aa.instance(a.weights),x="s51"+[d.toString(),f.toString(),l.toString(),p.toString(),b].join("_");Y.Jl(x)||(a=vb(b),f=[{type:"1f",name:"u8",value:f},{type:"1f",name:"u32",value:p}],k&&f.push({type:"1f",name:"u9",value:d}),d=[(k?v:l).toFixed(1),a],k&&d.push(m.toFixed(1)),Y.Am(k?"s47":"s46",x,d),Y.j(x,f.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",
name:"u7",value:3}])));return{kc:!1,Cd:function(){return v},A:function(){q.remove()},ya:function(){Y.set(x);q.h(3);X.l(!1,!1)}}}},yd={instance:function(a){var b=a.Ni?a.Ni:3,d=a.mi?a.mi:64,f=a.Si?a.Si:64,l=a.Da?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=aa.instance(a),v=aa.instance(a),k=aa.instance(a),m=aa.instance(a),q=aa.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),x=1/d;return{process:function(I){Y.set("s43");m.o();X.l(l,!1);Y.set("s44");for(var w=0;w<b;++w)p.o(),Y.O("u14",x,0),
X.l(l,!1),k.o(),m.h(0),X.l(l,!1),v.o(),p.h(0),Y.O("u14",0,x),X.l(l,!1),m.o(),k.h(0),X.l(l,!1),w!==b-1&&v.h(0);Y.set("s45");q.o();I.h(0);v.h(1);m.h(2);X.l(l,!1);q.h(0)},Ec:function(){return q}}}},zd={instance:function(a){function b(x){return aa.instance({isFloat:x,width:d.fa,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Ta:9,fa:128,gain:1,Da:!1},a),f=b(!1),l=[b(!1),b(!1),b(!1)],p=[b(!1),b(!1),b(!1)],v=b(!0),k=[f,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.fa).toFixed(6));var m="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};Y.tc([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",u:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,u:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:m,u:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Y.set("s53");f.L();X.l(d.Da,!1);Y.set("s54");for(var x=0;3>x;++x)Y.O("u33",1,0),l[x].o(),k[x].h(0),
X.l(!1,!1),Y.O("u33",0,1),p[x].o(),l[x].h(0),X.l(!1,!1);Y.set("s55");v.o();f.h(0);p[0].h(1);p[1].h(2);p[2].h(3);X.l(!1,!1);v.h(0)},Ec:function(){return v}}}},Ad={instance:function(a){function b(q){return aa.instance({isFloat:q,width:d.fa,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Ta:9,fa:128,gain:1,Da:!1},a),f=b(!1),l=b(!1),p=b(!1),v=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.fa).toFixed(6));var k="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),m={u1:0};Y.tc([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
u:m,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,u:m,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:k,u:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Y.set("s56");f.L();X.l(d.Da,!1);Y.set("s57");Y.O("u33",1,0);l.o();f.h(0);X.l(!1,!1);Y.O("u33",0,1);p.o();l.h(0);X.l(!1,!1);Y.set("s58");v.o();f.h(0);p.h(1);X.l(!1,!1);v.h(0)},Ec:function(){return v}}}},Bd={instance:function(a){function b(x){return aa.instance({isFloat:x,width:d.fa,isPot:!1,isFlipY:!1})}var d=
Object.assign({jb:.1,Ta:9,fa:128,gain:1,hg:0,Ic:!1,Da:!1},a),f=b(!1),l=null,p=null,v=null;d.Ic&&(l=b(!1),p=b(!1),v=b(!0));a={u1:0};var k=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.hg.toFixed(4)),u:a,i:["u1"],precision:"lowp"}];if(d.Ic){var m="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Ta-1)/2).toFixed(2)).replace("2.2222",(1/d.fa).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));k.push({id:"s60",name:"_",g:m,u:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:q,u:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Y.tc(k);return{process:function(){Y.set("s59");f.L();X.l(d.Da,!1);d.Ic?(Y.set("s60"),Y.O("u33",1,0),l.o(),f.h(0),X.l(!1,!1),Y.O("u33",0,1),p.o(),l.h(0),X.l(!1,!1),Y.set("s61"),v.o(),f.h(0),p.h(1),X.l(!1,!1),v.h(0)):f.h(0)},Zl:function(){return 2-d.hg},Ec:function(){return d.Ic?v:f}}}},Nb=function(){function a(g,
h,G,L,B,n,e){if(!y)if(e===n.length)B();else{switch(n[e]){case "A":G();break;case "D":g();break;case "S":h().then(function(A,F){z.Pj();a(g,h,G,F?null:L,B,n,++e)}).catch(function(A){console.log("An error occurred in the WebAR loop: ",A);B()});return;case "R":L&&L()}a(g,h,G,L,B,n,++e)}}var b={n:5,ag:1,Ei:0,zd:[35,49],wd:[2,200],k:.7,Mo:200,rn:.05},d=-1,f=null,l=-1,p=-1,v=0,k=-1,m=-1,q=0,x=0,I=b.wd[1],w=Math.log(2),y=!0,z={W:function(){switch(d){case -1:return-1;case 0:return m+f.Ei;case 1:return q}},
Uh:function(g){return Math.pow(Math.min(Math.max(k,0),f.n-1)/(f.n-1),g||1)},m:function(g){f=Object.assign({},b,g);k=m=f.ag;d=0;z.reset()},Pj:function(g){g=("undefined"===typeof g?Date.now():g)||0;var h=Math.min(Math.max(g-x,f.wd[0]),f.wd[1]);I=h;x=g;var G=-1===l?0:f.k;l=Math.min(Math.max(1E3/h,5),120)*(1-G)+l*G;g-p>f.Mo&&5<++v&&(h=f.k,k=k*(1-h)+(l<f.zd[0]?m-1:l>f.zd[1]?m+1:m)*h,Math.abs(k-m)>1-f.rn&&(h=Math.min(Math.max(Math.round(k),0),f.n-1),h!==m&&(k=m=h,l=(f.zd[1]-f.zd[0])/2)),p=g)},pg:function(g,
h,G,L,B,n){y=!1;a(g,h,G,L,B,n,0)},stop:function(){y=!0},ko:function(g){q=g;d=1},Lo:function(){d=0;z.reset()},reset:function(){I=b.wd[1];p=l=-1;v=0},Mq:function(g,h,G){G=Math.exp(-w*I/G);return(1-G)*g+G*h},Sp:function(){return I}};return z}(),Vc=function(){function a(I,w){var y=I[0]-.5;I=I[1]-.5;var z=w[0]-.5;w=w[1]-.5;return y*y+I*I-(z*z+w*w)}var b={Oi:4,Yd:[1.5,1.5,2],sa:[.1,.1,.1],jj:1,fa:-1,zf:-1,Go:2,on:1,qg:!0,Hl:.8},d=null,f=[],l=[],p=[],v=[0],k=[.5,.5,1],m=null,q=0,x=[0,0,0];return{m:function(I){d=
Object.assign({},b,I);f.splice(0);l.splice(0);p.splice(0);q=0;I=d.Yd[0]*d.sa[0];var w=d.Yd[1]*d.sa[1],y=1/(1+d.Yd[2]*d.sa[2]),z=d.jj*Math.min(d.fa,d.zf),g=z/d.fa;z/=d.zf;var h=.5*d.Hl;h*=h;for(var G=0;G<d.Oi;++G){var L=[];l.push(L);var B=Math.pow(y,G),n=g*B,e=z*B;B=n*d.on;p.push(B);var A=n*I,F=e*w;n/=2;e/=2;for(var N=1+(1-n-n)/A,C=1+(1-e-e)/F,E=0;E<C;++E)for(var M=e+E*F,t=M-.5,u=0;u<N;++u){var Q=n+u*A,V=Q-.5;V*V+t*t>h||(Q=[Q,M,B],f.push(Q),L.push(Q))}d.qg&&L.sort(a);m=f}d.qg&&f.sort(a)},get:function(I){var w=
m.length;if(0===w)return k;for(;I>=v.length;)v.push(0);v[I]>=w&&(v[I]=0);var y=m[Math.floor(v[I])%w];v[I]=(v[I]+1/d.Go)%w;if(0===q)return y;x[0]=y[0];x[1]=y[1];x[2]=q;return x},qq:function(I){I>=v.length||(v[I]=Math.floor(Math.random()*m.length))},Eq:function(I){q=I;if(0===q)m=f;else{for(var w=p.length,y=w-1,z=0;z<w;++z)if(p[z]<=I){y=z;break}m=l[y]}},reset:function(){for(var I=f.length/v.length,w=0;w<v.length;++w)v[w]=Math.floor(w*I);q=0;m=f}}}(),Db=function(){function a(){d(g+y.Vf);h.port.postMessage("DONE")}
function b(){n.gd=0===y.Aa?L(d):L(f)}function d(C){B.Wb&&null!==z&&(C-=g,C=Math.min(Math.max(C,y.Gh[0]),y.Gh[1]),g+=C,p(),e.isEnabled&&e.Jc&&B.Oa&&g-e.If>y.fh&&(q(),e.If=g),z(g))}function f(C){B.Wb&&(n.timeout=setTimeout(d.bind(null,C),y.Aa))}function l(){z=null;B.Wb=!1;p()}function p(){n.gd&&(window.cancelAnimationFrame(n.gd),n.gd=null);n.timeout&&(window.clearTimeout(n.timeout),n.timeout=null)}function v(C){C&&!B.Oa?(B.Oa=!0,G&&Nb.Lo(),h.port.postMessage("STOP"),Ha.Qj(!0),b()):!C&&B.Oa&&(B.Oa=!1,
G&&Nb.ko(1),Ha.Qj(!1),h.port.postMessage("START"))}function k(C){C.target.hidden?F():A()}function m(C,E,M){E=C.createShader(E);C.shaderSource(E,M);C.compileShader(E);return E}function q(){e.Jc=!1;var C=e.Xa,E=e.Gd,M=e.Hd,t=e.Ba;C.uniform1f(e.gi,Math.random());e.Xb?E.beginQueryEXT(t,M):C.beginQuery(t,M);C.drawElements(C.POINTS,1,C.UNSIGNED_SHORT,0);e.Xb?E.endQueryEXT(t):C.endQuery(t);Ha.flush();I().then(function(u){0===u||isNaN(u)?(e.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
u)):(u=y.gk*y.eh*1E3/u,e.ve=(e.ve+1)%y.qc,e.Jf[e.ve]=u,++e.Ci>y.qc&&(e.Md.set(e.Jf),e.Md.sort(function(Q,V){return Q-V}),u=e.Md[Math.floor(y.qc/2)],e.yd=Math.max(e.yd,u),y.dh(u/e.yd)),e.Jc=!0)}).catch(function(){e.Jc=!0})}function x(C){var E=e.Xa,M=e.Gd,t=e.Hd;t=e.Xb?M.Mp(t,M.QUERY_RESULT_AVAILABLE_EXT):E.getQueryParameter(t,E.QUERY_RESULT_AVAILABLE);E=E.getParameter(M.GPU_DISJOINT_EXT);t?C(!E):setTimeout(x.bind(null,C),.1)}function I(){return new Promise(function(C,E){x(function(M){if(M){M=e.Xa;
var t=e.Gd,u=e.Hd;M=e.Xb?t.getQueryObjectEXT(u,t.QUERY_RESULT_EXT):M.getQueryParameter(u,M.QUERY_RESULT);C(M)}else E()})})}var w={ri:!0,Gh:[1,200],Vf:20,Aa:0,eh:50,gk:240,fh:3E3,qc:3,dh:null},y=null,z=null,g=0,h=null,G=!1,L=null,B={Na:!1,Oa:!0,Hf:!1,Ff:!1,Ef:!1,Wb:!1},n={gd:null,timeout:null},e={isEnabled:!1,Jc:!1,Xa:null,Gd:null,Hd:null,Ba:null,gi:null,Xb:!0,If:0,Ci:0,Jf:null,Md:null,ve:0,yd:0},A=v.bind(null,!0),F=v.bind(null,!1),N={m:function(C){y=Object.assign(w,C);Object.assign(B,{Oa:!0,Na:!0,
Wb:!1});L=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==y.dh){C=document.createElement("canvas");C.setAttribute("width","1");C.setAttribute("height","1");var E={antialias:!1};C=C.getContext("webgl2",E)||C.getContext("webgl",E);if(E=C.getExtension("EXT_disjoint_timer_query")||C.getExtension("EXT_disjoint_timer_query_webgl2")){e.Xa=C;e.Gd=E;e.isEnabled=!0;e.Xb=E.beginQueryEXT?!0:!1;var M=m(C,C.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),t=m(C,C.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",y.eh.toString())),u=C.createProgram();C.attachShader(u,M);C.attachShader(u,t);C.linkProgram(u);M=C.getAttribLocation(u,"a0");e.gi=C.getUniformLocation(u,"u39");C.useProgram(u);C.enableVertexAttribArray(M);u=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,u);C.bufferData(C.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),C.STATIC_DRAW);C.vertexAttribPointer(M,4,C.FLOAT,
!1,16,0);u=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,u);C.bufferData(C.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),C.STATIC_DRAW);C.disable(C.DEPTH_TEST);C.disable(C.DITHER);C.disable(C.STENCIL_TEST);C.viewport(0,0,1,1);u=e.Xb?E.createQueryEXT():C.createQuery();e.Hd=u;e.Ba=E.TIME_ELAPSED_EXT||C.TIME_ELAPSED;e.If=-y.fh;e.Jf=new Float32Array(y.qc);e.Md=new Float32Array(y.qc);e.yd=0;e.ve=0;e.Ci=0;e.Jc=!0}}if(y.ri){C=!1;try{if("undefined"===typeof SharedWorker){var Q=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
y.Vf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),V=new Worker(Q);V.addEventListener("message",a);h={aj:V,port:V};B.Hf=!0}else{var T=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
y.Vf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ia=new SharedWorker(T);ia.port.start();ia.port.addEventListener("message",a);h={aj:ia,port:ia.port};B.Ff=!0}C=!0}catch(P){}C&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",k):(window.addEventListener("blur",F),window.addEventListener("focus",A)),window.addEventListener("pagehide",
F),window.addEventListener("pageshow",A),B.Ef=!0)}G="undefined"!==typeof Nb},A:function(){l();B.Ef&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",k):(window.removeEventListener("blur",F),window.removeEventListener("focus",A)),window.removeEventListener("pagehide",F),window.removeEventListener("pageshow",A),B.Ef=!1);B.Ff?(h.port.close(),B.Ff=!1):B.Hf&&(h.aj.terminate(),B.Hf=!1);Object.assign(B,{Oa:!0,Na:!1,Wb:!1});z=null},nq:function(){return B.Oa},update:function(C){Object.assign(y,
C)},pg:function(C){B.Na||N.m({});p();B.Wb=!0;z=C;B.Oa&&b()},stop:l};return N}(),Dc={lf:function(){return Date.now()},Pp:function(){return performance.now()}},nd=function(){var a={Hm:!0,isLinear:!0,Wf:[4,11]};return{Kp:function(b,d,f){return d.isDetected?Math.floor(d.s*b):(b=Math.floor(Math.log2(b/4)),b=Math.min(Math.max(b,4),9),Math.max(f,Math.pow(2,b)))},instance:function(b){var d=Object.assign({},a,b),f=[],l=null,p=-1,v=null,k=!1;for(b=d.Wf[0];b<=d.Wf[1];++b)f[b]=null;return{L:function(m,q){q!==
p&&(l&&l.remove(),l=aa.instance({isLinear:d.isLinear,isPot:!0,width:q}));if(k=d.Hm&&q<.5*m){m=Math.floor(Math.log2(m));var x=d.Wf;x=m=Math.min(Math.max(m,x[0]),x[1]);if(!f[x]){var I=aa.instance({isPot:!0,isMipmap:!0,ti:!0,width:Math.pow(2,x)});f[x]={$:I,Mi:-1}}m=f[m];v=m.$;m.Mi!==q&&(x=Math.log2(q),v.h(0),v.yj(x),aa.aa(0),m.Mi=q)}else v=l;p=q;v.L()},h:function(m){v.h(m);k&&v.Dc()},xa:function(m){v.xa(m)},remove:function(){l&&l.remove();f.forEach(function(m){m&&m.$.remove()})}}}}}(),Eb=function(){function a(W){switch(A){case e.movePinch:var sa=
-W.deltaY;0===F&&g("pinch",-1,.001*sa,null)}W.deltaY;W.preventDefault()}function b(W){if(-1!==F)switch(A){case e.swipe:if(1!==F)break;m();x(W,C);var sa=C[0]-N[0];l(sa);W=sa/(20*L.offsetWidth/100);g("swipeMove",Math.min(Math.max(W,-1),1),W,null);break;case e.movePinch:if(2===F||3===F){x(W,C);sa=C[0]-N[0];var Ia=C[1]-N[1];2===F?(O+=Math.sqrt(sa*sa+Ia*Ia),10>O?(N[0]=C[0],N[1]=C[1]):(na||(na=!0,g("moveStart",null,null,null)),Z[0]=sa,Z[1]=Ia,M[0]=sa-E[0],M[1]=Ia-E[1],g("move",Z,M,null),E[0]=Z[0],E[1]=
Z[1])):3===F&&(W=q(W)/ma,g("pinch",W,W-xa,null),xa=W)}}}function d(W){if(-1!==F)switch(A){case e.swipe:if(1!==F)break;m();x(W,C);W=C[0]-N[0];var sa=0>W;(W=20<100*Math.abs(W)/L.offsetWidth)&&sa?g("swipeLeft",t,null,null):W&&!sa&&g("swipeRight",t,null,null);var Ia=function(){setTimeout(function(){k();F=0;g("swipeEnd",null,null,null)},202)};W?(W=function(){var wa=(sa?-1:1)*L.width,gb=(sa?1:-1)*wa/L.width;t.style.transitionDuration=(400).toString()+"ms";t.style.left=(ia[0]+wa).toString()+"px";t.style.top=
ia[1].toString()+"px";t.style.transform="rotate( "+gb.toString()+"rad )";Ia()},T?W():P=W):(t.style.transitionDuration=(200).toString()+"ms",t.style.opacity="0",t.style.left=ia[0].toString()+"px",t.style.top=ia[1].toString()+"px",t.style.transform="",Ia());F=-1;break;case e.movePinch:if(2===F||3===F)F===F.move?g("moveEnd",null,null,null):3===F&&g("pinchEnd",null,null,null),F=0}}function f(W){W.preventDefault();if(-1!==F)switch(A){case e.swipe:if(0!==F)break;m();F=1;ka=setTimeout(function(){k();ka=
null;1===F&&(F=0,g("swipeEnd",null,null,null))},1E3);p();g("swipeStart",null,null,null);g("swipeGetCanvas",t,Q,u);x(W,N);break;case e.movePinch:0!==F?2!==F||na||void 0===W.changedTouches&&void 0===W.touches||(ma=q(W),20<ma&&(F=3,xa=1,g("pinchStart",null,null,null))):3!==F&&(na=!1,x(W,N),E[0]=0,E[1]=0,F=2,O=0)}}function l(W){var sa=0>W;t.style.left=ia[0]+W+"px";t.style.transformOrigin=sa?H:Qa;t.style.transform="rotate( "+((sa?1:-1)*W/L.width).toString()+"rad )"}function p(){T=!1;var W=L.getBoundingClientRect();
ia[0]=W.left;ia[1]=W.top;t.width=Math.round(L.width/4);t.height=Math.round(L.height/4);u.width=t.width;u.height=t.height;t.style.width=L.offsetWidth+"px";t.style.height=L.offsetHeight+"px";t.style.left=ia[0]+"px";t.style.top=ia[1]+"px";setTimeout(v,0)}function v(){Q.drawImage(L,0,0,t.width,t.height);V.drawImage(t,0,0);T=!0;document.body.appendChild(t);P&&(P(),P=!1)}function k(){t.style.transitionDuration="0ms";t.style.opacity="1";t.style.transform="";T&&(document.body.removeChild(t),T=!1)}function m(){ka&&
(window.clearTimeout(ka),ka=null)}function q(W){I(W,qa,0);I(W,ca,1);return Math.sqrt(qa[0]*qa[0]+ca[0]*ca[0])}function x(W,sa){void 0!==W.changedTouches||void 0!==W.touches?I(W,sa,0):(sa[0]=W.pageX,sa[1]=W.pageY)}function I(W,sa,Ia){W.touches.length>Ia?(sa[0]=W.touches[Ia].pageX,sa[1]=W.touches[Ia].pageY):(sa[0]=W.changedTouches[Ia].pageX,sa[1]=W.changedTouches[Ia].pageY)}function w(){n.forEach(function(W){L.removeEventListener(W.type,W.sb,!1)});return n.splice(0,n.length)}function y(W){W.forEach(function(sa){z(sa.type,
sa.sb)})}function z(W,sa){L.removeEventListener(W,sa,!1);t.removeEventListener(W,sa,!1);L.addEventListener(W,sa,!1);t.addEventListener(W,sa,!1);0===n.filter(function(Ia){return Ia.type===W&&Ia.sb===sa}).length&&n.push({type:W,sb:sa})}function g(W,sa,Ia,wa){B[W].forEach(function(gb){gb.sb(sa,Ia,wa)})}function h(W){return W[0]+"% "+(100-W[1]).toString()+"%"}var G=!1,L=null,B={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],
moveStart:[],moveEnd:[]},n=[],e={idle:0,swipe:1,movePinch:2},A=e.idle,F=0,N=[0,0],C=[0,0],E=[0,0],M=[0,0],t=document.createElement("canvas"),u=document.createElement("canvas"),Q=t.getContext("2d"),V=u.getContext("2d");t.style.position="fixed";t.style.zIndex="800";t.style.cursor="move";t.style.pointerEvents="none";t.className="swipeImage";t.setAttribute("draggable",!1);var T=!1,ia=[0,0],P=null,ka=null,Qa=h([50,100]),H=h([50,0]),r=null,O=0,Z=[0,0],ma=0,na=!1,xa=1,qa=[0,0],ca=[0,0],la={init:function(W){if(G)la.switch_canvas(W.ra);
else return L=W.ra,z("mousedown",f),z("mouseup",d),z("mouseout",d),z("mousemove",b),z("mousemove",b),z("wheel",a),z("touchstart",f),z("touchend",d),z("touchmove",b),G=!0,la},switch_canvas:function(W){if(!G)la.init({ra:W});else if(L!==W){var sa=w();L=W;y(sa);for(var Ia in B)for(W=B[Ia],sa=W.length-1;0<=sa;--sa)W[sa].In&&W.splice(sa,1)}},get_mode:function(){for(var W in e)if(e[W]===A)return W;return!1},switch_mode:function(W){G&&"undefined"!==typeof e[W]&&(W=e[W],A!==W&&(m(),A=W,F=0))},add_listener:function(W,
sa,Ia){B[W].push({sb:sa,In:"undefined"===typeof Ia?!1:Ia});return la},remove_listener:function(W){B[W].splice(0,B[W].length);return la},animate_swipe:function(W,sa){r&&(clearInterval(r),r=null);p();var Ia=L.width/(sa/1E3)*("left"===W?-1:1),wa=0,gb,Ta=Date.now();r=setInterval(function(){r&&(gb=Date.now(),wa+=(gb-Ta)/1E3*Ia,l(wa),Ta=gb,Math.abs(wa)>.75*L.width&&r&&(clearInterval(r),r=null,k()))},16)}};return la}();window.CanvasListeners=Eb;var S={VERSION:"4.3.8",dd:[],cd:[],Ee:!1,De:!1,Fe:!1,ready:!1,
isBusy:!1},cb={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,Ce:10,Be:8E3},J=Object.assign({},{Kc:!0,Ud:"models3D",Td:"materials",Jo:"tweakers",neuralNetworkPath:"built/jeefitNNC_65_0.json",neuralNetworkVersion:"65_0",da:"",va:"",$c:"",Aa:0,rk:20,width:1024,height:1024,ui:!0,qn:[2,3.5],hj:300,ad:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,sa:[.2,.2,.3],nc:[[.8,.5],[.8,.5],[1,1]],Ho:30,
ol:1,An:[.3,.65],zn:1,Io:[.01,.035],Rn:[.003,.007],Lg:[0,.6],Ll:.2,ab:[.698111,1.047166,.122169],Oj:[-.1,0,0],ae:[0,-62,8],vn:1.03,Ga:[0,-60,0],Zf:50,$f:20,Bc:.4,hf:73,He:[.03,1],pk:[4,1],Vk:[0,.5],Tn:.15,Qn:1,Mn:[1,4.5],Wo:20,Jp:!1,Fc:145,yf:-18,wf:20,xf:3,Nc:[-110,0],ic:1,Dj:.4,Ej:3,je:[0,0,0],jc:[1.1,1],pd:0,Ye:.95,Xe:90,We:50,hd:30,Lb:.05,uf:!0,Qd:!0,Qf:"images/masks/target.jpg",Rf:!1,Pd:[1/255,175/255,236/255,0],Rd:-.001,Pf:3.14,Le:0,Ke:"images/masks/burka.png",Ie:Math.PI-Math.PI/4,Ve:Math.PI/
4,og:[.3,.2,.1],Yb:!0,Fi:[700,90],Xm:[.2,.04],Xo:"images/backgrounds/viewer3D.png",bh:[0,0,0],ah:[0,15,60],ze:.3,fp:50,ap:dd?Ka:!1,bp:dd?Ka:!1,ep:1E3,hp:1E3,cp:40,$o:[0,0,-400],Ii:.1,an:.5,Ji:[.5,1.5],Sd:30,$m:!0});U.xh=!0;U.yh=!0;U.wh=!1;U.Qa=!0;var db={ce:3.5,Bb:"images/debug/picsou.png",Sc:45,Nf:.785,Of:.3925,Od:5,Nd:2,Mf:0,Lf:0,Yo:"images/backgrounds/bg1.jpg",Zo:"images/backgrounds/bg1_light.jpg",bk:1,ck:2};J.fx=[4,50];J.Nc=[-110,0];J.Dj=.25;J.Ej=3;J.je=[0,-2,20];J.jc=[.95,1];U.Qc=2.1289;U.ig=
1;db.ce=2.5858;db.Nf=.4388;db.Of=.118;db.Bb="images/debug/hdri2.png";db.Sc=180;db.rg=.8065;db.Od=5.3887;db.Nd=.5351;db.Mf=-.3019;db.Lf=0;db.bk=3.5288;db.ck=6.2168;var Wc={element:null,Ih:null,Ld:!1,uh:null,$:null,Rg:null,deviceId:-1,Qb:-1,vd:0,Zi:null,ye:-1},Da=Object.assign({},Wc),ab=null,ed=J.qn,Kc=window.devicePixelRatio?window.devicePixelRatio:1;var wc={Kl:Math.max(ed[0],Kc)/Kc,ff:Math.min(Kc,ed[1])};var fb=null;S.onLoad=function(a){S.ready?a():S.dd.push(a)};S.onHalfLoad=function(a){S.load_model?
a():S.cd.push(a)};S.onWebcamAsk=function(a){S.Ee=a};S.onContextLost=function(a){S.De=a};S.onWebcamGet=function(a){S.Fe=a};S.get_onHalfLoadCallstack=function(){return S.cd};S.set_size=function(a,b,d){d=d?wc.ff:1;J.width=a*d;J.height=b*d};S.get_videoDevices=function(a){Sc(a)};S.set_videoDevice=function(a){Da.deviceId=a};S.set_videoSizes=function(a,b,d,f,l,p){cb.idealWidth=a;cb.idealHeight=b;cb.minWidth=d;cb.maxWidth=f;cb.minHeight=l;cb.maxHeight=p};S.set_loading=function(a,b,d){a&&(J.Rf=!0,J.Qf=a);
"number"===typeof b&&(a=new bc(b),J.Pd=[a.r,a.Y,a.b,0]);"number"===typeof d&&(J.Rd=d)};S.set_settings=function(a,b,d){a&&Object.assign(J,a);b&&Object.assign(cb,b);d&&Object.assign(db,d)};S.get_size=function(){return{width:J.width,height:J.height}};S.get_cv=function(){return mb.tb()};S.set_NNCPath=function(a){J.$c=a};S.set_materialsPath=function(a){J.Td=a};S.set_modelsPath=function(a){J.Ud=a};S.destroy=function(){return fb?fb.A():Promise.resolve()};S.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,
screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(db.Od=a.lightDirFactor);0<=a.lightAmbFactor&&(db.Nd=a.lightAmbFactor);0<=a.screenLuminosity&&(db.ce=a.screenLuminosity);0<=a.screenWidthAngle&&(db.Sc=a.screenWidthAngle);a.screenTextureURL&&(db.Bb=a.screenTextureURL);S.ready&&(fb.Kj(),ya.Ka.mh(Da.$))};S.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,
width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null,callbackReady:null},a);J.Kc=b.isRequestCamera;S.set_size(b.width,b.height,b.isApplyOverSampling);S.update_lightSettings(a);b.modelsPath&&(J.Ud=b.modelsPath);b.materialsPath&&(J.Td=b.materialsPath);b.materialTextureBasePath&&(U.Li=b.materialTextureBasePath);b.NNCPath&&(J.$c=b.NNCPath);J.scanOverlapFactors=b.scanOverlapFactors||J.scanOverlapFactors;J.scanNScaleLevels=b.scanNScaleLevels||
J.scanNScaleLevels;J.scanScale0Factor=b.scanScale0Factor||J.scanScale0Factor;J.ui=b.isMirror;return new Promise(function(d,f){S.onHalfLoad(d);S.init(b.basePath,function(){b.callbackReady&&b.callbackReady()},f,b.cv)})};S.init=function(a,b,d,f){fb=ld();S.ob=d?function(l,p){d(l,p);S.ob=!1}:function(){};S.mp=fb;a&&(J.da=a);b&&S.dd.push(b);fb.Kj();a=fb.em();return mb.m({Ue:"jeefitCanvas",ra:f,width:a.width,height:a.height,debug:!1,cg:function(){S.De&&S.De()},premultipliedAlpha:!0})?J.Kc?Xc():pd():(S.ob&&
S.ob("GL_INCOMPATIBLE","Cannot init Context"),!1)};S.request_cameraVideoStream=function(){return Xc().then(function(){fb.Ml(J.width,J.height,0)})};window.JEELIZVTO=S;var Uc=function(){function a(){Ca.aa();c.viewport(0,0,1,1);Y.set("s74");f.h(0);X.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,p);b(0<p[0])}var b=null,d=!1,f=null,l=!1,p=null,v={m:function(k){if(l)return!1;f=k;Y.tc([{id:"s74",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Y.j("s74",[{type:"1i",name:"u41",value:0}]);p=new Uint8Array(4);return l=!0},start:function(k,m){v.stop();b=m;d=window.setInterval(a,k)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return v}(),Lc={};bc.prototype={constructor:bc,r:1,Y:1,b:1,set:function(a){a instanceof bc?this.N(a):"number"===typeof a?Zc(this,a):"string"===typeof a&&qd(this,a);return this},Wn:function(){function a(b,d,f){0>f&&(f+=1);1<f&&--f;return f<1/6?b+6*(d-b)*f:.5>f?d:f<2/3?b+6*(d-b)*(2/3-
f):b}return function(b,d,f){b=Lc.Math.Lp(b,1);d=Lc.Math.Pe(d,0,1);f=Lc.Math.Pe(f,0,1);0===d?this.r=this.Y=this.b=f:(d=.5>=f?f*(1+d):f+d-f*d,f=2*f-d,this.r=a(f,d,b+1/3),this.Y=a(f,d,b),this.b=a(f,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.Y,this.b)},N:function(a){this.r=a.r;this.Y=a.Y;this.b=a.b;return this},add:function(a){this.r+=a.r;this.Y+=a.Y;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.Y*=a.Y;this.b*=a.b;return this},Ea:function(a){this.r*=
a;this.Y*=a;this.b*=a;return this},rb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.Y=a[b+1];this.b=a[b+2];return this}};var rd={};yc.prototype={constructor:yc,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get w(){return this.T},set w(a){this.T=a},set:function(a,b,d,f){this.F=a;this.G=b;this.H=d;this.T=f;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.T)},N:function(a){this.F=a.x;
this.G=a.y;this.H=a.z;this.T=a.w;return this},inverse:function(){this.F*=-1;this.G*=-1;this.H*=-1;this.normalize();return this},rd:function(a){return this.F*a.F+this.G*a.G+this.H*a.H+this.T*a.T},Kf:function(){return this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T},length:function(){return Math.sqrt(this.F*this.F+this.G*this.G+this.H*this.H+this.T*this.T)},normalize:function(){var a=this.length();0===a?(this.H=this.G=this.F=0,this.T=1):(a=1/a,this.F*=a,this.G*=a,this.H*=a,this.T*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),$c(this,a,b)):$c(this,this,a)},rb:function(a,b){void 0===b&&(b=0);this.F=a[b];this.G=a[b+1];this.H=a[b+2];this.T=a[b+3];return this}};cc.prototype={constructor:cc,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},mj:function(a){this.x=a;
return this},nj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},N:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ed(a,b);this.x+=a.x;this.y+=a.y;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ea:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},af:function(a){return this.Ea(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},rd:function(a){return this.x*a.x+this.y*a.y},Kf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.af(this.length())},
rb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Xa.prototype={constructor:Xa,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},mj:function(a){this.x=a;return this},nj:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},N:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.ed(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},ed:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ea:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},af:function(a){return this.Ea(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},rd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Kf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.af(this.length())},rb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};dc.ek="XYZ";dc.prototype={constructor:dc,get x(){return this.F},set x(a){this.F=a},get y(){return this.G},set y(a){this.G=a},get z(){return this.H},set z(a){this.H=a},get order(){return this.Sa},set order(a){this.Sa=a},set:function(a,b,d,f){this.F=
a;this.G=b;this.H=d;this.Sa=f||this.Sa;return this},clone:function(){return new this.constructor(this.F,this.G,this.H,this.Sa)},N:function(a){this.F=a.F;this.G=a.G;this.H=a.H;this.Sa=a.Sa;return this},rb:function(a){this.F=a[0];this.G=a[1];this.H=a[2];void 0!==a[3]&&(this.Sa=a[3]);return this}};Hc.prototype={constructor:Hc,set:function(a,b){this.min.N(a);this.max.N(b);return this},clone:function(){return(new this.constructor).N(this)},N:function(a){this.min.N(a.min);this.max.N(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Xa).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Xa).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};ec.prototype={constructor:ec,set:function(a,b,d,f,l,p,v,k,m,q,x,I,w,y,z,g){var h=this.elements;h[0]=a;h[4]=b;
h[8]=d;h[12]=f;h[1]=l;h[5]=p;h[9]=v;h[13]=k;h[2]=m;h[6]=q;h[10]=x;h[14]=I;h[3]=w;h[7]=y;h[11]=z;h[15]=g;return this},clone:function(){return(new ec).rb(this.elements)},N:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),bd(this,a,b)):bd(this,this,a)},Ea:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,f=a.y;a=a.z;b[0]*=d;b[4]*=f;b[8]*=a;b[1]*=d;b[5]*=f;b[9]*=a;b[2]*=d;b[6]*=f;b[10]*=a;b[3]*=d;b[7]*=f;b[11]*=a;return this},rb:function(a){this.elements.set(a);return this}};Ic.prototype={constructor:Ic,
clone:function(){return(new this.constructor).N(this)},N:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Fa.N(a.Fa);this.color.N(a.color);this.Zb=a.Zb;for(var b=0,d=a.xe.length;b<d;b++)this.xe[b]=a.xe[b].clone();b=0;for(d=a.Zg.length;b<d;b++)this.Zg[b]=a.Zg[b].clone();return this}};var D=function(){function a(n,e,A){e=n.createShader(e);n.shaderSource(e,A);n.compileShader(e);return n.getShaderParameter(e,n.COMPILE_STATUS)?e:!1}function b(n,e){fa.na()&&(e.g=e.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
e.tf=a(n,n.VERTEX_SHADER,e.v,e.name+" VERTEX");e.sf=a(n,n.FRAGMENT_SHADER,e.g,e.name+" FRAGMENT");var A=n.createProgram();n.attachShader(A,e.tf);n.attachShader(A,e.sf);n.linkProgram(A);return A}function d(n){n.v="#version 300 es\n"+n.v.replace(/varying/g,"out");n.g="#version 300 es\n"+n.g.replace(/varying/g,"in");n.v=n.v.replace(/texture2D\(/g,"texture(");n.g=n.g.replace(/texture2D\(/g,"texture(");n.ea||(n.g=n.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),n.g=n.g.replace(/gl_FragColor/g,
"FragColor"));var e=0,A=[];n.v=n.v.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(F,N,C){var E="";C.split(",").forEach(function(M){M=M.trim();E+="layout(location = "+e+") in "+N+" "+M+";\n";A.push(M);++e});return E});n.kk=A}function f(n){return["float","sampler2D","int"].map(function(e){return"precision "+n+" "+e+";\n"}).join("")}function l(n,e){if(e.li)return!1;var A=fa.na();U.fq||A||n.enableVertexAttribArray(0);void 0===e.ea&&(e.ea=!1);e.ea&&(e.bd=A?3:2);e.id=L++;void 0===e.bd&&
(e.bd=2);void 0===e.precision&&(e.precision="highp");e.ea&&(e.g=(fa.na()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+e.g);void 0===e.v&&(e.v="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var F=f(e.precision);
e.g=F+e.g;e.v=F+e.v;A&&3<=e.bd&&d(e);e.Ha&&e.Ha.forEach(function(N){e.v=e.v.replace(N.search,N.replace);e.g=e.g.replace(N.search,N.replace)});e.pa=b(n,e);e.B={};e.i.forEach(function(N){e.B[N]=n.getUniformLocation(e.pa,N)});e.attributes={};e.wa=[];e.Yg=0;void 0===e.J&&(e.J=["a0"]);void 0===e.S&&(e.S=[2]);e.J.forEach(function(N,C){var E=A&&3<=e.bd?e.kk.indexOf(N):n.getAttribLocation(e.pa,N);e.attributes[N]=E;e.wa.push(E);e.Yg+=4*e.S[C]});e.set=function(){h!==e.id&&(-1!==h&&G.M(),h=e.id,G=e,n.useProgram(e.pa),
e.wa.forEach(function(N){0!==N&&n.enableVertexAttribArray(N)}))};e.M=function(){h=-1;e.wa.forEach(function(N){0!==N&&n.disableVertexAttribArray(N)})};e.li=!0}function p(n,e){l(n,e);e.set();h=-1;return e}function v(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function k(){B.j("s105",[{type:"1i",name:"u1",value:0}]);B.j("s106",[{type:"1i",name:"u155",value:0}]);B.j("s107",[{type:"1i",name:"u75",value:0}])}function m(){var n=
"u41 u145 u146 u147 u148 u42 u80".split(" ").concat(y,z);g.s108={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u87*e;vec3 c=u87*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u81,0.,0.),u84,c);float u=mix(texture2D(u41,r).r,0.,u87);a.z+=u;mat3 v=s(a);vec3 w=mix(u145,u85,c);float x=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u83,1.,u87);vec2 j=u82/t;vec3 k=a0;float A=max(0.,-a0.z-u147)*u148;k.x+=A*sign(a0.x)*(1.-u87);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u151,u152,a0.z);}",
i:["u151","u152"].concat(n),J:["a0"],precision:"highp"};g.s109={name:"_",g:"uniform sampler2D u1;uniform vec3 u149;uniform float u73,u74;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u149,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u149,b,u73),a.a*(1.-u74));gl_FragColor=c;}",v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u87*e;vec3 c=u87*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u81,0.,0.),u84,c);float s=mix(texture2D(u41,p).r,0.,u87);a.z+=s;mat3 t=q(a);vec3 u=mix(u145,u85,c);float v=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u83,1.,u87);vec2 j=u82/r;vec3 k=a0;float y=max(0.,-a0.z-u147)*u148;k.x+=y*sign(a0.x)*(1.-u87);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u149"].concat(I,n),J:["a0","a1"],S:[3,2],precision:"lowp"};g.s110={name:"_",g:"uniform vec3 u149;void main(){gl_FragColor=vec4(u149,0.);}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u87*e;vec3 c=u87*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u81,0.,0.),u84,c);float r=mix(texture2D(u41,o).r,0.,u87);a.z+=r;mat3 s=p(a);vec3 t=mix(u145,u85,c);float u=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u83,1.,u87);vec2 j=u82/q;vec3 k=a0;float x=max(0.,-a0.z-u147)*u148;k.x+=x*sign(a0.x)*(1.-u87);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(A,1.));}",
i:["u149"].concat(n),S:[3],precision:"lowp"};g.s111={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",v:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u87*e;vec3 c=u87*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u81,0.,0.),u84,c);float u=mix(texture2D(u41,r).r,0.,u87);a.z+=u;mat3 h=s(a);vec3 v=mix(u145,u85,c);float w=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 k=u82/t;vec3 l=a0;float z=max(0.,-a0.z-u147)*u148;l.x+=z*sign(a0.x)*(1.-u87);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u80"].concat(n),J:["a0","a2"],precision:"highp"};g.s112={name:"_",g:"uniform sampler2D u155;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u155,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u87*e;vec3 c=u87*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u81,0.,0.),u84,c);float w=mix(texture2D(u41,t).r,0.,u87);a.z+=w;mat3 h=u(a);vec3 x=mix(u145,u85,c);float y=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 k=u82/v;vec3 l=a0;float B=max(0.,-a0.z-u147)*u148;l.x+=B*sign(a0.x)*(1.-u87);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u80","u155"].concat(n),J:["a3","a0","a2","a1"],S:[4,3,3,2],precision:"highp"};g.s113={name:"_",g:"uniform vec4 u113;uniform float u150;void main(){float b=u150;vec4 a=u113;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u87*e;vec3 c=u87*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u81,0.,0.),u84,c);float r=mix(texture2D(u41,o).r,0.,u87);a.z+=r;mat3 s=p(a);vec3 t=mix(u145,u85,c);float u=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u83,1.,u87);vec2 j=u82/q;vec3 k=a0;float x=max(0.,-a0.z-u147)*u148;k.x+=x*sign(a0.x)*(1.-u87);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(A,1.));}",
i:["u113","u150"].concat(n),precision:"lowp"};g.s114={name:"_",g:"uniform sampler2D u75;uniform vec4 u113,u76;uniform float u150;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u150;vec4 a=u113,d=texture2D(u75,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u76*e),c=mix(c,l,u76.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u147,u148,u154;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u87*e;vec3 c=u87*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u81,0.,0.),u84,c);float s=mix(texture2D(u41,p).r,0.,u87);a.z+=s;mat3 t=q(a);vec3 u=mix(u145,u85,c);float v=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u83,1.,u87);vec2 j=u82/r;vec3 k=a0;float y=max(0.,-a0.z-u147)*u148;k.x+=y*sign(a0.x)*(1.-u87);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u113","u150"].concat(w,n),J:["a0","a1"],S:[3,2],precision:"lowp"};n=["u138","u126","u139"];g.s115={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",v:"attribute vec3 a0;uniform mat4 u138,u126,u139;varying vec3 vv0;varying float vv1;void main(){vec4 a=u139*vec4(a0,1.);gl_Position=u138*u126*a,vv0=a.xyz,vv1=1.;}",i:n,precision:"highp"};g.s116={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",v:"attribute vec3 a0,a2;uniform mat4 u138,u126,u139;varying vec3 vv0;varying float vv1;void main(){vec4 a=u139*vec4(a2,0.);gl_Position=u138*u126*u139*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:n,J:["a0","a2"],precision:"highp"};g.s106={name:"_",g:"uniform sampler2D u155;uniform vec3 u156;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u156),c=normalize(vv2),b=texture2D(u155,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u139*vec4(a2,0.),a=u139*vec4(a0,1.);gl_Position=u138*u126*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u155","u156"].concat(n),J:["a0","a2","a1","a3"],precision:"highp"};g.s105={name:"_",g:"uniform sampler2D u1;uniform vec3 u149;uniform float u73,u74;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u149,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u149,b,u73),a.a*(1.-u74));gl_FragColor=c;}",v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u138*u126*u139*vec4(a0,1.)+f,vv0=a1;}",i:["u149"].concat(I,n),
J:["a0","a1"],Ha:[{search:"0.0005",replace:Ha.ha()?"0.0005":"0.0"}],precision:"lowp"};g.s117={name:"_",g:"uniform vec4 u113;uniform float u150;void main(){float b=u150;vec4 a=u113;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",v:"attribute vec3 a0;uniform mat4 u138,u126,u139;void main(){gl_Position=u138*u126*u139*vec4(a0,1.);}",i:["u113"].concat(n),precision:"highp"};g.s107={name:"_",g:"uniform sampler2D u75;uniform vec4 u113,u76;uniform float u150;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u150;vec4 a=u113,d=texture2D(u75,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u76*e),c=mix(c,l,u76.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec2 vv0;void main(){gl_Position=u138*u126*u139*vec4(a0,1.),vv0=a1;}",i:["u113"].concat(w,n),J:["a0","a1"],S:[3,2],precision:"highp"}}function q(){for(var n in g)l(c,g[n])}var x=!1,I=["u1","u73","u74"],w=["u75","u76"],y="u77 u78 u79 u80 u81 u82 u83".split(" "),z="u84 u85 u86 u87 u88 u89".split(" "),g={},h=-1,G=null,L=0,B={oa:function(n,e){g[n]=e;x&&l(c,g[n])},uq:function(n,e){g[n]=e;e.li=!1;l(c,g[n])},yb:function(){return x},
m:function(){g.s0=v();g.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};g.s75={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};g.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1",
"u12","u13"],precision:"highp"};g.s77={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};g.s12={name:"_",g:"uniform sampler2D u1,u90;uniform vec2 u91;uniform float u92,u93;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u90,vv0*u91),c=texture2D(u1,vv0*u91);float a=smoothstep(u92,0.,vv0.y);a+=smoothstep(1.-u92,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u93*f);}",
i:["u1","u91","u90","u92","u93"]};g.s78={name:"_",g:"uniform sampler2D u1,u90;uniform vec2 u91;uniform float u92,u93;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u91;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u90,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u92,0.,vv0.y);b+=smoothstep(1.-u92,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u93*h));gl_FragColor=k;}",
i:["u1","u91","u90","u92","u93"],precision:"highp"};g.s79={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};g.s80={name:"_",g:"uniform sampler2D u1,u94;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};g.s81={name:"_",g:"uniform sampler2D u1,u94,u41;uniform vec2 u14,u95;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u95.x+pow(c,2.)*(u95.y-u95.x);vec3 j=mix(b/5.,texture2D(u94,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u94","u14","u41","u95"],precision:"lowp"};g.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};g.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};g.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};g.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};g.s84={name:"_",g:"uniform sampler2D u96,u97;uniform float u98,u99;varying vec2 vv0;void main(){vec3 a=texture2D(u97,vv0).rgb,b=texture2D(u96,vv0).rgb;gl_FragColor=vec4(b*u99+u98*a,1.);}",
i:["u96","u97","u98","u99"],precision:"highp"};g.s85={name:"_",g:"uniform sampler2D u100,u101;uniform float u93;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u101,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u100,g).rgb,u93*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u100","u101","u93"],precision:"lowp",Ha:[{search:"8888",replace:U.Dm[fa.W()]}]};g.s86={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};g.s87={name:"_",
g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",i:["u1"],precision:"lowp"};g.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",
i:["u1","u14"],precision:"lowp"};g.s89={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",i:["u1","u14"],precision:"lowp"};g.s90={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",
i:["u1"],precision:"highp"};g.s91={name:"_",g:"uniform sampler2D u1,u90;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u90,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",i:["u1","u90"],precision:"highp"};g.s92={name:"_",g:"uniform sampler2D u1,u90;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u90,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",
i:["u1","u90"],precision:"highp"};g.s93={name:"_",g:"uniform sampler2D u1,u102,u2,u103;uniform vec4 u104;uniform vec2 u105;uniform float u106,u107,u108,u109;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u102,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u103,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u105*.5+h).r,l=atan(a.x,a.y),m=-(mod(u106,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u107,b),c=.5+u109*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u104*k;gl_FragColor=mix(d,o,j*u108);}",
i:"u1 u2 u103 u102 u104 u106 u107 u108 u105 u109".split(" "),precision:"lowp"};var n="u110 u111 u112 u113 u100 u114 u3 u115 u102 u116 u117 u118 u119 u120 u14".split(" ");U.ga_&&(g.s94={name:"_",g:"uniform sampler2D u110,u111,u112,u113,u100,u114,u121,u102;uniform vec3 u115,u118;uniform vec2 u14;uniform float u3,u122,u117,u119,u116;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u116;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u110,vv0);vec3 k=texture2D(u102,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u115;vec4 b=texture2D(u113,vv0),m=texture2D(u111,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u112,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u114,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u117-u119,u117+u119,I);h=mix(l(texture2D(u100,H)),u118,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u122*texture2D(u121,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:n.concat(["u121","u122"]),precision:"highp"});g.s95={name:"_",g:"uniform sampler2D u110,u111,u112,u113,u100,u114,u102;uniform vec3 u115,u118;uniform vec2 u14;uniform float u3,u117,u119,u120,u123,u124,u116,u125;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u116;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u110,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u102,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u110,vv0);if(h.a<.01)gl_FragColor=vec4(p(vv0),0.);float i=h.a;vec3 L=h.rgb,M=L+u115;vec4 c=texture2D(u113,vv0),s=texture2D(u111,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u112,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u123*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u111,v).rgb,R=texture2D(u111,w).rgb,S=texture2D(u111,x).rgb,T=texture2D(u111,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u114,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u117-u119,u117+u119,fa);vec3 ha=r(texture2D(u100,ea));A=mix(ha,u118,ga_*u120);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u123),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u124,q)*m);float ma=mix(la,q,u125);gl_FragColor=vec4(f,ma);}",
i:n.concat(["u125","u123","u124"]),precision:"highp"};U.ga_&&(g.s96={name:"_",g:"uniform sampler2D u110,u111;uniform mat4 u126;uniform vec2 u127,u14,u128;uniform float u129,u130,u131,u132,u133,u134,u135,u136,u122;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u128;vec4 pos=texture2D(u110,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u129),s=sin(u129);vec3 no0=texture2D(u111,uvt).rgb;float zv=(u126*vec4(co0,1.)).z;vec3 co;vec2 scale=u127/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u110,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u135,u136,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u110,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u135,u136,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u110,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u135,u136,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u110,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u135,u136,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u132,u133,1.),ao=dzFactor*clamp(u131*omegaMin*u134,0.,u122);gl_FragColor=vec4(ao,ao,ao,u130);}",
i:"u110 u111 u131 u130 u129 u14 u137 u132 u133 u134 u135 u136 u126 u127 u122".split(" "),Ha:[{search:"8888.8",replace:U.Fk[fa.W()].toFixed(1)}],precision:"lowp"},g.s97={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});g.s98={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",v:"attribute vec3 a0;uniform mat4 u138,u126,u139;varying vec3 vv0;void main(){vec4 a=u138*u126*u139*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u138","u126","u139"],precision:"lowp"};g.s99={name:"_",g:"uniform sampler2D u140,u114,u101;uniform mat4 u138,u141;uniform vec2 u142;uniform float u143;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u142*(z-f),0.),B=vec3(u141*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u101,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u138*u,i=h.xyz/h.w;if(texture2D(u140,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u141*vec4(g,0.)),t+=texture2D(u114,y(s));}gl_FragColor=vec4(u143*t.rgb/n,1.);}",
i:"u140 u114 u101 u138 u141 u142 u143".split(" "),Ha:[{search:"8888.8",replace:U.Bo[fa.W()].toFixed(1)},{search:"9999.9",replace:U.Co[fa.W()].toFixed(1)}],precision:"lowp"};g.s100={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};g.s101={name:"_",g:"uniform sampler2D u1,u144;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
v:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u138,u126;varying vec2 vv0;void main(){vec4 a=u138*u126*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u138","u126","u1"],J:["a0","a1"],precision:"lowp"};if(fa.ca()){n="u41 u145 u146 u147 u148 u42 u113 u149 u150 u13 u151 u152 u80".split(" ").concat(y,z);fa.yi()||(g.s102={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",ea:!0});g.s103={name:"_",v:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],ea:!0};g.s104NNGLcolor={name:"_",g:"uniform vec4 u113,u13;uniform vec3 u149;uniform float u150;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u150;vec4 a=u113;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u149,0.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u87*e;vec3 c=u87*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u81,0.,0.),u84,c);float x=mix(texture2D(u41,u).r,0.,u87);a.z+=x;mat3 h=v(a);vec3 y=mix(u145,u85,c);float z=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u83,1.,u87);vec2 k=u82/w;vec3 l=a0;float C=max(0.,-a0.z-u147)*u148;l.x+=C*sign(a0.x)*(1.-u87);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u151,u152,a0.z),vv0=m,vv3=a0.y;}",
i:n,J:["a0","a2"],S:[3,3],ea:!0};g.s104NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u113,u13;uniform vec3 u149;uniform float u150,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u150;vec4 b=u113;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u149,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u149,l,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u87*e;vec3 c=u87*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u81,0.,0.),u84,c);float y=mix(texture2D(u41,v).r,0.,u87);a.z+=y;mat3 h=w(a);vec3 z=mix(u145,u85,c);float A=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u83,1.,u87);vec2 k=u82/x;vec3 l=a0;float D=max(0.,-a0.z-u147)*u148;l.x+=D*sign(a0.x)*(1.-u87);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u151,u152,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(I),J:["a0","a2","a1"],S:[3,3,2],ea:!0};g.s104NNGLtextureNormalMap={name:"_",g:"uniform vec4 u113,u13;uniform vec3 u149;uniform sampler2D u1,u155;uniform float u150,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u155,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u150;vec4 c=u113;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u149,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u149,t,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u87*e;vec3 c=u87*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u81,0.,0.),u84,c);float z=mix(texture2D(u41,w).r,0.,u87);a.z+=z;mat3 h=x(a);vec3 A=mix(u145,u85,c);float B=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u83,1.,u87);vec2 k=u82/y;vec3 l=a0;float E=max(0.,-a0.z-u147)*u148;l.x+=E*sign(a0.x)*(1.-u87);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u151,u152,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(I,["u155"]),J:["a3","a0","a2","a1"],S:[4,3,3,2],ea:!0};g.s104NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u75;uniform vec4 u113,u13,u76;uniform vec3 u149;uniform float u150,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u150;vec4 a=u113,e=texture2D(u75,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u76*f),d=mix(d,r,u76.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u149,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u149,u,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u87*e;vec3 c=u87*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u81,0.,0.),u84,c);float y=mix(texture2D(u41,v).r,0.,u87);a.z+=y;mat3 h=w(a);vec3 z=mix(u145,u85,c);float A=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u83,1.,u87);vec2 k=u82/x;vec3 l=a0;float D=max(0.,-a0.z-u147)*u148;l.x+=D*sign(a0.x)*(1.-u87);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u151,u152,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(I,w),J:["a0","a2","a1"],S:[3,3,2],ea:!0};g.s104NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u155,u75;uniform vec4 u113,u13,u76;uniform vec3 u149;uniform float u150,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u155,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u150;vec4 a=u113,f=texture2D(u75,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u76*l),e=mix(e,z,u76.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u149,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u149,C,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u153;uniform float u146,u151,u152,u147,u148,u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u87*e;vec3 c=u87*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u81,0.,0.),u84,c);float z=mix(texture2D(u41,w).r,0.,u87);a.z+=z;mat3 h=x(a);vec3 A=mix(u145,u85,c);float B=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u83,1.,u87);vec2 k=u82/y;vec3 l=a0;float E=max(0.,-a0.z-u147)*u148;l.x+=E*sign(a0.x)*(1.-u87);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u151,u152,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(I,["u155"],w),J:["a3","a0","a2","a1"],S:[4,3,3,2],ea:!0};n="u138 u126 u139 u113 u149 u150 u13".split(" ");g.s104color={name:"_",g:"uniform vec4 u113,u13;uniform vec3 u149;uniform float u150;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u150;vec4 a=u113;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u149,0.),gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;uniform mat4 u138,u126,u139;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u139*vec4(a0,1.),b=u139*vec4(a2,0.);gl_Position=u138*u126*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:n,J:["a0","a2"],ea:!0};g.s104={name:"_",g:"uniform sampler2D u1;uniform vec4 u113,u13;uniform vec3 u149;uniform float u150,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u150;vec4 b=u113;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u149,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u149,l,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u139*vec4(a0,1.),b=u139*vec4(a2,0.);gl_Position=u138*u126*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(I),J:["a0","a2","a1"],ea:!0};var e=["u155","u156"];g.s104NormalMap={name:"_",g:"uniform sampler2D u1,u155;uniform vec4 u113,u13;uniform vec3 u156,u149;uniform float u150,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u155,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u150;vec4 c=u113;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u149,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u149,t,u73),a.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u139*vec4(a0,1.),b=u139*vec4(a2,0.);gl_Position=u138*u126*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(I,e),J:["a0","a2","a1","a3"],ea:!0};g.s104ParamsMap={name:"_",g:"uniform sampler2D u1,u75;uniform vec4 u113,u13,u76;uniform vec3 u149;uniform float u150,u73,u74;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u150;vec4 a=u113,e=texture2D(u75,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u76*f),d=mix(d,r,u76.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u149,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u149,u,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
v:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u139*vec4(a0,1.),b=u139*vec4(a2,0.);gl_Position=u138*u126*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(I,w),J:["a0","a2","a1"],ea:!0};g.s104NormalParamsMap={name:"_",g:"uniform sampler2D u1,u155,u75;uniform vec4 u113,u13,u76;uniform vec3 u156,u149;uniform float u150,u73,u74;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u155,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u150;vec4 a=u113,f=texture2D(u75,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u76*l),e=mix(e,z,u76.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u149,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u149,C,u73),c.a*(1.-u74));gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
v:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u138,u126,u139;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u139*vec4(a0,1.),b=u139*vec4(a2,0.);gl_Position=u138*u126*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(I,e,w),J:["a0","a2","a1","a3"],ea:!0}}else m();q();n=[{type:"1i",name:"u1",value:0}];B.j("s0",n);B.j("s1",n);B.j("s76",[{type:"1i",name:"u12",value:1}].concat(n));B.j("s77",[{type:"1i",name:"u12",
value:1}].concat(n));B.j("s12",[{type:"1i",name:"u90",value:1}].concat(n));B.j("s78",[{type:"1i",name:"u90",value:1}].concat(n));B.j("s79",n);B.j("s80",n);B.j("s81",[{type:"1i",name:"u94",value:1},{type:"1i",name:"u41",value:2}].concat(n));B.j("s82",n);B.j("s83",n);B.j("s13",n);B.j("s84",[{type:"1i",name:"u96",value:0},{type:"1i",name:"u97",value:1}]);B.j("s85",[{type:"1i",name:"u100",value:0},{type:"1i",name:"u101",value:1}]);B.j("s86",n);B.j("s87",n);B.j("s88",n);B.j("s89",n);B.j("s90",n);B.j("s91",
[{type:"1i",name:"u90",value:1}].concat(n));B.j("s92",[{type:"1i",name:"u90",value:1}].concat(n));U.ga_&&(B.j("s96",[{type:"1i",name:"u110",value:0},{type:"1i",name:"u111",value:1},{type:"1f",name:"u132",value:U.tk},{type:"1f",name:"u133",value:U.uk},{type:"1f",name:"u134",value:U.Gk},{type:"1f",name:"u135",value:U.xk},{type:"1f",name:"u136",value:U.yk},{type:"1f",name:"u131",value:1},{type:"1f",name:"u122",value:1}]),B.j("s97",n));e=[{type:"1i",name:"u110",value:0},{type:"1i",name:"u111",value:1},
{type:"1i",name:"u112",value:2},{type:"1i",name:"u100",value:3},{type:"1i",name:"u114",value:4},{type:"1i",name:"u113",value:6},{type:"1i",name:"u102",value:7},{type:"1f",name:"u120",value:0},{type:"1f",name:"u117",value:0},{type:"1f",name:"u119",value:0}];U.ga_&&B.j("s94",e.concat([{type:"1f",name:"u122",value:U.wk[fa.W()]},{type:"1i",name:"u121",value:5}]));B.j("s95",e.concat([{type:"1f",name:"u123",value:U.Qc},{type:"1f",name:"u124",value:U.ig},{type:"1f",name:"u125",value:0}]));B.j("s99",[{type:"1i",
name:"u140",value:0},{type:"1i",name:"u114",value:1},{type:"1i",name:"u101",value:2},{type:"1f",name:"u143",value:U.Ao}]);B.j("s100",n);B.j("s101",n);B.j("s93",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u103",value:2},{type:"1i",name:"u102",value:3},{type:"1f",name:"u108",value:1},{type:"2f",name:"u105",value:[0,0]}].concat(n));fa.ca()?(B.j("s104",n),B.j("s104NormalMap",[{type:"1i",name:"u155",value:1}].concat(n)),B.j("s104ParamsMap",[{type:"1i",name:"u75",value:1}].concat(n)),B.j("s104NormalParamsMap",
[{type:"1i",name:"u155",value:1},{type:"1i",name:"u75",value:2}].concat(n))):k();x=!0},no:function(){m();q();k()},Bd:function(){return G.id},Dd:function(){return y},Ed:function(){return z},set:function(n){Cb.Bj(B);g[n].set()},Cb:function(n){return p(n,v())},fe:function(n){return p(n,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},qo:function(n){return p(n,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",ea:!0})},M:function(){-1!==h&&G.M()},he:function(){var n=0;G.wa.forEach(function(e,A){A=G.S[A];c.vertexAttribPointer(e,A,c.FLOAT,!1,G.Yg,n);n+=4*A})},ec:function(){B.fc(c)},fc:function(n){n.vertexAttribPointer(G.wa[0],2,n.FLOAT,!1,8,0)},zq:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,12,0)},Ra:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,24,0)},tj:function(){c.vertexAttribPointer(G.attributes.a2,
3,c.FLOAT,!1,32,12)},uj:function(){c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,24,12)},Tc:function(){c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,32,24)},Aq:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,20,12)},bo:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(G.attributes.a1,2,c.FLOAT,!1,32,24)},co:function(){c.vertexAttribPointer(G.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,32,12)},eo:function(){c.vertexAttribPointer(G.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(G.attributes.a2,3,c.FLOAT,!1,24,12)},de:function(){c.vertexAttribPointer(G.attributes.a3,4,c.FLOAT,!1,16,0)},ge:function(n,e){c.uniform1i(G.B[n],e)},C:function(n,e){c.uniform1f(G.B[n],e)},O:function(n,e,A){c.uniform2f(G.B[n],e,A)},Ag:function(n,e){c.uniform2fv(G.B[n],e)},Bg:function(n,e,A,F){c.uniform3f(G.B[n],e,A,F)},Cg:function(n,
e){c.uniform3fv(G.B[n],e)},za:function(n,e){c.uniform4fv(G.B[n],e)},uo:function(n,e){c.uniformMatrix2fv(G.B[n],!1,e)},vo:function(n,e){c.uniformMatrix3fv(G.B[n],!1,e)},Uc:function(n,e){c.uniformMatrix4fv(G.B[n],!1,e)},j:function(n,e){B.set(n);e.forEach(function(A){switch(A.type){case "4f":c.uniform4fv(G.B[A.name],A.value);break;case "3f":c.uniform3fv(G.B[A.name],A.value);break;case "2f":c.uniform2fv(G.B[A.name],A.value);break;case "1f":c.uniform1f(G.B[A.name],A.value);break;case "1i":c.uniform1i(G.B[A.name],
A.value);break;case "mat2":c.uniformMatrix2fv(G.B[A.name],!1,A.value);break;case "mat4":c.uniformMatrix4fv(G.B[A.name],!1,A.value)}})},I:function(){for(var n in g){var e=g[n];c.detachShader(e.pa,e.tf);c.detachShader(e.pa,e.sf);c.deleteShader(e.tf);c.deleteShader(e.sf);c.deleteProgram(e.pa)}},A:function(){c.disableVertexAttribArray(0);B.M();B.I();L=0;x=!1;G=null;h=-1}};return B}(),Za=function(){var a={},b=[],d=!1,f=0,l=0,p=-1,v=-1,k=1,m=null,q=!1,x=null,I=!1,w=!1,y=!1,z=!1,g=!1,h=!1,G=-1,L=-1,B=!1,
n=!1,e=null,A=null,F=-1,N=-1,C=null,E=-1,M,t=null,u=null,Q=null,V=null,T=null,ia=null,P=null,ka=[{type:"1f",name:"u87",value:0},{type:"1f",name:"u151",value:0},{type:"1f",name:"u152",value:0},{type:"1f",name:"u82",value:1},{type:"1f",name:"u78",value:0},{type:"1f",name:"u79",value:0},{type:"1f",name:"u89",value:1}],Qa={m:function(H,r){a.Eg=H;fa.Ug();Mc.ef();Ub.ef(H.ze);p=H.hf;v=H.gp;k=H.ye;G=H.Zf;L=H.$f;var O=[{type:"1f",name:"u82",value:p},{type:"1f",name:"u78",value:G},{type:"1f",name:"u79",value:L},
{type:"1f",name:"u83",value:H.Un},{type:"mat4",name:"u77",value:H.yn},{type:"2f",name:"u42",value:H.dk}];H.Sg=O;var Z=[{type:"3f",name:"u84",value:[0,0,0]},{type:"3f",name:"u85",value:H.bh},{type:"3f",name:"u86",value:H.ah},{type:"1f",name:"u87",value:0},{type:"1f",name:"u88",value:H.ze},{type:"1f",name:"u89",value:1}];H.Uj=Z;Qa.zm(H,r);d||void 0!==H.Ga||(H.Ga=[0,0,120]);n=B=J.uf;if(!d&&B){r=1*fa.vb();var ma=1*fa.ub(),na={isLinear:!0,isPot:!1,width:r,height:ma};e=aa.instance(na);A=aa.instance(na);
F=1/r;N=1/ma}O=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:H.Ga},{type:"1f",name:"u147",value:H.hd},{type:"1f",name:"u148",value:H.Lb}].concat(O,Z);m=H.Nc;Z=[{type:"1f",name:"u151",value:m[0]},{type:"1f",name:"u152",value:m[1]}];fa.ca()?(r=[{type:"1i",name:"u1",value:0}],ma=[{type:"1i",name:"u155",value:2}],D.j("s104NNGLcolor",O.concat(Z)),D.j("s104NNGLtexture",[].concat(r,O,Z)),D.j("s104NNGLtextureNormalMap",[].concat(r,ma,O,Z)),D.j("s104NNGLtextureParamsMap",[{type:"1i",name:"u75",
value:2}].concat(r,O,Z)),D.j("s104NNGLtextureNormalParamsMap",[{type:"1i",name:"u75",value:3}].concat(r,ma,O,Z))):(D.j("s108",O.concat(Z)),D.j("s109",[{type:"1i",name:"u1",value:0}].concat(O)),D.j("s110",O),D.j("s111",O),D.j("s112",O.concat([{type:"1i",name:"u155",value:0}])),D.j("s113",O),D.j("s114",O.concat([{type:"1i",name:"u75",value:0}])));D.j("s81",[{type:"2f",name:"u95",value:H.Lg}]);D.j(U.ga_?"s94":"s95",[{type:"1f",name:"u117",value:H.Ie},{type:"3f",name:"u118",value:H.og},{type:"1f",name:"u119",
value:H.Ve},{type:"1f",name:"u120",value:1},{type:"3f",name:"u115",value:H.ik}]);if(M=H.Qd)C=H.Zm,E=H.Rd,D.j("s93",[{type:"4f",name:"u104",value:H.Pd},{type:"1f",name:"u107",value:H.Pf},{type:"2f",name:"u105",value:H.Ym},{type:"1f",name:"u109",value:Math.sign(E)}]);b.forEach(function(xa){xa.oj(H)});d=!0},cc:function(H){w&&ya.ja.cc(H);z&&ya.ta.cc(H)},zm:function(H,r){void 0!==ya.ja&&H.ic&&fa.ca()&&(ya.ja.m(H),I=!0,r.push(function(O){ya.ja.cc(O);w=!y}));void 0!==ya.ta&&H.pd&&(ya.ta.m(H),r.push(function(O){ya.ta.cc(O);
z=!0}));void 0!==ya.pc&&H.Le&&(ya.pc.m(H),h=g=!0);void 0!==ya.mb&&(ya.mb.m(H),x=ya.mb.Bm({width:H.Fc,height:2*H.Fc,depth:1.5*H.Fc,Gl:-H.yf,Va:H.wf,kl:H.xf}),q=!0)},so:function(H,r,O,Z){H&&(P=H,I&&ya.ja.dc(H),z&&ya.ta.dc(H),g&&ya.pc.dc(H),b.forEach(function(ma){ma.dc(H)}));O&&(V=O);Z&&(T=Z)},Db:function(H){fa.ca()?(D.j("s104NNGLcolor",H),D.j("s104NNGLtexture",H),D.j("s104NNGLtextureNormalMap",H),D.j("s104NNGLtextureParamsMap",H),D.j("s104NNGLtextureNormalParamsMap",H)):(D.j("s108",H),D.j("s109",H),
D.j("s110",H),D.j("s111",H),D.j("s112",H),D.j("s113",H),D.j("s114",H))},eb:function(H,r,O){var Z=[H[0]+r[0],H[1]+r[1],H[2]+r[2]];Z=[Z[0]+O[0],Z[1]+O[1],Z[2]+O[2]];a.ae=Z;a.gn=r;a.Uo=O;Qa.Db([{type:"3f",name:"u145",value:Z}]);fa.ca()&&(I&&ya.ja.eb(H,r,O),z&&ya.ta.eb(Z));q&&ya.mb.eb(H,O)},fb:function(H,r,O){var Z=H*r*O;a.hn=r;a.Vo=O;a.tm=H;Qa.Db([{type:"1f",name:"u146",value:Z}]);fa.ca()&&(I&&ya.ja.fb(H*r,O),z&&ya.ta.fb(Z));q&&ya.mb.fb(H,O)},ij:function(){Qa.eb(a.ae,a.gn,a.Uo);Qa.fb(a.tm,a.hn,a.Vo);
Qa.zj(a.rx);Qa.m(a.Eg);Qa.vj(a.Ok,a.Lb)},zj:function(H){a.rx=H;Qa.Db([{type:"1f",name:"u81",value:H}]);fa.ca()&&(I&&ya.ja.yg(H),z&&ya.ta.yg(H))},vj:function(H,r){a.Ok=H;a.Lb=r;Qa.Db([{type:"1f",name:"u147",value:H},{type:"1f",name:"u148",value:r}])},lo:function(H){m=H;0===f&&Qa.Db([{type:"1f",name:"u151",value:m[0]},{type:"1f",name:"u152",value:m[1]}])},cb:function(H){function r(){q&&ya.mb.toggle(!1);M&&D.j("s93",[{type:"1f",name:"u108",value:0}])}0>=H?(l=0,0!==f&&(f=0,Ub.On(),q&&ya.mb.toggle(!0),
M&&D.j("s93",[{type:"1f",name:"u108",value:1}]))):1<=H?(l=1,1!==f&&(f=1,Ub.Hj(!0)),r()):(l=H,2!==f&&(Ub.Hj(!1),f=2,r()));D.j("s95",[{type:"1f",name:"u120",value:1-H}]);var O=1-H;ka[0].value=l;ka[1].value=m[0]*O+-300*H;ka[2].value=m[1]*O+-300*H;ka[3].value=p*O+H*v;ka[4].value=G*O;ka[5].value=L*O;ka[6].value=O+H*k;w&&ya.ja.zg(l,ka);z&&ya.ta.zg(l,ka);Qa.Db(ka)},Dl:function(H){P.h(1);H.forEach(function(r){r.yl()});q&&x.V()},Sm:function(){return 1===f},Je:function(H){P.xa(H)},mk:function(H){b.push(H)},
Jg:function(H){y=!H;w=H&&I},Ig:function(H){h=H&&g},ug:function(H){z&&fa.ca()&&ya.ta.wo(H)},Eb:function(H){fa.ca()&&(I&&ya.ja.Eb(H),z&&ya.ta.Eb(H))},Al:function(H,r){if(!n)return!1;e.L();H.h(0);D.set("s86");D.O("u14",0,N);X.l(!1,!1);A.o();e.h(0);D.O("u14",F,0);X.l(!1,!1);D.set("s87");r.L();A.h(0);X.l(!1,!1);return!0},Gj:function(H){n=H&&B},resize:function(H,r,O){B&&(H*=O,r*=O,e.resize(H,r),A.resize(H,r),F=1/H,N=1/r)},sg:function(H,r){var O=H.P(),Z=H.Z(),ma={width:O,height:Z,isPot:!1};I&&(Q&&Q.remove(),
Q=aa.instance(ma));t&&t.remove();t=Ca.instance({width:O,height:Z});g||z?(ya.pc.tg(O,Z),u&&u.remove(),u=aa.instance(ma)):u=H;I&&ya.ja.tg(O,Z);r&&(ia&&ia.remove(),ia=aa.instance(ma))},wl:function(H){var r=null;switch(f){case 0:r=H;break;case 2:t.bind(!1,!0);ia.o();D.set("s76");D.C("u13",l);H.h(1);T.h(0);X.l(!0,!0);r=ia;break;case 1:r=T}if(!w||1===f||!fa.ca())return r;r.xa(0);h&&ya.pc.V(r,u);t.bind(!1,!h);z&&(h?r.h(0):(u.o(),D.set("s1"),X.l(!0,!0)),ya.ta.V());u.h(0);V.xa(2);ya.ja.V();Q.o();D.set("s1");
h||z?u.h(0):r.h(0);X.l(!0,!U.ga_);ya.ja.add();return Q},nk:function(H,r){if(!w)return H;V.xa(2);ya.ja.V();Ca.ba();D.set("s75");r.L();ya.ja.mm().h(0);X.l(!0,!0);D.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);H.h(0);X.l(!1,!1);c.disable(c.BLEND);return r},Bl:function(H,r){if(!M)return!1;D.set("s93");D.C("u106",H*E);C.h(1);Za.Je(2);u?u.h(3):r.h(3);return!0},A:function(){d=!1;l=f=0;v=p=-1;k=1;m=null;L=G=-1;q=!1;x=null;h=g=z=y=w=I=!1;ya.ja.A();ya.Ka.A()}};return Qa}(),Aa=function(){function a(){k.forEach(function(r){r.El(u)})}
function b(){k.forEach(function(r){r.td(u)})}function d(){k.forEach(function(r){r.Cl(u)})}function f(){k.forEach(function(r){r.ud(u)})}function l(){u?Za.Dl(k):k.forEach(function(r){r.zl()})}function p(){E&&clearTimeout(E);E=setTimeout(function(){e=!1;E=null},16)}function v(r){r()}var k=[],m=[],q={ia:!1,position:!1,zb:!1},x=[],I=[],w=null,y=0,z=null,g=null,h=null,G=null,L=!1,B=!1,n=!1,e=!1,A=!1,F=!1,N=null,C=null,E=null,M=null,t=!1,u=!1,Q=!1,V=!1,T=!0,ia=!1,P=!1,ka=null,Qa=null,H={m:function(){c.enable(c.DEPTH_TEST);
c.depthFunc(c.LEQUAL);c.clearDepth(1);U.il?(c.enable(c.CULL_FACE),c.frontFace("CCW"===U.jl?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);H.vh();var r={isPot:!1,isLinear:!1,width:fa.vb(),height:fa.ub(),K:4,isFloat:!1};z=aa.instance(r);r=Object.assign({},r,{isLinear:!0,width:fa.P(),height:fa.Z()});g=aa.instance(r);h=aa.instance(r);U.Qa&&(r=Object.assign({},r,{isLinear:!1}),G=aa.instance(r));F=Ha.ha();U.Qa||(w=lc.instance({Kb:U.Kb,vc:U.vc,wc:U.wc,uc:U.uc}));L=!0},vh:function(){fa.ca()?q=oc.instance({}):
(q.ia=Ib.instance({hc:U.Qa?!1:"s105",isFloat:!1,Ub:!0,clearColor:[0,0,0,0],K:4}),q.position=Ib.instance({hc:U.Qa?!1:"s115",isFloat:!0,Ub:!0,clearColor:[0,0,0,0],K:4}),q.zb=Ib.instance({hc:!1,isFloat:!0,Ub:!0,clearColor:[0,0,0,0],K:4}),q.Oc=Ib.instance({hc:!1,isFloat:!1,Ub:!0,clearColor:[0,0,0,0],K:4}))},bm:function(){return w},qa:function(r){w=r},Rq:function(){},Eb:function(r){Za.Eb(r)},oj:function(r){Za.m(r,x);fa.ca()||(q.ia.Aj(!1),q.position.Aj("s108"));u=V=!0},wq:function(){Za.ij()},np:function(r){Za.mk(r)},
Zn:function(r,O,Z){Za.eb(r,O,Z)},$n:function(r,O,Z){Za.fb(r,O,Z)},Xn:function(r,O){Za.vj(r,O)},Yn:function(r){Za.lo(r)},ao:function(r){Za.zj(r)},cb:function(r){Za.cb(r)},pj:function(r,O,Z,ma){Za.so(r,O,Z,ma);O&&H.sg(O,ma?!0:!1);Q=!0},Jg:function(r){Za.Jg(r)},ug:function(r){Za.ug(r)},Ig:function(r){Za.Ig(r)},Gj:function(r){Za.Gj(r)},op:function(r){t&&(P=!0,ka&&ka.remove(),ka=aa.instance({width:M.P(),height:M.Z(),isPot:!1}),Qa=r)},sg:function(r,O){M="string"===typeof r?aa.instance({url:r,isFloat:!1}):
r;u&&Za.sg(M,O);t=!0},lk:function(r){k.push(r);0!==x.length&&(x.forEach(function(O){O(r)}),x.splice(0,x.length))},Jn:function(r){r=k.indexOf(r);-1!==r&&k.splice(r,1)},pp:function(r){m.push(r)},tq:function(r){r=m.indexOf(r);-1!==r&&m.splice(r,1)},le:function(r){u&&(B=r)},animate:function(r){!U.Qa||u&&Q?B&&(e||y>U.jn&&A?(N&&clearTimeout(N),++y,window.cancelAnimationFrame(H.animate),N=setTimeout(function(){window.requestAnimationFrame(H.animate)},16)):(H.dj(r),++y,u||B&&window.requestAnimationFrame(H.animate))):
setTimeout(H.animate,100)},rp:function(r){I.push(r)},dj:function(r){if((!U.Qa||u&&Q)&&L){I.forEach(v);fa.ca()?q.set()||fa.na()?(u||Ec.Ln(),l(),q.M(),F&&c.depthMask(!1)):(fa.Ko(),H.vh(),Ib.fd(),D.no(),U.Qa&&Za.ij(),c.flush(),window.requestAnimationFrame(H.animate)):(u&&Za.Je(1),q.ia.set(!0,!0,!0),b(),q.ia.M(),F&&c.depthMask(!1),q.Oc.set(!1,!F,!1),d(),q.Oc.M(),q.position.set(!0,!F,!1),yb.V(),a(),q.position.M(),q.zb.set(!1,!F,!1),f(),q.zb.M());c.disable(c.DEPTH_TEST);F||c.depthMask(!1);U.ga_&&Jb.V();
var O=H.Rh();if(null!==O){O.h(7);D.set(U.ga_?"s94":"s95");D.O("u14",1/fa.vb(),1/fa.ub());Ib.Pk();z.L();ia?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),D.C("u125",1)):c.disable(c.BLEND);u||yb.df();q.position.h(0);q.zb.h(1);q.ia.h(2);w.jd(3);q.Oc.h(6);w.kd(4);w.zh();U.ga_&&Jb.h(5);X.l(!0,!0);ia&&D.C("u125",0);Ca.ba();if(ia){c.disable(c.BLEND);var Z=Za.nk(z,g);D.set("s83");h.L();Z.h(0);X.l(!1,!1);g.o();h.h(0);X.l(!1,!1);g.h(0)}else Za.Al(z,
g)||(D.set("s1"),g.L(),z.h(0),X.l(!1,!1)),T?(D.set("s82"),h.L(),g.h(0),X.l(!1,!1),g.o(),h.h(0),V&&u?(D.set("s81"),G.h(1),Za.Je(2),X.l(!1,!1),D.set("s1"),G.L(),g.h(0),X.l(!1,!1)):(D.set("s80"),X.l(!1,!1),g.h(0))):g.h(0);Ca.aa();c.viewport(0,0,fa.P(),fa.Z());!ia&&u&&Za.Bl(r,O)||D.set("s1");X.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Rh:function(){if(!t||ia)return aa.ei();if(!u)return M;if(P&&!Za.Sm()){D.set(Qa);Ca.ba();ka.Vc();ka.o();M.h(0);var r=ka;X.l(!0,!0)}else r=M;return Za.wl(r)},
Nq:function(){U.nl||B||(B=!0,H.animate(Date.now()),n||Ac.Fo(),n||Ub.ib(!1),C&&clearTimeout(C),U.ga_&&Jb.ee(),C=setTimeout(H.ua,U.Lk),n||fa.vm(),n=!0)},Oq:function(){B&&(A=B=!1,cancelAnimationFrame(H.animate))},ua:function(){A||!n||e||U.xh||(A=e=!0,C&&clearTimeout(C),E&&clearTimeout(E),yb.kf().fj(),C=setTimeout(function(){fa.Wg(U.pn);U.ga_&&Jb.Vj();y=0;p()},24))},wake:function(){A&&n&&!e&&(e=!0,A=!1,y=0,yb.kf().fj(),C&&clearTimeout(C),E&&clearTimeout(E),C=setTimeout(function(){fa.Wg(1);U.ga_&&Jb.ee();
p()},16))},aq:function(){},Hp:function(){},ke:function(r){V=r},Qq:function(r){T=r},Ij:function(r){ia=r},Vq:function(){D.j("s95",[{type:"1f",name:"u123",value:U.Qc},{type:"1f",name:"u124",value:U.ig}])},resize:function(r,O,Z){z.resize(r*Z,O*Z);g.resize(r,O);h.resize(r,O);U.Qa&&G.resize(r,O);Za.resize(r,O,Z);r=[{type:"2f",name:"u14",value:[1/r,1/O]}];D.j("s82",r);D.j("s80",r);D.j("s83",r)},I:function(){N&&clearTimeout(N);C&&clearTimeout(C);E&&clearTimeout(E);k.concat(m).forEach(function(r){r.I()});
k.splice(0,k.length);m.splice(0,m.length);q.ia.remove();q.zb.remove();q.Oc.remove();q.position.remove();z.remove();g.remove();h.remove();G&&G.remove();e=!0},A:function(){H.I();F=A=e=n=B=u=Q=e=!1}};return H}(),ya={},fa=function(){function a(){Ib.resize(d*m,f*m);z.ca()&&oc.resize(d*m,f*m);Aa.resize(d,f,m);U.ga_&&Jb.resize(d*m,f*m,m);z.Ug()}var b=null,d=0,f=0,l=-1,p=!1,v={oe:!1,Mg:!1,Sj:!1,Fg:!1,drawBuffers:!1,Mm:!1,vi:!1,Om:!1,Gf:!1,Za:!1},k=Object.assign({},v),m=1,q=!1,x=!1,I=!1,w=!1,y=!1,z={m:function(g){void 0!==
g.onload&&g.onload&&(x=g.onload);void 0===g.expand&&(g.expand=!1);void 0===g.Jd&&(g.Jd=!1);void 0===g.ra&&(g.ra=!1);void 0===g.Rb&&(g.Rb=!1);void 0===g.alpha&&(g.alpha=!1);void 0===g.preserveDrawingBuffer&&(g.preserveDrawingBuffer=!1);g.Jd&&(p=!0);b=g.ra?g.ra:document.getElementById(g.cl);g.expand&&z.expand();try{c=g.Rb?g.Rb.Ol():b.getContext("webgl",{antialias:!1,alpha:g.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:g.preserveDrawingBuffer});window.fk||(window.fk=c);w=g.Rb?
g.Rb.na():!1;I=!w;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&z.qd("too few texture image units");if(!Ha.m())return z.qd("invalid config");U.Ro&&(k.Mg=c.getExtension("EXT_texture_filter_anisotropic"),k.Mg&&(k.vi=!0));U.So&&(k.oe=c.getExtension("WEBGL_compressed_texture_s3tc"),k.oe&&void 0!==k.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&k.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(k.Mm=!0));I&&(k.Sj=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
k.Sj&&(k.Om=!0));!w&&U.To&&(k.Fg=c.getExtension("EXT_sRGB"),k.Fg&&(k.Gf=!0));I?(k.drawBuffers=c.getExtension("WEBGL_draw_buffers"),k.drawBuffers&&!U.wh&&(k.Za=!0)):k.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(k.Za){var h=z.pl();k.Za=k.Za&&h}}catch(G){return z.qd(G)}if(null===c||!c)return z.qd("NO_GL");g.expand&&window.addEventListener("resize",z.expand,!1);b.addEventListener("contextmenu",function(G){G.preventDefault();return!1},!1);d=b.width;f=b.height;z.Cf();return!0},Cf:function(){l=p?3:2;Ha.ha()||
(l=Math.min(l,1));Ha.Zk()||(l=Math.min(l,0));Mc.m();Ib.m();for(var g in ya)ya[g].Rc();D.m();yb.m();Ub.m();Aa.m();Ac.m();U.ga_&&Jb.m();z.Ug();z.rl();q=!0;x&&x();return!0},rl:function(){if(k.Za){var g=oc.instance({width:256,height:1});g.bind();c.viewport(0,0,256,1);D.set("s103");D.za("color",[1,0,0,1]);X.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Ca.aa();D.set("s1");g.zb.h(0);X.l(!1,!1);g=new Uint8Array(1024);c.readPixels(0,0,256,1,c.RGBA,c.UNSIGNED_BYTE,g);y=1>=
g[1020]}},pl:function(){var g=oc.instance({width:1,height:1});if(!g.set())return g.remove(),!1;D.qo(c);X.Pb(c);c.bindFramebuffer(c.FRAMEBUFFER,null);D.Cb(c);g.ia.xa(0);X.Pb(c);var h=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);g.remove();return 3<Math.abs(h[0]-127)?!1:!0},na:function(){return w},P:function(){return d},Z:function(){return f},vb:function(){return m*z.P()},ub:function(){return m*z.Z()},Pl:function(){return d/f},W:function(){return l},iq:function(){return 3===l},yb:function(){return q},
yi:function(){return y},ca:function(){return k.Za},Ko:function(){k.Za=!1},lq:function(){return!1},al:function(){return 0<z.W()},xp:function(){return z.ca()&&0<z.W()},jf:function(g){var h=c,G="";w||(h=k.drawBuffers,G="_WEBGL");return[h["COLOR_ATTACHMENT0"+G],h["COLOR_ATTACHMENT1"+G],h["COLOR_ATTACHMENT2"+G],h["COLOR_ATTACHMENT3"+G]].splice(0,g)},Ad:function(g){return z.jf(4)[g]},qm:function(){return w?c.SRGB?c.SRGB:c.RGBA:k.Gf?k.Fg.SRGB_ALPHA_EXT:c.RGBA},Pm:function(){return k.vi},Ul:function(){return k.Mg},
bn:function(g){z.na()?c.drawBuffers(z.jf(g)):k.drawBuffers.drawBuffersWEBGL(z.jf(g))},expand:function(){Aa.wake();z.resize(window.innerWidth,window.innerHeight);Aa.ua()},resize:function(g,h){!b||g===d&&h===f||(d=g,f=h,b.width=d,b.height=f,q&&(yb.resize(),a()))},Ug:function(){var g=[{type:"2f",name:"u14",value:[1/fa.vb(),1/fa.ub()]}];D.j("s82",g);D.j("s80",g)},Wg:function(g){m=g;a()},La:function(g,h){b.addEventListener(g,h,!1)},qd:function(){l=-1;return!1},qh:function(){return 0<=l},oq:function(){},
xq:function(){},Lq:function(){var g=document.getElementById("loading");g&&(g.style.display="block")},vm:function(){var g=document.getElementById("loading");g&&(g.style.display="none")},I:function(){z.qh()&&(aa.Tj(),Aa.I(),X.I(),Ib.I(),U.ga_&&Jb.I(),lc.I(),Ac.I(),D.I(),aa.I(),c.flush(),c=null)},A:function(){Aa.A();Za.A();D.A();oc.A();Ib.A();Object.assign(k,v);q=I=!1}};return z}(),yb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(f){void 0===f.gj&&(f.gj=!0);void 0===f.Ce&&(f.Ce=
.1);void 0===f.Be&&(f.Be=100);void 0===f.direction&&(f.direction=[0,0,-1]);void 0===f.Qb&&(f.Qb=45);var l=new ec,p=new Xa(50,-50,-400),v=null;l.setPosition(p);var k=new Int8Array(20),m=new Int8Array(20),q=0,x=0,I=0,w=0,y={V:function(){m[D.Bd()]||(D.Uc("u126",l.elements),m[D.Bd()]=1);k[D.Bd()]||(D.Uc("u138",v),k[D.Bd()]=1)},cf:function(){x||(D.Uc("u126",l.elements),x=1);q||(D.O("u127",v[0],v[5]),q=1)},df:function(){I||(D.Bg("u115",p.x,p.y,p.z),I=1)},Mb:function(){w||(D.Bg("u156",p.x,p.y,p.z),w=1)},
sh:function(){var z=f.Ce,g=f.Be,h=Math.tan(.5*f.Qb*Math.PI/180);v=[.5/h,0,0,0,0,.5*fa.Pl()/h,0,0,0,0,-(g+z)/(g-z),-1,0,0,-2*g*z/(g-z),0];for(z=0;20>z;++z)k[z]=0;q=0},mo:function(z,g){p.mj(g[0]).nj(g[1]).z=g[2];l.elements.set(z);for(z=0;20>z;++z)m[z]=0;w=I=x=0},fj:function(){for(var z=w=I=0;20>z;++z)m[z]=0}};y.sh();a=y;b=!0;f.gj&&d.push(y);return y},V:function(){b&&a.V()},cf:function(){b&&a.cf()},df:function(){b&&a.df()},Mb:function(){b&&a.Mb()},resize:function(){d.forEach(function(f){f.sh()})},kf:function(){return a}}}(),
Ib=function(){var a=[],b=null;return{m:function(){b=Ca.instance({width:fa.vb(),height:fa.ub(),Gc:!fa.ca()})},instance:function(d){void 0===d.width&&(d.width=fa.vb());void 0===d.height&&(d.height=fa.ub());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Ub&&(d.Ub=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.K&&(d.K=4);var f=aa.instance({isFloat:d.isFloat&&Ha.ha(),U:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,K:d.K}),l=void 0!==d.hc&&d.hc?!0:!1,p=d.hc,v={set:function(k,
m,q){q&&b.bind(!1,q);f.o();k&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Qe());m&&b.rh();l&&D.set(p)},Aj:function(k){l=(p=k)?!0:!1},M:function(){f.qe()},h:function(k){f.h(k)},resize:function(k,m){f.resize(k,m)},debug:function(){f.debug()},remove:function(){f.remove()}};d.Ub&&a.push(v);return v},resize:function(d,f){b.resize(d,f);a.forEach(function(l){l.resize(d,f)})},Pk:function(){b.kh()},fd:function(){b.fd()},Vc:function(){b.Vc()},Ap:function(){b.rh()},zp:function(){b.Qe()},
yp:function(){b.clear()},I:function(){b.remove()},A:function(){b.remove();a.forEach(function(d){d.remove()});a.splice(0)}}}(),oc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=fa.vb());void 0===b.height&&(b.height=fa.ub());var d=c.createFramebuffer(),f=b.width,l=b.height,p=!0;b={isFloat:Ha.ha(),U:!0,width:f,height:l,isPot:!1,isLinear:!1,K:4};var v=aa.instance(b),k=aa.instance(b),m=aa.instance(b),q=aa.instance(b),x=Ca.Vl(),I=Ca.Wh();c.bindFramebuffer(x,d);var w=c.createRenderbuffer();
c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,l);c.framebufferRenderbuffer(x,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,w);c.clearDepth(1);c.framebufferTexture2D(x,fa.Ad(0),c.TEXTURE_2D,v.get(),0);c.framebufferTexture2D(x,fa.Ad(1),c.TEXTURE_2D,k.get(),0);c.framebufferTexture2D(x,fa.Ad(2),c.TEXTURE_2D,q.get(),0);c.framebufferTexture2D(x,fa.Ad(3),c.TEXTURE_2D,m.get(),0);fa.bn(4);c.bindFramebuffer(x,null);Ca.reset();var y={position:v,zb:k,Oc:m,ia:q,bind:function(){c.bindFramebuffer(x,
d);Ca.reset()},set:function(){p&&c.checkFramebufferStatus(I);c.bindFramebuffer(x,d);Ca.reset();if(p){if(c.checkFramebufferStatus(I)!==c.FRAMEBUFFER_COMPLETE)return!1;p=!1}c.viewport(0,0,f,l);c.clearColor(0,0,0,0);D.yb()&&!fa.yi()&&(D.set("s102"),X.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},M:function(){},resize:function(z,g){f=z;l=g;v.resize(z,g);k.resize(z,g);q.resize(z,g);m.resize(z,g);c.bindRenderbuffer(c.RENDERBUFFER,w);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
f,l);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){v.remove();k.remove();q.remove();m.remove();c.deleteRenderbuffer(w);c.deleteFramebuffer(d);var z=a.indexOf(y);-1!==z&&a.splice(z,1)}};a.push(y);return y},resize:function(b,d){a.forEach(function(f){f.resize(b,d)})},A:function(){a.forEach(function(b){b.remove()});a.splice(0)}}}(),lc=function(){var a=[],b=U.jh;return{instance:function(d){function f(){m?l():(h=Hd.instance({$:I,Lm:b}),k=U.Mk[fa.W()],w=aa.instance({isFloat:Ha.ha(),U:!0,isPot:!0,
isLinear:!1,isMirrorY:!0,width:k,height:k/2,K:3}),y=aa.instance({isFloat:Ha.ha(),U:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:k,height:k/2,K:3}),z=aa.instance({isFloat:Ha.ha(),U:!0,isPot:!0,width:1,height:k/2,K:3}),g=aa.instance({isFloat:Ha.ha()&&!b,U:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:k,height:k/2,K:b?4:3}),m=!0,l(),L.forEach(function(B){B()}),L.splice(0,L.length))}function l(){if(m){Ca.ba();h.fo(I);h.Hn();w.L();D.set("s85");I.h(0);D.C("u93",U.Qc);aa.Uk(1);X.l(!0,!0);for(var B=
U.Cm[fa.W()],n=0;n<B;++n)y.o(),D.set("s88"),D.O("u14",1/k,0),w.h(0),X.l(!1,!1),w.o(),D.O("u14",0,2/k),y.h(0),X.l(!1,!1);z.L();D.set("s90");w.h(0);X.l(!1,!1);D.set(b?"s92":"s91");g.L();w.h(0);z.h(1);X.l(!1,!1);aa.aa(0);aa.aa(1)}}var p=Object.assign({Kb:null,vc:null,uc:0,wc:0},d),v=0,k=0,m=!1,q=null,x=null,I=null,w=null,y=null,z=null,g=null,h=null,G=0,L=[];d={m:function(){function B(){2===++n&&(I=aa.instance({isFloat:Ha.ha(),U:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:v,height:v/2,K:3}),
Ca.ba(),I.L(),D.set("s84"),D.C("u98",p.wc),D.C("u99",p.uc),q.h(0),x.h(1),X.l(!0,!0),f())}var n=0;v=U.Nk[fa.W()];G=Math.log2(v)-1;p.Kb&&(q=aa.instance({isPot:!1,url:p.Kb,D:B,K:3,isFlipY:!1}),x=aa.instance({isPot:!1,url:p.vc,D:B,K:3,isFlipY:!1}))},vg:function(B){I=B;f()},jd:function(B){m&&(h.h(B),D.C("u116",h.P()))},kd:function(B){m&&g.h(B)},zh:function(){D.C("u3",G)},Sh:function(){return G},P:function(){return v},yc:function(B){m?B():L.push(B)},I:function(){q&&q.remove();x&&x.remove();w.remove();z.remove();
y.remove();h.remove();g.remove();I.remove()}};a.push(d);d.m();return d},I:function(){a.forEach(function(d){d.I()})}}}(),od={instance:function(a){var b=a.Wm,d=a.Um,f=0,l=b.P();a=U.jh;var p=aa.instance({isFloat:Ha.ha()&&!a,U:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:l,K:a?4:3,isFlipY:!1}),v=aa.instance({isFloat:Ha.ha()&&!a,U:!a,isPot:!1,isLinear:!0,eq:!0,isMipmap:!1,width:l,height:l/2,K:a?4:3}),k=Ca.instance({width:l,height:l}),m=a?"s77":"s76";return{ro:function(q){f=q;D.set(m);c.viewport(0,0,l,l);
k.o();p.o();D.C("u13",f);b.jd(1);d.jd(0);X.l(!0,!0);c.viewport(0,0,l,l/2);v.o();b.kd(1);d.kd(0);X.l(!1,!1);c.flush()},jd:function(q){p.h(q)},kd:function(q){v.h(q)},zh:function(){D.C("u3",b.Sh()*(1-f)+d.Sh()*f)}}}},Ub=function(){function a(M){var t=(e-U.Oe)/(U.nh-U.Oe);t=1-Math.pow(1-t,U.jp);e+=M*(1+t*U.kp);e=Math.min(Math.max(e,U.Oe),U.nh);E.ib()}function b(M){-1!==k&&(G=h=0,v(),a(U.ip*M.deltaY/window.innerHeight),M.preventDefault())}function d(){B+=h;n+=G;n=Math.min(Math.max(n,U.tn),U.sn);E.ib()}
function f(M){if(0===k||-1===k)return!1;var t=void 0!==M.touches&&M.touches.length;M.preventDefault();if(2===k){var u=cd(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY);a(-(z-u)*U.un);z=u}else u=t?M.touches[0].clientX:M.clientX,M=t?M.touches[0].clientY:M.clientY,h=2*(u-w)*Math.PI/fa.P(),G=2*(M-y)*Math.PI/fa.Z(),4===k?(C[0]+=h*U.Ti,C[1]-=G*U.Ti,C[0]=Math.min(Math.max(C[0],-U.Wi),U.Wi),C[1]=Math.min(Math.max(C[1],-U.Xi),U.Xi),E.ib()):d(),w=u,y=M}function l(){0!==k&&-1!==
k&&(0===h&&0===G||1!==k||!F?Aa.ua():(v(),g=Date.now(),A=setInterval(E.Tm,L)),k=0)}function p(M){if(2!==k&&-1!==k){G=h=0;v();Aa.wake();var t=void 0!==M.changedTouches&&M.touches.length;M.preventDefault();t&&2===M.touches.length?(k=2,z=cd(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY)):(k=t||2!==M.button?1:4,w=t?M.touches[0].clientX:M.clientX,y=t?M.touches[0].clientY:M.clientY);return!1}}function v(){A&&(clearInterval(A),A=!1)}var k=0,m=!1,q=!1,x=!1,I=1,w=0,y=0,z=0,g=0,
h=0,G=0,L=16,B=U.Nj,n=U.Vi,e=U.Ne,A=!1,F=0,N=new Float32Array([0,0,0,0,0]),C=[U.Xk,U.Yk],E={m:function(){F=U.qk[fa.W()];L=U.vd[fa.W()];fa.La("mousedown",p);fa.La("mouseup",l);fa.La("mouseout",l);fa.La("mousemove",f);fa.La("mousemove",f);fa.La("wheel",b);fa.La("touchstart",p);fa.La("touchend",l);fa.La("touchmove",f)},ib:function(M){m?(q[0]=-n,q[1]=B,x[1].value=I/U.Ne*e,Za.Db(x)):(N[0]=B,N[1]=n,N[2]=e,N[3]=C[0],N[4]=C[1],Ac.Vn(N,M))},Tm:function(){if(1E-4>h&&1E-4>G||-1===k)v(),G=h=0,0===k&&Aa.ua();
var M=Date.now(),t=M-g;g=M;M=Math.pow(F,t/L);h*=M;G*=M;d()},ef:function(M){m||(m=!0,k=-1,q=[0,0,0],x=[{name:"u84",type:"3f",value:q},{name:"u88",type:"1f",value:1}],I=M)},Hj:function(M){-1===k&&M&&(k=0);M||(k=-1)},On:function(){G=h=0;B=U.Nj;n=U.Vi;e=U.Ne;E.ib()},Cq:function(M){e=M},Dq:function(M){C[0]=M[0];C[1]=M[1];U.oh=M[2]},Bq:function(M,t){B=M;n=t}};return E}(),Ec=function(){var a={s104:!1,s104color:!1,s104NormalMap:!1,s104ParamsMap:!1,s104NormalParamsMap:!1};return{instance:function(b){function d(r){if(!H)return Promise.reject("REMOVED");
y.md&&y.md(r);M=r.partsNames||[];E.splice(0);E.push({n:0,offset:0});F.min.set(Infinity,Infinity,Infinity);F.max.set(-Infinity,-Infinity,-Infinity);var O=r.uvs;O&&(O=O.filter(function(Ta){return Ta}));P=O&&0<O.length&&0<O[0].length?!0:!1;var Z=r.normals&&r.normals.length?!0:!1;"undefined"!==typeof Zb&&"string"===typeof r.faces&&(r.faces=Zb(r.faces));"undefined"!==typeof Lb&&("string"===typeof r.vertices&&(r.vertices=Lb(r.vertices)),Z&&"string"===typeof r.normals&&(r.normals=Lb(r.normals)),O&&O.length&&
O.forEach(function(Ta,Pa){"string"===typeof Ta&&(O[Pa]=Lb(Ta))}));var ma=r.metadata.faces,na=1+(P?1:0);ma=(r.faces.length-ma)/(r.metadata.faces*na);6!==ma&&8!==ma||P||(++na,ma/=2);if(4===ma){ma=6*na+2;for(var xa=4*na+1,qa=Array(r.metadata.faces*ma),ca=0;ca<r.metadata.faces;++ca)for(var la=0;la<na;++la)qa[ca*ma+4*la]=r.faces[ca*xa+5*la],qa[ca*ma+4*la+1]=r.faces[ca*xa+5*la+1],qa[ca*ma+4*la+2]=r.faces[ca*xa+5*la+2],0===la&&(qa[ca*ma+3]=r.faces[ca*xa+4]),qa[ca*ma+4*la+3*na+1]=r.faces[ca*xa+5*la],qa[ca*
ma+4*la+3*na+2]=r.faces[ca*xa+5*la+2],qa[ca*ma+4*la+3*na+3]=r.faces[ca*xa+5*la+3],0===la&&(qa[ca*ma+3*na+4]=r.faces[ca*xa+4]);r.faces=qa;r.metadata.faces*=2}ma=r.metadata.vertices;z=Array(ma);for(xa=0;xa<ma;++xa)z[xa]=new Xa(r.vertices[3*xa],r.vertices[3*xa+1],r.vertices[3*xa+2]),sd(F,z[xa]);ma=r.metadata.faces;g=Array(ma);na=3*na+1;for(xa=0;xa<ma;++xa)g[xa]=new Ic(r.faces[na*xa],r.faces[na*xa+1],r.faces[na*xa+2]),g[xa].Zb=r.faces[na*xa+3];if(Z)for(Z=r.metadata.normals,h=Array(Z),na=0;na<Z;++na)h[na]=
new Xa(r.normals[3*na],r.normals[3*na+1],r.normals[3*na+2]);else vd(z,g),h=wd(z,g);u=3<z.length;H&&(H.visible=u);if(P){Z=Array(z.length);na=["a","b","c"];for(ma=0;ma<r.metadata.faces;++ma)for(xa=0;3>xa;++xa)if(qa=r.faces[7*ma+xa],ca=r.faces[7*ma+1+xa+3],"undefined"===typeof Z[qa])Z[qa]=[[qa,ca]];else if(Z[qa][0][1]!==ca){la=-1;for(var W=1;W<Z[qa].length;++W)if(Z[qa][W][1]===ca){la=Z[qa][W][0];break}W=-1;-1===la?(W=z.length,z.push(z[qa].clone()),h.push(h[qa].clone()),Z[qa].push([W,ca]),Z[W]=[[W,ca]]):
W=la;r.faces[7*ma+xa]=W;g[ma][na[xa]]=W}G=Array(z.length);for(r=0;r<z.length;++r)na="undefined"===typeof Z[r]?r:Z[r][0][1],G[r]=new cc(O[0][2*na],O[0][2*na+1])}var sa=zc(F);y.hh&&(z.forEach(function(Ta){Ta.x-=sa.x;Ta.z-=sa.z;Ta.y-=F.min.y}),F.min.x-=sa.x,F.max.x-=sa.x,F.min.z-=sa.z,F.max.z-=sa.z,F.max.y-=F.min.y,F.min.y=0);if(y.ih){var Ia=U.Kk/Math.max(F.max.x-F.min.x,F.max.y-F.min.y,F.max.z-F.min.z);z.forEach(function(Ta){Ta.Ea(Ia)});F.min.Ea(Ia);F.max.Ea(Ia)}r=P?8:6;Z=new Float32Array(z.length*
r);for(na=0;na<z.length;++na)Z[r*na]=z[na].x,Z[r*na+1]=z[na].y,Z[r*na+2]=z[na].z,Z[r*na+3]=h[na].x,Z[r*na+4]=h[na].y,Z[r*na+5]=h[na].z,P&&(Z[r*na+6]=G[na].x,Z[r*na+7]=G[na].y);g.sort(function(Ta,Pa){return Ta.Zb-Pa.Zb});var wa=new (65536>3*g.length?Uint16Array:Uint32Array)(3*g.length),gb=0;g.forEach(function(Ta,Pa){Ta.Zb===gb?E[gb].n+=3:(E.push({n:3,offset:3*Pa}),++gb);wa[3*Pa]=Ta.a;wa[3*Pa+1]=Ta.b;wa[3*Pa+2]=Ta.c});L&&L.remove();L=X.instance({ka:Z,indices:wa});e=n=!1;ia&&H.th();Q=!0;H.bf();return Promise.resolve()}
function f(r){L.Ma(r.n,r.offset)}function l(r,O){T[O]&&(D.set(T[O].km()),L.bind(!1),P?(D.Ra(),D.tj()):(D.bb(),D.uj()),T[O].Lc()&&(D.Tc(),n.xc(!1),D.de(),yb.Mb()),T[O].ul(),T[O].ud(),L.Ma(r.n,r.offset))}function p(r,O){T[O]&&(D.set(T[O].lm()),L.bind(!1),P?(D.Ra(),D.tj()):(D.bb(),D.uj()),T[O].Lc()&&(D.Tc(),n.xc(!1),D.de(),yb.Mb()),H.Cc(),T[O].ud(),L.Ma(r.n,r.offset))}function v(r,O){ka&&T[O]&&(T[O].vl(),L.Ma(r.n,r.offset))}function k(r,O){ka&&T[O]&&(T[O].xl(P),L.Ma(r.n,r.offset))}function m(r,O){T[O]&&
(D.set(T[O].gm()),T[O].Eh(),L.Ma(r.n,r.offset))}function q(r,O){T[O]&&(D.set(T[O].hm()),H.Cc(),T[O].Eh(),L.Ma(r.n,r.offset))}function x(r,O){T[O]&&(D.set(T[O].im()),T[O].Lc()&&(n.xc(!1),D.de(),yb.Mb()),L.bind(!1),T[O].Bh(P),L.Ma(r.n,r.offset))}function I(r,O){if(T[O]){var Z=T[O].jm();D.set(Z);T[O].Lc()&&(n.xc(!1),D.de(),yb.Mb(),L.bind(!1));a[Z]||(H.Cc(),L.bind(!1),a[Z]=!0);T[O].Bh(P);L.Ma(r.n,r.offset)}}function w(r,O){return new Promise(function(Z,ma){r?(r.D=function(na){na?(T[O]&&T[O].I(),T[O]=
na,ia=ia||na.Lc(),Z()):ma()},Mc.instance(r)):ma()})}if(!fa.qh())return!1;var y=Object.assign({hh:!1,ih:!1,$b:null,url:"",D:null,md:null,Me:null},b),z=null,g=null,h=null,G=null,L=null,B=null,n=null,e=!1,A=new ec,F=new Hc,N=[],C=null,E=[{n:0,offset:0}],M=[],t=[],u=!1,Q=!1,V=[],T=[],ia=!1,P=!1,ka=!1,Qa=!1,H={visible:u,hl:function(){return E.length},rf:function(){return M},th:function(){!e&&P&&(g=g.filter(function(r){return null!==r}),B=xd(z,h,G,g),n=X.instance({ka:B,indices:!1}),G=h=g=z=B=null,e=!0)},
Cc:function(){yb.V();H.Dh()},Dh:function(){D.Uc("u139",A.elements)},Ip:function(){u&&(H.Dh(),L.bind(!1),P?D.Ra():D.bb(),L.V())},El:function(r){u&&(r||H.Cc(),L.bind(!1),P?D.Ra():D.bb(),L.V())},Fl:function(){u&&(L.bind(!1),P?D.Ra():D.bb(),E.forEach(v))},Ah:function(){u&&(L.bind(!1),P?D.Ra():D.bb(),t.forEach(f))},Cl:function(r){ka&&u&&(L.bind(!1),P?D.Ra():D.bb(),r?E.forEach(m):E.forEach(q))},td:function(r){u&&(r||H.Cc(),L.bind(!1),r||(D.Ra(),D.Tc()),ka&&E.forEach(k))},ud:function(r){ka&&u&&(r?E.forEach(l):
E.forEach(p))},zl:function(){ka&&u&&E.forEach(I)},yl:function(){ka&&u&&E.forEach(x)},ci:function(){return C},ai:function(){return V},Wj:function(r,O,Z){r=T[r];if(!r)return!1;r.update(O,Z);H.Yj();return!0},$h:function(){return new Promise(function(r){H.yc(function(){r(T.map(function(O){return O.pm()}))})})},wg:function(r,O){V=r;ka=!1;Qa=!0;T.forEach(function(Z){Z.I()});T=Array(r.length);ia=!1;r=r.map(function(Z,ma){return"string"===typeof Z?ud(-1===Z.indexOf(".json")?Z+".json":Z).then(function(na){na.name=
Z;return w(na,ma,Z)}):w(Z,ma,!1)});Promise.all(r).then(function(){H&&(ka=!0,Qa=!1,H.yc(function(){ia&&H.th();H.Yj();Aa.Eb(H);Aa.le(!0);O&&O(H)},4),H.bf())})},Yj:function(){t.splice(0);E.forEach(function(r,O){T[O]&&T[O].Rm()&&t.push(r)})},yc:function(r,O){Q&&ka&&!Qa?r(H):N.push({sb:r,order:O?O:0})},bf:function(){Q&&ka&&!Qa&&(N.sort(function(r,O){return 0>r.order-O.order?1:-1}),N.forEach(function(r){r.sb(H)}),N.splice(0))},remove:function(){H.I();H=null},I:function(){u=Q=!1;L&&L.remove();T.forEach(function(r){r.I()});
e&&n.remove();E.splice(0)},nm:function(){return F.size().x},om:function(){return F.size().y},Zp:function(){return F.size().z},Rl:function(){return zc(F).x},Sl:function(){return zc(F).y},Op:function(){return zc(F).z},Vp:function(){return F.min.y},replace:function(r,O,Z){if(r===C)return O&&H&&(H.bf(),O(H)),!1;C=r;Aa.le(!1);Jc(r,function(ma){d(ma).then(function(){O&&O(H)}).catch(function(na){Z&&Z(na)})},Z);return!0}};y.$b&&H.wg(y.$b,y.Me);C=y.url;Jc(y.url,function(r){d(r).then(function(){y.D&&y.D(H)})});
return H},Ln:function(){a.s104=!1;a.s104color=!1;a.s104NormalMap=!1;a.s104ParamsMap=!1;a.s104NormalParamsMap=!1}}}(),Ac=function(){var a=null,b=!1,d=!1,f=null,l=new Float32Array(16),p=new Float32Array(3),v={data:0},k={m:function(){a=U.Nb?new Worker("js/worker.php"):{postMessage:function(m){v.data=m;Nc.nn(v)},terminate:function(){}};a.onmessage=function(m){switch(m.data[0]){case 3:for(var q=0;16>q;++q)l[q]=m.data[q+1];for(q=0;3>q;++q)p[q]=m.data[q+17];yb.kf().mo(l,p);break;case 6:k.ho(),b=!0,Ub.ib(!1),
U.ga_&&(Jb.enable(),Jb.ee())}};f=new Float32Array(6);f[0]=2;U.Nb||Nc.jo(a)},Fo:function(){U.yh||(d=!0)},Pq:function(){d=!1},Vn:function(m,q){if(q||b&&d)f[1]=m[0],f[2]=m[1],f[3]=m[2],f[4]=m[3],f[5]=m[4],a.postMessage(f)},ho:function(){a.postMessage([5,U.oh])},I:function(){U.Nb&&a.terminate()}};return k}(),Nc=function(){var a=0,b=0,d=0,f=[0,0],l=new ec,p=new yc,v=new yc,k=new Xa,m=new Xa,q=new dc,x=0,I=new Float32Array(20);I[0]=3;var w=null,y={data:!1},z={m:function(){"undefined"===typeof U&&(self.lp=
{Nb:!0});U.Nb&&z.jg([6])},nn:function(g){switch(g.data[0]){case 2:z.xg(g.data);break;case 5:x=g.data[1]}},jg:function(g){U.Nb?postMessage(g):(y.data=g,w.onmessage(y))},xg:function(g){a=g[1];b=g[2];d=g[3];f[0]=g[4];f[1]=g[5];k.set(f[0],f[1],-d);q.set(b,a,0,"XYZ");if(!1===q instanceof dc)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");g=Math.cos(q.F/2);var h=Math.cos(q.G/2),G=Math.cos(q.H/2),L=Math.sin(q.F/2),B=Math.sin(q.G/2),n=Math.sin(q.H/
2),e=q.order;"XYZ"===e?(p.F=L*h*G+g*B*n,p.G=g*B*G-L*h*n,p.H=g*h*n+L*B*G,p.T=g*h*G-L*B*n):"YXZ"===e?(p.F=L*h*G+g*B*n,p.G=g*B*G-L*h*n,p.H=g*h*n-L*B*G,p.T=g*h*G+L*B*n):"ZXY"===e?(p.F=L*h*G-g*B*n,p.G=g*B*G+L*h*n,p.H=g*h*n+L*B*G,p.T=g*h*G-L*B*n):"ZYX"===e?(p.F=L*h*G-g*B*n,p.G=g*B*G+L*h*n,p.H=g*h*n-L*B*G,p.T=g*h*G+L*B*n):"YZX"===e?(p.F=L*h*G+g*B*n,p.G=g*B*G+L*h*n,p.H=g*h*n-L*B*G,p.T=g*h*G-L*B*n):"XZY"===e&&(p.F=L*h*G-g*B*n,p.G=g*B*G-L*h*n,p.H=g*h*n+L*B*G,p.T=g*h*G+L*B*n);k.y-=x;g=l.elements;n=p.x;var A=
p.y,F=p.z;L=p.w;var N=n+n,C=A+A;B=F+F;h=n*N;G=n*C;n*=B;e=A*C;A*=B;F*=B;N*=L;C*=L;L*=B;g[0]=1-(e+F);g[4]=G-L;g[8]=n+C;g[1]=G+L;g[5]=1-(h+F);g[9]=A-N;g[2]=n-C;g[6]=A+N;g[10]=1-(h+e);g[3]=0;g[7]=0;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;l.setPosition(k);v.N(p).inverse();g=m.N(k);A=g.x;N=g.y;F=g.z;h=v.x;G=v.y;L=v.z;B=v.w;n=B*A+G*F-L*N;e=B*N+L*A-h*F;C=B*F+h*N-G*A;A=-h*A-G*N-L*F;g.x=n*B+A*-h+e*-L-C*-G;g.y=e*B+A*-G+C*-h-n*-L;g.z=C*B+A*-L+n*-G-e*-h;for(g=1;17>g;++g)I[g]=l.elements[g-1];I[17]=m.x;I[18]=m.y;
I[19]=m.z;z.jg(I)},jo:function(g){w=g;z.jg([6])}};return z}();Nc.m();var Mc=function(){function a(v){var k=v.split(":").shift();return"data"===k||"blob"===k?v:("undefined"!==typeof J&&J.da?J:U).da+U.Li+v}function b(v,k){return Math.min(k+v+k*v,1)}var d=!1,f=null,l=1,p={diffuseTexture:null,normalTexture:null,paramsTexture:null,isDisableColorTexture:!1,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],alphaUsage:0,
D:null};return{m:function(){f=aa.instance({width:1,height:1,isMipmap:!1,K:4,array:new Uint8Array([255,255,255,255]),Gf:!1})},ef:function(){d=!0;l=2},instance:function(v){function k(){"number"===typeof h.alpha?(z[0]=h.alpha,z[1]=0,z[2]=0,z[3]=0):(z[0]=h.alpha[0],z[1]=h.alpha[1]-h.alpha[0],z[2]=h.alpha[2],z[3]=h.alpha[3]);var u=1<=h.fresnelPow?h.fresnelMin:h.fresnelMax;g[0]=b(z[0],u);g[1]=b(z[1],u);g[2]=z[2];g[3]=z[3];e={Ui:h.fresnelMax,Hi:[h.fresnelMin,h.roughness,h.fresnelPow/15,h.metalness],Ki:h.paramsMapMask};
G=[h.diffuseColor[0]/255,h.diffuseColor[1]/255,h.diffuseColor[2]/255]}function m(){return new Promise(function(u){(w=h.normalTexture&&fa.al()?!0:!1)&&!B.Fa?B.Fa=aa.instance({url:a(h.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,K:3,D:u}):u()})}function q(){return new Promise(function(u){(y=h.diffuseTexture&&""!==h.diffuseTexture?!0:!1)&&!B.ia?(B.ia=aa.instance({url:a(h.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,
K:4,D:u}),L="s109"):(B.ia||(L="s110",B.ia=f),u())})}function x(){return new Promise(function(u){(n=h.paramsTexture?!0:!1)&&!B.$a?h.paramsTexture===h.diffuseTexture?(B.$a=B.ia,u()):B.$a=aa.instance({url:a(h.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,K:4,D:u}):u()})}function I(u,Q){k();Promise.all([m(),q(),x()]).then(function(){w||n||y?w||n?w&&!n?(A="s104NormalMap",F="s104NNGLtextureNormalMap"):!w&&n?(A="s104ParamsMap",F="s104NNGLtextureParamsMap"):
(A="s104NormalParamsMap",F="s104NNGLtextureNormalParamsMap"):(A="s104",F="s104NNGLtexture"):(A="s104color",F="s104NNGLcolor");N=w?"s112":"s111";C=w?"s106":"s116";E=n?"s114":"s113";M=n?"s107":"s117";Q&&h.D&&setTimeout(h.D.bind(null,u),1)})}var w,y,z=[1,0,0,0],g=[0,0,0,0],h=Object.assign({},p,v),G=null,L=null,B={ia:null,Fa:null,$a:null},n=w=y=!1,e=null,A=null,F=null,N=null,C=null,E=null,M=null,t={update:function(u,Q){void 0===Q&&(Q=!0);Object.assign(h,u);Q?(t.I(),I(t,!1)):k()},Lc:function(){return w},
Rm:function(){return.99>z[0]},pm:function(){return h},lm:function(){return C},km:function(){return N},hm:function(){return M},gm:function(){return E},jm:function(){return A},im:function(){return F},ud:function(){w&&B.Fa.h(0)},xl:function(u){d&&D.set(L);u?D.Ra():D.bb();y&&D.Tc();t.td()},td:function(){y&&(D.C("u74",h.alphaUsage),D.C("u73",h.colorTextureUsage),(h.isDisableColorTexture?f:B.ia).h(0));D.Cg("u149",G)},Eh:function(){n&&(B.$a.h(0),D.za("u76",e.Ki),D.Tc());D.za("u113",e.Hi);D.C("u150",e.Ui)},
Bh:function(u){n&&!w?B.$a.h(l):w&&(y||f.h(0),B.Fa.h(l),n&&B.$a.h(l+1));n&&D.za("u76",e.Ki);y||w?D.bo():u?D.co():D.eo();t.td();D.za("u13",z);D.za("u113",e.Hi);D.C("u150",e.Ui)},ul:function(){D.za("u13",z)},vl:function(){D.za("u13",g)},I:function(){y&&B.ia.remove();w&&B.Fa.remove();n&&h.paramsTexture!==h.diffuseTexture&&B.$a.remove();Object.assign(B,{ia:null,Fa:null,$a:null})}};I(t,!0);return t}}}(),Jb=function(){var a=0,b=0,d=0,f=0,l=0,p=0,v=U.Ik,k=U.Hk,m=U.Jk,q=0,x=0,I=null,w=null,y=0,z=0,g=0,h=0,
G=0,L=null,B=0,n=0,e=0,A=Date.now(),F=null,N=!1,C=!1,E=!1,M=1,t=!1,u={m:function(){a=U.Dk[fa.W()];b=U.Ck[fa.W()];d=U.Bk[fa.W()];n=U.Ek[fa.W()];f=U.vk[fa.W()];l=U.zk[fa.W()];g=U.Ak[fa.W()];h=fa.P();G=fa.Z();q=Math.round(h*a);x=Math.round(G*a);w=Ca.instance({width:q,height:x,Gc:!1});I=aa.instance({width:q,height:x,isPot:!1,isLinear:!0});L=aa.instance({width:q,height:x,isPot:!1,isLinear:!0,K:1});N=!0},resize:function(Q,V,T){M=T;h=Q;G=V;q=Math.round(Q*a);x=Math.round(V*a);w.resize(q,x);C=!0},V:function(){var Q=
Math.exp(-(Date.now()-A)/n);B=E?e+(1-Q)*(1-e):e*Q;y=b+B*(d-b);z=f+(1-B)*(1-f);p=l+(1-B)*(1-l);aa.aa(5);if(C&&N)aa.aa(6),L.resize(q,x),D.set("s0"),D.ge("u1",6),w.bind(!1,!0),L.o(),w.Qe(),I.h(6),X.l(!0,!0),I.resize(q,x),I.o(),L.h(6),X.l(!1,!1),D.ge("u1",0),C=!1;else{c.enable(c.BLEND);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);Q=y/g;c.blendColor(Q,Q,Q,Q);c.colorMask(!0,!1,!1,!0);D.set("s96");yb.cf();D.C("u130",y);n&&(D.C("u131",z),D.C("u122",p));var V=M*(v+Math.pow(Math.random(),m)*(k-v));D.O("u14",
V/h,V/G);w.kh();w.Vc();I.o();V=2*Math.PI*Math.random();for(var T=!0,ia=0;ia<g;++ia)1===ia&&(c.blendFunc(c.SRC_ALPHA,c.ONE),D.C("u130",Q)),D.C("u129",V+ia/g*(Math.PI/2)),D.O("u128",(Math.random()-.5)/h,(Math.random()-.5)/G),X.l(T,T),T=!1;c.disable(c.BLEND);D.set("s97");D.O("u14",1/q,1/x);L.o();I.h(7);X.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(Q){L.h(Q)},enable:function(){t=!0},wn:function(){if(E||!t)return!1;F&&clearTimeout(F);u.ee();F=setTimeout(u.Vj,400)},ee:function(){F&&(clearTimeout(F),
F=!1);!E&&t&&(window.hk.disable(),E=!0,A=Date.now(),e=B)},Vj:function(){E&&t&&(F&&(clearTimeout(F),F=null),window.hk.enable(),E=!1,A=Date.now(),e=B)},I:function(){I.remove();L.remove();w.remove()}};u.wn();return u}(),Hd={instance:function(a){var b=a.$.P(),d=a.Lm?!0:!1,f=d?"s78":"s12",l=aa.instance({isFloat:a.$.zi()&&Ha.ha()&&!d,U:a.$.Ai()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,K:d?4:3}),p=aa.instance({isFloat:a.$.zi()&&Ha.ha(),U:a.$.Ai(),isPot:!0,width:1,height:b/2,K:3});p.o();D.set("s90");
a.$.h(0);X.l(!0,!0);var v=Math.round(Math.log(b)/Math.log(2));l.fo=function(k){a.$=k};l.Hn=function(){l.o();D.set(f);D.C("u93",U.Qc);a.$.h(0);p.h(1);for(var k=0,m=0;m<=v;++m){var q=Math.pow(2,v-m),x=q/2;c.viewport(0,k,b,x);D.O("u91",b/q,1);D.C("u92",Math.min(6/x,.6));k+=q/2;X.l(0===m,0===m)}};l.Kn=l.remove;l.remove=function(){l.Kn();p.remove()};return l}};ya.Ka=function(){var a={Sc:45,rg:1,Bb:"../../images/debug/picsou.png",ce:.8,Nf:3.14/6,Of:.314,Od:4,Nd:.5,Mf:-.25,Vm:1,fa:256,Lf:.15},b={qb:null,
Ob:null,screen:null},d=!1,f=!1,l=-1,p=null,v=null,k=null,m=Math.PI/180,q=[1,1],x=!1,I={m:function(w){l=w.width;w={isFloat:Ha.ha(),U:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:l,height:l/2,K:3};b.qb&&(b.qb.remove(),b.Ob.remove());b.Ob=aa.instance(w);b.qb=Gc.instance(w);D.j("s118",[{type:"1i",name:"u157",value:0}]);D.j("s119",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u102",value:1},{type:"1i",name:"u162",value:2}]);I.Zj();x=!0},Zj:function(){D.j("s119",[{type:"1f",name:"u163",value:a.Nf},{type:"1f",
name:"u164",value:a.Of},{type:"1f",name:"u165",value:a.Od},{type:"1f",name:"u166",value:a.Nd},{type:"1f",name:"u167",value:a.Mf}])},mq:function(){return f},qa:function(w){p=w},Rc:function(){v="uniform sampler2D u157;uniform vec2 u158,u159,u10;uniform int u160;uniform float u161,u143;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5);const float e=1.2;const vec3 g=vec3(1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u158)/u159;float b=1.;if(u160==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u161*g,texture2D(u157,a).rgb*u143,b*g);gl_FragColor=vec4(d,1.);}";
k="uniform sampler2D u94,u102,u162;uniform float u163,u164,u165,u166,u167,u168;varying vec2 vv0;const float f=3.141593;const vec2 h=vec2(.5);const vec3 i=vec3(1.);void main(){float j=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u162,h);float d=a.r,k=u165*a.g,l=u166*(a.b+u167),b=a.a,g=asin(cos(b)*cos(d)),m=atan(cos(b)*sin(d),-sin(b)),n=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(j-m)),o=1.-smoothstep(u163-u164,u163+u164,n);vec3 p=i*(max(l,0.)+max(k,0.)*o),q=texture2D(u94,vv0).rgb,r=texture2D(u102,vv0).rgb;gl_FragColor=vec4(mix(p+r,q,u168),1.);}";
D.oa("s118",{name:"_",g:v,i:"u157 u158 u160 u159 u161 u143 u10".split(" "),precision:"highp"});D.oa("s119",{name:"_",g:k,i:"u162 u163 u164 u165 u166 u167 u102 u94 u168".split(" "),precision:"highp"})},Hg:function(w,y,z,g,h,G,L,B){D.O("u158",y,z);D.ge("u160",g?1:0);D.O("u159",h,h/G);D.Ag("u10",L);w.h(0);X.l(B,B)},di:function(){return b.qb.Yh()},mh:function(w){I.m({width:a.fa});I.$j(w,!1,1);f=!0},lh:function(){d&&b.screen.rm()===a.Bb||(d=!1,b.screen&&b.screen.remove(),b.screen=aa.instance({url:a.Bb,
isFloat:!1,D:function(){d=!0}}))},xg:function(w){Object.assign(a,w)},ib:function(w){I.xg(w);x&&(I.Zj(),I.lh())},$j:function(w,y,z){Ca.ba();b.Ob.L();D.set("s118");D.C("u161",a.Lf);D.C("u143",a.Vm);I.Hg(w,Math.PI,0,!0,90*m,w.P()/w.Z(),q,!0);d&&(w=a.fa,D.C("u143",a.ce),c.viewport(0,0,w/2,w/2),I.Hg(b.screen,0,0,!1,2*a.Sc*m,2*a.rg,q,!1),c.viewport(w/2,0,w/2,w/2),I.Hg(b.screen,2*Math.PI,0,!1,2*a.Sc*m,2*a.rg,q,!1));y?(D.set("s119"),D.C("u168",1-z),b.qb.sj(0),b.Ob.h(1),y.h(2),X.l(!1,!1),p.vg(b.qb.Yh())):
p.vg(b.Ob)},A:function(){x=!1;Object.assign(b,{qb:null,Ob:null,screen:null});f=d=!1;l=-1;p=null}};return I}();ya.mb=function(){var a=!1,b=!0,d=null,f=null,l=1,p=null,v={Rc:function(){fa.ca()&&(D.oa("s120",{name:"_",v:"attribute vec3 a0;uniform sampler2D u41;uniform float u146;uniform vec2 u42;uniform vec3 u145;const float l=0.,m=0.,D=1.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 E=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u87*e;vec3 c=u87*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u81,0.,0.),u84,c);float t=mix(texture2D(u41,q).r,0.,u87);a.z+=t;mat3 u=r(a);vec3 v=mix(u145,u85,c);float w=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 j=u82/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u87);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u80","u145","u146"].concat(D.Dd(),D.Ed()),J:["a0"],S:[3],ea:!0}),a=!0)},m:function(k){a&&D.j("s120",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:k.Ga},{type:"1f",name:"u146",value:1},{type:"1f",name:"u81",value:0},{type:"1f",name:"u89",value:1}].concat(k.Sg))},fb:function(k,m){f=k;l=m;v.ji()},eb:function(k,m){d=k;p=m;v.ji()},
ji:function(){if(fa.ca()&&f&&d){var k=[d[0]*f,d[1]*f,d[2]*f],m=p;k[0]+=m[0];k[1]+=m[1];k[2]+=m[2];D.j("s120",[{type:"1f",name:"u146",value:l},{type:"3f",name:"u145",value:k}]);D.M()}},Bm:function(k){for(var m=k.width/2,q=k.height/2,x=k.depth,I=k.Gl,w=k.height/4,y=k.kl,z=2*y+4,g=[],h=[],G=-m+k.Va,L=-I-k.Va,B=m-k.Va,n=-I-k.Va,e=0;e<z;++e){var A=0,F=0;0===e?(A=-m,F=-I-x):1<=e&&e<=1+y?(F=(e-1)/y*Math.PI/2,A=G-Math.cos(F)*k.Va,F=L+Math.sin(F)*k.Va):e>=2+y&&e<=2+2*y?(F=(e-2-y)/y*Math.PI/2,A=B+Math.sin(F)*
k.Va,F=n+Math.cos(F)*k.Va):e===z-1&&(A=m,F=-I-x);g.push(A,q+w,F,A,-q+w,F);0!==e&&h.push(2*e,2*e-2,2*e-1,2*e,2*e-1,2*e+1)}return v.instance({ka:g,indices:h})},toggle:function(k){b=k},instance:function(k){var m=X.instance({ka:k.ka,indices:k.indices});return{V:function(){a&&b&&(D.set("s120"),m.bind(!0),m.V())}}}};return v}();ya.ja=function(){function a(t){D.j("s123",t);D.j("s124",t)}var b={vf:-87,um:[85,95],ii:[90,90],hi:[85,70],nd:24,Cp:12,ll:2,kg:[-80,40],Qi:[0,-10],kn:40,mn:20,Ri:[70,50],ln:90,No:2,
ie:[0,-15],Ae:1024,lb:512,Vd:4,Do:[6,30],Pi:1.2};b.$i=b.kg;var d=!1,f=!1,l=!1,p=null,v=null,k=null,m=null,q=null,x=null,I=!1,w=!1,y=null,z=null,g=null,h=null,G=.5,L=[{type:"1f",name:"u170",value:1}],B=null,n=null,e=0,A=["u41","u42","u146","u145"],F=null,N=null,C=null,E=null,M={Rc:function(){D.oa("s121",{name:"_",v:"attribute vec3 a0;uniform vec3 u145;uniform vec2 u171,u172;uniform float u146,u173,u174,u175;varying float vv0,vv1;void main(){vec3 a=(a0+u145)*u146;float b=atan(a.x,a.z-u173),d=2.*(a.y-u174)/(u175-u174)-1.;vv0=a0.y;float g=1.-u171.x*u171.x/(u171.y*u171.y),c=u171.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u173);vv1=smoothstep(u172.x,u172.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u176;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u176;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u146 u145 u171 u172 u173 u174 u175 u13 u176".split(" "),J:["a0"],S:[3],precision:"highp"});D.oa("s122",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});D.oa("s123",{name:"_",v:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u146;uniform vec3 u145;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 g=u87*e;vec3 c=u87*q;vec2 v=mix(d.a*u42,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u81,0.,0.),u84,c);float w=mix(texture2D(u41,t).r,0.,u87);a.z+=w;mat3 i=u(a);vec3 x=mix(u145,u85,c);float y=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 l=u82/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u87);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u177,u162;uniform vec2 u91,u178;uniform float u179,u170;varying vec2 vv0;varying float vv1;void main(){vec2 b=u178*u179+u91*vv0;vec4 a=u170*texture2D(u177,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u177 u162 u80 u179 u178 u91 u170".split(" ").concat(D.Dd(),D.Ed(),A),J:["a0","a2","a1"],S:[3,3,2],precision:"lowp"});D.oa("s124",{name:"_",v:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u146;uniform vec3 u145;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u87*e;vec3 c=u87*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u81,0.,0.),u84,c);float t=mix(texture2D(u41,q).r,0.,u87);a.z+=t;mat3 u=r(a);vec3 v=mix(u145,u85,c);float w=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u83,1.,u87);vec2 j=u82/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u87);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u80"].concat(D.Dd(),D.Ed(),A),J:["a0"],S:[3],precision:"lowp"});d=!0},m:function(t){if(d){if(void 0===t.ic||!t.ic)return!1;if(f)M.qj(t);else{m=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Ae,height:b.Ae/4});var u=b.lb/4,Q={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.lb,height:u};k=aa.instance(Q);x=aa.instance(Q);q=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.lb,height:u*b.Vd});u=[];Q=[];var V=b.Qi[0],T=b.Qi[1],
ia=b.kn,P=b.mn,ka=-b.Ri[0]+V,Qa=b.Ri[1]+T,H=b.ln;u.push(0,V,T,.5*-P,ka,Qa,.5*P,ka,Qa,.5*-ia,V-H,T,.5*ia,V-H,T);Q.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);C=X.instance({ka:new Float32Array(u),indices:new Uint16Array(Q)});u=.5-.5/t.jc[1];Q=.5+.5/t.jc[1];V=new Float32Array(16*b.nd);T=new Uint16Array(6*(b.nd-1));for(ia=0;ia<b.nd;++ia){P=2*ia/(b.nd-1)-1;P=Math.sign(P)*Math.pow(Math.abs(P),b.ll);H=Math.PI*(P+1)/2-Math.PI/2;P=Math.sin(H);var r=Math.cos(H);ka=Math.sin(H*b.Pi);Qa=Math.cos(H*b.Pi);var O=H/(Math.PI*
t.jc[0])+.5;H=b.hi[0]*P;var Z=b.$i[0],ma=b.hi[1]*r+b.vf,na=O,xa=u,qa=b.$i[1];r=b.ii[1]*r+b.vf;var ca=Q,la=16*ia;V[la]=b.ii[0]*P;V[la+1]=qa;V[la+2]=r;V[la+3]=ka;V[la+4]=0;V[la+5]=Qa;V[la+6]=O;V[la+7]=ca;V[la+8]=H;V[la+9]=Z;V[la+10]=ma;V[la+11]=ka;V[la+12]=0;V[la+13]=Qa;V[la+14]=na;V[la+15]=xa;0!==ia&&(P=2*ia,ka=6*(ia-1),T[ka]=P,T[ka+1]=P-1,T[ka+2]=P-2,T[ka+3]=P,T[ka+4]=P+1,T[ka+5]=P-1)}E=X.instance({ka:V,indices:T});M.qj(t);D.j("s122",[{type:"1i",name:"u1",value:0}]);f=!0}}},qj:function(t){G=t.yo;
h=t.je;var u=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u80",value:[t.Ga[0],t.Ga[1]-b.ie[0],t.Ga[2]+b.ie[1]]}].concat(t.Sg,t.Uj);B=[{type:"1i",name:"u177",value:0},{type:"1i",name:"u162",value:2},{type:"1f",name:"u179",value:t.zo},{type:"2f",name:"u91",value:[1,1/b.Vd]},{type:"2f",name:"u178",value:[0,1/b.Vd]},{type:"1f",name:"u170",value:1}].concat(u);n=u;D.j("s123",B);D.j("s124",n)},dc:function(t){p=t},cc:function(t){F=t;F.yc(M.zc)},Bi:function(){return l&&null!==F&&null!==N},zc:function(){if(!(l||
w&&I)||null===F||null===N)return!1;e=0;c.viewport(0,0,b.Ae,b.Ae/4);Ca.ba();m.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);D.j("s121",[{type:"1f",name:"u173",value:b.vf},{type:"1f",name:"u174",value:b.kg[0]},{type:"1f",name:"u175",value:b.kg[1]},{type:"3f",name:"u145",value:[y[0]+z[0],y[1]+z[1],y[2]+z[2]]},{type:"1f",name:"u176",value:G},{type:"2f",name:"u171",value:b.um},{type:"2f",name:"u172",value:b.Do}]);F.Fl();D.set("s1");var t=b.lb/4;c.viewport(0,0,b.lb,t);k.o();m.h(0);m.Dc();X.l(!0,
!0);for(var u=0;u<b.Vd;++u)D.set("s122"),0!==u&&c.viewport(0,0,b.lb,t),x.o(),k.h(0),D.O("u14",1/b.lb,0),X.l(!1,!1),k.o(),x.h(0),D.O("u14",0,1/t),X.l(!1,!1),b.ml&&c.colorMask(0===u,1===u,2===u,!0),D.set("s1"),q.o(),k.h(0),c.viewport(0,u*t,b.lb,t),X.l(!1,!1),b.ml&&c.colorMask(!0,!0,!0,!0);return l=!0},V:function(){M.Bi()&&0===e++%b.No&&(N.bind(!1,!1),v.L(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),D.set("s124"),p.h(1),C.bind(!0),C.V(),
D.set("s123"),q.h(0),E.bind(!0),E.V(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},mm:function(){return v},add:function(){M.Bi()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),v.h(0),X.l(!1,!1),c.disable(c.BLEND))},tg:function(t,u){N&&N.remove();N=Ca.instance({width:t,height:u,Gc:!0});v&&v.remove();v=aa.instance({width:t,height:u,isFloat:!1,isPot:!1});M.zc()},eb:function(t,u,Q){t||(t=y,u=z,Q=g);a([{type:"3f",name:"u145",value:[Q[0]+h[0],Q[1]+h[1]-b.ie[0],Q[2]+h[2]+b.ie[1]]}]);y=t;z=u;g=
Q;w=!0;!l&&I&&M.zc();D.M()},fb:function(t,u){D.j("s121",[{type:"1f",name:"u146",value:t}]);a([{type:"1f",name:"u146",value:u}]);I=!0;!l&&w&&M.zc();D.M()},yg:function(t){a([{type:"1f",name:"u81",value:t}]);D.M()},Eb:function(t){t&&(F=t);M.zc()},zg:function(t,u){L[0].value=1-t;a(L);a(u)},I:function(){},A:function(){[N,C,E].forEach(function(t){t&&t.remove()});e=0;w=I=!1;E=C=N=h=g=z=y=null;l=f=d=!1;x=q=m=k=v=p=null}};return M}();ya.ta=function(){var a=!1,b=null,d=0,f=0,l=0,p=[{type:"1f",name:"u170",value:1}],
v=null,k=null,m=null,q={Rc:function(){D.oa("s125",{name:"_",v:"attribute vec3 a0;uniform vec2 u180,u181;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u181)/u180;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u182;uniform float u183,u184,u185;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u183,u184),a=vv0-b,c=u185*a,d=(c-a)*u182;gl_FragColor=vec4(d,0.,1.);}",i:"u180 u181 u183 u184 u185 u182".split(" "),J:["a0"],S:[3],precision:"highp"});D.oa("s126",{name:"_",v:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u145;uniform vec2 u42,u180,u181;uniform float u146;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u77;uniform vec3 u80,u84,u85,u86;uniform float u78,u79,u87,u88,u81,u82,u83,u89;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u87*e;vec3 c=u87*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u81,0.,0.),u84,c);float v=mix(texture2D(u41,s).r,0.,u87);a.z+=v;mat3 w=t(a);vec3 x=mix(u145,u85,c);float y=mix(u146,u88,u87);vec3 b=mix(u80,u86,c);b.x+=u78*sin(a.y),b.y+=u79*sin(a.x)*step(0.,a.x);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u83,1.,u87);vec2 j=u82/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u87);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u77*(vec4(u89*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u181)/u180,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u186,u187;uniform float u170;varying vec2 vv0,vv1;void main(){vec2 a=u170*texture2D(u186,vv0).rg;gl_FragColor=texture2D(u187,a+vv1);}",i:"u170 u41 u186 u187 u180 u181 u42 u80 u146 u145".split(" ").concat(D.Dd(),D.Ed()),J:["a0"],S:[3],precision:"lowp"});a=!0},m:function(x){if(a){if(void 0===x.ic||!x.pd)return!1;k=aa.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,K:4});m=Ca.instance({width:256,height:128});D.j("s126",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u186",value:2},{type:"1i",name:"u187",value:0},{type:"3f",name:"u80",value:x.Ga},{type:"1f",name:"u170",value:1}].concat(x.Uj,x.Sg));f=x.Xe;l=x.We;d=x.Ye}},dc:function(x){b=x},cc:function(x){v=x;v.yc(q.Te)},Te:function(){c.viewport(0,0,256,128);m.o();k.o();var x=v.nm(),I=v.om(),w=[{type:"2f",name:"u180",value:[x,I]},{type:"2f",name:"u181",value:[v.Rl(),v.Sl()]}];D.j("s125",w.concat([{type:"1f",name:"u183",value:f},{type:"1f",name:"u184",value:l},{type:"1f",name:"u185",value:d},{type:"2f",name:"u182",
value:[1/x,-1/I]}]));v.Ah();D.j("s126",w)},V:function(){D.set("s126");b.h(1);k.h(2);v.Ah()},eb:function(x){D.j("s126",[{type:"3f",name:"u145",value:x}]);D.M()},fb:function(x){D.j("s126",[{type:"1f",name:"u146",value:x}]);D.M()},yg:function(x){D.j("s126",[{type:"1f",name:"u81",value:x}]);D.M()},wo:function(x){d=x;q.Te();D.M();Aa.animate(Date.now())},Eb:function(x){x&&(v=x);q.Te()},zg:function(x,I){p.u170=1-x;D.j("s126",p);D.j("s126",I)},I:function(){}};return q}();ya.pc=function(){var a=[0,-.5],b=
!1,d=!1,f=null,l=null,p=null,v=null,k=null,m=-1,q=-1;return{Rc:function(){D.oa("s127",{name:"_",v:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u188;varying vec2 vv0;void main(){gl_FragColor=texture2D(u188,vv0);}",i:["u41","u188","u42","u11","u10"],precision:"lowp"});
D.oa("s128",{name:"_",g:"uniform sampler2D u2,u189,u190;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u190,vv0).rgb,c=texture2D(u189,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u190","u189"],precision:"lowp"});b=!0},m:function(x){b&&(k=aa.instance({isFloat:!1,isPot:!0,url:x.Ke,D:function(){d=!0}}),D.j("s127",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u188",value:0},{type:"2f",name:"u42",value:x.dk},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),D.j("s128",[{type:"1i",name:"u189",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u190",value:2}]))},dc:function(x){l=x},tg:function(x,I){var w={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:x,height:I,K:4};m=2/x;q=2/I;p=aa.instance(w);v=aa.instance(w);f=Ca.instance({width:x,height:I})},V:function(x,I){if(d){f.bind(!1,!0);D.set("s89");for(var w=0;2>w;++w){D.O("u14",m,0);p.o();0!==w&&v.h(0);var y=0===w&&!U.ga_;X.l(y,y);D.O("u14",0,q);v.o();p.h(0);X.l(!1,
!1)}D.set("s127");l.h(1);k.h(0);p.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);X.l(!1,!1);D.set("s128");I.o();v.h(0);p.h(1);x.h(2);X.l(!1,!1)}},I:function(){}}}();var Tc=function(){var a={instance:function(b){var d=b.Yf,f=b.Tf,l=b.od,p=b.background?b.background:aa.ei(),v=b.Pa,k={scale:1,offsetX:0,offsetY:0},m=null;b.Sf&&(k.scale=b.Sf.scale,k.offsetY=b.Sf.offsetY);return{Zh:function(){return v},Rh:function(){return p},set:function(){m=fb.cm();fb.xj(k);fb.se();fb.te();Aa.pj(l,p,!1,!1)},M:function(){fb.xj(m)},
bc:function(){return{modelURL:d,materialsURLs:f,background:p.bc(!1),od:l.bc(!1),Pa:v.bc(!0)}},fm:function(){return l.bc(!1)},qp:function(q){p.h(q)},I:function(){l.remove();v.remove();b.background&&p.remove()}}},Yc:function(b,d,f){function l(){if(3===++m&&d){var q=a.instance({Yf:b.modelURL,Tf:b.materialsURLs,background:p,od:v,Pa:k});d(q)}}var p=null,v=null,k=null,m=0;aa.Yc(b.background,function(q){!q&&f?f():(p=q,l())});aa.Yc(b.dataState,function(q){!q&&f?f():(v=q,l())});aa.Yc(b.light,function(q){!q&&
f?f():(k=q,l())})}};return a}();return fd||window.JEELIZVTO}(),Id=function(){function ea(Fa,Na){var Ka=Object.prototype.toString.call(Fa),vb=0,La=Fa.length;if("[object Array]"===Ka||"[object NodeList]"===Ka||"[object HTMLCollection]"===Ka||"[object Object]"===Ka||"undefined"!==typeof jQuery&&Fa instanceof jQuery||"undefined"!==typeof Elements&&Fa instanceof Elements)for(;vb<La;vb++)Na(Fa[vb]);else Na(Fa)}var ha=function(Fa,Na){function Ka(){var La=[];this.add=function(Fb){La.push(Fb)};var lb,Ab;this.call=
function(){lb=0;for(Ab=La.length;lb<Ab;lb++)La[lb].call()};this.remove=function(Fb){var Ob=[];lb=0;for(Ab=La.length;lb<Ab;lb++)La[lb]!==Fb&&Ob.push(La[lb]);La=Ob};this.length=function(){return La.length}}function vb(La,lb){if(La)if(La.resizedAttached)La.resizedAttached.add(lb);else{La.resizedAttached=new Ka;La.resizedAttached.add(lb);La.resizeSensor=document.createElement("div");La.resizeSensor.className="resize-sensor";La.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";
La.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
La.appendChild(La.resizeSensor);La.resizeSensor.offsetParent!==La&&(La.style.position="relative");var Ab=La.resizeSensor.childNodes[0],Fb=Ab.childNodes[0],Ob=La.resizeSensor.childNodes[1],Zb,Lb,gc,Mb,sc=La.offsetWidth,tc=La.offsetHeight,hc=function(){Fb.style.width="100000px";Fb.style.height="100000px";Ab.scrollLeft=1E5;Ab.scrollTop=1E5;Ob.scrollLeft=1E5;Ob.scrollTop=1E5};hc();var uc=function(){Lb=0;Zb&&(sc=gc,tc=Mb,La.resizedAttached&&La.resizedAttached.call())};lb=function(){gc=La.offsetWidth;Mb=
La.offsetHeight;(Zb=gc!=sc||Mb!=tc)&&!Lb&&(Lb=window.requestAnimationFrame(uc));hc()};var ic=function(jc,kc,vc){jc.attachEvent?jc.attachEvent("on"+kc,vc):jc.addEventListener(kc,vc)};ic(Ab,"scroll",lb);ic(Ob,"scroll",lb)}}ea(Fa,function(La){vb(La,Na)});this.detach=function(La){ha.detach(Fa,La)}};ha.detach=function(Fa,Na){ea(Fa,function(Ka){if(Ka){if(Ka.resizedAttached&&"function"==typeof Na&&(Ka.resizedAttached.remove(Na),Ka.resizedAttached.length()))return;Ka.resizeSensor&&(Ka.contains(Ka.resizeSensor)&&
Ka.removeChild(Ka.resizeSensor),delete Ka.resizeSensor,delete Ka.resizedAttached)}})};return ha}(),rc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},ob={notLoaded:-1,initializing:0,realtime:2,loadingModel:3,paused:4},gd={isRT:!0,sku:void 0,materialsReplacements:"",mode:ob.notLoaded},Sa=Object.assign({},gd),kb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},hd={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,
trackIframe:null},Ba=Object.assign({},hd),Jd={ADJUST_START:null,ADJUST_END:null,LOADING_START:null,LOADING_END:null},Pc=null,Yb={enabled:!1,callback:null,interval:1E3},Bc={error:!1},pc=null,fc=null,Cc="undef",Va=fd,xb={start:function(ea){var ha=Object.assign({settings:null,NNCPath:null,assetsPath:rc.appstaticURL+"jeefit/",catalog:null,faceDetectionCallback:null,faceDetectionInterval:1E3,placeHolder:null,canvas:null,onError:null,callbackReady:null,onWebcamGet:null,callbacks:{},searchImageMask:null,
searchImageColor:null,searchImageRotationSpeed:null,isShadow:!0,isRequestCamera:!0,sku:null,modelStandalone:null},ea);console.log("INFO in JeelizVTOWidget.js: start()");return new Promise(function(Fa,Na){if(Sa.mode!==ob.notLoaded)xb.resume().catch(function(vb){}).finally(Fa);else{oa();if(ha.settings)for(var Ka in ha.settings)rc[Ka]=ha.settings[Ka];ha.NNCPath&&Va.set_NNCPath(ha.NNCPath);ha.faceDetectionCallback&&(Yb.enabled=!0,Yb.callback=ha.faceDetectionCallback,Yb.interval=ha.faceDetectionInterval);
Pc=Object.assign({},Jd,ha.callbacks);Ba.container=ha.placeHolder||document.getElementById("JeelizVTOWidget");if(!Ba.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");Ba.cv=ha.canvas||document.getElementById("JeelizVTOWidgetCanvas");Ba.cv||(Ba.cv=document.createElement("canvas"),Ba.container.appendChild(Ba.cv));Ba.cv.style.position="absolute";Ba.loading=document.getElementById("JeelizVTOWidgetLoading");Bc.error=ha.onError;fc=ha.callbackReady;Kb();
Ka=tb(Ba.container);if(!Ka.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!Ka.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");qb(!0);new Id(Ba.container,function(vb){qb(!1)});(ha.searchImageMask||ha.searchImageColor||ha.searchImageRotationSpeed)&&Va.set_loading(ha.searchImageMask,ha.searchImageColor,ha.searchImageRotationSpeed);Sa.mode=ob.initializing;Cc=ha.assetsPath;pc=ha.catalog;if(ha.onWebcamGet)Va.onWebcamGet(ha.onWebcamGet);Ka={basePath:Cc,cv:Ba.cv,isRequestCamera:ha.isRequestCamera,
callbackReady:ja};qb(!0);Va.init2(Ka).catch(function(vb){Sa.isRT=!1;eb(vb||"NO_ERROR_LABEL");Na()});Va.onHalfLoad(function(){!1===ha.isShadow&&Va.switch_shadow(!1);ha.sku?xb.load_glassesDB(ha.sku,Fa,ha.materialsReplacements):ha.modelStandalone?xb.load_modelStandalone(ha.modelStandalone,Fa):Fa()})}})},destroy:function(){return Va.destroy().then(function(){Object.assign(Sa,gd);fc=pc=null;Object.assign(Ba,hd)})},pause:function(ea){if(!Sa.isRT||!Va.ready)return Promise.reject();Sa.mode=ob.paused;var ha=
Va.switch_sleep(!0,ea);return ea?ha:Promise.resolve(ha)},resume:function(ea){if(!Sa.isRT||!Va.ready)return Promise.reject();Sa.mode=ob.realtime;var ha=Va.switch_sleep(!1,ea);return ea?ha:Promise.resolve(ha)},set_videoRotation:function(ea){Sa.isRT&&Va.set_videoRotation(ea)},set_videoSizes:function(ea,ha,Fa,Na,Ka,vb){Sa.isRT&&Va.set_videoSizes(ea,ha,Fa,Na,Ka,vb)},resize:function(){qb(!0)},set_scale:function(ea){Va.set_scale(ea)},capture_image:function(ea,ha,Fa){Va&&Va.ready?Va.capture_image(ea,ha,Fa,
!1):ha(!1)},toggle_loading:function(ea){ea?(ra(Ba.loading),qc("LOADING_START")):(Oa(Ba.loading),qc("LOADING_END"))},load_modelStandalone:function(ea,ha){if(Sa.mode===ob.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");if(!Sa.isRT)throw Error("Loading standalone models is only available in RT mode");Sa.mode===ob.paused&&xb.resume().catch(function(Ka){});Sa.mode=ob.loadingModel;xb.toggle_loading(!0);var Fa=function(){xb.toggle_loading(!1);ha&&ha()},Na="undef";"string"===typeof ea?
(Na=ea,Ja(ea,Na).then(Fa).catch(Ua)):(Na="RANDOM_SKU_"+Date.now().toString(),Oc(Na,ea,Fa));Sa.sku=Na;Sa.materialsReplacements=""},load_glassesDB:function(ea,ha,Fa){if(Sa.mode===ob.notLoaded)throw Error("You should call JEELIZVTOWIDGET.start() first");if(Sa.isRT){xb.toggle_loading(!0);var Na=Fa?JSON.stringify(Fa):"";ea===Sa.sku&&Na===Sa.materialsReplacements?(xb.toggle_loading(!1),ha&&ha()):(Sa.sku=ea,Sa.materialsReplacements=Na,Sa.mode=ob.loadingModel,Sa.mode===ob.paused&&xb.resume().catch(function(Ka){}),
ea?pc&&pc[ea]?Wb(ea,pc[ea],ha,Fa):ta(rc.glassesDBURL+ea).then(function(Ka){if(Ka.error)return Ua();Wb(ea,Ka.intrinsic,ha,Fa)}).catch(Ua):(Sa.mode=ob.realtime,xb.toggle_loading(!1),Va.start_rendering(),ha&&ha()))}},enter_adjustMode:Xb,exit_adjustMode:zb,set_LUT:function(ea){return Va&&Va.ready?Va.set_LUT(ea||null):Promise.reject("NOT_READY")}};return xb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:JEELIZVTO.VERSION,request_cameraVideoStream:JEELIZVTO.request_cameraVideoStream,start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load_glassesDB,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,
enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,set_LUT:JeelizVTOWidget.set_LUT};
