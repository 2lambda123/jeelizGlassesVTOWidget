/**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( JeelizÂ® - https://jeeliz.com )
 *
 * This software library is the proprietary and confidential information of
 * Jeeliz ("Licensor"). You may only use this software library if
 * you have obtained a valid commercial license from Licensor. If you have not
 * obtained a valid commercial license from Licensor, please check out
 * https://jeeliz.com/#pricing for licensing options and pricing.
 *
 * Unauthorized use, reproduction, or distribution of this software library or
 * any portion thereof may result in severe civil and criminal penalties, and
 * will be prosecuted to the maximum extent possible under the law.
 *
 * THIS SOFTWARE LIBRARY IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE LIBRARY, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

 

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(la,na){return Object.prototype.hasOwnProperty.call(la,na)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(la,na,qa){if(la==Array.prototype||la==Object.prototype)return la;la[na]=qa.value;return la};
$jscomp.getGlobal=function(la){la=["object"==typeof globalThis&&globalThis,la,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var na=0;na<la.length;++na){var qa=la[na];if(qa&&qa.Math==Math)return qa}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(la,na){var qa=$jscomp.propertyToPolyfillSymbol[na];if(null==qa)return la[na];qa=la[qa];return void 0!==qa?qa:la[na]};$jscomp.polyfill=function(la,na,qa,Ma){na&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(la,na,qa,Ma):$jscomp.polyfillUnisolated(la,na,qa,Ma))};
$jscomp.polyfillUnisolated=function(la,na,qa,Ma){qa=$jscomp.global;la=la.split(".");for(Ma=0;Ma<la.length-1;Ma++){var wa=la[Ma];if(!(wa in qa))return;qa=qa[wa]}la=la[la.length-1];Ma=qa[la];na=na(Ma);na!=Ma&&null!=na&&$jscomp.defineProperty(qa,la,{configurable:!0,writable:!0,value:na})};
$jscomp.polyfillIsolated=function(la,na,qa,Ma){var wa=la.split(".");la=1===wa.length;Ma=wa[0];Ma=!la&&Ma in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var nb=0;nb<wa.length-1;nb++){var sa=wa[nb];if(!(sa in Ma))return;Ma=Ma[sa]}wa=wa[wa.length-1];qa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===qa?Ma[wa]:null;na=na(qa);null!=na&&(la?$jscomp.defineProperty($jscomp.polyfills,wa,{configurable:!0,writable:!0,value:na}):na!==qa&&($jscomp.propertyToPolyfillSymbol[wa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(wa):
$jscomp.POLYFILL_PREFIX+wa,wa=$jscomp.propertyToPolyfillSymbol[wa],$jscomp.defineProperty(Ma,wa,{configurable:!0,writable:!0,value:na})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(la,na){for(var qa=1;qa<arguments.length;qa++){var Ma=arguments[qa];if(Ma)for(var wa in Ma)$jscomp.owns(Ma,wa)&&(la[wa]=Ma[wa])}return la};$jscomp.polyfill("Object.assign",function(la){return la||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(la){var na=0;return function(){return na<la.length?{done:!1,value:la[na++]}:{done:!0}}};$jscomp.arrayIterator=function(la){return{next:$jscomp.arrayIteratorImpl(la)}};$jscomp.makeIterator=function(la){var na="undefined"!=typeof Symbol&&Symbol.iterator&&la[Symbol.iterator];return na?na.call(la):$jscomp.arrayIterator(la)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(la){function na(){this.batch_=null}function qa(sa){return sa instanceof wa?sa:new wa(function(Ha,Ra){Ha(sa)})}if(la&&!$jscomp.FORCE_POLYFILL_PROMISE)return la;na.prototype.asyncExecute=function(sa){if(null==this.batch_){this.batch_=[];var Ha=this;this.asyncExecuteFunction(function(){Ha.executeBatch_()})}this.batch_.push(sa)};var Ma=$jscomp.global.setTimeout;na.prototype.asyncExecuteFunction=function(sa){Ma(sa,0)};na.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var sa=this.batch_;this.batch_=[];for(var Ha=0;Ha<sa.length;++Ha){var Ra=sa[Ha];sa[Ha]=null;try{Ra()}catch(db){this.asyncThrow_(db)}}}this.batch_=null};na.prototype.asyncThrow_=function(sa){this.asyncExecuteFunction(function(){throw sa;})};var wa=function(sa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ha=this.createResolveAndReject_();try{sa(Ha.resolve,Ha.reject)}catch(Ra){Ha.reject(Ra)}};wa.prototype.createResolveAndReject_=function(){function sa(db){return function(ob){Ra||
(Ra=!0,db.call(Ha,ob))}}var Ha=this,Ra=!1;return{resolve:sa(this.resolveTo_),reject:sa(this.reject_)}};wa.prototype.resolveTo_=function(sa){if(sa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(sa instanceof wa)this.settleSameAsPromise_(sa);else{a:switch(typeof sa){case "object":var Ha=null!=sa;break a;case "function":Ha=!0;break a;default:Ha=!1}Ha?this.resolveToNonPromiseObj_(sa):this.fulfill_(sa)}};wa.prototype.resolveToNonPromiseObj_=function(sa){var Ha=void 0;
try{Ha=sa.then}catch(Ra){this.reject_(Ra);return}"function"==typeof Ha?this.settleSameAsThenable_(Ha,sa):this.fulfill_(sa)};wa.prototype.reject_=function(sa){this.settle_(2,sa)};wa.prototype.fulfill_=function(sa){this.settle_(1,sa)};wa.prototype.settle_=function(sa,Ha){if(0!=this.state_)throw Error("Cannot settle("+sa+", "+Ha+"): Promise already settled in state"+this.state_);this.state_=sa;this.result_=Ha;this.executeOnSettledCallbacks_()};wa.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var sa=0;sa<this.onSettledCallbacks_.length;++sa)nb.asyncExecute(this.onSettledCallbacks_[sa]);this.onSettledCallbacks_=null}};var nb=new na;wa.prototype.settleSameAsPromise_=function(sa){var Ha=this.createResolveAndReject_();sa.callWhenSettled_(Ha.resolve,Ha.reject)};wa.prototype.settleSameAsThenable_=function(sa,Ha){var Ra=this.createResolveAndReject_();try{sa.call(Ha,Ra.resolve,Ra.reject)}catch(db){Ra.reject(db)}};wa.prototype.then=function(sa,Ha){function Ra(ub,Db){return"function"==
typeof ub?function(Nb){try{db(ub(Nb))}catch(Sb){ob(Sb)}}:Db}var db,ob,Tb=new wa(function(ub,Db){db=ub;ob=Db});this.callWhenSettled_(Ra(sa,db),Ra(Ha,ob));return Tb};wa.prototype.catch=function(sa){return this.then(void 0,sa)};wa.prototype.callWhenSettled_=function(sa,Ha){function Ra(){switch(db.state_){case 1:sa(db.result_);break;case 2:Ha(db.result_);break;default:throw Error("Unexpected state: "+db.state_);}}var db=this;null==this.onSettledCallbacks_?nb.asyncExecute(Ra):this.onSettledCallbacks_.push(Ra)};
wa.resolve=qa;wa.reject=function(sa){return new wa(function(Ha,Ra){Ra(sa)})};wa.race=function(sa){return new wa(function(Ha,Ra){for(var db=$jscomp.makeIterator(sa),ob=db.next();!ob.done;ob=db.next())qa(ob.value).callWhenSettled_(Ha,Ra)})};wa.all=function(sa){var Ha=$jscomp.makeIterator(sa),Ra=Ha.next();return Ra.done?qa([]):new wa(function(db,ob){function Tb(Nb){return function(Sb){ub[Nb]=Sb;Db--;0==Db&&db(ub)}}var ub=[],Db=0;do ub.push(void 0),Db++,qa(Ra.value).callWhenSettled_(Tb(ub.length-1),ob),
Ra=Ha.next();while(!Ra.done)})};return wa},"es6","es3");$jscomp.polyfill("Math.log2",function(la){return la?la:function(na){return Math.log(na)/Math.LN2}},"es6","es3");$jscomp.findInternal=function(la,na,qa){la instanceof String&&(la=String(la));for(var Ma=la.length,wa=0;wa<Ma;wa++){var nb=la[wa];if(na.call(qa,nb,wa,la))return{i:wa,v:nb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(la){return la?la:function(na,qa){return $jscomp.findInternal(this,na,qa).v}},"es6","es3");
$jscomp.polyfill("Object.is",function(la){return la?la:function(na,qa){return na===qa?0!==na||1/na===1/qa:na!==na&&qa!==qa}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(la){return la?la:function(na,qa){var Ma=this;Ma instanceof String&&(Ma=String(Ma));var wa=Ma.length;qa=qa||0;for(0>qa&&(qa=Math.max(qa+wa,0));qa<wa;qa++){var nb=Ma[qa];if(nb===na||Object.is(nb,na))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(la,na,qa){if(null==la)throw new TypeError("The 'this' value for String.prototype."+qa+" must not be null or undefined");if(na instanceof RegExp)throw new TypeError("First argument to String.prototype."+qa+" must not be a regular expression");return la+""};$jscomp.polyfill("String.prototype.includes",function(la){return la?la:function(na,qa){return-1!==$jscomp.checkStringArgs(this,na,"includes").indexOf(na,qa||0)}},"es6","es3");
$jscomp.polyfill("Promise.prototype.finally",function(la){return la?la:function(na){return this.then(function(qa){return Promise.resolve(na()).then(function(){return qa})},function(qa){return Promise.resolve(na()).then(function(){throw qa;})})}},"es9","es3");$jscomp.polyfill("Math.sign",function(la){return la?la:function(na){na=Number(na);return 0===na||isNaN(na)?na:0<na?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function la(){Qa.mode=lb.realtime;Qa.isRT=!0;Aa.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(Aa.adjust){Aa.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");Aa.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");Aa.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");Aa.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var U=Aa.adjust;U&&U.addEventListener("click",Tb,!1);(U=Aa.adjustExit)&&
U.addEventListener("click",ub,!1);[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(qa)}Ub.enabled&&Ta.do_instantDetection(Ub.interval,Ub.callback);$b&&($b(!0),$b=null)}function na(){var U=document.createElement("style");U.setAttribute("type","text/css");U.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var ua=document.getElementsByTagName("head");1<=ua.length?ua[0].appendChild(U):document.body.appendChild(U)}function qa(U){U&&
(U.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(U).display&&U.classList.add("_jeelizVTOForceShow"))}function Ma(U){U&&(U.classList.add("_jeelizVTOForceHide"),U.classList.remove("_jeelizVTOForceShow"))}function wa(U,ua){if(U)for(var Na in ua)U.style[Na]=ua[Na]}function nb(U){if(!U)return{width:0,height:0};U=U.getBoundingClientRect();return{width:U.width,height:U.height}}function sa(U){return new Promise(function(ua,Na){var Ka=new XMLHttpRequest;Ka.open("GET",U,!0);Ka.onreadystatechange=
function(){if(4===Ka.readyState)if(200===Ka.status||0===Ka.status)try{var Za=JSON.parse(Ka.responseText);ua(Za)}catch(cb){Na("INVALID JSON")}else Na("HTTP ERROR "+Ka.status)};Ka.send()})}function Ha(U,ua){return new Promise(function(Na,Ka){sa(U).then(function(Za){Ta.set_modelStandalone(Za,Nb.bind(null,ua,Na),ua)}).catch(Ka)})}function Ra(){xb.toggle_loading(!1);Qa.mode=lb.realtime;db("INVALID_SKU")}function db(U){wc.error?wc.error(U):console.log("ERROR:",U)}function ob(){var U=nb(Aa.container),ua=
Math.abs(hb.displayHeight-U.height);if(1>=Math.abs(hb.displayWidth-U.width)&&1>=ua)console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize");else if(hb.displayWidth=U.width,hb.displayHeight=U.height,console.log("INFO in JeelizVTOWidget.resize: width = "+hb.displayWidth.toString()+" height = "+hb.displayHeight.toString()+" oFactor = "+(1).toString()),hb.cvWidth=Math.round(1*hb.displayWidth),hb.cvHeight=Math.round(1*hb.displayHeight),wa(Aa.cv,{width:hb.displayWidth.toString()+
"px",height:hb.displayHeight.toString()+"px"}),Aa.cv.width=hb.cvWidth,Aa.cv.height=hb.cvHeight,Ta)if(Qa.mode===lb.notLoaded)Ta.set_size(hb.cvWidth,hb.cvHeight,!1);else Ta.onLoad(function(){Ta.resize(hb.cvWidth,hb.cvHeight,!1)})}function Tb(){[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(Ma);Qa.mode=lb.adjust;[Aa.adjustNotice,Aa.adjustExit].forEach(qa);Aa.cv.style.cursor="move";Ta.switch_modeInteractor("movePinch");nc("ADJUST_START")}function ub(){[Aa.adjustNotice,Aa.adjustExit].forEach(Ma);
[Aa.adjust,Aa.changeModelContainer,Aa.buttonResizeCanvas].forEach(qa);Aa.cv.style.cursor="auto";Qa.mode=Qa.realtime;Ta.switch_modeInteractor("idle");nc("ADJUST_END")}function Db(){if(!Aa.trackIframe){var U=oc.appstaticURL+"jeewidget/";Aa.trackIframe=document.createElement("iframe");Aa.trackIframe.width="10";Aa.trackIframe.height="10";Aa.trackIframe.src=U+"trackIframe.html";wa(Aa.trackIframe,{position:"absolute",zIndex:-1,bottom:"0",right:"0"});Aa.container.appendChild(Aa.trackIframe)}}function Nb(U,
ua){Qa.mode=lb.realtime;ua&&ua();xb.toggle_loading(!1);if(Aa.trackIframe){ua=location.href.split("?").shift().split("://").pop();ua=ua.split("/").shift();ua=ua.split("www.").pop();try{Aa.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:ua,sku:U},"*")}catch(Na){}}}function Sb(U,ua,Na,Ka){var Za=ua.mod+".json";ua.isStandalone?Ha(xc+"models3DStandalone/"+Za,U).then(Na):Ta.load_model(Za,ua.mats,Nb.bind(null,U,Na),U,Ka)}function nc(U){(U=Ic[U])&&U()}var Ta=function(){function U(a,
b){return a[0]*(1-b)+a[1]*b}function ua(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function Na(a,b){ua(a+"",function(d){b(JSON.parse(d))})}function Ka(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=Ka(a[d],b);return a}function Za(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function cb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";
case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Eb(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function La(a,b,d){var e=1,k=0;for(d=b+d-1;d>=b;--d)k+=e*Eb(a,d),e*=2;return k}function ib(a){a=a.data;
a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var b=a.length,d=new Uint8Array(b),e=0;e<b;++e)d[e]=a.charCodeAt(e);return d}function rb(a){return"string"===typeof a?JSON.parse(a):a}function Kb(a){return"undefined"===typeof rb(a).nb?Ob(a):zb(a)}function zb(a){var b=rb(a);a=b.nb;if(0===a)return new Uint8Array(b.nb);var d=b.n;b=ib(b);for(var e=new Uint32Array(d),k=0;k<d;++k)e[k]=La(b,k*a,a);return e}function Ob(a){var b=rb(a);a=b.ne;var d=b.nf,e=b.n;b=ib(b);for(var k=
new Float32Array(e),q=new Float32Array(d),x=a+d+1,h=0;h<e;++h){var n=x*h,t=0===Eb(b,n)?1:-1,z=La(b,n+1,a);n=n+1+a;for(var H=q.length,y=0,G=n;G<n+H;++G)q[y]=Eb(b,G),++y;for(H=n=0;H<d;++H)n+=q[H]*Math.pow(2,-H-1);k[h]=0===n&&0===z?0:t*(1+n)*Math.pow(2,1+z-Math.pow(2,a-1))}return k}function ac(a){var b=null,d=null,e=null,k=0,q=this,x=null,h={Kc:[],Xd:"none",ag:!1,Wd:null,grid:null};this.m=function(){this.Lk(x.Kc);e.lo({Xd:x.Xd,ag:x.ag,Wd:x.Wd})};this.Pl=function(n){return b[n]};this.re=function(n){["s32",
"s34","s27"].forEach(function(t){Z.j(t,[{type:"2f",name:"u20",value:n}])});b&&b.forEach(function(t){t.re(n)})};this.Lk=function(n){var t=null;k=n.length;var z=null!==x.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),H=z?x.grid:[1,1];z&&this.re(H);b=n.map(function(y,G){y=Object.assign({},y,{index:G,parent:q,be:t,xm:G===k-1,Fc:z,Aa:H});return t=0===G?Zc.instance(y):$c.instance(y)});d=b[0];e=b[k-1];b.forEach(function(y,G){0!==G&&y.kn()})};this.wa=function(n){n.h(0);var t=n;b.forEach(function(z){t=
z.wa(t,!1)});return t};this.Sh=function(){return d.Ol()};this.Cc=function(){return e.Sl()};this.Oh=function(){return e.Oh()};this.v=function(){b&&(b.forEach(function(n){n.v()}),e=d=b=null,k=0)};"undefined"!==typeof a&&(x=Object.assign({},h,a),this.m())}function Fb(a,b){a[b]=!0;a.setAttribute(b,"true")}function bc(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function cc(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&
"object"===typeof e?Object.assign({},e):e};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&dc(b,a.deviceId);return b}function dc(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)}function ec(a){var b=a.video.width;a.video.width=
a.video.height;a.video.height=b;return a}function yc(a){function b(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(G,v){return Math.abs(G-y)-Math.abs(v-y)})}function d(y){var G=cc(a);y=y(G);k.push(y);e(y)}function e(y){if(y.video&&y.video.facingMode&&y.video.facingMode.exact){var G=y.video.facingMode.exact;y=cc(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=G;k.push(y)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&
a.video.height.ideal){var q=b(a.video.width.ideal).slice(0,3),x=b(a.video.height.ideal).slice(0,3),h={},n=0;for(h.ob=void 0;n<q.length;h={ob:h.ob},++n){h.ob=q[n];var t={},z=0;for(t.mb=void 0;z<x.length;t={mb:t.mb},++z)if(t.mb=x[z],h.ob!==a.video.width.ideal||t.mb!==a.video.height.ideal){var H=Math.max(h.ob,t.mb)/Math.min(h.ob,t.mb);H<4/3-.1||H>16/9+.1||d(function(y,G){return function(v){v.video.width.ideal=y.ob;v.video.height.ideal=G.mb;return v}}(h,t))}}}d(function(y){return ec(y)})}a.video.width&&
a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(d(function(y){delete y.video.facingMode;return y}),a.video.width&&a.video.height&&d(function(y){ec(y);delete y.video.facingMode;return y}));k.push({audio:a.audio,video:!0});return k}function fc(a){a.volume=0;Fb(a,"muted");if(bc()){if(1===a.volume){var b=function(){a.volume=
0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Fb(a,"muted")},5)}}function gc(a){var b=Ca.element,d=Ca.ph;return null===b?Promise.resolve():new Promise(function(e,k){if(b.srcObject&&b.srcObject.getVideoTracks){var q=b.srcObject.getVideoTracks();1!==q.length?k("INVALID_TRACKNUMBER"):(q=q[0],a?hc(b,e,k,d):(q.stop(),e()))}else k("BAD_IMPLEMENTATION")})}
function ic(a,b,d,e){function k(x){q||(q=!0,d(x))}var q=!1;navigator.mediaDevices.getUserMedia(e).then(function(x){function h(){setTimeout(function(){if(a.currentTime){var t=a.videoHeight;if(0===a.videoWidth||0===t)k("VIDEO_NULLSIZE");else{t={Tk:null,Ag:null,Sm:null};try{var z=x.getVideoTracks()[0];z&&(t.Sm=z,t.Tk=z.getCapabilities(),t.Ag=z.getSettings())}catch(H){}q||b(a,x,t)}}else k("VIDEO_NOTSTARTED")},700)}function n(){a.removeEventListener("loadeddata",n,!1);var t=a.play();fc(a);"undefined"===
typeof t?h():t.then(function(){h()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=x:(a.src=window.URL.createObjectURL(x),a.videoStream=x);fc(a);a.addEventListener("loadeddata",n,!1)}).catch(function(x){k(x)})}function hc(a,b,d,e){a?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(Fb(a,"autoplay"),Fb(a,"playsinline"),e&&e.audio?a.volume=0:Fb(a,"muted"),ad(e).then(function(){ic(a,b,function(){function k(x){if(0===x.length)d("INVALID_FALLBACKCONSTRAINTS");
else{var h=x.shift();ic(a,b,function(){k(x)},h)}}var q=yc(e);k(q)},e)})):d&&d("MEDIASTREAMAPI_NOTFOUND"):d&&d("VIDEO_NOTPROVIDED")}function ad(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var b=a.video.facingMode;b=b.exact||b.ideal;if(!b)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[b];return d&&0!==d.length?new Promise(function(e){Jc(function(k){k?(k=k.find(function(q){var x=
q.label;return x?d.some(function(h){return x.includes(h)}):!1}))?(a.video.deviceId={exact:k.deviceId},e("SUCCESS")):e("NO_PREFERRED_DEVICE_FOUND"):e("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Jc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,
"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function bd(){function a(L){L=L?pc.ff:1;R.width=L*I.width;R.height=L*I.height;return R}function b(L){var S=L.length-1,ha=L[S];if("data:"===ha.substring(0,5))return ha;for(ha="";0<=S;--S){var ra=L[S],Ea="http"===ra.substring(0,4).toLowerCase();ha=ra+ha;if(Ea)break}return ha}function d(L,S,ha){return new Promise(function(ra){ya.yj(S);Ba.$();Oa.isEnabled=!0;Da.isEnabled=!1;Oa.Oa||(Oa.Oa=jc.instance({}));L.Th()&&(Oa.Oa.mj(L.Th()),ya.pa(Oa.Oa));L.set();Da.isEnabled=
!1;z();var Ea=jb.Qh(ha);setTimeout(function(){Oa.isEnabled=!1;ya.yj(!1);ra(Ea)},1)})}function e(L,S){ja.Vc=.5;return new Promise(function(ha){Da.$b=L;Da.isEnabled=!0;Da.B=function(){var ra=Kc.instance(S());Da.B=null;ha(ra)}})}function k(L,S){return new Promise(function(ha,ra){Na(S+L,function(Ea){Ea.error?ra("SKU_NOT_FOUND"):ha({Tm:Ea.intrinsic.mod+".json",Rm:Ea.intrinsic.mats})})})}function q(L,S){var ha=b([I.ca,I.ua,I.Td+"/"]);S=S.map(function(ra){return ha+ra});V.model={url:b([I.ca,I.ua,I.Ud+"/"+
L]),Nc:S,Jb:!1,Ib:!1};return new Promise(function(ra){Pa.yi(V.model,function(){T.isBusy=!1;ra()})})}function x(L,S){if(!S)return L;L=L.slice(0);var ha=gb.Tl().map(function(qb){return qb.toLowerCase()}),ra;for(ra in S){var Ea=ha.indexOf(ra.toLowerCase());-1!==Ea&&(L[Ea]=S[ra])}return L}function h(L,S){return new Promise(function(ha,ra){T.set_model(L,function(){T.set_materials(S,function(){T.isBusy=!1;ha()})},function(){T.isBusy=!1;ra("CANNOT_LOAD_MODEL")})})}function n(){T.load_model=function(L,S,
ha,ra,Ea,qb){if(T.isBusy)return!1;T.isBusy=!0;S=x(S,Ea);(V.model?h(L,S):q(L,S)).then(ha).catch(qb);return!0};T.set_offset=function(L){O=L;Pa.se()};T.set_scale=function(L){D=L;Pa.te()};T.set_rx=function(L){X=L;Pa.Mj()};T.switch_shadow=ya.Fg;T.switch_bgBlur=ya.Eg;T.set_zoom=ya.rg;T.is_viewer3D=function(){return ka===fa.Ha};T.switch_viewer3D=function(L,S){if(ka===fa.kc||ka===fa.lc||ka===fa.W&&!L||ka===fa.Ha&&L||Da.isEnabled)return!1;if(ka===fa.ta)return mb!==fa.Ha||L?mb===fa.W&&L?(mb=fa.Ha,ya.pa(ja.Eb),
ya.cb(1),S&&S(),!0):!1:(mb=fa.W,ya.pa(ja.Ga),ya.cb(0),S&&S(),!0);var ha=0,ra=-1,Ea=0;ka===fa.W?(ka=fa.kc,ra=I.To):ka===fa.Ha&&(ka=fa.lc,ra=I.Wo);var qb=zc.lf();Sa=setInterval(function(){var kb=zc.lf();ha+=(kb-qb)/ra;1<=ha&&(ha=1,ka===fa.kc?(ka=fa.Ha,ya.pa(ja.Eb)):(ka=fa.W,ya.pa(ja.Ga)),S&&S(),clearInterval(Sa),Sa=null);var Lb=ka===fa.lc||ka===fa.W?1-I.Ro(ha):I.Qo(ha);ya.cb(Lb);ka!==fa.lc&&ka!==fa.kc||0!==Ea++%2||(ya.pa(ja.Vf),ja.Vf.eo(Lb));qb=kb},.016);return!0};T.capture_image=function(L,S,ha,ra){Da.$b=
L;Da.isEnabled=!0;"undefined"===typeof isAllocate&&(ha=!1);(ra="undefined"===typeof ra?!1:ra)&&ya.ke(!1);f();Da.B=function(){ya.Vi(0);c.flush();var Ea=jb.Qh(ha);S(Ea);ra&&ya.ke(!0)}};T.capture_detection=function(L,S){var ha=null===ma.Fb?ma.kb:ma.Yc;e(L,function(){return{nd:oa.nc.clone(),Wf:gb.Wh(),Sf:gb.Uh(),background:ha.clone(),Oa:xa.Ia.Xh().clone(),Rf:Xa}}).then(S)};T.process_image=function(L){function S(){return new Promise(function(vb,pb){Da.Pg=kb.updateLightInterval;e(kb.nSteps,ha).then(function(fb){Da.Pg=
3;fb?1>=fb.Vl().data[0]?(fb.H(),pb("FACE_NOT_FOUND")):d(fb,kb.isMask,!0).then(function(cd){ya.pa(ja.Ga);fb.H();vb(cd)}):pb("CRITICAL")});z()})}function ha(){return{nd:oa.nc.clone(),Wf:!1,Sf:!1,background:I.oq?!1:ma.kb.clone(!0),Oa:xa.Ia.Xh().clone()}}function ra(){return new Promise(function(vb,pb){k(kb.modelSKU,kb.glassesDBURL).then(function(fb){T.load_model(fb.Tm,fb.Rm,function(){vb()},kb.modelSKU,null,function(){pb("CANNOT_LOAD_MODEL")})}).catch(function(fb){pb(fb)})})}function Ea(){if(kb.image){var vb=
kb.image;qb(vb);return Promise.resolve(vb)}return new Promise(function(pb){var fb=new Image;fb.onload=function(){qb(fb);pb()};fb.src=kb.imageBase64})}function qb(vb){var pb=vb.width,fb=vb.height;if(pb!==I.width||fb!==I.height)Ca.Ld&&(Ca.element.width=pb,Ca.element.height=fb),J(pb,fb,kb.overSamplingFactor);Ca.Dh.drawImage(vb,0,0);f()}var kb=Object.assign({imageBase64:null,image:null,FOVHztDeg:0,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",
isMask:!0},L);if(I.Ic)throw Error("This feature cannot be called");var Lb=$a.FOVforced;kb.FOVHztDeg&&($a.FOVforced=kb.FOVHztDeg);ya.pa(ja.Ga);return new Promise(function(vb,pb){return ra().then(Ea).then(function(){S().then(function(fb){$a.FOVforced=Lb;vb(fb)}).catch(pb)}).catch(pb).catch(pb)})};T.process_offlineRendering=function(L,S,ha,ra,Ea){Pa.Fn();ra&&(T.Yj.drawImage(jb.ub(),0,0),jb.ub().parentNode.insertBefore(T.Gb,jb.ub()),T.Gb.setAttribute("class","jeefitMask"));T.set_model(S,function(){T.set_materials(ha,
function(){setTimeout(function(){d(L,ra).then(Ea);Pa.Cn(ra?function(){jb.ub().parentNode.removeChild(T.Gb)}:!1)},1)})})};T.serialize_detection=function(L){return L.ac()};T.unserialize_detection=function(L,S,ha){return Kc.Xc(L,S,ha)};T.do_instantDetection=function(L,S){Lc.m(oa.nc);Lc.start(L,S)};T.relieve_DOM=function(L,S){if(Q.Ub)return!1;y(S||160);Ia=!1;da&&clearTimeout(da);da=setTimeout(function(){y(I.ya);da=!1;v()},L);return!0};T.switch_slow=function(L,S){if(Q.Ub)return!1;"undefined"===typeof S&&
(S=I.fk);da&&(y(I.ya),v(),clearTimeout(da),da=!1);L?Ia=!1:v();y(L?S:I.ya);return!0};T.switch_deepSleep=function(L){if(ab===L)return!1;ab=!1;T.switch_sleep(L);ab=L;return!0};T.switch_sleep=function(L,S){function ha(){T.isBusy=!1;L?(mb=ka,ka=fa.ta):(ka=mb,z())}if(Q.Ub||ab||T.isBusy)return S?Promise.reject():null;if(L&&ka===fa.ta||!L&&ka!==fa.ta)return S?Promise.resolve(!1):!1;Sa&&(clearInterval(Sa),Sa=null);ka===fa.lc?(ka=fa.W,ya.pa(ja.Ga),ya.cb(0)):ka===fa.kc&&(ka=fa.Ha,ya.pa(ja.Eb),ya.cb(1));Ab.stop();
var ra=null;T.isBusy=!0;S?ra=gc(!L).then(ha):ha();return S?ra:!0};T.set_modelStandalone=function(L,S){ya.le(!1);Ac.instance({url:L.model,Nc:L.materials,Jb:!1,Ib:!1,B:function(ha){Mb=[0,0,0];ca=1;va=F=C=0;Ya=I.Lc;T.ready&&Pa.ue();S&&S();H(ha);Pa.Cg();ya.le(!0)}})};T.start_rendering=Pa.Cg;T.update_material=function(L,S){gb&&gb.Fo(L,S)};T.set_model=function(L,S,ha){gb&&(L=b([I.ca,I.ua,I.Ud+"/",L]),gb.replace(L,function(){S&&S(gb.Xk())},ha))};T.set_tweaker=function(L,S){function ha(ra){T.dh(ra);S&&S()}
"string"===typeof L?ua(I.ca+I.ua+I.xo+"/"+L,ha):ha(L)};T.dh=function(L){L&&(L.preOffset&&(Mb=L.preOffset),L.preScale&&(ca=L.preScale),L.rx&&(C=L.rx),L.beginBendZ&&(F=L.beginBendZ),L.bendStrength&&(va=L.bendStrength),L.maskBranchStartEnd&&(Ya=L.maskBranchStartEnd),T.ready&&Pa.ue())};T.set_materials=function(L,S){if(gb){var ha=b([I.ca,I.ua,I.Td+"/"]);L=L.map(function(ra){var Ea=ra;"string"===typeof ra&&(Ea=ha+ra,Ea=Ea.replace(/([^:])\/\//,"$1/"));return Ea});gb.sg(L,S)}}}function t(){ea.Sg(pc.zl);Pa.Wc();
I.Yb&&(Ba.reset(),xa.Ia.hh(Ca.ha),xa.Ia.gh());T.ready=!0;T.cd.forEach(function(L){L()});T.cd.splice(0)}function z(){Gb.reset();Ab.stop();Ba.$();G(0)}function H(L){gb&&(ya.wn(gb),gb.remove());ya.ak(L);gb=L}function y(L){N=L;Ab.update({ya:N})}function G(L){pa=-1;Da.isEnabled?pa=Da.$b:Oa.isEnabled?pa=Oa.$b:Ia?(f(),pa=ka===fa.W?Gb.V():1):(pa=I.$c[0],f());Ba.$();if(!Oa.isEnabled)for(var S=0;S<pa;++S)Z.set("s64"),ma.Cf.M(),ma.kb.h(0),oa.Oc.h(1),W.l(!1,!1),w.wa(ma.Cf),Da.isEnabled&&0===(S+1)%Da.Pg&&l();
Da.isEnabled?(Da.B&&Da.B(),Da.isEnabled=!1,c.flush(),ka!==fa.ta&&Ab.mg(G)):(ya.animate(L),ma.ig&&Math.abs(za-ja.vi)>ja.Bj&&I.Yb&&ka===fa.W&&(Ba.$(),l(),Ba.ba()),Oa.isEnabled||(Ia&&(Gb.Fj(),S=Gb.Ph(1),Y=U(I.dk,S),I.Yb&&ka===fa.W&&(ja.Bj=U(I.xi,S),ja.Vc=U(I.Km,S),ja.Vc=Math.min(ja.Vc,.5))),za=L,ka!==fa.ta&&Ab.mg(G)))}function v(){za=zc.lf();Ia=!0}function f(){var L=15;if(!Ca.Ld){var S=Ca.element.currentTime;L=S-qc;0>L&&(qc=S);if(1E3*L<I.Lo)return}Ca.ha.refresh();qc+=L;Ca.ud=L;Fa=!0;Ba.$();Z.set("s0");
oa.jg.M();oa.Oc.Ik(0);W.l(!0,!0);Z.set("s62");ma.kb.M();Ca.ha.h(0);W.l(!1,!1);null!==ma.Fb&&(Z.set("s63"),ma.Yc.o(),ma.kb.h(0),ma.Fb.h(1),W.l(!1,!1))}function g(){ma.Qj=ba.instance({isPot:!0,isLinear:!0,isFloat:!1,url:I.ca+I.ua+I.Mo});var L={isPot:!1,isLinear:!0,isFloat:!1,width:R.width,height:R.height};ma.kb=ba.instance(L);ma.Yc=ba.instance(L);Q.Cj.push(ma.kb,ma.Yc);ma.Cf=ba.instance({isPot:!0,isFloat:!1,width:w.Sh()});I.Qd&&(sb=ba.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(I.Qf||-1!==I.Pf.indexOf("//")?
"":I.ca+I.ua)+I.Pf}))}function B(){function L(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var S={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};oa.Oc=Mc.instance(L());oa.jg=ba.instance(L());oa.nc=ba.instance(L());oa.Zd=Mc.instance(L());oa.$e=ba.instance(S);S={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};oa.Tg=ba.instance(S);oa.we=ba.instance(S);ja.$d=ba.instance({width:1,
height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function K(L){ma.ig=L;if(Fa){Fa=!1;Z.set("s70");oa.Tg.M();oa.we.h(2);var S=U(I.Kk,Gb.Ph(.5));Z.G("u67",S);oa.jg.h(1);Z.G("u68",1E3*Ca.ud);W.l(!1,!1);Z.set("s71");oa.we.o();oa.Tg.h(0);W.l(!1,!1)}L.h(0);oa.Oc.ij(1);c.viewport(0,0,1,1);Z.set("s65");Z.yg("u47",Nc.get(0));W.l(!1,!1);Z.set("s66");c.viewport(1,0,2,1);W.l(!1,!1);oa.$e.M();Z.set("s67");Z.N("u58",I.He[0]*Y,I.He[1]);oa.Oc.h(0);oa.Zd.h(1);W.l(!1,!1);Z.set("s68");oa.Zd.ij(1);oa.$e.h(0);
oa.we.h(2);oa.Oc.h(3);W.l(!1,!1);Z.set("s69");oa.Zd.h(0);oa.nc.o();W.l(!1,!1)}function l(){ja.vi=za;ja.$d.M();Z.set(aa.ki?"s73":"s72");ma.ig.h(0);W.l(!1,!1);xa.Ia.Pj(Ca.ha,ja.$d,ja.Vc)}function p(){return new Promise(function(L){var S=I.ca,ha=I.Zc.split("://").shift();if("http"===ha||"https"===ha)S="";S+=I.Zc;"json"!==S.split(".").pop()&&(S+=I.neuralNetworkPath);ua(S,function(ra){ra=JSON.parse(ra);if(ra.exportData){var Ea=ra.exportData;aa.ab=aa.ab||Ea.rotationEulerAnglesFactors;aa.zc=aa.zc||Ea.deformScaleXFactor;
aa.ra=aa.ra||Ea.translationScalingFactors;aa.Ch=Ea.dyOffset||0;aa.Ah=Ea.dsOffset||0;aa.ki=Ea.isLThetaSplitCosSin||!1}w=new ac({Kc:ra.layers,Xd:"gpuRawAvg",Wd:K});L()})})}function m(L){a(L);L=I.width;var S=I.height;M.rb[0]=1;M.rb[1]=L/S;Nc.m({Yd:I.scanOverlapFactors,Fi:I.scanNScaleLevels,Z:L,yf:S,aj:I.scanScale0Factor,ra:aa.ra,ng:!0});rc=L>S?[L/S,1]:[1,S/L];Q.Ma=!0}function A(){Z.j("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:M.rb},{type:"1f",name:"u43",
value:aa.zc},{type:"1f",name:"u45",value:aa.Ch},{type:"1f",name:"u44",value:aa.Ah}]);Z.j("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u51",value:I.vo},{type:"1f",name:"u52",value:I.dl},{type:"3f",name:"u48",value:[aa.ra[0]*M.rb[0],aa.ra[1]*M.rb[1],aa.ra[2]]},{type:"3f",name:"u49",value:[I.mc[0][0],I.mc[1][0],I.mc[2][0]]},{type:"3f",name:"u50",value:[I.mc[0][1],I.mc[1][1],I.mc[2][1]]}]);Z.j("s66",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},
{type:"2f",name:"u55",value:I.nn},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:I.Ej},{type:"1f",name:"u56",value:I.Al}]);Z.j("s67",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u57",value:1},{type:"2f",name:"u58",value:I.He},{type:"1f",name:"u59",value:I.Dn},{type:"1f",name:"u60",value:I.mn}]);Z.j("s68",[{type:"1i",name:"u57",value:1},{type:"1i",name:"u61",value:0},{type:"1i",name:"u62",value:2},{type:"1i",name:"u63",value:3},{type:"2f",name:"u42",value:M.rb},{type:"1f",name:"u65",
value:w.Sh()},{type:"2f",name:"u64",value:I.zn}]);Z.j("s69",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u66",value:I.Gn}]);Z.j("s70",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1i",name:"u62",value:2},{type:"3f",name:"u53",value:aa.ab},{type:"3f",name:"u54",value:I.Ej}]);Z.j("s71",[{type:"1i",name:"u62",value:0},{type:"2f",name:"u70",value:I.wo},{type:"2f",name:"u71",value:I.En}]);Z.j("s72",[{type:"1i",name:"u46",value:0}]);Z.j("s73",[{type:"1i",name:"u46",value:0}]);
Z.j("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u72",value:1}])}function J(L,S,ha){var ra=0===ha,Ea=a(ra);I.width=L;I.height=S;m(ra);A();Q.Cj.forEach(function(qb){qb.resize(L,S)});ha=ra?1:ha;ea.resize(Ea.width*ha,Ea.height*ha);Pa.Wc();eb.zg(Ca.element.videoWidth||Ca.element.width,Ca.element.videoHeight||Ca.element.height);eb.Gg();eb.zj()}function P(){Ab.stop();Q.hb&&(clearTimeout(Q.hb),Q.hb=null);if(!Q.Ub){var L=Q.width,S=Q.height;if(I.width===L&&I.height===S)z();else if(ka!==fa.W&&ka!==
fa.Ha)Q.hb=setTimeout(P,I.Zi);else{var ha="undefined"===typeof yb?!1:yb.get_mode(),ra=ka;ka=fa.ta;Q.Ub=!0;Da.isEnabled=!0;Da.B=function(){Da.isEnabled=!1;Q.Ub=!1;v();y(I.ya);da&&clearTimeout(da);da=!1;ka=ra};J(L,S,0);z();ka===fa.Ha&&(ka=fa.W,T.switch_viewer3D(!0,!1));ha&&yb.switch_mode(ha)}}}var C,F,M={rb:[-1,-1]},r=null,u=[.5,0,0,.5],R={width:-1,height:-1},Q={width:-1,height:-1,hb:null,Ub:!1,Ma:!1,Cj:[]},ia=[0,I.ae[1],I.ae[2]],aa={ab:[-I.ab[0],-I.ab[1],I.ab[2]],zc:I.zc,ra:I.ra,Ch:0,Ah:0,ki:!1},N=
I.ya,da=null,w=null;a(!0);var O=[0,0,0],D=1,X=0,ma={kb:null,Yc:null,Cf:null,Qj:null,ig:null,Fb:null},oa={jg:null,nc:null,Zd:null,$e:null,Tg:null,we:null},za=0,Fa=!1,ja={Ga:null,Eb:null,Vf:null,vi:0,Bj:I.xi[1],Vc:.1,$d:null},ta=!1,Ia=!0,Y=1,pa=-1,fa={ta:-1,W:0,Ha:1,kc:2,lc:3},ka=fa.W,Sa=null,mb=fa.W,ab=!1,Da={isEnabled:!1,$b:1,Pg:3,B:null},Oa={isEnabled:!1,Oa:null,$b:0},sb=null,rc=-1,Bb=!1,Hb=!1,Pb=!1,kc=[0,0,0],Qb=1,Vb,lc,Ua,Mb=[0,0,0],ca=1,va=F=C=0,Ya=I.Lc,Ja=[0,0,0],Xa={scale:1,offsetX:0,offsetY:0},
qc=0,Pa={m:function(){Z.sc([{id:"s62",name:"_",u:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",I:["a0"],R:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u43,u44,u45;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u41,h);vec2 c=b.gb,a=b.a*u42;vec4 l=texture2D(u41,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u43),1.);a*=n,a*=1.+u44;vec2 o=a0*.5;float d=texture2D(u41,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u45)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
I:["a0"],R:[2],i:"u1 u41 u42 u43 u44 u45".split(" "),precision:"lowp"},{id:"s65",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48,u49,u50;uniform float u51,u52;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u46,vec2(.625,.625)),k=texture2D(u46,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u52;vec4 a=texture2D(u41,f);m?a.r=2.:a.r>u51?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u47);else{float n=dot(e,texture2D(u46,vec2(.875,.875))),o=dot(e,texture2D(u46,vec2(.125,.625))),p=dot(e,texture2D(u46,vec2(.375,.625))),b=texture2D(u41,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u41,g).a;vec3 s=mix(u49,u50,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u48*s*a.a;}gl_FragColor=a;}",
i:"u46 u41 u47 u51 u48 u52 u49 u50".split(" ")},{id:"s66",name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u53,u54;uniform vec2 u55;uniform float u56;const vec4 v=vec4(1.),f=vec4(0.),e=vec4(.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u41,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u46,vec2(.125,.125)),e),a=smoothstep(u55.x,u55.y,m);vec4 n=texture2D(u41,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u46,vec2(.125,.875))),q=dot(e,texture2D(u46,vec2(.375,.875))),r=dot(e,texture2D(u46,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u54+s*u53;float c=texture2D(u41,i).r,d=b.z*u56;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u46 u41 u55 u53 u54 u56".split(" ")},{id:"s67",name:"_",g:"uniform sampler2D u41,u57;uniform vec2 u58;uniform float u59,u60;const vec4 f=vec4(1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.),j=vec4(0.,0.,0.,0.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 k=texture2D(u41,vv0),l=texture2D(u57,vv0),q=texture2D(u41,g),m=texture2D(u57,g);float n=pow(m.a,u60),o=mix(u58.y,u58.x,n),b=step(.66,vv0.x),c=step(.34,vv0.x)*(1.-b);vec4 a=mix(h,i,c);a=mix(a,j,b);vec4 d=max(o*f,a);d*=mix(f,u59*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),c);vec4 p=k-l;gl_FragColor=p*d;}",
i:["u41","u57","u58","u59","u60"],precision:"highp"},{id:"s68",name:"_",g:"uniform sampler2D u57,u61,u62,u63;uniform vec2 u42,u64;uniform float u65;const vec4 u=vec4(1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u63,i);float a=k.a;a*=texture2D(u62,g).a,a*=texture2D(u62,h).a;vec4 l=texture2D(u57,vv0),m=texture2D(u61,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u57,f),n=texture2D(u63,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u65*abs(o-p)/(u42*q);float r=max(d.x,d.y),s=smoothstep(u64.x,u64.y,r);vec4 t=texture2D(u63,vv0);gl_FragColor=mix(b,t,s);}",
i:"u57 u61 u62 u63 u42 u65 u64".split(" "),precision:"highp"},{id:"s69",name:"_",g:"uniform sampler2D u41;uniform float u66;const vec4 g=vec4(1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u41,vv0);float b=step(vv0.x,.33),c=texture2D(u41,f).g;a.a+=b*a.a*u66*abs(sin(c)),gl_FragColor=a;}",i:["u41","u66"],precision:"highp"},{id:"s70",name:"_",g:"uniform sampler2D u41,u62,u46;uniform vec3 u53,u54;uniform float u67,u68;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u41,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u62,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u46,k)),o=dot(e,texture2D(u46,l)),p=dot(e,texture2D(u46,m));vec3 q=mix(i,u53,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u54+b-r,a)/u68;vec4 s=mix(vec4(b,0.),j,vec4(u67*g,0.));gl_FragColor=s;}",
i:"u41 u62 u46 u67 u68 u53 u54".split(" "),precision:"highp"},{id:"s71",name:"_",g:"uniform sampler2D u62;uniform vec2 u70,u71;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u70.x,u71.x,a),d=mix(u70.y,u71.y,a);vec3 b=texture2D(u62,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u62","u70","u71"],precision:"highp"},{id:"s72",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415;void main(){float a=dot(texture2D(u46,vec2(.375,.375)),e),b=dot(texture2D(u46,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u46,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u46,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u46"]},{id:"s73",name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u46,vec2(.875,.375)),e),c=dot(texture2D(u46,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u46,vec2(.625,.375)),e),a=dot(texture2D(u46,vec2(.125,.375)),e),h=dot(texture2D(u46,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u46"]},{id:"s63",name:"_",g:"uniform sampler2D u1,u72;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u72);}",
i:["u1","u72"]}]);B();Ab.m({ji:!1,ya:N});Gb.m({Yf:0,n:I.$c[1]-I.$c[0]+1,wi:I.$c[0]});T.set_videoRotation=function(L){$a.rotate=L;T.ready&&(eb.zg(Ca.element.videoWidth,Ca.element.videoHeight),eb.Gg())};T.set_viewRotation=function(){};T.set_LUT=function(L){return new Promise(function(S){L?ba.instance({url:L,isFloat:!1,isFlipY:!1,B:function(ha){ma.Fb=ha;Pa.Wc();S()}}):(ma.Fb=null,Pa.Wc(),S())})};T.resize=function(L,S,ha){T.ready&&(Q.hb&&(clearTimeout(Q.hb),Q.hb=null),Ab.stop(),ha=ha?pc.ff:1,Q.width=
L*ha,Q.height=S*ha,Q.hb=setTimeout(P,I.Zi))};return p()},so:function(){g();m(!0);A();Pa.zj();n();T.bd.forEach(function(L){L()});T.bd.splice(0);V.model&&!T.isBusy?Pa.yi(V.model):I.Ic||t();return Promise.resolve()},Ul:function(){return R},v:function(){Ab.v();return new Promise(function(L){T.switch_sleep(!0,!0).finally(function(){w&&w.v();ea.v();jb.v();c&&(c=null);w=null;I.Qf=!1;gb=null;Ia=!0;Y=1;pa=-1;ka=fa.W;Sa=null;mb=fa.W;Object.assign(Ca,Oc);Object.assign(I,Pc);L()}).catch(function(S){throw Error(S);
})})},Wc:function(){ya.gj(oa.nc,null===ma.Fb?ma.kb:ma.Yc,ja.$d,ma.Qj)},Rl:function(){return Xa},oj:function(L){Xa=L},se:function(){Ja[0]=O[0]-Xa.offsetX;Ja[1]=O[1]+Xa.offsetY;Ja[2]=O[2];ya.Mn(ia,Mb,Ja)},te:function(){ya.Nn(D*I.hn,ca,Xa.scale)},Mj:function(){ya.On(X+C)},Co:function(){ya.Kn(I.gd+F,I.Lb+va)},Eo:function(){ya.Ln(Ya)},ue:function(){Pa.se();Pa.te();Pa.Mj();Pa.Co();Pa.Eo()},Fn:function(){Ab.stop();Sa&&(clearInterval(Sa),Sa=null);Oa.isEnabled=!0;Oa.$b=0;Bb=ya.Ql();Hb=gb.Wh();Pb=gb.Uh();Qb=
ca;kc=Mb;Vb=Ya;lc=F;Ua=va;Da.isEnabled=!1;ya.ke(!1)},Cn:function(L){function S(){2===++ha&&(Oa.isEnabled=!1,ca=Qb,Mb=kc,Ya=Vb,F=lc,va=Ua,Pa.ue(),ya.pa(Bb),z(),L&&L())}var ha=0;ka===fa.kc?ka=fa.Ha:ka===fa.lc&&(ka=fa.W);ya.cb(ka===fa.W?0:1);gb.replace(Hb,S);gb.sg(Pb,S);Pa.Wc();ya.ke(!0)},zj:function(){var L=Math.tan(Ca.Pb/2);ya.fj({hf:I.hf/L,Hn:L,ln:Ca.Qi,Ea:I.Ea,Xf:I.Xf,Tj:M.rb,Xj:I.Po,Dc:I.Dc,xf:I.xf,vf:I.vf,wf:I.wf,Lc:Ya,Ie:I.Ie,Ve:I.Ve,lg:I.lg,hc:I.hc,mo:I.tj,no:I.uj,je:I.je,ic:I.ic,od:I.od,Ye:I.Ye,
Xe:I.Xe,We:I.We,Le:I.Le,Ke:I.ca+I.ua+I.Ke,gd:I.gd+F,Lb:I.Lb+va,tf:I.tf,Yg:I.Yg,Xg:I.Xg,ze:I.ze,Vo:I.Uo,ye:Ca.ye,Qd:I.Qd,Mm:sb,Pd:I.Pd,Rd:I.Rd,Of:I.Of,Lm:rc,Hg:I.Hg})},Uk:function(){var L=$a.Ce,S=$a.Be,ha=1/Math.tan(Ca.Pb/2),ra=jb.Y()/jb.O();Ca.Qi=[ha,0,0,0,0,ha/ra,0,0,0,0,-(S+L)/(S-L),-1,0,0,-2*L*S/(S-L),0];Ca.ye=1/Math.tan(I.So*Math.PI/360)/ha},zg:function(L,S){r=[.5,.5];L=S/L;S=jb.Y()/jb.O();90===Math.abs($a.rotate)&&(L=1/L);L>S?r[1]*=S/L:r[0]*=L/S;u[0]=0;u[1]=0;u[2]=0;u[3]=0;switch($a.rotate){case 0:u[0]=
r[0];u[3]=r[1];break;case 180:u[0]=-r[0];u[3]=-r[1];break;case 90:u[1]=r[0];u[2]=-r[1];break;case -90:u[1]=-r[0],u[2]=r[1]}I.li||(u[0]*=-1,u[1]*=-1);S=$a.FOVforced;Ca.Pb=2*Math.atan(2*r[0]*Math.tan((S?S:1<L?$a.FOVmobile:$a.FOVdesktop)*Math.PI/180/2));Pa.Uk()},Gg:function(){Z.j("s62",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u40",value:u}])},Bf:function(L,S){return new Promise(function(ha,ra){Pa.km(L,S);Promise.all([Pa.m(),Pa.lm()]).then(function(){Pa.di();ha()}).catch(function(Ea){T.qb&&T.qb("GL_INCOMPATIBLE",
"Cannot init JEELIZVTO");ra(Ea)})})},km:function(L,S){T.Hb=document.createElement("canvas");T.Gb=document.createElement("canvas");T.Gb.width=I.width;T.Gb.height=I.height;T.Yj=T.Gb.getContext("2d");T.replace_video=function(ha){Ca.element=ha;Ca.Ng.ka=Ca.element;return!0};T.rc=T.Hb.getContext("2d");T.capture_background=function(ha,ra){ha="undefined"===typeof ha?L:ha;ra="undefined"===typeof ra?S:ra;T.Hb.width=ha;T.Hb.height=ra;var Ea=ha/ra,qb=0,kb=0;if(L/S>Ea){var Lb=S*Ea;Ea=S;qb=Math.round((L-Lb)/2)}else Lb=
L,Ea=L/Ea,kb=Math.round((S-Ea)/2);T.rc.save();T.rc.translate(ha,0);T.rc.scale(-1,1);T.rc.drawImage(Ca.element,qb,kb,Lb,Ea,0,0,ha,ra);T.rc.restore();ha=document.createElement("canvas");ha.width=T.Hb.width;ha.height=T.Hb.height;ha.getContext("2d").drawImage(T.Hb,0,0);return ha}},di:function(){window.CanvasListeners&&(yb.init({qa:jb.ub()}),T.init_listeners=Pa.di,T.add_listener=yb.add_listener,T.remove_listener=yb.remove_listener,T.animate_swipe=yb.animate_swipe,T.switch_modeInteractor=yb.switch_mode,
T.get_modeInteractor=yb.get_mode,yb.add_listener("move",function(L,S){ka===fa.W&&(I.Nm&&(Xa.offsetX-=S[0]*I.Ai,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-I.Sd),I.Sd)),Xa.offsetY-=S[1]*I.Ai,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-I.Sd),I.Sd),Pa.se())},!0).add_listener("pinch",function(L,S){ka===fa.W&&(Xa.scale+=S*I.Om,Xa.scale=Math.min(Math.max(Xa.scale,I.Bi[0]),I.Bi[1]),Pa.te())},!0))},lm:function(){return new Promise(function(L,S){ea.m({Jd:!1,Sk:!1,expand:!1,qa:jb.ub(),Qb:jb,onload:function(){ja.Eb=
jc.instance({Kb:I.ca+I.ua+bb.No,uc:I.ca+I.ua+bb.Oo,tc:bb.Rj,vc:bb.Sj});I.Yb?(ja.Ga=jc.instance({}),xa.Ia.pa(ja.Ga)):ja.Ga=ja.Eb;ya.pa(ja.Ga);ja.Vf=I.Yb?dd.instance({Jm:ja.Ga,Hm:ja.Eb}):ja.Eb;L()}})||S("CANNOT_INIT_JE3D")})},Cg:function(){ta||(ta=!0,Pa.ue(),t(),za=0,I.Ic&&z())},yi:function(L,S){L=Ac.instance({Me:function(){Pa.Cg();S&&S()},url:L.url,Nc:L.Nc,Jb:L.Jb,Ib:L.Ib});H(L)},Aj:function(){if(I.Yb){var L=Object.assign({},bb,{Ab:b([I.ca,I.ua,bb.Ab])});xa.Ia.ib(L)}}};return Pa}function ed(){return new Promise(function(a,
b){T.Ee&&T.Ee();Ca.Ld=!1;var d={width:{min:$a.minWidth,max:$a.maxWidth,ideal:$a.idealWidth},height:{min:$a.minHeight,max:$a.maxHeight,ideal:$a.idealHeight},facingMode:{ideal:"user"}},e={video:d,audio:!1};Ca.ph=e;d&&-1!==Ca.deviceId&&dc(e,Ca.deviceId);hc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(k){T.Fe&&T.Fe(k);Qc(k).then(a).catch(b)},function(k){T.qb&&T.qb("WEBCAM_UNAVAILABLE",k);b(k)},e)})}function Qc(a){Ca.element=a;a=Ca.element.videoWidth||
Ca.element.width;var b=Ca.element.videoHeight||Ca.element.height;Ca.Ng={ka:Ca.element,isPot:!1,isFloat:!1,isFlipY:!0};Ca.ha=ba.instance(Ca.Ng);eb.zg(a,b);return eb.Bf(a,b).then(function(){eb.Gg();return eb.so()}).catch(function(d){return Promise.reject(d)})}function fd(){var a=document.createElement("canvas");a.width=I.width;a.height=I.height;Ca.Dh=a.getContext("2d");Ca.Ld=!0;return Qc(a)}function Wb(a){return 3===arguments.length?this.sb(arguments):this.set(a)}function Rc(a,b){b=Math.floor(b);a.r=
(b>>16&255)/255;a.X=(b>>8&255)/255;a.b=(b&255)/255}function gd(a,b){function d(h){void 0!==h&&1>parseFloat(h)&&console.warn("JETHREE.Color: Alpha component of "+b+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var k=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(255,parseInt(e[1],10))/255;a.X=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/255;d(e[5]);return}if(e=
/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){a.r=Math.min(100,parseInt(e[1],10))/100;a.X=Math.min(100,parseInt(e[2],10))/100;a.b=Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(k)){k=parseFloat(e[1])/360;var q=parseInt(e[2],10)/100,x=parseInt(e[3],10)/100;d(e[5]);a.Jn(k,q,x);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(b)){e=e[1];k=e.length;if(3===k){a.r=
parseInt(e.charAt(0)+e.charAt(0),16)/255;a.X=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===k){a.r=parseInt(e.charAt(0)+e.charAt(1),16)/255;a.X=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}b&&0<b.length&&(e=hd[b],void 0!==e?Rc(a,e):console.warn("JETHREE.Color: Unknown color "+b))}function sc(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.S=void 0!==e?e:1}function Sc(a,b,d){var e=b.C,k=b.D,q=b.F;
b=b.S;var x=d.C,h=d.D,n=d.F;d=d.S;a.C=e*d+b*x+k*n-q*h;a.D=k*d+b*h+q*x-e*n;a.F=q*d+b*n+e*h-k*x;a.S=b*d-e*x-k*h-q*n;return a}function Xb(a,b){this.x=a||0;this.y=b||0}function Va(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0}function Tc(a,b){var d=a.x,e=a.y,k=a.z;a.x=e*b.z-k*b.y;a.y=k*b.x-d*b.z;a.z=d*b.y-e*b.x}function Yb(a,b,d,e){this.C=a||0;this.D=b||0;this.F=d||0;this.Ra=e||Yb.Uj}function Bc(a,b){this.min=void 0!==a?a:new Va(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new Va(-Infinity,-Infinity,
-Infinity)}function tc(a){return(new Va).dd(a.min,a.max).Ca(.5)}function id(a,b){a.min.min(b);a.max.max(b)}function Zb(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Uc(a,b,d){var e=b.elements,k=d.elements;d=a.elements;b=e[0];var q=e[4],x=e[8],h=e[12],n=e[1],t=e[5],z=e[9],H=e[13],y=e[2],G=e[6],v=e[10],f=e[14],g=e[3],B=e[7],K=e[11];e=e[15];var l=k[0],p=
k[4],m=k[8],A=k[12],J=k[1],P=k[5],C=k[9],F=k[13],M=k[2],r=k[6],u=k[10],R=k[14],Q=k[3],ia=k[7],aa=k[11];k=k[15];d[0]=b*l+q*J+x*M+h*Q;d[4]=b*p+q*P+x*r+h*ia;d[8]=b*m+q*C+x*u+h*aa;d[12]=b*A+q*F+x*R+h*k;d[1]=n*l+t*J+z*M+H*Q;d[5]=n*p+t*P+z*r+H*ia;d[9]=n*m+t*C+z*u+H*aa;d[13]=n*A+t*F+z*R+H*k;d[2]=y*l+G*J+v*M+f*Q;d[6]=y*p+G*P+v*r+f*ia;d[10]=y*m+G*C+v*u+f*aa;d[14]=y*A+G*F+v*R+f*k;d[3]=g*l+B*J+K*M+e*Q;d[7]=g*p+B*P+K*r+e*ia;d[11]=g*m+B*C+K*u+e*aa;d[15]=g*A+B*F+K*R+e*k;return a}function Cc(a,b,d,e,k,q){this.a=
a;this.b=b;this.c=d;this.Da=e instanceof Va?e:new Va;this.xe=Array.isArray(e)?e:[];this.color=k instanceof Wb?k:new Wb;this.Vg=Array.isArray(k)?k:[];this.Zb=void 0!==q?q:0}function jd(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var k=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||k||(k=!0,d&&d(404));if(4===e.readyState&&200===e.status){var q=null;try{q=JSON.parse(e.responseText)}catch(x){d&&d(-1)}b&&q&&b(q)}};e.onerror=function(){d&&d(0)};e.send()}function Dc(a,b,d){"object"===
typeof a?b(a):jd(a,b,d)}function kd(a){return new Promise(function(b,d){Dc(a,b,d)})}function ld(a,b){for(var d=new Va,e=new Va,k=0,q=b.length;k<q;k++){var x=b[k],h=a[x.a],n=a[x.b],t=a[x.c];h&&n&&t&&(d.gb(t,n),e.gb(h,n),Tc(d,e),0!==d.Jf()&&(d.normalize(),x.Da.L(d)))}}function md(a,b){for(var d=Array(a.length),e=0,k=a.length;e<k;++e)d[e]=new Va;e=new Va;k=new Va;for(var q=0,x=b.length;q<x;++q){var h=b[q],n=a[h.a],t=a[h.b],z=a[h.c];n&&t&&z&&(e.gb(z,t),k.gb(n,t),Tc(e,k),d[h.a].add(e),d[h.b].add(e),d[h.c].add(e))}e=
0;for(a=a.length;e<a;++e)d[e].normalize();a=0;for(e=b.length;a<e;++a)h=b[a],k=h.xe,q=d[h.a],x=d[h.b],h=d[h.c],q&&x&&h&&(3===k.length?(k[0].L(q),k[1].L(x),k[2].L(h)):(k[0]=q.clone(),k[1]=x.clone(),k[2]=h.clone()));return d}function nd(a,b,d,e){function k(A){p.L(b[A]);m.L(p);var J=h[A];K.L(J);K.sub(p.Ca(p.qd(J))).normalize();var P=m.x,C=m.y,F=m.z,M=J.x,r=J.y;J=J.z;l.x=C*J-F*r;l.y=F*M-P*J;l.z=P*r-C*M;P=0>l.qd(n[A])?-1:1;x[4*A]=K.x;x[4*A+1]=K.y;x[4*A+2]=K.z;x[4*A+3]=P}for(var q=a.length,x=new Float32Array(4*
q),h=Array(q),n=Array(q),t=0;t<q;t++)h[t]=new Va,n[t]=new Va;var z=new Va,H=new Va,y=new Va,G=new Xb,v=new Xb,f=new Xb,g=new Va,B=new Va;e.forEach(function(A){var J=A.a,P=A.b;A=A.c;z.L(a[J]);H.L(a[P]);y.L(a[A]);G.L(d[J]);v.L(d[P]);f.L(d[A]);var C=H.x-z.x,F=y.x-z.x,M=H.y-z.y,r=y.y-z.y,u=H.z-z.z,R=y.z-z.z,Q=v.x-G.x,ia=f.x-G.x,aa=v.y-G.y,N=f.y-G.y,da=1/(Q*N-ia*aa);g.set((N*C-aa*F)*da,(N*M-aa*r)*da,(N*u-aa*R)*da);B.set((Q*F-ia*C)*da,(Q*r-ia*M)*da,(Q*R-ia*u)*da);h[J].add(g);h[P].add(g);h[A].add(g);n[J].add(B);
n[P].add(B);n[A].add(B)});var K=new Va,l=new Va,p=new Va,m=new Va;e.forEach(function(A){k(A.a);k(A.b);k(A.c)});return x}function Vc(a,b,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))}var V={sh:!0,vp:!1,wp:!1,cl:!1,rh:!1,up:!1,Pa:!1,Jd:!1,fq:!1,ca:"",Di:"",Ak:700,zk:200,th:!1,Ho:!1,Io:!1,Go:!1,gk:3,Nb:!1,eh:!0,Kb:"images/backgrounds/interior2.jpg",uc:"images/backgrounds/interior_light.jpg",Ck:[256,256,512,512],tc:2.1,vc:8,Bk:[64,128,256,256],rm:[60,96,160,250],qm:[8,12,18,40],Pc:2.2,fg:1,Ne:300,ih:500,
Oe:50,Mk:0,Nk:0,jp:45,lp:1,kp:1E3,jh:20,Xo:10,Yo:10,Zo:5,gn:.1,Ki:20,Ni:100,Oi:100,fn:-Math.PI/3,en:Math.PI/3,Mi:0,Dj:0,ud:[40,32,16,16],ek:[0,.87,.92,.9],bn:2,Wm:100,ea:!1,hk:16,ik:.4,kk:[.72,.73,.72,.74],vk:1.2,sk:[.5,.5,.5,1],xk:140,wk:280,yk:1.2,lk:20,mk:40,uk:[6,9,9,12],rk:[.03,.02,.02,.018],qk:[.35,.35,.4,.5],nk:[.2,.2,.2,.2],jk:[.1,.15,.15,.15],tk:[200,200,150,120],pk:[1,2,3,5],oo:1.1,zq:[.25,.5,1,2],Aq:256,yq:256,xq:200,po:[40,80,200,500],qo:[35,45,80,120],Yk:!0,Zk:"CCW"},Wc={},Z=function(){function a(r,
u,R){u=r.createShader(u);r.shaderSource(u,R);r.compileShader(u);return r.getShaderParameter(u,r.COMPILE_STATUS)?u:null}function b(r,u,R){u=a(r,r.VERTEX_SHADER,u);R=a(r,r.FRAGMENT_SHADER,R);r===c&&h.push(u,R);var Q=r.createProgram();r.attachShader(Q,u);r.attachShader(Q,R);r.linkProgram(Q);return Q}function d(r){return["float","sampler2D","int"].map(function(u){return"precision "+r+" "+u+";\n"}).join("")}function e(r,u){u.P=u.P?!0:!1;if(!u.P){u.u=u.u||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
u.I=u.I||["a0"];u.R=u.R||[2];u.precision=u.precision||y;u.id=z++;void 0!==u.bj&&(u.bj.forEach(function(ia,aa){u.g=u.g.replace(ia,u.Fa[aa])}),u.bj.splice(0));u.Wg=0;u.R.forEach(function(ia){u.Wg+=4*ia});var R=d(u.precision);u.oa=b(r,R+u.u,R+u.g);u.A={};u.i.forEach(function(ia){u.A[ia]=r.getUniformLocation(u.oa,ia)});u.attributes={};u.va=[];u.I.forEach(function(ia){var aa=r.getAttribLocation(u.oa,ia);u.attributes[ia]=aa;u.va.push(aa)});if(u.s){r.useProgram(u.oa);t=u;n=u.id;for(var Q in u.s)r.uniform1i(u.A[Q],
u.s[Q])}u.Ma=!0}}function k(r){wb.rj(M);n!==r.id&&(M.K(),n=r.id,t=r,c.useProgram(r.oa),r.va.forEach(function(u){0!==u&&c.enableVertexAttribArray(u)}))}function q(r,u,R){e(r,u,R);r.useProgram(u.oa);r.enableVertexAttribArray(u.attributes.a0);n=-1;return t=u}function x(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],s:{u1:0}}}var h=[],n=-1,t=null,z=0,H=!1,y="highp",G=["u1"],v=["u0"],f={u1:0},g={u0:0},B={u1:0,u2:1},K={u1:0,u3:1},l=["u1","u3","u4"],
p={u5:0},m=["u6","u7","u8","u9"],A={u6:0,u7:1},J={s0:x(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:G,s:f,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],s:B},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],s:f,P:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:G,s:f},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],s:B},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:G,s:f},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:G,s:f},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],s:g},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],s:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:G,s:f},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],s:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],s:f},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:G,s:f,P:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:G,s:f,P:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],s:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,s:g,P:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,s:g,P:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:v,s:g,P:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,s:g,P:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,s:g},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,s:g},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:v,s:g,P:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],s:{u0:0,u16:1},P:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],s:f},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],s:Object.assign({u19:2},A),P:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:m,s:A},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(m),s:A,P:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(m),s:Object.assign({u25:3,u22:4,u23:5,u24:6},A),P:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(m),s:Object.assign({u3:2},A)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],s:A,P:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:l,s:K},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(l),s:K,P:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:l,s:K,P:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(l),s:K,P:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:l,s:K,P:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:G,s:f,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],s:f,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],s:f,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],s:B,P:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],s:B,P:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],s:p},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
s:p,P:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],s:f,precision:"lowp",P:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
s:f,precision:"lowp",P:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],s:{u1:0,u16:1,u31:2},P:!0}},P={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Fa:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},C=null,F=null,M={Xb:function(){return H},m:function(){if(!H){C=Ka(J,2);F=Ka(P,2);y="highp";c.getShaderPrecisionFormat&&(c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT),c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT));for(var r in C)e(c,C[r],r);Z.set("s0");c.enableVertexAttribArray(0);H=!0}},sc:function(r){r.forEach(function(u){M.ma(u)})},ma:function(r){C[r.id]=r;e(c,r,r.id)},om:function(r,u,
R){u||(u=r);C[u]=Object.create(F[r]);C[u].wm=!0;F[r].Fa&&F[r].Fa.forEach(function(Q,ia){C[u].g=C[u].g.replace(new RegExp(Q,"g"),R[ia])});e(c,C[u],u)},set:function(r){var u=C[r];u.P&&(u.P=!1,e(c,u,r));k(u)},Bb:function(r){return q(r,x(),"s48")},fe:function(r){return q(r,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s49")},yl:function(r){return"undefined"===typeof C[r]?!1:C[r].Ma},K:function(){-1!==n&&(n=-1,t.va.forEach(function(r){0!==r&&c.disableVertexAttribArray(r)}))},he:function(){var r=
0;t.va.forEach(function(u,R){R=t.R[R];c.vertexAttribPointer(u,R,c.FLOAT,!1,t.Wg,r);r+=4*R})},xl:function(){c.enableVertexAttribArray(0)},dc:function(){M.ec(c)},ec:function(r){r.vertexAttribPointer(t.va[0],2,r.FLOAT,!1,8,0)},ge:function(r,u){c.uniform1i(t.A[r],u)},G:function(r,u){c.uniform1f(t.A[r],u)},N:function(r,u,R){c.uniform2f(t.A[r],u,R)},wg:function(r,u){c.uniform2fv(t.A[r],u)},yg:function(r,u){c.uniform3fv(t.A[r],u)},xg:function(r,u,R,Q){c.uniform3f(t.A[r],u,R,Q)},ho:function(r,u,R,Q,ia){c.uniform4f(t.A[r],
u,R,Q,ia)},xa:function(r,u){c.uniform4fv(t.A[r],u)},io:function(r,u){c.uniformMatrix2fv(t.A[r],!1,u)},jo:function(r,u){c.uniformMatrix3fv(t.A[r],!1,u)},Tc:function(r,u){c.uniformMatrix4fv(t.A[r],!1,u)},j:function(r,u){M.set(r);u.forEach(function(R){switch(R.type){case "4f":c.uniform4fv(t.A[R.name],R.value);break;case "3f":c.uniform3fv(t.A[R.name],R.value);break;case "2f":c.uniform2fv(t.A[R.name],R.value);break;case "1f":c.uniform1f(t.A[R.name],R.value);break;case "1i":c.uniform1i(t.A[R.name],R.value);
break;case "mat2":c.uniformMatrix2fv(t.A[R.name],!1,R.value);break;case "mat3":c.uniformMatrix3fv(t.A[R.name],!1,R.value);break;case "mat4":c.uniformMatrix4fv(t.A[R.name],!1,R.value)}})},Kp:function(){return"lowp"},v:function(){M.K();c.disableVertexAttribArray(0);for(var r in C){var u=C[r];u.Ma&&(u.Ma=!1,c.deleteProgram(u.oa));u.wm&&delete C[r]}h.forEach(function(R){c.deleteShader(R)});h.splice(0);z=0;H=!1;t=null;n=-1}};return M}(),c=null,jb=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function b(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,f,g){v.setAttribute("width",f);v.setAttribute("height",g)}function e(v){function f(){Ib.v();Ga.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(b())return!1;var g=document.createElement("canvas");d(g,5,5);var B=null;try{B=g.getContext("webgl2",v)}catch(K){return!1}if(!B)return!1;k(B);Ga.Eh(B);v=Ga.Ze(B);if(!v.Wa&&!v.Ya)return f(),!1;v=Ib.kh(B,v);f();return v?!0:!1}function k(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var q=null,x=null,h=null,n=null,t=!0,z=null,H=null,y=[],G={O:function(){return q.width},Y:function(){return q.height},ub:function(){return q},Cl:function(){return c},la:function(){return t},flush:function(){c.flush()},
Sp:function(){Ba.$();G.An()},An:function(){ba.reset();W.reset();Z.K();Z.xl();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);W.kd();Z.dc()},Hl:function(){z||(z=new Uint8Array(q.width*q.height*4));c.readPixels(0,0,q.width,q.height,c.RGBA,c.UNSIGNED_BYTE,z);return z},Fp:function(){return q.toDataURL("image/jpeg")},Gp:function(){Ba.ba();x||(x=document.createElement("canvas"),h=x.getContext("2d"));d(x,q.width,q.height);for(var v=G.Hl(),f=h.createImageData(x.width,x.height),g=x.width,B=x.height,K=f.data,l=
0;l<B;++l)for(var p=B-l-1,m=0;m<g;++m){var A=4*(l*g+m),J=4*(p*g+m);K[A]=v[J];K[A+1]=v[J+1];K[A+2]=v[J+2];K[A+3]=v[J+3]}h.putImageData(f,0,0);return x.toDataURL("image/png")},Qh:function(v){!x&&v&&(x=document.createElement("canvas"),h=x.getContext("2d"));var f=v?x:document.createElement("canvas");d(f,q.width,q.height);(v?h:f.getContext("2d")).drawImage(q,0,0);return f},m:function(v){v=Object.assign({Xa:null,$f:null,qa:null,Ue:null,width:512,height:512,premultipliedAlpha:!1,um:!0,antialias:!1,debug:!1,
tp:!1},v);v.Xa?(c=v.Xa,q=v.Xa.canvas):v.Ue&&!v.qa?q=document.getElementById(v.Ue):v.qa&&(q=v.qa);q||(q=document.createElement("canvas"));q.width=v.width;q.height=v.height;if(c)t=c instanceof WebGL2RenderingContext;else{t=!0;var f={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.um,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(f.antialias=!1);var g=e(f);g||!f.antialias||b()||(f.antialias=!1,g=e(f));g&&(c=q.getContext("webgl2",f));c?t=!0:((c=q.getContext("webgl",f))||(c=q.getContext("experimental-webgl",f)),t=!1)}if(!c)return a("WebGL1 and 2 are not enabled");v.$f&&q.addEventListener&&(n=c.getExtension("WEBGL_lose_context"))&&(H=v.$f,q.addEventListener("webglcontextlost",H,!1));if(!Ga.m())return a("Not enough GL capabilities");k(c);Z.m();W.m();Ib.kh(c,Ga.El());y.forEach(function(B){B(c)});y.splice(0);return!0},ip:function(){return new Promise(function(v){c?
v(c):y.push(v)})},v:function(){c&&(Ga.v(),Z.v(),Ib.v());n&&H&&(q.removeEventListener("webglcontextlost",H,!1),n=H=null);c=z=h=x=q=null;y.splice(0)}};return G}(),wb=function(){function a(){null===b&&("undefined"!==typeof Z?b=Z:"undefined"!==typeof E&&(b=E))}var b=null;return{reset:function(){b=null},rj:function(d){b!==d&&(b&&b.K(),b=d)},Xb:function(){return b.Xb()},dc:function(){return b.dc()},ec:function(d){return b.ec(d)},he:function(){return b.he()},K:function(){return b.K()},set:function(d){a();
return b.set(d)},Bb:function(d){a();return b.Bb(d)},fe:function(d){a();return b.fe(d)}}}(),ba=function(){function a(F){c.bindTexture(c.TEXTURE_2D,F)}function b(F){var M=new Uint16Array(F.length);F.forEach(function(r,u){A[0]=r;var R=J[0];var Q=R>>16&32768;r=R>>12&2047;var ia=R>>23&255;R=103>ia?Q:142<ia?Q|31744|((255==ia?0:1)&&R&8388607):113>ia?(r|=2048,Q|(r>>114-ia)+(r>>113-ia&1)):(Q|ia-112<<10|r>>1)+(r&1);M[u]=R});return M}function d(){if(null!==P.zf)return P.zf;var F=e(b([.5,.5,.5,.5]),!0);return null===
F?!0:P.zf=F}function e(F,M){if(!wb.Xb()||!G)return null;var r=null,u=Math.sqrt(F.length/4);try{var R=c.getError();if("FUCKING_BIG_ERROR"===R)return!1;r=C.instance({isFloat:!1,T:M,array:F,width:u});R=c.getError();if(R!==c.NO_ERROR)return!1}catch(Q){return!1}Ba.ba();c.viewport(0,0,u,u);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);wb.set("s0");r.Ka(0);W.l(!0,!0);F=4*u*u;M=new Uint8Array(F);c.readPixels(0,0,u,u,c.RGBA,c.UNSIGNED_BYTE,M);u=!0;for(R=0;R<F;++R)u=u&&3>Math.abs(M[R]-127);r.remove();Ba.$();
return u}var k=0,q=null,x=0,h=null,n=null,t=null,z=null,H=null,y=null,G=!1,v=[],f={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ka:null,Zh:null,vm:!1,T:!1,B:null,J:4,Tf:0},g=!1,B=null,K=null,l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,m=!1,A=new Float32Array(1),J=new Int32Array(A.buffer),P={zf:null,Af:null},C={m:function(){G||(H=[c.RGBA,null,c.RGBA,c.RGBA],y=
[c.RGBA,null,c.RGBA,c.RGBA],q=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],p="undefined"!==typeof ea,m="undefined"!==typeof Ga,h=[-1,-1,-1,-1,-1,-1,-1,-1],z=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],G=!0)},mm:function(){if(!n){for(var F=new Float32Array(16384),M=0;16384>M;++M)F[M]=2*Math.random()-1;n={random:C.instance({isFloat:!0,isPot:!0,array:F,width:64}),Hj:C.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}C.Do()},nj:function(F){c.framebufferTexture2D(Ba.pf(),
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,F,0)},Yh:function(){return n.Hj},Do:function(){z[1]=Ga.mf(c)},ao:function(){y=H=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Wi:function(F){Z.set("s1");Ba.ba();var M=F.O(),r=F.Y();c.viewport(0,0,M,r);F.h(0);W.l(!1,!1)},hq:function(F,M){C.Wi(F);c.readPixels(0,0,F.O(),F.Y(),c.RGBA,c.UNSIGNED_BYTE,M)},iq:function(F,M){C.Wi(F);return Ga.kg(0,0,F.O(),F.Y(),M)},Lh:function(F,M,r,u,R,Q,ia){F.activeTexture(F.TEXTURE0);var aa=F.createTexture();F.bindTexture(F.TEXTURE_2D,aa);R=R instanceof
Float32Array?R:new Float32Array(R);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,Q);F.texImage2D(F.TEXTURE_2D,0,F.RGBA,r,u,0,F.RGBA,F.FLOAT,R);F.bindTexture(F.TEXTURE_2D,null);F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);ia&&(Ba.$(),Z.Bb(F));F.viewport(0,0,r,u);F.framebufferTexture2D(F.FRAMEBUFFER,
F.COLOR_ATTACHMENT0,F.TEXTURE_2D,M,0);F.bindTexture(F.TEXTURE_2D,aa);ia?W.l(!0,!0):W.Ob(F);F.deleteTexture(aa);G&&(h[0]=-1,t=null,k=0)},Ge:function(F){F!==k&&(c.activeTexture(q[F]),k=F)},instance:function(F){function M(){ja=void 0!==N.ka.videoWidth?N.ka.videoWidth:N.ka.width;ta=void 0!==N.ka.videoHeight?N.ka.videoHeight:N.ka.height}function r(ca){var va=c.getError();if("FUCKING_BIG_ERROR"===va)return!1;c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca);va=c.getError();va!==c.NO_ERROR&&Da!==c.RGBA&&(Da=c.RGBA,
c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca));return!0}function u(){if(!Y){a(oa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,sb);N.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,N.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,N.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));N.isAnisotropicFiltering&&"undefined"!==typeof V&&c.texParameterf(c.TEXTURE_2D,
ea.Il().TEXTURE_MAX_ANISOTROPY_EXT,V.gk);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,N.isLinear?c.LINEAR:c.NEAREST);N.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,N.isMipmap&&!Bb?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,N.isMipmap&&!Bb?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);Da=H[N.J-1];ab=y[N.J-1];Oa=z[w];if(Ga.la()){var ca=Ga.Kl();Da===c.RGBA&&Oa===c.FLOAT?N.isMipmap||N.isLinear?ab=Ib.Ml(c):Ga.fa()?ca&&(ab=ca):ab=c.RGBA16F||c.RGBA:Da===
c.RGB&&Oa===c.FLOAT&&ca&&(ab=ca,Da=c.RGBA)}if(N.T&&!N.isFloat||N.isFloat&&N.isMipmap&&Ib.Dm())ab=Ga.Ll(),Oa=Ga.mf(c);N.Tf&&(Pb=N.Tf);N.isSrgb&&4===N.J&&(Da=ea.em());if(N.ka)r(N.ka);else if(N.url)r(za);else if(Fa){ca=Fa;try{"FUCKING_BIG_ERROR"!==c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,ca),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,ja,ta,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(qc){c.texImage2D(c.TEXTURE_2D,
0,ab,ja,ta,0,Da,Oa,null)}N.isKeepArray||(Fa=null)}else ca=c.getError(),"FUCKING_BIG_ERROR"!==ca&&(c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null),ca=c.getError(),ca!==c.NO_ERROR&&(Da=c.RGBA,N.T&&Oa!==c.FLOAT&&(Oa=c.FLOAT,c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,null))));if(N.isMipmap)if(!Bb&&Ua)Ua.zd(),Qb=!0;else if(Bb){ca=Math.log2(Math.min(ja,ta));Hb=Array(1+ca);Hb[0]=oa;for(var va=1;va<=ca;++va){var Ya=Math.pow(2,va),Ja=ja/Ya;Ya=ta/Ya;var Xa=c.createTexture();a(Xa);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ab,Ja,Ya,0,Da,Oa,null);a(null);Hb[va]=Xa}Qb=!0}a(null);h[k]=-1;sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Ia=!0;N.B&&Ua&&(N.B(Ua),N.B=null)}}function R(){for(var ca=ja*ta,va=2*ca,Ya=3*ca,Ja=0;Ja<ca;++Ja)fa[0][Ja]=mb[Ja],fa[1][Ja]=mb[Ja+ca],fa[2][Ja]=mb[Ja+va],fa[3][Ja]=mb[Ja+Ya]}function Q(){var ca=ja*ta*4;ka=[new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca),new Uint8Array(ca)];
fa=[new Float32Array(ka[0].buffer),new Float32Array(ka[1].buffer),new Float32Array(ka[2].buffer),new Float32Array(ka[3].buffer)];Sa=new Uint8Array(4*ca);mb=new Float32Array(Sa.buffer);pa=!0}function ia(){aa=new Uint8Array(ja*ta*4);lc=new Float32Array(aa.buffer);Vb=!0}var aa,N=Object.assign({},f,F),da=x++;null===N.isFlipY&&(N.isFlipY=N.url?!0:!1);N.data&&(N.array="string"===typeof N.data?Kb(N.data):N.isFloat?new Float32Array(N.data):new Uint8Array(N.data),N.isFlipY=!1);var w=0,O=N.ka?!0:!1,D=null,
X=null,ma=!1;N.T=N.T||N.isFloat;N.T&&(w=1);!N.vm&&N.isFloat&&m&&!Ga.fa()&&(N.isFloat=!1);N.isFloat&&(w=2);N.isAnisotropicFiltering&&p&&!ea.Cm()&&(N.isAnisotropicFiltering=!1);var oa=N.Zh||c.createTexture(),za=null,Fa=!1,ja=0,ta=0,Ia=!1,Y=!1,pa=!1,fa=null,ka=null,Sa=null,mb=null,ab=null,Da=null,Oa=null,sb=N.isFlipY,rc=(F=N.T&&N.isMipmap)&&Ib.Pk(),Bb=F&&!rc?!0:!1,Hb=null,Pb=-1,kc=-1,Qb=!1,Vb=!1,lc=aa=null;N.width&&(ja=N.width,ta=N.height?N.height:ja);var Ua={get:function(){return oa},O:function(){return ja},
Y:function(){return ta},fm:function(){return N.url},ri:function(){return N.isFloat},si:function(){return N.T},vq:function(ca){oa=ca},Zp:function(){return N.isLinear},zd:function(){c.generateMipmap(c.TEXTURE_2D)},Hk:function(ca,va){Bb?(ca||(ca=Ua.Vh()),C.Ge(va),a(Hb[ca]),h[va]=-1):Ua.h(va)},Vh:function(){-1===Pb&&(Pb=Math.log(ja)/Math.log(2));return Pb},Bl:function(ca){ca||(ca=Ua.Vh());if(Bb){Z.set("s12");C.Ge(0);for(var va=ja,Ya=ta,Ja=1;Ja<=ca;++Ja)va/=2,Ya/=2,Z.N("u14",.25/va,.25/Ya),c.viewport(0,
0,va,Ya),a(Hb[Ja-1]),c.framebufferTexture2D(Ba.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Hb[Ja],0),W.l(!1,1===Ja);h[0]=-1}else ca!==kc&&(kc=ca,c.TEXTURE_MAX_LEVEL&&c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAX_LEVEL,ca)),Ua.zd()},wq:function(ca){(O=!(Array.isArray(ca)||ca.constructor===Float32Array||ca.constructor===Uint8Array))?(Fa=null,N.ka=ca,M()):Fa=ca},h:function(ca){if(!Ia)return!1;C.Ge(ca);if(h[ca]===da)return!1;a(oa);h[ca]=da;return!0},Ka:function(ca){c.activeTexture(q[ca]);k=ca;a(oa);h[ca]=da},
o:function(){t=Ua;C.nj(oa)},M:function(){c.viewport(0,0,ja,ta);t=Ua;C.nj(oa)},qe:C.qe,Vn:function(ca,va){ja=ca;ta=va},resize:function(ca,va){Ua.Vn(ca,va);u()},clone:function(ca){ca=C.instance({width:ja,height:ta,T:N.T,isFloat:N.isFloat,isLinear:N.isLinear,isMirrorY:N.isMirrorY,isFlipY:ca?!sb:sb,isPot:N.isPot});wb.set("s0");Ba.$();ca.M();Ua.h(0);W.l(!0,!0);return ca},Uc:function(){c.viewport(0,0,ja,ta)},remove:function(){c.deleteTexture(oa);Y=!0;v.splice(v.indexOf(Ua),1);Ua=null},refresh:function(){Ua.Ka(0);
sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);O?c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,N.ka):c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,Fa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Ui:function(){pa||Q();c.readPixels(0,0,ja,4*ta,c.RGBA,c.UNSIGNED_BYTE,Sa);R();return fa},qn:function(){pa||Q();return Ga.kg(0,0,ja,4*ta,Sa).then(function(){R();return fa})},sn:function(){Vb||ia();c.readPixels(0,0,ja,ta,c.RGBA,c.UNSIGNED_BYTE,aa);return lc},rn:function(){Vb||ia();return Ga.kg(0,0,ja,ta,aa)},xh:function(ca){Ba.ba();
Z.set("s15");Ua.h(0);if(ca)c.viewport(0,0,ja,ta),Z.ho("u15",.25,.25,.25,.25),W.l(!1,!0);else for(ca=0;4>ca;++ca)c.viewport(0,ta*ca,ja,ta),Z.xa("u15",l[ca]),W.l(!1,0===ca)},Rg:function(ca){var va;if(va=Oa===z[0])null!==P.Af?va=P.Af:(va=e(new Uint8Array([127,127,127,127]),!1),va=null===va?!0:P.Af=va),va=!va;a(oa);sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);va?(ma||(D=document.createElement("canvas"),D.width=ja,D.height=ta,X=D.getContext("2d"),X.createImageData(ja,ta),ma=!0),null.data.set(ca),X.putImageData(null,
0,0),c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,D)):c.texImage2D(c.TEXTURE_2D,0,ab,ja,ta,0,Da,Oa,ca);h[k]=da;sb&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Kq:function(ca,va){a(oa);va&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ab,Da,Oa,ca);h[k]=da;va&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},ac:function(ca,va){var Ya=ja*ta,Ja=4*Ya;ca=N.T?ca?"RGBE":"JSON":"RGBA";va&&(ca=va);va=Ga.la()&&!1;var Xa=null;switch(ca){case "RGBE":Xa="s13";break;case "JSON":Xa=va?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Xa=
"s7"}pa||("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca?(ka=new Uint8Array(Ja),pa=!0):"JSON"!==ca||va||Q());Ba.ba();Z.set(Xa);Ua.h(0);Ja=null;if("RGBA"===ca||"RGBE"===ca||"RGBAARRAY"===ca){c.viewport(0,0,ja,ta);W.l(!0,!0);c.readPixels(0,0,ja,ta,c.RGBA,c.UNSIGNED_BYTE,ka);if("RGBAARRAY"===ca)return{data:ka};g||(B=document.createElement("canvas"),K=B.getContext("2d"),g=!0);B.width=ja;B.height=ta;Ya=K.createImageData(ja,ta);Ya.data.set(ka);K.putImageData(Ya,0,0);Ja=B.toDataURL("image/png")}else if("JSON"===
ca)if(va)Ja=new Float32Array(Ya),c.viewport(0,0,ja,ta),W.l(!0,!0),c.readPixels(0,0,ja,ta,c.RGBA,c.FLOAT,Ja);else{for(Ja=0;4>Ja;++Ja)c.viewport(0,ta*Ja,ja,ta),Z.xa("u15",l[Ja]),W.l(!Ja,!Ja);Ua.Ui();Ja=Array(Ya);for(va=0;va<Ya;++va)Ja[4*va]=fa[0][va],Ja[4*va+1]=fa[1][va],Ja[4*va+2]=fa[2][va],Ja[4*va+3]=fa[3][va]}return{format:ca,data:Ja,width:ja,height:ta,isMirrorY:N.isMirrorY,isFlipY:"RGBA"===ca?N.isFlipY:!N.isFlipY}}};N.isMipmap&&!Bb&&Ia&&!Qb&&(Ua.zd(),Qb=!0);if(N.url)a(oa),c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),za=new Image,za.rp="Anonymous",za.crossOrigin="Anonymous",za.src=N.url,za.onload=function(){ja=za.width;ta=za.height;u()};else if(N.ka){var Mb=function(){M();ja?u():setTimeout(Mb,1)};Mb()}else N.array?(N.T&&!N.isFloat?N.array instanceof Uint16Array?(Fa=N.array,u()):d()?(Fa=b(N.array),u()):(u(),C.Lh(c,oa,Ua.O(),Ua.Y(),N.array,sb,!0)):(Fa=N.isFloat?N.array instanceof Float32Array?N.array:new Float32Array(N.array):N.array instanceof Uint8Array?N.array:new Uint8Array(N.array),
u()),N.isKeepArray||(Fa&&Fa!==N.array&&(Fa=null),delete N.array)):N.Zh?Ia=!0:u();Ua.Op=Ua.O;N.B&&Ia&&(N.B(Ua),N.B=null);v.push(Ua);return Ua},ba:function(F){F!==k&&(c.activeTexture(q[F]),k=F);h[F]=-1;a(null)},Jk:function(F){n.random.h(F)},qe:function(){t=null;c.framebufferTexture2D(Ba.pf(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==k&&c.activeTexture(q[0]);for(var F=0;F<q.length;++F)h[F]=-1;k=-1},lq:function(){k=-1},Jj:function(){for(var F=0;F<q.length;++F)C.ba(F)},H:function(){n&&
(n.random.remove(),n.Hj.remove())},Xc:function(F,M){if("RGBA"===F.format||"RGBE"===F.format){var r=new Image;r.src=F.data;r.onload=function(){C.instance({isMirrorY:F.isMirrorY,isFlipY:F.isFlipY,isFloat:!1,ka:r,B:function(u){if("RGBA"===F.format)M(u);else{var R=F.width,Q=F.height,ia=C.instance({isMirrorY:F.isMirrorY,isFloat:!0,width:R,height:Q,isFlipY:F.isFlipY});Ba.$();c.viewport(0,0,R,Q);Z.set("s14");ia.o();u.h(0);W.l(!0,!0);C.ba(0);M(ia);Ga.flush();u.remove()}}})}}else"JSON"===F.format?M(C.instance({isFloat:!0,
isFlipY:F.isFlipY,width:F.width,height:F.height,array:new Float32Array(F.data)})):M(!1)},Vk:b,v:function(){t&&(Ba.$(),C.qe(),Ba.ba());C.Jj();v.slice(0).forEach(function(F){F.remove()});v.splice(0);G=!1;x=0;"undefined"!==typeof Ib&&Ib.v();n=null}};return C}(),Mc={instance:function(a){var b=[ba.instance(a),ba.instance(a)],d=[b[1],b[0]],e=d,k={ij:function(q){e[1].o();e[0].h(q);k.vj()},Pn:function(q){e[1].M();e[0].h(q);k.vj()},vj:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},
h:function(q){e[0].h(q)},Ka:function(q){e[0].Ka(q)},Ik:function(q){e[1].h(q)},Jp:function(){return e[0]},Mp:function(){return e[1]},Rg:function(q){e[0].Rg(q);e[1].Rg(q)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Pn(0);Z.set("s0");W.l(!1,!1)}};return k}},W=function(){function a(n){var t={ja:null,indices:null};t.ja=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,t.ja);n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),n.STATIC_DRAW);t.indices=n.createBuffer();
n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indices);n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),n.STATIC_DRAW);return t}var b=null,d=0,e=!1,k=[],q=-2,x=-2,h={reset:function(){x=q=-2},m:function(){e||(b=a(c),h.kd(),e=!0)},instance:function(n){var t=d++,z=n.indices?n.indices.length:0,H="undefined"===typeof n.mode?c.STATIC_DRAW:n.mode,y=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,y);c.bufferData(c.ARRAY_BUFFER,n.ja instanceof Float32Array?n.ja:new Float32Array(n.ja),H);q=t;var G=null,v=
null,f=null;if(n.indices){G=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,G);var g=null;65536>n.indices.length?(g=Uint16Array,v=c.UNSIGNED_SHORT,f=2):(g=Uint32Array,v=c.UNSIGNED_INT,f=4);g=n.indices instanceof g?n.indices:new g(n.indices);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,H);x=t}var B={wc:function(K){q!==t&&(c.bindBuffer(c.ARRAY_BUFFER,y),q=t);K&&wb.he()},Fk:function(){x!==t&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,G),x=t)},bind:function(K){B.wc(K);B.Fk()},U:function(){c.drawElements(c.TRIANGLES,
z,v,0)},La:function(K,l){c.drawElements(c.TRIANGLES,K,v,l*f)},remove:function(){c.deleteBuffer(y);n.indices&&c.deleteBuffer(G);B=null}};k.push(B);return B},kd:function(){-1!==q&&(c.bindBuffer(c.ARRAY_BUFFER,b.ja),q=-1);-1!==x&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indices),x=-1)},l:function(n,t){n&&W.kd();t&&wb.dc();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ob:function(n){n=n||c;var t=a(n);n.bindBuffer(n.ARRAY_BUFFER,t.ja);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indices);wb.ec(n);n.clear(n.COLOR_BUFFER_BIT);
n.drawElements(n.TRIANGLES,3,n.UNSIGNED_SHORT,0);n.flush();n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.deleteBuffer(t.ja);n.deleteBuffer(t.indices);h.reset();e&&(h.kd(),wb.dc())},H:function(){var n=c,t=b;n.deleteBuffer(t.ja);n.deleteBuffer(t.indices)},v:function(){h.H();k.forEach(function(n){n.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);h.reset();e=!1;k.splice(0);d=0}};return h}(),Ba=function(){var a=null,b=null,d=null,e=
!1,k=[],q={na:-2,Kh:1},x={Xb:function(){return e},m:function(){if(!e){a=c.createFramebuffer();var h=Ga.la();b=h&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=h&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},Jl:function(){return b},Rh:function(){return d},pf:function(){return c.FRAMEBUFFER},Np:function(){return q},Cp:function(){return a},instance:function(h){void 0===h.Ec&&(h.Ec=!1);var n=h.ha?h.ha:null,t=h.width,z=void 0!==h.height?h.height:h.width,H=a,y=null,G=!1,v=!1,f=0;n&&
(t=t?t:n.O(),z=z?z:n.Y());var g={cj:function(){G||(H=c.createFramebuffer(),G=!0,f=q.Kh++)},ed:function(){g.cj();g.o();y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,t,z);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1)},bind:function(B,K){f!==q.na&&(c.bindFramebuffer(b,H),q.na=f);n&&n.o();K&&c.viewport(0,0,t,z);B&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},fh:function(){f!==q.na&&(c.bindFramebuffer(b,
H),q.na=f)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Qe:function(){c.clear(c.COLOR_BUFFER_BIT)},mh:function(){c.clear(c.DEPTH_BUFFER_BIT)},Uc:function(){c.viewport(0,0,t,z)},o:function(){f!==q.na&&(c.bindFramebuffer(b,H),q.na=f)},rtt:function(B){n=B;q.na!==f&&(c.bindFramebuffer(c.FRAMEBUFFER,H),q.na=f);B.o()},ba:function(){c.bindFramebuffer(b,null);q.na=-1},resize:function(B,K){t=B;z=K;y&&(c.bindRenderbuffer(c.RENDERBUFFER,y),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
t,z))},remove:function(){H===a||v||(c.bindFramebuffer(b,H),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),y&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(H),y&&c.deleteRenderbuffer(y));v=!0}};h.Ec&&g.ed();k.push(g);return g},ba:function(){c.bindFramebuffer(b,null);q.na=-1},Iq:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);Ga.sj();q.na=-1},reset:function(){q.na=-2},$:function(){0!==
q.na&&(c.bindFramebuffer(b,a),q.na=0)},clear:function(){Ga.sj();c.clear(c.COLOR_BUFFER_BIT)},v:function(){x.ba();k.forEach(function(h){h.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);x.reset();e=!1;k.splice(0);q.Kh=1}};return x}(),Ga=function(){function a(){h="undefined"===typeof jb?ea:jb;n=!0}function b(l,p){for(var m=0;m<l.length;++m){var A=p.getExtension(l[m]);if(A)return A}return null}function d(){null!==g.pe&&(clearTimeout(g.pe),g.pe=null);g.Sb=!1}function e(l){if(0===g.xb.length){g.za=
c.PIXEL_PACK_BUFFER;g.xb.splice(0);g.Fd.splice(0);for(var p=0;p<g.yc;++p)g.xb.push(c.createBuffer()),g.Fd.push(-1);g.Ta=0;g.Zf=0}c.bindBuffer(g.za,g.xb[g.Ta]);l.byteLength!==g.Fd[g.Ta]&&(c.bufferData(g.za,l.byteLength,c.STREAM_READ),g.Fd[g.Ta]=l.byteLength);g.Tp=!0}function k(){c.bindBuffer(g.za,null)}function q(){g.Rb.forEach(function(l){c.deleteSync(l)});g.Rb.splice(0)}function x(){g.Ta=(g.Ta+1)%g.yc;++g.Zf}var h=null,n=!1,t={hi:!1,Jg:null,Kg:null,ni:!1,Am:!1,Lg:null,oi:!1,Mg:null,ii:!1,Re:null,
sm:!1,Se:null,tm:!1},z=null,H={Wa:!0,Ya:!0,gf:!0,Ti:!1},y=null,G=!0,v=null,f=null,g={Wk:1,yc:-1,Ta:0,Zf:0,Sb:!1,xb:[],Rb:[],Fd:[],za:null,pe:null},B="undefined"===typeof window?{}:window,K={m:function(){if(n)return!0;K.reset();n||a();var l=c;if(!z.hi){z.Jg=K.Hh(l);B.GL_EXT_FLOAT=z.Jg;z.ni=z.Jg?!0:!1;if(z.ni||K.la())z.Kg=K.Ih(l),z.Am=z.Kg?!0:!1,B.GL_EXT_FLOATLINEAR=z.Kg;z.hi=!0}if(!z.ii){z.Lg=K.wd(l);z.Lg&&(z.oi=!0,B.GL_EXT_HALFFLOAT=z.Lg);if(z.oi||K.la())z.Mg=K.Jh(l),B.GL_EXT_HALFFLOATLINEAR=z.Mg;
z.Wp=z.Mg?!0:!1;z.ii=!0}z.Re=K.Fh(l);z.sm=z.Re?!0:!1;B.GL_EXT_COLORBUFFERFLOAT=z.Re;z.Se=K.Gh(l);z.tm=z.Se?!0:!1;B.GL_EXT_COLORBUFFERHALFFLOAT=z.Se;Ba.m();ba.m();if(!K.fl())return!1;W.m();ba.mm();return!0},reset:function(){z=Object.assign({},t);y=Object.assign({},H)},O:function(){n||a();return h.O()},Y:function(){n||a();return h.Y()},la:function(){n||a();return h.la()},Eh:function(l){K.Fh(l);K.Gh(l);K.Hh(l);K.Ih(l);K.wd(l);K.Jh(l)},Fh:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),Gh:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Hh:b.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Ih:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),wd:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Jh:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),mf:function(l){var p=K.wd(l);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:l.HALF_FLOAT||l.FLOAT},Kl:function(){return f||c.RGBA32F||c.RGBA},Ll:function(){return v||c.RGBA16F||c.RGBA},El:function(){return y},fa:function(){return y.Wa},mp:function(){return y.Ya},Ok:function(){return y.gf},Rk:function(){return y.Ti&&G},Gj:function(l){G=l;!l&&g.Sb&&(q(),c.bindBuffer(g.za,null),g.Sb=!1)},$p:function(){return g.Sb},me:function(l,p,m){function A(){l.bindTexture(l.TEXTURE_2D,
null);l.bindFramebuffer(J,null);l.deleteTexture(F);l.deleteFramebuffer(C)}var J=l.FRAMEBUFFER,P=l.NEAREST,C=l.createFramebuffer();l.bindFramebuffer(J,C);var F=l.createTexture();l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,F);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,P);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,
P);l.texImage2D(l.TEXTURE_2D,0,p,3,3,0,l.RGBA,m,null);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,F,0);if(l.checkFramebufferStatus(l.READ_FRAMEBUFFER||l.FRAMEBUFFER)!==l.FRAMEBUFFER_COMPLETE)return A(),!1;wb.fe(l);l.clearColor(0,0,0,0);l.viewport(0,0,3,3);l.disable(l.DEPTH_TEST);l.clear(l.COLOR_BUFFER_BIT);W.Ob(l);l.bindFramebuffer(J,null);wb.Bb(l);l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,F);W.Ob(l);p=new Uint8Array(36);l.readPixels(0,0,3,3,l.RGBA,l.UNSIGNED_BYTE,
p);A();for(m=0;36>m;++m)if(3!==m%4&&3<Math.abs(p[m]-127))return!1;return!0},Ze:function(l){var p={Wa:!1,Ya:!1};l.disable(l.BLEND);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);l.RGBA32F&&K.me(l,l.RGBA32F,l.FLOAT)&&(p.Wa=!0,f=l.RGBA32F);!p.Wa&&K.me(l,l.RGBA,l.FLOAT)&&(p.Wa=!0,f=l.RGBA);var m=K.mf(l);v=null;l.RGBA16F&&K.me(l,l.RGBA16F,m)&&(p.Ya=!0,v=l.RGBA16F);!p.Ya&&K.me(l,l.RGBA,m)&&(p.Ya=!0,v=l.RGBA);return p},hl:function(){var l=Ba.instance({width:2});l.cj();var p=ba.instance({width:2,isFloat:!0,
J:3});l.o();p.o();K.flush();c.checkFramebufferStatus(Ba.Rh())!==c.FRAMEBUFFER_COMPLETE?(ba.ao(),y.gf=!1):y.gf=!0;l.remove();p.remove()},il:function(){var l=!1;K.la()&&(l="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof c[p]}));y.Ti=l},fl:function(){var l=K.Ze(c);Object.assign(y,l);if(!y.Wa&&!y.Ya)return!1;K.hl();K.il();return!0},tn:function(l,p,m,A,J){c.readPixels(l,p,m,A,c.RGBA,c.UNSIGNED_BYTE,
J);return Promise.resolve(J,!1)},kg:function(l,p,m,A,J,P,C){if(!K.Rk())return K.tn(l,p,m,A,J);g.yc=C||g.Wk;e(J);c.readPixels(l,p,m,A,c.RGBA,c.UNSIGNED_BYTE,0);g.Rb[g.Ta]=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);K.flush();var F=!1;return new Promise(function(M,r){function u(){if(!g.Sb)return d(),k(),x(),r(),!1;var R=(g.Ta+1)%g.yc;switch(c.clientWaitSync(g.Rb[R],0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:break;default:return d(),c.deleteSync(g.Rb[R]),g.Rb[R]=null,c.bindBuffer(g.za,g.xb[R]),
c.getBufferSubData(g.za,0,J),k(),x(),M(J,F),!0}g.pe=setTimeout(u,0);return!1}d();g.Zf+1<g.yc?(k(),x(),M(J,!1)):(g.Sb=!0,u()||!P||F||(F=!0,P()))})},sj:function(){c.viewport(0,0,K.O(),K.Y())},flush:function(){c.flush()},v:function(){d();q();ba.v();Ba.v();W.v();g.xb.forEach(function(l){c.deleteBuffer(l)});g.xb.splice(0);wb.reset();n=!1}};return K}(),Ib=function(){function a(m,A,J,P){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,P?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var C=null;if(null!==J)try{C=g.getError();
if("FUCKING_BIG_ERROR"===C)return!1;g.texImage2D(g.TEXTURE_2D,0,m,4,4,0,g.RGBA,A,J);C=g.getError();if(C!==g.NO_ERROR)return!1}catch(F){return!1}P&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);W.Ob(g);C=g.getError();if("FUCKING_BIG_ERROR"===C)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,z);C=g.getError();C===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,z),C=g.getError());if(C!==
g.NO_ERROR)return!1;J=!0;for(P=0;16>P;++P)J=J&&4>Math.abs(z[P]-127);J&&(n.Pi=A,n.gi=m);return J}function b(m,A){return B.Wa&&a(m,g.FLOAT,new Float32Array(H),A)?(h=x.bh,!0):!1}function d(m,A,J){if(!B.Ya)return!1;var P=ba.Vk(H),C=Ga.wd(g);if(C&&C.HALF_FLOAT_OES&&a(m,C.HALF_FLOAT_OES,P,A)||g.HALF_FLOAT&&a(m,g.HALF_FLOAT,P,A))return h=x.qc,!0;P=new Float32Array(H);if(a(m,g.FLOAT,P,A))return h=x.qc,!0;g.bindTexture(g.TEXTURE_2D,J);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(n.rd,
p);ba.Lh(g,J,2,2,P,!1,!1);g.bindFramebuffer(n.rd,null);g.bindTexture(g.TEXTURE_2D,J);return a(m,null,null,A)?(h=x.qc,!0):!1}function e(m,A,J){t=!0;if(d(m,!0,J)||b(A,!0))return!0;t=!1;return d(m,!1,J)||b(A,!1)?!0:!1}function k(m){if(h===x.K){g=m||c;h=x.RGBA8;t=!0;Ga.Eh(g);B||(B=Ga.Ze(g));Ba.reset();p=g.createFramebuffer();n.rd=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(n.rd,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);Z.K();K=Z.Bb(g);m=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,
m);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);l=m;var A=m=g.RGBA,J=g.RGBA16F,P=g.RGBA32F;P&&(m=P);J&&(A=J);if((J||P)&&e(A,m,l))return q(),!0;m=A=g.RGBA;if(e(A,m,l))return q(),!0;h=x.RGBA8;q();return!1}}function q(){g.deleteProgram(K.oa);g.deleteTexture(l);l=K=null}for(var x={K:-1,bh:3,qc:2,RGBA8:0},h=x.K,n={Pi:null,gi:null,rd:null},t=!0,z=new Uint8Array(16),H=Array(64),
y=0;4>y;++y)for(var G=0;4>G;++G){var v=0===(G+y)%2?1:0,f=4*y+G;H[4*f]=v;H[4*f+1]=v;H[4*f+2]=v;H[4*f+3]=v}var g=null,B=null,K=null,l=null,p=null;return{Pk:function(m){k(m);return t},kh:function(m,A){h===x.K&&(typeof("undefined"!==A)&&(B=A),k(m));return h!==x.RGBA8},Xp:function(m){k(m);return h===x.bh},Dm:function(m){k(m);return h===x.qc},Ip:function(m){k(m);return n.Pi},Ml:function(m){k(m);return n.gi},v:function(){g=null;t=!0;h=x.K;B=null}}}(),Zc={instance:function(a){function b(){y&&y.remove();y=
ba.instance({isFloat:!1,isPot:!1,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}var d=null,e=!1,k=!1,q=null,x=!1,h=!1,n=null,t="undefined"===typeof a.preprocessing?!1:a.preprocessing,z="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,I&&void 0!==I.ca&&(a.mask=I.ca+a.mask),d=ba.instance({isFloat:!1,url:a.mask}));var H=!1;a.customInputShader&&(H="s50",Z.ma({name:"_",id:H,g:a.customInputShader,Jq:["uSource"],precision:"lowp"}),Z.j(H,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":n=
"s39";x=!0;break;case "meanNormalization":n="s40";x=!0;break;case "grayScale":n="s36";x=!1;break;case "grayScaleTilt":n="s37";h=!0;x=!1;break;case "rgbGrayTilt":n="s38";h=!0;x=!1;break;case "copy":n=H?H:"s0";break;case "inputLightRegulation":n=H?H:"s36";q=od.instance({fi:z,Ji:a.size,Ei:a.nBlurPass,Ba:!1});k=!0;break;case "inputMix0":n="none";q=pd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Ba:!1});k=!0;break;case "inputMix1":n="none";q=qd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,
gain:a.gain||1,Ba:!1});k=!0;break;case "inputCut4":n="none";q=rd.instance({Z:z,jb:a.varianceMin,Sa:a.blurKernelSizePx,gain:a.gain||1,Gc:a.isNormalized||!1,eg:a.overlap||0,Ba:!1});z*=q.Nl();k=!0;break;case "direct":case "none":case "abort":n="abort";break;default:n="s4"}z=Math.ceil(z);h&&Z.j(n,[{name:"u29",type:"1f",value:a.tilt}]);e&&(n+="Mask");var y=null;b();var G={O:function(){return a.size},Ol:function(){return z},qf:function(){return G.O()},Sl:function(){return k?q.Cc():y},re:function(v){a.Aa=
v;b()},wa:function(v){Ba.$();if("abort"===n)return v.h(0),v;"none"!==n&&(Z.set(n),x&&Z.G("u30",1/a.size),y.M(),e&&d.h(1),W.l(!1,!1),y.h(0),v=y);k&&q.process(v)},v:function(){y.remove();e&&d.remove()}};return G}},$c={instance:function(a){function b(){if(p.jc){k.input&&(k.input.remove(),k.Id.remove());var A=a.size*a.sparsity;l=Math.log(A/a.size)/Math.log(2);k.input=ba.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:A*a.Aa[0],height:A*a.Aa[1],Tf:l});k.Id=ba.instance({isFloat:!0,isPot:!0,width:a.size*
a.Aa[0],height:a.size*a.Aa[1]})}}function d(){k.zb&&k.zb.remove();k.zb=ba.instance({isFloat:!0,isPot:!x,isLinear:!x&&h.isLinear,width:a.size*a.Aa[0],height:a.size*a.Aa[1]})}function e(A){h.buffer.forEach(function(J,P){h.results[P][0]=A[0][J];h.results[P][1]=A[1][J];h.results[P][2]=A[2][J];h.results[P][3]=A[3][J]});return h.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,Id:null,zb:null,dg:null,bg:null,cg:null},q=null,x=!0,h={type:"undef",B:null,isLinear:!1,buffer:[],results:[],Kd:!1},
n=-1,t=a.isReorganize?a.isReorganize:!1,z=a.kernelsCount?!0:!1,H=[a.Fc?"s32":"s31",a.Fc?"s34":"s33","s35"][a.shiftRGBAMode||0],y={isEnabled:!1},G=1/a.size;a.xm?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.be.qf(),x=!1):"full"===a.connectivityUp&&(a.sparsity=a.be.qf());var v={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],f=a.sparsity*a.sparsity,g=!1,B=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;
case 4:K="s42"}g=!0;B/=a.maxPooling.size;k.bg=ba.instance({isFloat:!0,isPot:!1,width:B})}var l=-1,p=null;x&&d();k.bias=ba.instance(a.bias);var m={O:function(){return a.size},qf:function(){return B},Oh:function(){return a.classesCount},Gk:function(A){q.h(A)},kn:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,Qm:ba.instance(a.remap.maskTexture),Kc:a.remap.layers.map(function(A){return a.parent.Pl(A)}),depth:a.remap.depth})},bo:function(){switch(a.connectivityUp){case "direct":p=sd.instance(a.connectivity);
break;case "square":p=td.instance(a.connectivity);break;case "squareFast":p=ud.instance(a.connectivity,a.activation);break;case "full":p=vd.instance(Object.assign({Fc:a.Fc},a.connectivity));break;case "conv":n=a.kernelsCount,p=wd.instance(a.connectivity),t&&(k.dg=ba.instance({width:B,isFloat:!0,isFlipY:!1,isPot:!1}))}b()},wa:function(A,J){q=A;p.jc?(k.input.M(),z&&k.bias.h(2),p.wa(y),k.input.h(0),k.input.Bl(l),k.Id.M(),z?Z.set("s0"):(Z.set(H),Z.G("u4",f),k.bias.h(1)),k.input.Hk(l,0),W.l(!1,!1),Z.set(v),
k.zb.o(),k.Id.h(0),W.l(!1,!1)):(k.zb.M(),k.bias.h(1),p.wa());if(x)return J=k.zb,g&&(k.bg.M(),J.h(0),Z.set(K),Z.N("u14",G,G),W.l(!1,!1),J=k.bg),t&&(k.dg.o(),Z.set("s24"),Z.N("u18",n,B/n),J.h(0),W.l(!1,!1),J=k.dg),J.h(0),J;var P=k.zb;if(a.normalize||h.Kd)A=a.normalize,Z.set(h.Kd?"s9":"s8"),Z.G("u10",A?G:1),k.cg.M(),P.h(0),W.l(!1,!1),P=k.cg;A=null;switch(h.type){case "cpuRGBA2Float":P.xh(!1);J?A=m.on(P).then(h.B):(P=m.pn(P),h.B(P));break;case "cpuMeanFloat":P.xh(!0);if(J)A=P.rn().then(h.B);else{P=P.sn();
for(var C=0;C<P.length;++C);h.B(P)}break;case "gpuRawAvg":case "gpuRaw":P.h(0);case "none":null!==h.B&&h.B(P)}J&&null===A&&(A=Promise.resolve());return A},re:function(A){a.Aa=A;b();d()},lo:function(A){A&&(h.type=A.Xd||"none",h.B=A.Wd||null,h.isLinear=A.ag?!0:!1);d();A="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var J=0,P=0,C=0;J<A;++J)h.buffer.push(P+(a.size-1-C)*a.size),h.results.push([-1,-1,-1,-1]),++P,P===a.size&&(P=0,++C);h.Kd="gpuRawAvg"===h.type||"cpuMeanFloat"===
h.type;if(a.normalize||h.Kd)k.cg=ba.instance({isFloat:!0,isPot:!0,width:a.size})},on:function(A){return A.qn().then(e)},pn:function(A){A=A.Ui();e(A);return h.results},v:function(){for(var A in k){var J=k[A];J&&J.remove()}p&&(p.v(),p=null)}};a.be&&m.bo(a.be);return m}},sd={instance:function(a){var b=ba.instance(a.weights);return{jc:!0,Cd:function(){return 1},v:function(){b.remove()},gm:function(){return b},wa:function(){Z.set("s30");b.h(1);W.l(!1,!1)}}}},vd={instance:function(a){var b=a.fromLayerSize,
d=ba.instance(a.weights),e=a.Fc?"s27":"s26";return{jc:!0,Cd:function(){return b},v:function(){d.remove()},wa:function(k){if(k.isEnabled){Z.set("s28");k.Qm.h(3);for(var q=Math.min(k.Kc.length,k.depth),x=0;x<q;++x)k.Kc[x].Gk(4+x)}else Z.set(e);Z.G("u8",a.toLayerSize);Z.G("u9",a.fromLayerSize);d.h(1);W.l(!1,!1)}}}},td={instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,q=k/b,x=b/d,h=0,n=0,t=0,z=Array(e*d*e*d*4),H=Array(e*d*e*d*4),y=Array(b*b),G=0;G<y.length;++G)y[G]=
0;G=Math.floor(e/2);for(var v=.5/d,f=.5/b,g=.5/k,B=0;B<d;++B)for(var K=Math.round(B*x),l=0;l<d;++l){var p=Math.round(l*x),m=B/d,A=l/d;m+=v;A+=v;for(var J=0;J<e;++J){var P=K+J-G;0>P&&(P+=b);P>=b&&(P-=b);for(var C=0;C<e;++C){var F=h/k,M=n/k,r=p+C-G;0>r&&(r+=b);r>=b&&(r-=b);var u=P/b,R=r/b;M=1-M-1/k;u+=f;R+=f;F+=g;M+=g;var Q=B*e+J,ia=l*e+C;ia=d*e-ia-1;Q=ia*d*e+Q;z[4*Q]=F;z[4*Q+1]=M;z[4*Q+2]=u;z[4*Q+3]=R;R=y[r*b+P]++;Q=R%q;u=P*q+Q;r=r*q+(R-Q)/q;r=b*q-1-r;r=r*b*q+u;H[4*r]=F;H[4*r+1]=M;H[4*r+2]=m;H[4*r+
3]=A;++h>=k&&(h=0,++n);++t}}}y=null;var aa=ba.instance(a.weights);delete a.weights.data;var N=ba.instance({width:k,isFloat:!0,array:new Float32Array(H),isPot:!0});H=null;var da=ba.instance({width:k,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;return{jc:!0,Cd:function(){return q},v:function(){N.remove();da.remove();aa.remove()},wa:function(){Z.set("s25");aa.h(1);da.h(2);W.l(!1,!1)}}}},wd={instance:function(a){var b=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||
[1,1],q=ba.instance(a.weights);return{jc:!0,Cd:function(){return e},Qp:function(){return d},gm:function(){return q},v:function(){q.remove()},wa:function(){Z.set("s29");Z.wg("u28",k);Z.G("u26",b);Z.G("u27",d);Z.G("u8",a.toLayerSize);Z.G("u9",a.fromLayerSize);q.h(1);W.l(!1,!1)}}}},ud={instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,q=a.stride?a.stride:1,x=k*e/d,h=e<d,n=d/e,t=ba.instance(a.weights),z="s51"+[d.toString(),e.toString(),k.toString(),q.toString(),b].join("_");
Z.yl(z)||(a=cb(b),e=[{type:"1f",name:"u8",value:e},{type:"1f",name:"u32",value:q}],h&&e.push({type:"1f",name:"u9",value:d}),d=[(h?x:k).toFixed(1),a],h&&d.push(n.toFixed(1)),Z.om(h?"s47":"s46",z,d),Z.j(z,e.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{jc:!1,Cd:function(){return x},v:function(){t.remove()},wa:function(){Z.set(z);t.h(3);W.l(!1,!1)}}}},od={instance:function(a){var b=a.Ei?a.Ei:3,d=a.fi?a.fi:64,e=a.Ji?a.Ji:64,k=a.Ba?!0:!1;a=
{isFloat:!1,width:d,isPot:!1,isFlipY:!1};var q=ba.instance(a),x=ba.instance(a),h=ba.instance(a),n=ba.instance(a),t=ba.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),z=1/d;return{process:function(H){Z.set("s43");n.o();W.l(k,!1);Z.set("s44");for(var y=0;y<b;++y)q.o(),Z.N("u14",z,0),W.l(k,!1),h.o(),n.h(0),W.l(k,!1),x.o(),q.h(0),Z.N("u14",0,z),W.l(k,!1),n.o(),h.h(0),W.l(k,!1),y!==b-1&&x.h(0);Z.set("s45");t.o();H.h(0);x.h(1);n.h(2);W.l(k,!1);t.h(0)},Cc:function(){return t}}}},pd={instance:function(a){function b(z){return ba.instance({isFloat:z,
width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=[b(!1),b(!1),b(!1)],q=[b(!1),b(!1),b(!1)],x=b(!0),h=[e,q[0],q[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));
var n="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),t={u1:0};Z.sc([{id:"s53",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
s:t,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,s:t,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:n,s:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){Z.set("s53");e.M();W.l(d.Ba,!1);Z.set("s54");for(var z=0;3>z;++z)Z.N("u33",1,0),k[z].o(),h[z].h(0),W.l(!1,!1),Z.N("u33",0,1),q[z].o(),k[z].h(0),W.l(!1,!1);Z.set("s55");x.o();e.h(0);q[0].h(1);q[1].h(2);q[2].h(3);W.l(!1,!1);x.h(0)},Cc:function(){return x}}}},qd={instance:function(a){function b(t){return ba.instance({isFloat:t,
width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,Ba:!1},a),e=b(!1),k=b(!1),q=b(!1),x=b(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6));var h="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),n={u1:0};Z.sc([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",s:n,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,s:n,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:h,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){Z.set("s56");e.M();W.l(d.Ba,!1);Z.set("s57");Z.N("u33",
1,0);k.o();e.h(0);W.l(!1,!1);Z.N("u33",0,1);q.o();k.h(0);W.l(!1,!1);Z.set("s58");x.o();e.h(0);q.h(1);W.l(!1,!1);x.h(0)},Cc:function(){return x}}}},rd={instance:function(a){function b(z){return ba.instance({isFloat:z,width:d.Z,isPot:!1,isFlipY:!1})}var d=Object.assign({jb:.1,Sa:9,Z:128,gain:1,eg:0,Gc:!1,Ba:!1},a),e=b(!1),k=null,q=null,x=null;d.Gc&&(k=b(!1),q=b(!1),x=b(!0));a={u1:0};var h=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.eg.toFixed(4)),s:a,i:["u1"],precision:"lowp"}];if(d.Gc){var n="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.Sa-1)/2).toFixed(2)).replace("2.2222",(1/d.Z).toFixed(6)),t="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.jb.toFixed(4)).replace("2.2222",d.gain.toFixed(4));h.push({id:"s60",name:"_",g:n,s:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:t,s:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}Z.sc(h);return{process:function(){Z.set("s59");e.M();W.l(d.Ba,!1);d.Gc?(Z.set("s60"),Z.N("u33",1,0),k.o(),e.h(0),W.l(!1,!1),Z.N("u33",0,1),q.o(),k.h(0),W.l(!1,!1),Z.set("s61"),x.o(),e.h(0),q.h(1),W.l(!1,!1),x.h(0)):e.h(0)},Nl:function(){return 2-d.eg},Cc:function(){return d.Gc?x:e}}}},Gb=function(){function a(f,
g,B,K,l,p,m){if(!G)if(m===p.length)l();else{switch(p[m]){case "A":B();break;case "D":f();break;case "S":g().then(function(A,J){v.Fj();a(f,g,B,J?null:K,l,p,++m)}).catch(function(A){console.log("An error occurred in the WebAR loop: ",A);l()});return;case "R":K&&K()}a(f,g,B,K,l,p,++m)}}var b={n:5,Yf:1,wi:0,yd:[35,49],vd:[2,200],k:.7,Ao:200,dn:.05},d=-1,e=null,k=-1,q=-1,x=0,h=-1,n=-1,t=0,z=0,H=b.vd[1],y=Math.log(2),G=!0,v={V:function(){switch(d){case -1:return-1;case 0:return n+e.wi;case 1:return t}},
Ph:function(f){return Math.pow(Math.min(Math.max(h,0),e.n-1)/(e.n-1),f||1)},m:function(f){e=Object.assign({},b,f);h=n=e.Yf;d=0;v.reset()},Fj:function(f){f=("undefined"===typeof f?Date.now():f)||0;var g=Math.min(Math.max(f-z,e.vd[0]),e.vd[1]);H=g;z=f;var B=-1===k?0:e.k;k=Math.min(Math.max(1E3/g,5),120)*(1-B)+k*B;f-q>e.Ao&&5<++x&&(g=e.k,h=h*(1-g)+(k<e.yd[0]?n-1:k>e.yd[1]?n+1:n)*g,Math.abs(h-n)>1-e.dn&&(g=Math.min(Math.max(Math.round(h),0),e.n-1),g!==n&&(h=n=g,k=(e.yd[1]-e.yd[0])/2)),q=f)},mg:function(f,
g,B,K,l,p){G=!1;a(f,g,B,K,l,p,0)},stop:function(){G=!0},Xn:function(f){t=f;d=1},zo:function(){d=0;v.reset()},reset:function(){H=b.vd[1];q=k=-1;x=0},Cq:function(f,g,B){B=Math.exp(-y*H/B);return(1-B)*f+B*g},Hp:function(){return H}};return v}(),Nc=function(){function a(H,y){var G=H[0]-.5;H=H[1]-.5;var v=y[0]-.5;y=y[1]-.5;return G*G+H*H-(v*v+y*y)}var b={Fi:4,Yd:[1.5,1.5,2],ra:[.1,.1,.1],aj:1,Z:-1,yf:-1,uo:2,an:1,ng:!0,wl:.8},d=null,e=[],k=[],q=[],x=[0],h=[.5,.5,1],n=null,t=0,z=[0,0,0];return{m:function(H){d=
Object.assign({},b,H);e.splice(0);k.splice(0);q.splice(0);t=0;H=d.Yd[0]*d.ra[0];var y=d.Yd[1]*d.ra[1],G=1/(1+d.Yd[2]*d.ra[2]),v=d.aj*Math.min(d.Z,d.yf),f=v/d.Z;v/=d.yf;var g=.5*d.wl;g*=g;for(var B=0;B<d.Fi;++B){var K=[];k.push(K);var l=Math.pow(G,B),p=f*l,m=v*l;l=p*d.an;q.push(l);var A=p*H,J=m*y;p/=2;m/=2;for(var P=1+(1-p-p)/A,C=1+(1-m-m)/J,F=0;F<C;++F)for(var M=m+F*J,r=M-.5,u=0;u<P;++u){var R=p+u*A,Q=R-.5;Q*Q+r*r>g||(R=[R,M,l],e.push(R),K.push(R))}d.ng&&K.sort(a);n=e}d.ng&&e.sort(a)},get:function(H){var y=
n.length;if(0===y)return h;for(;H>=x.length;)x.push(0);x[H]>=y&&(x[H]=0);var G=n[Math.floor(x[H])%y];x[H]=(x[H]+1/d.uo)%y;if(0===t)return G;z[0]=G[0];z[1]=G[1];z[2]=t;return z},gq:function(H){H>=x.length||(x[H]=Math.floor(Math.random()*n.length))},uq:function(H){t=H;if(0===t)n=e;else{for(var y=q.length,G=y-1,v=0;v<y;++v)if(q[v]<=H){G=v;break}n=k[G]}},reset:function(){for(var H=e.length/x.length,y=0;y<x.length;++y)x[y]=Math.floor(y*H);t=0;n=e}}}(),Ab=function(){function a(){d(f+G.Uf);g.port.postMessage("DONE")}
function b(){p.fd=0===G.ya?K(d):K(e)}function d(C){l.Vb&&null!==v&&(C-=f,C=Math.min(Math.max(C,G.Bh[0]),G.Bh[1]),f+=C,q(),m.isEnabled&&m.Hc&&l.Na&&f-m.Hf>G.ah&&(t(),m.Hf=f),v(f))}function e(C){l.Vb&&(p.timeout=setTimeout(d.bind(null,C),G.ya))}function k(){v=null;l.Vb=!1;q()}function q(){p.fd&&(window.cancelAnimationFrame(p.fd),p.fd=null);p.timeout&&(window.clearTimeout(p.timeout),p.timeout=null)}function x(C){C&&!l.Na?(l.Na=!0,B&&Gb.zo(),g.port.postMessage("STOP"),Ga.Gj(!0),b()):!C&&l.Na&&(l.Na=!1,
B&&Gb.Xn(1),Ga.Gj(!1),g.port.postMessage("START"))}function h(C){C.target.hidden?J():A()}function n(C,F,M){F=C.createShader(F);C.shaderSource(F,M);C.compileShader(F);return F}function t(){m.Hc=!1;var C=m.Xa,F=m.Gd,M=m.Hd,r=m.za;C.uniform1f(m.$h,Math.random());m.Wb?F.beginQueryEXT(r,M):C.beginQuery(r,M);C.drawElements(C.POINTS,1,C.UNSIGNED_SHORT,0);m.Wb?F.endQueryEXT(r):C.endQuery(r);Ga.flush();H().then(function(u){0===u||isNaN(u)?(m.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
u)):(u=G.Vj*G.$g*1E3/u,m.ve=(m.ve+1)%G.pc,m.If[m.ve]=u,++m.ui>G.pc&&(m.Md.set(m.If),m.Md.sort(function(R,Q){return R-Q}),u=m.Md[Math.floor(G.pc/2)],m.xd=Math.max(m.xd,u),G.Zg(u/m.xd)),m.Hc=!0)}).catch(function(){m.Hc=!0})}function z(C){var F=m.Xa,M=m.Gd,r=m.Hd;r=m.Wb?M.Bp(r,M.QUERY_RESULT_AVAILABLE_EXT):F.getQueryParameter(r,F.QUERY_RESULT_AVAILABLE);F=F.getParameter(M.GPU_DISJOINT_EXT);r?C(!F):setTimeout(z.bind(null,C),.1)}function H(){return new Promise(function(C,F){z(function(M){if(M){M=m.Xa;
var r=m.Gd,u=m.Hd;M=m.Wb?r.getQueryObjectEXT(u,r.QUERY_RESULT_EXT):M.getQueryParameter(u,M.QUERY_RESULT);C(M)}else F()})})}var y={ji:!0,Bh:[1,200],Uf:20,ya:0,$g:50,Vj:240,ah:3E3,pc:3,Zg:null},G=null,v=null,f=0,g=null,B=!1,K=null,l={Ma:!1,Na:!0,Gf:!1,Ef:!1,Df:!1,Vb:!1},p={fd:null,timeout:null},m={isEnabled:!1,Hc:!1,Xa:null,Gd:null,Hd:null,za:null,$h:null,Wb:!0,Hf:0,ui:0,If:null,Md:null,ve:0,xd:0},A=x.bind(null,!0),J=x.bind(null,!1),P={m:function(C){G=Object.assign(y,C);Object.assign(l,{Na:!0,Ma:!0,
Vb:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==G.Zg){C=document.createElement("canvas");C.setAttribute("width","1");C.setAttribute("height","1");var F={antialias:!1};C=C.getContext("webgl2",F)||C.getContext("webgl",F);if(F=C.getExtension("EXT_disjoint_timer_query")||C.getExtension("EXT_disjoint_timer_query_webgl2")){m.Xa=C;m.Gd=F;m.isEnabled=!0;m.Wb=F.beginQueryEXT?!0:!1;var M=n(C,C.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),r=n(C,C.FRAGMENT_SHADER,
"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",G.$g.toString())),u=C.createProgram();C.attachShader(u,M);C.attachShader(u,r);C.linkProgram(u);M=C.getAttribLocation(u,"a0");m.$h=C.getUniformLocation(u,"u39");C.useProgram(u);C.enableVertexAttribArray(M);u=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,u);C.bufferData(C.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),C.STATIC_DRAW);C.vertexAttribPointer(M,4,C.FLOAT,
!1,16,0);u=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,u);C.bufferData(C.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),C.STATIC_DRAW);C.disable(C.DEPTH_TEST);C.disable(C.DITHER);C.disable(C.STENCIL_TEST);C.viewport(0,0,1,1);u=m.Wb?F.createQueryEXT():C.createQuery();m.Hd=u;m.za=F.TIME_ELAPSED_EXT||C.TIME_ELAPSED;m.Hf=-G.ah;m.If=new Float32Array(G.pc);m.Md=new Float32Array(G.pc);m.xd=0;m.ve=0;m.ui=0;m.Hc=!0}}if(G.ji){C=!1;try{if("undefined"===typeof SharedWorker){var R=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
G.Uf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),Q=new Worker(R);Q.addEventListener("message",a);g={Si:Q,port:Q};l.Gf=!0}else{var ia=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
G.Uf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),aa=new SharedWorker(ia);aa.port.start();aa.port.addEventListener("message",a);g={Si:aa,port:aa.port};l.Ef=!0}C=!0}catch(N){}C&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",h):(window.addEventListener("blur",J),window.addEventListener("focus",A)),window.addEventListener("pagehide",
J),window.addEventListener("pageshow",A),l.Df=!0)}B="undefined"!==typeof Gb},v:function(){k();l.Df&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",h):(window.removeEventListener("blur",J),window.removeEventListener("focus",A)),window.removeEventListener("pagehide",J),window.removeEventListener("pageshow",A),l.Df=!1);l.Ef?(g.port.close(),l.Ef=!1):l.Gf&&(g.Si.terminate(),l.Gf=!1);Object.assign(l,{Na:!0,Ma:!1,Vb:!1});v=null},cq:function(){return l.Na},update:function(C){Object.assign(G,
C)},mg:function(C){l.Ma||P.m({});q();l.Vb=!0;v=C;l.Na&&b()},stop:k};return P}(),zc={lf:function(){return Date.now()},Ep:function(){return performance.now()}},yb=function(){function a(Y){switch(A){case m.movePinch:var pa=-Y.deltaY;0===J&&f("pinch",-1,.001*pa,null)}Y.deltaY;Y.preventDefault()}function b(Y){if(-1!==J)switch(A){case m.swipe:if(1!==J)break;n();z(Y,C);var pa=C[0]-P[0];k(pa);Y=pa/(20*K.offsetWidth/100);f("swipeMove",Math.min(Math.max(Y,-1),1),Y,null);break;case m.movePinch:if(2===J||3===
J){z(Y,C);pa=C[0]-P[0];var fa=C[1]-P[1];2===J?(X+=Math.sqrt(pa*pa+fa*fa),10>X?(P[0]=C[0],P[1]=C[1]):(za||(za=!0,f("moveStart",null,null,null)),ma[0]=pa,ma[1]=fa,M[0]=pa-F[0],M[1]=fa-F[1],f("move",ma,M,null),F[0]=ma[0],F[1]=ma[1])):3===J&&(Y=t(Y)/oa,f("pinch",Y,Y-Fa,null),Fa=Y)}}}function d(Y){if(-1!==J)switch(A){case m.swipe:if(1!==J)break;n();z(Y,C);Y=C[0]-P[0];var pa=0>Y;(Y=20<100*Math.abs(Y)/K.offsetWidth)&&pa?f("swipeLeft",r,null,null):Y&&!pa&&f("swipeRight",r,null,null);var fa=function(){setTimeout(function(){h();
J=0;f("swipeEnd",null,null,null)},202)};Y?(Y=function(){var ka=(pa?-1:1)*K.width,Sa=(pa?1:-1)*ka/K.width;r.style.transitionDuration=(400).toString()+"ms";r.style.left=(aa[0]+ka).toString()+"px";r.style.top=aa[1].toString()+"px";r.style.transform="rotate( "+Sa.toString()+"rad )";fa()},ia?Y():N=Y):(r.style.transitionDuration=(200).toString()+"ms",r.style.opacity="0",r.style.left=aa[0].toString()+"px",r.style.top=aa[1].toString()+"px",r.style.transform="",fa());J=-1;break;case m.movePinch:if(2===J||
3===J)J===J.move?f("moveEnd",null,null,null):3===J&&f("pinchEnd",null,null,null),J=0}}function e(Y){Y.preventDefault();if(-1!==J)switch(A){case m.swipe:if(0!==J)break;n();J=1;da=setTimeout(function(){h();da=null;1===J&&(J=0,f("swipeEnd",null,null,null))},1E3);q();f("swipeStart",null,null,null);f("swipeGetCanvas",r,R,u);z(Y,P);break;case m.movePinch:0!==J?2!==J||za||void 0===Y.changedTouches&&void 0===Y.touches||(oa=t(Y),20<oa&&(J=3,Fa=1,f("pinchStart",null,null,null))):3!==J&&(za=!1,z(Y,P),F[0]=0,
F[1]=0,J=2,X=0)}}function k(Y){var pa=0>Y;r.style.left=aa[0]+Y+"px";r.style.transformOrigin=pa?O:w;r.style.transform="rotate( "+((pa?1:-1)*Y/K.width).toString()+"rad )"}function q(){ia=!1;var Y=K.getBoundingClientRect();aa[0]=Y.left;aa[1]=Y.top;r.width=Math.round(K.width/4);r.height=Math.round(K.height/4);u.width=r.width;u.height=r.height;r.style.width=K.offsetWidth+"px";r.style.height=K.offsetHeight+"px";r.style.left=aa[0]+"px";r.style.top=aa[1]+"px";setTimeout(x,0)}function x(){R.drawImage(K,0,
0,r.width,r.height);Q.drawImage(r,0,0);ia=!0;document.body.appendChild(r);N&&(N(),N=!1)}function h(){r.style.transitionDuration="0ms";r.style.opacity="1";r.style.transform="";ia&&(document.body.removeChild(r),ia=!1)}function n(){da&&(window.clearTimeout(da),da=null)}function t(Y){H(Y,ja,0);H(Y,ta,1);return Math.sqrt(ja[0]*ja[0]+ta[0]*ta[0])}function z(Y,pa){void 0!==Y.changedTouches||void 0!==Y.touches?H(Y,pa,0):(pa[0]=Y.pageX,pa[1]=Y.pageY)}function H(Y,pa,fa){Y.touches.length>fa?(pa[0]=Y.touches[fa].pageX,
pa[1]=Y.touches[fa].pageY):(pa[0]=Y.changedTouches[fa].pageX,pa[1]=Y.changedTouches[fa].pageY)}function y(){p.forEach(function(Y){K.removeEventListener(Y.type,Y.tb,!1)});return p.splice(0,p.length)}function G(Y){Y.forEach(function(pa){v(pa.type,pa.tb)})}function v(Y,pa){K.removeEventListener(Y,pa,!1);r.removeEventListener(Y,pa,!1);K.addEventListener(Y,pa,!1);r.addEventListener(Y,pa,!1);0===p.filter(function(fa){return fa.type===Y&&fa.tb===pa}).length&&p.push({type:Y,tb:pa})}function f(Y,pa,fa,ka){l[Y].forEach(function(Sa){Sa.tb(pa,
fa,ka)})}function g(Y){return Y[0]+"% "+(100-Y[1]).toString()+"%"}var B=!1,K=null,l={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},p=[],m={idle:0,swipe:1,movePinch:2},A=m.idle,J=0,P=[0,0],C=[0,0],F=[0,0],M=[0,0],r=document.createElement("canvas"),u=document.createElement("canvas"),R=r.getContext("2d"),Q=u.getContext("2d");r.style.position="fixed";r.style.zIndex="800";r.style.cursor="move";r.style.pointerEvents=
"none";r.className="swipeImage";r.setAttribute("draggable",!1);var ia=!1,aa=[0,0],N=null,da=null,w=g([50,100]),O=g([50,0]),D=null,X=0,ma=[0,0],oa=0,za=!1,Fa=1,ja=[0,0],ta=[0,0],Ia={init:function(Y){if(B)Ia.switch_canvas(Y.qa);else return K=Y.qa,v("mousedown",e),v("mouseup",d),v("mouseout",d),v("mousemove",b),v("mousemove",b),v("wheel",a),v("touchstart",e),v("touchend",d),v("touchmove",b),B=!0,Ia},switch_canvas:function(Y){if(!B)Ia.init({qa:Y});else if(K!==Y){var pa=y();K=Y;G(pa);for(var fa in l)for(Y=
l[fa],pa=Y.length-1;0<=pa;--pa)Y[pa].vn&&Y.splice(pa,1)}},get_mode:function(){for(var Y in m)if(m[Y]===A)return Y;return!1},switch_mode:function(Y){B&&"undefined"!==typeof m[Y]&&(Y=m[Y],A!==Y&&(n(),A=Y,J=0))},add_listener:function(Y,pa,fa){l[Y].push({tb:pa,vn:"undefined"===typeof fa?!1:fa});return Ia},remove_listener:function(Y){l[Y].splice(0,l[Y].length);return Ia},animate_swipe:function(Y,pa){D&&(clearInterval(D),D=null);q();var fa=K.width/(pa/1E3)*("left"===Y?-1:1),ka=0,Sa,mb=Date.now();D=setInterval(function(){D&&
(Sa=Date.now(),ka+=(Sa-mb)/1E3*fa,k(ka),mb=Sa,Math.abs(ka)>.75*K.width&&D&&(clearInterval(D),D=null,h()))},16)}};return Ia}();window.CanvasListeners=yb;var T={VERSION:"4.0.0",cd:[],bd:[],Ee:!1,De:!1,Fe:!1,ready:!1,isBusy:!1},$a={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,FOVforced:0,Ce:10,Be:8E3},Pc={Ic:!0,Ud:"models3D",Td:"materials",xo:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",
ca:"",ua:"",Zc:"",ya:0,fk:20,width:1024,height:1024,li:!0,cn:[2,3.5],Zi:300,$c:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,ra:[.2,.2,.3],mc:[[.8,.5],[.8,.5],[1,1]],vo:30,dl:.9,nn:[.2,.6],mn:1,wo:[.01,.035],En:[.003,.007],Hg:[0,.6],Al:.2,ab:[.698111,1.047166,.122169],Ej:[-.1,0,0],ae:[0,-62,8],hn:1.03,Ea:[0,-60,0],Xf:50,zc:.4,hf:73,He:[.02,1],dk:[4,1],Kk:[0,.5],Gn:.15,Dn:1,zn:[1.5,5],Lo:20,zp:!1,Dc:145,xf:-18,vf:20,wf:3,Lc:[-110,0],hc:1,tj:.4,uj:3,je:[0,0,0],ic:[1.1,1],od:0,
Ye:.95,Xe:90,We:50,gd:30,Lb:.05,tf:!0,Qd:!0,Pf:"images/masks/target.jpg",Qf:!1,Pd:[1/255,175/255,236/255,0],Rd:-.001,Of:3.14,Le:0,Ke:"images/masks/burka.png",Ie:Math.PI-Math.PI/4,Ve:Math.PI/4,lg:[.3,.2,.1],Yb:!0,xi:[700,90],Km:[.2,.04],Mo:"images/backgrounds/viewer3D.png",Yg:[0,0,0],Xg:[0,15,60],ze:.3,Uo:50,Qo:Wc?Za:!1,Ro:Wc?Za:!1,To:1E3,Wo:1E3,So:40,Po:[0,0,-400],Ai:.1,Om:.5,Bi:[.5,1.5],Sd:30,Nm:!0},I=Object.assign({},Pc);V.sh=!0;V.th=!0;V.rh=!1;V.Pa=!0;var bb={ce:3.5,Ab:"images/debug/picsou.png",
Rc:45,Mf:.785,Nf:.3925,Od:5,Nd:2,Lf:0,Kf:0,No:"images/backgrounds/bg1.jpg",Oo:"images/backgrounds/bg1_light.jpg",Rj:1,Sj:2};I.fx=[4,50];I.Lc=[-110,0];I.tj=.25;I.uj=3;I.je=[0,-2,20];I.ic=[.95,1];V.Pc=2.1289;V.fg=1;bb.ce=2.5858;bb.Mf=.4388;bb.Nf=.118;bb.Ab="images/debug/hdri2.png";bb.Rc=180;bb.og=.8065;bb.Od=5.3887;bb.Nd=.5351;bb.Lf=-.3019;bb.Kf=0;bb.Rj=3.5288;bb.Sj=6.2168;var Oc={element:null,Dh:null,Ld:!1,ph:null,ha:null,Ng:null,deviceId:-1,Pb:-1,ud:0,Qi:null,ye:-1},Ca=Object.assign({},Oc),gb=null,
Xc=I.cn,Ec=window.devicePixelRatio?window.devicePixelRatio:1;var pc={zl:Math.max(Xc[0],Ec)/Ec,ff:Math.min(Ec,Xc[1])};var eb=null;T.onLoad=function(a){T.ready?a():T.cd.push(a)};T.onHalfLoad=function(a){T.load_model?a():T.bd.push(a)};T.onWebcamAsk=function(a){T.Ee=a};T.onContextLost=function(a){T.De=a};T.onWebcamGet=function(a){T.Fe=a};T.get_onHalfLoadCallstack=function(){return T.bd};T.set_size=function(a,b,d){d=d?pc.ff:1;I.width=a*d;I.height=b*d};T.get_videoDevices=function(a){Jc(a)};T.set_videoDevice=
function(a){Ca.deviceId=a};T.set_videoSizes=function(a,b,d,e,k,q){$a.idealWidth=a;$a.idealHeight=b;$a.minWidth=d;$a.maxWidth=e;$a.minHeight=k;$a.maxHeight=q};T.set_loading=function(a,b,d){a&&(I.Qf=!0,I.Pf=a);"number"===typeof b&&(a=new Wb(b),I.Pd=[a.r,a.X,a.b,0]);"number"===typeof d&&(I.Rd=d)};T.set_settings=function(a,b,d){a&&Object.assign(I,a);b&&Object.assign($a,b);d&&Object.assign(bb,d)};T.get_size=function(){return{width:I.width,height:I.height}};T.get_cv=function(){return jb.ub()};T.set_NNCPath=
function(a){I.Zc=a};T.set_materialsPath=function(a){I.Td=a};T.set_modelsPath=function(a){I.Ud=a};T.destroy=function(){return eb?eb.v():Promise.resolve()};T.update_lightSettings=function(a){a=Object.assign({screenTextureURL:null,screenLuminosity:-1,lightDirFactor:-1,lightAmbFactor:-1,screenWidthAngle:-1},a);0<=a.lightDirFactor&&(bb.Od=a.lightDirFactor);0<=a.lightAmbFactor&&(bb.Nd=a.lightAmbFactor);0<=a.screenLuminosity&&(bb.ce=a.screenLuminosity);0<=a.screenWidthAngle&&(bb.Rc=a.screenWidthAngle);a.screenTextureURL&&
(bb.Ab=a.screenTextureURL);T.ready&&(eb.Aj(),xa.Ia.hh(Ca.ha))};T.init2=function(a){var b=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,NNCPath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1,scanOverlapFactors:null,scanNScaleLevels:null,scanScale0Factor:null},a);I.Ic=b.isRequestCamera;T.set_size(b.width,b.height,b.isApplyOverSampling);T.update_lightSettings(a);b.modelsPath&&(I.Ud=b.modelsPath);b.materialsPath&&
(I.Td=b.materialsPath);b.materialTextureBasePath&&(V.Di=b.materialTextureBasePath);b.NNCPath&&(I.Zc=b.NNCPath);I.scanOverlapFactors=b.scanOverlapFactors||I.scanOverlapFactors;I.scanNScaleLevels=b.scanNScaleLevels||I.scanNScaleLevels;I.scanScale0Factor=b.scanScale0Factor||I.scanScale0Factor;I.li=b.isMirror;return new Promise(function(d,e){T.onHalfLoad(d);T.init(b.basePath,function(){},e,b.cv)})};T.init=function(a,b,d,e){eb=bd();T.qb=d?function(k,q){d(k,q);T.qb=!1}:function(){};T.bp=eb;a&&(I.ca=a);
b&&T.cd.push(b);eb.Aj();a=eb.Ul();return jb.m({Ue:"jeefitCanvas",qa:e,width:a.width,height:a.height,debug:!1,$f:function(){T.De&&T.De()},premultipliedAlpha:!0})?I.Ic?ed():fd():(T.qb&&T.qb("GL_INCOMPATIBLE","Cannot init Context"),!1)};window.JEELIZVTO=T;var Lc=function(){function a(){Ba.ba();c.viewport(0,0,1,1);Z.set("s74");e.h(0);W.l(!1);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,q);b(0<q[0])}var b=null,d=!1,e=null,k=!1,q=null,x={m:function(h){if(k)return!1;e=h;Z.sc([{id:"s74",name:"_",g:"uniform sampler2D u41;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u41,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",
i:["u41"],precision:"lowp"}]);Z.j("s74",[{type:"1i",name:"u41",value:0}]);q=new Uint8Array(4);return k=!0},start:function(h,n){x.stop();b=n;d=window.setInterval(a,h)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return x}(),Fc={};Wb.prototype={constructor:Wb,r:1,X:1,b:1,set:function(a){a instanceof Wb?this.L(a):"number"===typeof a?Rc(this,a):"string"===typeof a&&gd(this,a);return this},Jn:function(){function a(b,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?b+6*(d-b)*e:.5>e?d:e<2/3?b+6*(d-b)*(2/3-
e):b}return function(b,d,e){b=Fc.Math.Ap(b,1);d=Fc.Math.Pe(d,0,1);e=Fc.Math.Pe(e,0,1);0===d?this.r=this.X=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.X=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},L:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ca:function(a){this.r*=
a;this.X*=a;this.b*=a;return this},sb:function(a,b){void 0===b&&(b=0);this.r=a[b];this.X=a[b+1];this.b=a[b+2];return this}};var hd={};sc.prototype={constructor:sc,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get w(){return this.S},set w(a){this.S=a},set:function(a,b,d,e){this.C=a;this.D=b;this.F=d;this.S=e;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.S)},L:function(a){this.C=a.x;
this.D=a.y;this.F=a.z;this.S=a.w;return this},inverse:function(){this.C*=-1;this.D*=-1;this.F*=-1;this.normalize();return this},qd:function(a){return this.C*a.C+this.D*a.D+this.F*a.F+this.S*a.S},Jf:function(){return this.C*this.C+this.D*this.D+this.F*this.F+this.S*this.S},length:function(){return Math.sqrt(this.C*this.C+this.D*this.D+this.F*this.F+this.S*this.S)},normalize:function(){var a=this.length();0===a?(this.F=this.D=this.C=0,this.S=1):(a=1/a,this.C*=a,this.D*=a,this.F*=a,this.S*=a);return this},
multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),Sc(this,a,b)):Sc(this,this,a)},sb:function(a,b){void 0===b&&(b=0);this.C=a[b];this.D=a[b+1];this.F=a[b+2];this.S=a[b+3];return this}};Xb.prototype={constructor:Xb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},dj:function(a){this.x=a;
return this},ej:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},L:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.dd(a,b);this.x+=a.x;this.y+=a.y;return this},dd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.gb(a,b);this.x-=a.x;this.y-=a.y;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},af:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},qd:function(a){return this.x*a.x+this.y*a.y},Jf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.af(this.length())},
sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this}};Va.prototype={constructor:Va,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},dj:function(a){this.x=a;return this},ej:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},L:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.dd(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},dd:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.gb(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},gb:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ca:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},af:function(a){return this.Ca(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},Pe:function(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},qd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Jf:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.af(this.length())},sb:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}};Yb.Uj="XYZ";Yb.prototype={constructor:Yb,get x(){return this.C},set x(a){this.C=a},get y(){return this.D},set y(a){this.D=a},get z(){return this.F},set z(a){this.F=a},get order(){return this.Ra},set order(a){this.Ra=a},set:function(a,b,d,e){this.C=
a;this.D=b;this.F=d;this.Ra=e||this.Ra;return this},clone:function(){return new this.constructor(this.C,this.D,this.F,this.Ra)},L:function(a){this.C=a.C;this.D=a.D;this.F=a.F;this.Ra=a.Ra;return this},sb:function(a){this.C=a[0];this.D=a[1];this.F=a[2];void 0!==a[3]&&(this.Ra=a[3]);return this}};Bc.prototype={constructor:Bc,set:function(a,b){this.min.L(a);this.max.L(b);return this},clone:function(){return(new this.constructor).L(this)},L:function(a){this.min.L(a.min);this.max.L(a.max);return this},
empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||new Va).gb(this.max,this.min)},getParameter:function(a,b){return(b||new Va).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};Zb.prototype={constructor:Zb,set:function(a,b,d,e,k,q,x,h,n,t,z,H,y,G,v,f){var g=this.elements;g[0]=a;g[4]=b;
g[8]=d;g[12]=e;g[1]=k;g[5]=q;g[9]=x;g[13]=h;g[2]=n;g[6]=t;g[10]=z;g[14]=H;g[3]=y;g[7]=G;g[11]=v;g[15]=f;return this},clone:function(){return(new Zb).sb(this.elements)},L:function(a){this.elements.set(a.elements);return this},multiply:function(a,b){return void 0!==b?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Uc(this,a,b)):Uc(this,this,a)},Ca:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this},sb:function(a){this.elements.set(a);return this}};Cc.prototype={constructor:Cc,
clone:function(){return(new this.constructor).L(this)},L:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Da.L(a.Da);this.color.L(a.color);this.Zb=a.Zb;for(var b=0,d=a.xe.length;b<d;b++)this.xe[b]=a.xe[b].clone();b=0;for(d=a.Vg.length;b<d;b++)this.Vg[b]=a.Vg[b].clone();return this}};var E=function(){function a(p,m,A){m=p.createShader(m);p.shaderSource(m,A);p.compileShader(m);return p.getShaderParameter(m,p.COMPILE_STATUS)?m:!1}function b(p,m){ea.la()&&(m.g=m.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));
m.sf=a(p,p.VERTEX_SHADER,m.u,m.name+" VERTEX");m.rf=a(p,p.FRAGMENT_SHADER,m.g,m.name+" FRAGMENT");var A=p.createProgram();p.attachShader(A,m.sf);p.attachShader(A,m.rf);p.linkProgram(A);return A}function d(p){p.u="#version 300 es\n"+p.u.replace(/varying/g,"out");p.g="#version 300 es\n"+p.g.replace(/varying/g,"in");p.u=p.u.replace(/texture2D\(/g,"texture(");p.g=p.g.replace(/texture2D\(/g,"texture(");p.da||(p.g=p.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),p.g=p.g.replace(/gl_FragColor/g,
"FragColor"));var m=0,A=[];p.u=p.u.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(J,P,C){var F="";C.split(",").forEach(function(M){M=M.trim();F+="layout(location = "+m+") in "+P+" "+M+";\n";A.push(M);++m});return F});p.Zj=A}function e(p){return["float","sampler2D","int"].map(function(m){return"precision "+p+" "+m+";\n"}).join("")}function k(p,m){if(m.ei)return!1;var A=ea.la();V.Vp||A||p.enableVertexAttribArray(0);void 0===m.da&&(m.da=!1);m.da&&(m.ad=A?3:2);m.id=K++;void 0===m.ad&&
(m.ad=2);void 0===m.precision&&(m.precision="highp");m.da&&(m.g=(ea.la()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":"#extension GL_EXT_draw_buffers : require\n")+m.g);void 0===m.u&&(m.u="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var J=e(m.precision);
m.g=J+m.g;m.u=J+m.u;A&&3<=m.ad&&d(m);m.Fa&&m.Fa.forEach(function(P){m.u=m.u.replace(P.search,P.replace);m.g=m.g.replace(P.search,P.replace)});m.oa=b(p,m);m.A={};m.i.forEach(function(P){m.A[P]=p.getUniformLocation(m.oa,P)});m.attributes={};m.va=[];m.Ug=0;void 0===m.I&&(m.I=["a0"]);void 0===m.R&&(m.R=[2]);m.I.forEach(function(P,C){var F=A&&3<=m.ad?m.Zj.indexOf(P):p.getAttribLocation(m.oa,P);m.attributes[P]=F;m.va.push(F);m.Ug+=4*m.R[C]});m.set=function(){g!==m.id&&(-1!==g&&B.K(),g=m.id,B=m,p.useProgram(m.oa),
m.va.forEach(function(P){0!==P&&p.enableVertexAttribArray(P)}))};m.K=function(){g=-1;m.va.forEach(function(P){0!==P&&p.disableVertexAttribArray(P)})};m.ei=!0}function q(p,m){k(p,m);m.set();g=-1;return m}function x(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"highp"}}function h(){l.j("s105",[{type:"1i",name:"u1",value:0}]);l.j("s106",[{type:"1i",name:"u153",value:0}]);l.j("s107",[{type:"1i",name:"u74",value:0}])}function n(){var p=
"u41 u143 u144 u145 u146 u42 u78".split(" ").concat(G,v);f.s108={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 v=s(a);vec3 w=mix(u143,u83,c);float x=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u81,1.,u85);vec2 j=u80/t;vec3 k=a0;float A=max(0.,-a0.z-u145)*u146;k.x+=A*sign(a0.x)*(1.-u85);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u149,u150,a0.z);}",
i:["u149","u150"].concat(p),I:["a0"],precision:"highp"};f.s109={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u147"].concat(H,p),I:["a0","a1"],R:[3,2],precision:"lowp"};f.s110={name:"_",g:"uniform vec3 u147;void main(){gl_FragColor=vec4(u147,0.);}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u147"].concat(p),R:[3],precision:"lowp"};f.s111={name:"_",g:"uniform vec4 u13;varying vec3 vv0;varying float vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,p);vec2 f=u85*e;vec3 c=u85*o;vec2 t=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,q).rgb+vec3(u79,0.,0.),u82,c);float u=mix(texture2D(u41,r).r,0.,u85);a.z+=u;mat3 h=s(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 k=u80/t;vec3 l=a0;float z=max(0.,-a0.z-u145)*u146;l.x+=z*sign(a0.x)*(1.-u85);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u13","u78"].concat(p),I:["a0","a2"],precision:"highp"};f.s112={name:"_",g:"uniform sampler2D u153;uniform vec4 u13;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u153,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3);gl_FragColor=vec4(a,m);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 f=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 h=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 k=u80/v;vec3 l=a0;float B=max(0.,-a0.z-u145)*u146;l.x+=B*sign(a0.x)*(1.-u85);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u13","u78","u153"].concat(p),I:["a3","a0","a2","a1"],R:[4,3,3,2],precision:"highp"};f.s113={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,m);vec2 f=u85*e;vec3 c=u85*l;vec2 q=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,n).rgb+vec3(u79,0.,0.),u82,c);float r=mix(texture2D(u41,o).r,0.,u85);a.z+=r;mat3 s=p(a);vec3 t=mix(u143,u83,c);float u=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u81,1.,u85);vec2 j=u80/q;vec3 k=a0;float x=max(0.,-a0.z-u145)*u146;k.x+=x*sign(a0.x)*(1.-u85);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(A,1.));}",
i:["u111","u148"].concat(p),precision:"lowp"};f.s114={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u145,u146,u152;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,n);vec2 f=u85*e;vec3 c=u85*m;vec2 r=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,o).rgb+vec3(u79,0.,0.),u82,c);float s=mix(texture2D(u41,p).r,0.,u85);a.z+=s;mat3 t=q(a);vec3 u=mix(u143,u83,c);float v=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u81,1.,u85);vec2 j=u80/r;vec3 k=a0;float y=max(0.,-a0.z-u145)*u146;k.x+=y*sign(a0.x)*(1.-u85);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u111","u148"].concat(y,p),I:["a0","a1"],R:[3,2],precision:"lowp"};p=["u136","u124","u137"];f.s115={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=1.;}",i:p,precision:"highp"};f.s116={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0;varying float vv1;void main(){vec4 a=u137*vec4(a2,0.);gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:p,I:["a0","a2"],precision:"highp"};f.s106={name:"_",g:"uniform sampler2D u153;uniform vec3 u154;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u154),c=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u137*vec4(a2,0.),a=u137*vec4(a0,1.);gl_Position=u136*u124*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u153","u154"].concat(p),I:["a0","a2","a1","a3"],precision:"highp"};f.s105={name:"_",g:"uniform sampler2D u1;uniform vec3 u147;uniform float u73;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u147,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u147,b,u73),a.a);gl_FragColor=c;}",u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u136*u124*u137*vec4(a0,1.)+f,vv0=a1;}",i:["u147"].concat(H,p),I:["a0","a1"],
Fa:[{search:"0.0005",replace:Ga.fa()?"0.0005":"0.0"}],precision:"lowp"};f.s117={name:"_",g:"uniform vec4 u111;uniform float u148;void main(){float b=u148;vec4 a=u111;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;void main(){gl_Position=u136*u124*u137*vec4(a0,1.);}",i:["u111"].concat(p),precision:"highp"};f.s107={name:"_",g:"uniform sampler2D u74;uniform vec4 u111,u75;uniform float u148;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u148;vec4 a=u111,d=texture2D(u74,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u75*e),c=mix(c,l,u75.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec2 vv0;void main(){gl_Position=u136*u124*u137*vec4(a0,1.),vv0=a1;}",i:["u111"].concat(y,p),I:["a0","a1"],R:[3,2],precision:"highp"}}function t(){for(var p in f)k(c,f[p])}var z=!1,H=["u1","u73"],y=["u74","u75"],G="u76 u77 u78 u79 u80 u81".split(" "),v="u82 u83 u84 u85 u86 u87".split(" "),f={},g=-1,B=null,K=0,l={ma:function(p,m){f[p]=m;z&&k(c,f[p])},kq:function(p,m){f[p]=m;m.ei=!1;k(c,f[p])},Xb:function(){return z},m:function(){f.s0=
x();f.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};f.s75={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(-1.,1.)*vv0+vec2(1.,0.));}",i:["u1"],precision:"lowp"};f.s76={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u12,vv0).rgb,texture2D(u1,vv0).rgb,u13*f),1.);}",i:["u1","u12",
"u13"],precision:"highp"};f.s77={name:"_",g:"uniform sampler2D u1,u12;uniform float u13;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u12,vv0),texture2D(u1,vv0),u13*f);}",i:["u1","u12","u13"],precision:"highp"};f.s12={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u88,vv0*u89),c=texture2D(u1,vv0*u89);float a=smoothstep(u90,0.,vv0.y);a+=smoothstep(1.-u90,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u91*f);}",
i:["u1","u89","u88","u90","u91"]};f.s78={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u89;uniform float u90,u91;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u89;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u88,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u90,0.,vv0.y);b+=smoothstep(1.-u90,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u91*h));gl_FragColor=k;}",
i:["u1","u89","u88","u90","u91"],precision:"highp"};f.s79={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};f.s80={name:"_",g:"uniform sampler2D u1,u92;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u14"],precision:"lowp"};f.s81={name:"_",g:"uniform sampler2D u1,u92,u41;uniform vec2 u14,u93;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u14*f).rgb+texture2D(u1,a+u14*g).rgb+texture2D(u1,a+u14*h).rgb+texture2D(u1,a+u14*i).rgb;float c=texture2D(u41,vec2(.5,.5)).a,d=u93.x+pow(c,2.)*(u93.y-u93.x);vec3 j=mix(b/5.,texture2D(u92,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u92","u14","u41","u93"],precision:"lowp"};f.s82={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u14).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u14).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u14).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u14).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u14;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u14"],precision:"lowp"};f.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);gl_FragColor=b/5.;}",i:["u1","u14"],precision:"lowp"};f.RGBEtoRGB={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",
i:["u1"],precision:"highp"};f.s13={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};f.s84={name:"_",g:"uniform sampler2D u94,u95;uniform float u96,u97;varying vec2 vv0;void main(){vec3 a=texture2D(u95,vv0).rgb,b=texture2D(u94,vv0).rgb;gl_FragColor=vec4(b*u97+u96*a,1.);}",
i:["u94","u95","u96","u97"],precision:"highp"};f.s85={name:"_",g:"uniform sampler2D u98,u99;uniform float u91;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u99,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u98,g).rgb,u91*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u98","u99","u91"],precision:"lowp",Fa:[{search:"8888",replace:V.rm[ea.V()]}]};f.s86={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u14).a+.110236*texture2D(u1,vv0-2.*u14).a+.220472*texture2D(u1,vv0-u14).a+.275591*a.a+.220472*texture2D(u1,vv0+u14).a+.110236*texture2D(u1,vv0+2.*u14).a+.031496*texture2D(u1,vv0+3.*u14).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u14"],precision:"lowp"};f.s87={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};f.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u14)+.110236*texture2D(u1,vv0-2.*u14)+.220472*texture2D(u1,vv0-u14)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u14)+.110236*texture2D(u1,vv0+2.*u14)+.031496*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s89={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u14)+texture2D(u1,vv0-2.*u14)+texture2D(u1,vv0-u14)+texture2D(u1,vv0)+texture2D(u1,vv0+u14)+texture2D(u1,vv0+2.*u14)+texture2D(u1,vv0+3.*u14);gl_FragColor=a/7.;}",
i:["u1","u14"],precision:"lowp"};f.s90={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};f.s91={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u88,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u88"],precision:"highp"};f.s92={name:"_",g:"uniform sampler2D u1,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u88,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u88"],precision:"highp"};f.s93=
{name:"_",g:"uniform sampler2D u1,u100,u2,u101;uniform vec4 u102;uniform vec2 u103;uniform float u104,u105,u106,u107;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u100,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u101,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u103*.5+h).r,l=atan(a.x,a.y),m=-(mod(u104,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u105,b),c=.5+u107*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u102*k;gl_FragColor=mix(d,o,j*u106);}",
i:"u1 u2 u101 u100 u102 u104 u105 u106 u103 u107".split(" "),precision:"lowp"};var p="u108 u109 u110 u111 u98 u112 u3 u113 u100 u114 u115 u116 u117 u118 u14".split(" ");V.ea&&(f.s94={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u119,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u120,u115,u117,u114;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u114;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u108,vv0);vec3 k=texture2D(u100,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u113;vec4 b=texture2D(u111,vv0),m=texture2D(u109,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u110,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u112,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u115-u117,u115+u117,I);h=mix(l(texture2D(u98,H)),u116,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u120*texture2D(u119,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:p.concat(["u119","u120"]),precision:"highp"});f.s95={name:"_",g:"uniform sampler2D u108,u109,u110,u111,u98,u112,u100;uniform vec3 u113,u116;uniform vec2 u14;uniform float u3,u115,u117,u118,u121,u122,u114,u123;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u114;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u108,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u100,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u108,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u113;vec4 c=texture2D(u111,vv0),s=texture2D(u109,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u110,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u121*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u14,w=vv0+vec2(1.,0.)*u14,x=vv0+vec2(0.,1.)*u14,y=vv0+vec2(0.,-1.)*u14;vec3 Q=texture2D(u109,v).rgb,R=texture2D(u109,w).rgb,S=texture2D(u109,x).rgb,T=texture2D(u109,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u112,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u115-u117,u115+u117,fa);vec3 ha=r(texture2D(u98,ea));A=mix(ha,u116,ga_*u118);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u14.y/u14.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u121),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u122,q)*m);float ma=mix(la,q,u123);gl_FragColor=vec4(f,ma);}",
i:p.concat(["u123","u121","u122"]),precision:"highp"};V.ea&&(f.s96={name:"_",g:"uniform sampler2D u108,u109;uniform mat4 u124;uniform vec2 u125,u14,u126;uniform float u127,u128,u129,u130,u131,u132,u133,u134,u120;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u126;vec4 pos=texture2D(u108,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u127),s=sin(u127);vec3 no0=texture2D(u109,uvt).rgb;float zv=(u124*vec4(co0,1.)).z;vec3 co;vec2 scale=u125/abs(zv),uv,duv=u14*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u14*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u108,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u133,u134,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u130,u131,1.),ao=dzFactor*clamp(u129*omegaMin*u132,0.,u120);gl_FragColor=vec4(ao,ao,ao,u128);}",
i:"u108 u109 u129 u128 u127 u14 u135 u130 u131 u132 u133 u134 u124 u125 u120".split(" "),Fa:[{search:"8888.8",replace:V.uk[ea.V()].toFixed(1)}],precision:"lowp"},f.s97={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u14*f)+texture2D(u1,a+u14*g)+texture2D(u1,a+u14*h)+texture2D(u1,a+u14*i);b+=texture2D(u1,a+u14*j)+texture2D(u1,a+u14*k)+texture2D(u1,a+u14*l)+texture2D(u1,a+u14*m),gl_FragColor=b/9.;}",
i:["u1","u14"],precision:"lowp"});f.s98={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",u:"attribute vec3 a0;uniform mat4 u136,u124,u137;varying vec3 vv0;void main(){vec4 a=u136*u124*u137*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u136","u124","u137"],precision:"lowp"};f.s99={name:"_",g:"uniform sampler2D u138,u112,u99;uniform mat4 u136,u139;uniform vec2 u140;uniform float u141;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u140*(z-f),0.),B=vec3(u139*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u99,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u136*u,i=h.xyz/h.w;if(texture2D(u138,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u139*vec4(g,0.)),t+=texture2D(u112,y(s));}gl_FragColor=vec4(u141*t.rgb/n,1.);}",
i:"u138 u112 u99 u136 u139 u140 u141".split(" "),Fa:[{search:"8888.8",replace:V.po[ea.V()].toFixed(1)},{search:"9999.9",replace:V.qo[ea.V()].toFixed(1)}],precision:"lowp"};f.s100={name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u14)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u14);gl_FragColor=a;}",i:["u1","u14"],precision:"lowp"};f.s101={name:"_",g:"uniform sampler2D u1,u142;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
u:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u136,u124;varying vec2 vv0;void main(){vec4 a=u136*u124*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u136","u124","u1"],I:["a0","a1"],precision:"lowp"};if(ea.aa()){p="u41 u143 u144 u145 u146 u42 u111 u147 u148 u13 u149 u150 u78".split(" ").concat(G,v);ea.pi()||(f.s102={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",da:!0});f.s103={name:"_",u:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],da:!0};f.s104NNGLcolor={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,s);vec2 f=u85*e;vec3 c=u85*r;vec2 w=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,t).rgb+vec3(u79,0.,0.),u82,c);float x=mix(texture2D(u41,u).r,0.,u85);a.z+=x;mat3 h=v(a);vec3 y=mix(u143,u83,c);float z=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u81,1.,u85);vec2 k=u80/w;vec3 l=a0;float C=max(0.,-a0.z-u145)*u146;l.x+=C*sign(a0.x)*(1.-u85);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u149,u150,a0.z),vv0=m,vv3=a0.y;}",
i:p,I:["a0","a2"],R:[3,3],da:!0};f.s104NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(H),I:["a0","a2","a1"],R:[3,3,2],da:!0};f.s104NNGLtextureNormalMap={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform sampler2D u1,u153;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(H,["u153"]),I:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};f.s104NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,t);vec2 f=u85*e;vec3 c=u85*s;vec2 x=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,u).rgb+vec3(u79,0.,0.),u82,c);float y=mix(texture2D(u41,v).r,0.,u85);a.z+=y;mat3 h=w(a);vec3 z=mix(u143,u83,c);float A=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u81,1.,u85);vec2 k=u80/x;vec3 l=a0;float D=max(0.,-a0.z-u145)*u146;l.x+=D*sign(a0.x)*(1.-u85);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u149,u150,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(H,y),I:["a0","a2","a1"],R:[3,3,2],da:!0};f.s104NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u151;uniform float u144,u149,u150,u145,u146,u152;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,u);vec2 f=u85*e;vec3 c=u85*t;vec2 y=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,v).rgb+vec3(u79,0.,0.),u82,c);float z=mix(texture2D(u41,w).r,0.,u85);a.z+=z;mat3 h=x(a);vec3 A=mix(u143,u83,c);float B=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u81,1.,u85);vec2 k=u80/y;vec3 l=a0;float E=max(0.,-a0.z-u145)*u146;l.x+=E*sign(a0.x)*(1.-u85);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u149,u150,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(H,["u153"],y),I:["a3","a0","a2","a1"],R:[4,3,3,2],da:!0};p="u136 u124 u137 u111 u147 u148 u13".split(" ");f.s104color={name:"_",g:"uniform vec4 u111,u13;uniform vec3 u147;uniform float u148;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv3),c=u148;vec4 a=u111;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u147,0.),gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",i:p,I:["a0","a2"],da:!0};f.s104={name:"_",g:"uniform sampler2D u1;uniform vec4 u111,u13;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 b=u111;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u147,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u147,l,u73),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(H),I:["a0","a2","a1"],da:!0};var m=["u153","u154"];f.s104NormalMap={name:"_",g:"uniform sampler2D u1,u153;uniform vec4 u111,u13;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u153,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u148;vec4 c=u111;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u147,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u147,t,u73),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(H,m),I:["a0","a2","a1","a3"],da:!0};f.s104ParamsMap={name:"_",g:"uniform sampler2D u1,u74;uniform vec4 u111,u13,u75;uniform vec3 u147;uniform float u148,u73;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv4),d=u148;vec4 a=u111,e=texture2D(u74,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u75*f),d=mix(d,r,u75.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u147,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u147,u,u73),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
u:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(H,y),I:["a0","a2","a1"],da:!0};f.s104NormalParamsMap={name:"_",g:"uniform sampler2D u1,u153,u74;uniform vec4 u111,u13,u75;uniform vec3 u154,u147;uniform float u148,u73;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u153,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u148;vec4 a=u111,f=texture2D(u74,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u75*l),e=mix(e,z,u75.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u147,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u147,C,u73),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
u:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u136,u124,u137;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u137*vec4(a0,1.),b=u137*vec4(a2,0.);gl_Position=u136*u124*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(H,m,y),I:["a0","a2","a1","a3"],da:!0}}else n();t();p=[{type:"1i",name:"u1",value:0}];l.j("s0",p);l.j("s1",p);l.j("s76",[{type:"1i",name:"u12",value:1}].concat(p));l.j("s77",[{type:"1i",name:"u12",
value:1}].concat(p));l.j("s12",[{type:"1i",name:"u88",value:1}].concat(p));l.j("s78",[{type:"1i",name:"u88",value:1}].concat(p));l.j("s79",p);l.j("s80",p);l.j("s81",[{type:"1i",name:"u92",value:1},{type:"1i",name:"u41",value:2}].concat(p));l.j("s82",p);l.j("s83",p);l.j("s13",p);l.j("s84",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);l.j("s85",[{type:"1i",name:"u98",value:0},{type:"1i",name:"u99",value:1}]);l.j("s86",p);l.j("s87",p);l.j("s88",p);l.j("s89",p);l.j("s90",p);l.j("s91",
[{type:"1i",name:"u88",value:1}].concat(p));l.j("s92",[{type:"1i",name:"u88",value:1}].concat(p));V.ea&&(l.j("s96",[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},{type:"1f",name:"u130",value:V.hk},{type:"1f",name:"u131",value:V.ik},{type:"1f",name:"u132",value:V.vk},{type:"1f",name:"u133",value:V.lk},{type:"1f",name:"u134",value:V.mk},{type:"1f",name:"u129",value:1},{type:"1f",name:"u120",value:1}]),l.j("s97",p));m=[{type:"1i",name:"u108",value:0},{type:"1i",name:"u109",value:1},
{type:"1i",name:"u110",value:2},{type:"1i",name:"u98",value:3},{type:"1i",name:"u112",value:4},{type:"1i",name:"u111",value:6},{type:"1i",name:"u100",value:7},{type:"1f",name:"u118",value:0},{type:"1f",name:"u115",value:0},{type:"1f",name:"u117",value:0}];V.ea&&l.j("s94",m.concat([{type:"1f",name:"u120",value:V.kk[ea.V()]},{type:"1i",name:"u119",value:5}]));l.j("s95",m.concat([{type:"1f",name:"u121",value:V.Pc},{type:"1f",name:"u122",value:V.fg},{type:"1f",name:"u123",value:0}]));l.j("s99",[{type:"1i",
name:"u138",value:0},{type:"1i",name:"u112",value:1},{type:"1i",name:"u99",value:2},{type:"1f",name:"u141",value:V.oo}]);l.j("s100",p);l.j("s101",p);l.j("s93",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u101",value:2},{type:"1i",name:"u100",value:3},{type:"1f",name:"u106",value:1},{type:"2f",name:"u103",value:[0,0]}].concat(p));ea.aa()?(l.j("s104",p),l.j("s104NormalMap",[{type:"1i",name:"u153",value:1}].concat(p)),l.j("s104ParamsMap",[{type:"1i",name:"u74",value:1}].concat(p)),l.j("s104NormalParamsMap",
[{type:"1i",name:"u153",value:1},{type:"1i",name:"u74",value:2}].concat(p))):h();z=!0},$n:function(){n();t();h()},Bd:function(){return B.id},Dd:function(){return G},Ed:function(){return v},set:function(p){wb.rj(l);f[p].set()},Bb:function(p){return q(p,x())},fe:function(p){return q(p,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},co:function(p){return q(p,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",da:!0})},K:function(){-1!==g&&B.K()},he:function(){var p=0;B.va.forEach(function(m,A){A=B.R[A];c.vertexAttribPointer(m,A,c.FLOAT,!1,B.Ug,p);p+=4*A})},dc:function(){l.ec(c)},ec:function(p){p.vertexAttribPointer(B.va[0],2,p.FLOAT,!1,8,0)},pq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,12,0)},Qa:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0)},bb:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0)},jj:function(){c.vertexAttribPointer(B.attributes.a2,
3,c.FLOAT,!1,32,12)},kj:function(){c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},Sc:function(){c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},qq:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,20,0);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,20,12)},Qn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12);c.vertexAttribPointer(B.attributes.a1,2,c.FLOAT,!1,32,24)},Rn:function(){c.vertexAttribPointer(B.attributes.a0,
3,c.FLOAT,!1,32,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,32,12)},Sn:function(){c.vertexAttribPointer(B.attributes.a0,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(B.attributes.a2,3,c.FLOAT,!1,24,12)},de:function(){c.vertexAttribPointer(B.attributes.a3,4,c.FLOAT,!1,16,0)},ge:function(p,m){c.uniform1i(B.A[p],m)},G:function(p,m){c.uniform1f(B.A[p],m)},N:function(p,m,A){c.uniform2f(B.A[p],m,A)},wg:function(p,m){c.uniform2fv(B.A[p],m)},xg:function(p,m,A,J){c.uniform3f(B.A[p],m,A,J)},yg:function(p,
m){c.uniform3fv(B.A[p],m)},xa:function(p,m){c.uniform4fv(B.A[p],m)},io:function(p,m){c.uniformMatrix2fv(B.A[p],!1,m)},jo:function(p,m){c.uniformMatrix3fv(B.A[p],!1,m)},Tc:function(p,m){c.uniformMatrix4fv(B.A[p],!1,m)},j:function(p,m){l.set(p);m.forEach(function(A){switch(A.type){case "4f":c.uniform4fv(B.A[A.name],A.value);break;case "3f":c.uniform3fv(B.A[A.name],A.value);break;case "2f":c.uniform2fv(B.A[A.name],A.value);break;case "1f":c.uniform1f(B.A[A.name],A.value);break;case "1i":c.uniform1i(B.A[A.name],
A.value);break;case "mat2":c.uniformMatrix2fv(B.A[A.name],!1,A.value);break;case "mat4":c.uniformMatrix4fv(B.A[A.name],!1,A.value)}})},H:function(){for(var p in f){var m=f[p];c.detachShader(m.oa,m.sf);c.detachShader(m.oa,m.rf);c.deleteShader(m.sf);c.deleteShader(m.rf);c.deleteProgram(m.oa)}},v:function(){c.disableVertexAttribArray(0);l.K();l.H();K=0;z=!1;B=null;g=-1}};return l}(),Wa=function(){var a={},b=[],d=!1,e=0,k=0,q=-1,x=-1,h=-1,n=1,t=null,z=!1,H=null,y=!1,G=!1,v=!1,f=!1,g=!1,B=!1,K=!1,l=!1,
p=null,m=null,A=-1,J=-1,P=null,C=-1,F,M=null,r=null,u=null,R=null,Q=null,ia=null,aa=null,N=[{type:"1f",name:"u85",value:0},{type:"1f",name:"u149",value:0},{type:"1f",name:"u150",value:0},{type:"1f",name:"u80",value:1},{type:"1f",name:"u77",value:0},{type:"1f",name:"u87",value:1}],da={m:function(w,O){a.Ag=w;ea.Qg();Gc.ef();Rb.ef(w.ze);q=w.hf;x=w.Vo;h=w.Xf;n=w.ye;var D=[{type:"1f",name:"u80",value:q},{type:"1f",name:"u77",value:h},{type:"1f",name:"u81",value:w.Hn},{type:"mat4",name:"u76",value:w.ln},
{type:"2f",name:"u42",value:w.Tj}];w.Og=D;var X=[{type:"3f",name:"u82",value:[0,0,0]},{type:"3f",name:"u83",value:w.Yg},{type:"3f",name:"u84",value:w.Xg},{type:"1f",name:"u85",value:0},{type:"1f",name:"u86",value:w.ze},{type:"1f",name:"u87",value:1}];w.Kj=X;da.nm(w,O);d||void 0!==w.Ea||(w.Ea=[0,0,120]);l=K=I.tf;if(!d&&K){O=1*ea.wb();var ma=1*ea.vb(),oa={isLinear:!0,isPot:!1,width:O,height:ma};p=ba.instance(oa);m=ba.instance(oa);A=1/O;J=1/ma}D=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",
value:w.Ea},{type:"1f",name:"u145",value:w.gd},{type:"1f",name:"u146",value:w.Lb}].concat(D,X);t=w.Lc;X=[{type:"1f",name:"u149",value:t[0]},{type:"1f",name:"u150",value:t[1]}];ea.aa()?(O=[{type:"1i",name:"u1",value:0}],ma=[{type:"1i",name:"u153",value:2}],E.j("s104NNGLcolor",D.concat(X)),E.j("s104NNGLtexture",[].concat(O,D,X)),E.j("s104NNGLtextureNormalMap",[].concat(O,ma,D,X)),E.j("s104NNGLtextureParamsMap",[{type:"1i",name:"u74",value:2}].concat(O,D,X)),E.j("s104NNGLtextureNormalParamsMap",[{type:"1i",
name:"u74",value:3}].concat(O,ma,D,X))):(E.j("s108",D.concat(X)),E.j("s109",[{type:"1i",name:"u1",value:0}].concat(D)),E.j("s110",D),E.j("s111",D),E.j("s112",D.concat([{type:"1i",name:"u153",value:0}])),E.j("s113",D),E.j("s114",D.concat([{type:"1i",name:"u74",value:0}])));E.j("s81",[{type:"2f",name:"u93",value:w.Hg}]);E.j(V.ea?"s94":"s95",[{type:"1f",name:"u115",value:w.Ie},{type:"3f",name:"u116",value:w.lg},{type:"1f",name:"u117",value:w.Ve},{type:"1f",name:"u118",value:1},{type:"3f",name:"u113",
value:w.Xj}]);if(F=w.Qd)P=w.Mm,C=w.Rd,E.j("s93",[{type:"4f",name:"u102",value:w.Pd},{type:"1f",name:"u105",value:w.Of},{type:"2f",name:"u103",value:w.Lm},{type:"1f",name:"u107",value:Math.sign(C)}]);b.forEach(function(za){za.fj(w)});d=!0},bc:function(w){G&&xa.ia.bc(w);f&&xa.sa.bc(w)},nm:function(w,O){void 0!==xa.ia&&w.hc&&ea.aa()&&(xa.ia.m(w),y=!0,O.push(function(D){xa.ia.bc(D);G=!v}));void 0!==xa.sa&&w.od&&(xa.sa.m(w),O.push(function(D){xa.sa.bc(D);f=!0}));void 0!==xa.oc&&w.Le&&(xa.oc.m(w),B=g=!0);
void 0!==xa.pb&&(xa.pb.m(w),H=xa.pb.pm({width:w.Dc,height:2*w.Dc,depth:1.5*w.Dc,vl:-w.xf,Ua:w.vf,$k:w.wf}),z=!0)},fo:function(w,O,D,X){w&&(aa=w,y&&xa.ia.cc(w),f&&xa.sa.cc(w),g&&xa.oc.cc(w),b.forEach(function(ma){ma.cc(w)}));D&&(R=D);X&&(Q=X)},Cb:function(w){ea.aa()?(E.j("s104NNGLcolor",w),E.j("s104NNGLtexture",w),E.j("s104NNGLtextureNormalMap",w),E.j("s104NNGLtextureParamsMap",w),E.j("s104NNGLtextureNormalParamsMap",w)):(E.j("s108",w),E.j("s109",w),E.j("s110",w),E.j("s111",w),E.j("s112",w),E.j("s113",
w),E.j("s114",w))},eb:function(w,O,D){var X=[w[0]+O[0],w[1]+O[1],w[2]+O[2]];X=[X[0]+D[0],X[1]+D[1],X[2]+D[2]];a.ae=X;a.Um=O;a.Jo=D;da.Cb([{type:"3f",name:"u143",value:X}]);ea.aa()&&(y&&xa.ia.eb(w,O,D),f&&xa.sa.eb(X));z&&xa.pb.eb(w,D)},fb:function(w,O,D){var X=w*O*D;a.Vm=O;a.Ko=D;a.hm=w;da.Cb([{type:"1f",name:"u144",value:X}]);ea.aa()&&(y&&xa.ia.fb(w*O,D),f&&xa.sa.fb(X));z&&xa.pb.fb(w,D)},$i:function(){da.eb(a.ae,a.Um,a.Jo);da.fb(a.hm,a.Vm,a.Ko);da.pj(a.rx);da.m(a.Ag);da.lj(a.Dk,a.Lb)},pj:function(w){a.rx=
w;da.Cb([{type:"1f",name:"u79",value:w}]);ea.aa()&&(y&&xa.ia.ug(w),f&&xa.sa.ug(w))},lj:function(w,O){a.Dk=w;a.Lb=O;da.Cb([{type:"1f",name:"u145",value:w},{type:"1f",name:"u146",value:O}])},Yn:function(w){t=w;0===e&&da.Cb([{type:"1f",name:"u149",value:t[0]},{type:"1f",name:"u150",value:t[1]}])},cb:function(w){function O(){z&&xa.pb.toggle(!1);F&&E.j("s93",[{type:"1f",name:"u106",value:0}])}0>=w?(k=0,0!==e&&(e=0,Rb.Bn(),z&&xa.pb.toggle(!0),F&&E.j("s93",[{type:"1f",name:"u106",value:1}]))):1<=w?(k=1,
1!==e&&(e=1,Rb.xj(!0)),O()):(k=w,2!==e&&(Rb.xj(!1),e=2,O()));E.j("s95",[{type:"1f",name:"u118",value:1-w}]);N[0].value=k;N[1].value=t[0]*(1-w)+-300*w;N[2].value=t[1]*(1-w)+-300*w;N[3].value=q*(1-w)+w*x;N[4].value=h*(1-w);N[5].value=1-w+w*n;G&&xa.ia.vg(k,N);f&&xa.sa.vg(k,N);da.Cb(N)},sl:function(w){aa.h(1);w.forEach(function(O){O.nl()});z&&H.U()},Fm:function(){return 1===e},Je:function(w){aa.Ka(w)},bk:function(w){b.push(w)},Fg:function(w){v=!w;G=w&&y},Eg:function(w){B=w&&g},rg:function(w){f&&ea.aa()&&
xa.sa.ko(w)},Db:function(w){ea.aa()&&(y&&xa.ia.Db(w),f&&xa.sa.Db(w))},pl:function(w,O){if(!l)return!1;p.M();w.h(0);E.set("s86");E.N("u14",0,J);W.l(!1,!1);m.o();p.h(0);E.N("u14",A,0);W.l(!1,!1);E.set("s87");O.M();m.h(0);W.l(!1,!1);return!0},wj:function(w){l=w&&K},resize:function(w,O,D){K&&(w*=D,O*=D,p.resize(w,O),m.resize(w,O),A=1/w,J=1/O)},pg:function(w,O){var D=w.O(),X=w.Y(),ma={width:D,height:X,isPot:!1};y&&(u&&u.remove(),u=ba.instance(ma));M&&M.remove();M=Ba.instance({width:D,height:X});g||f?(xa.oc.qg(D,
X),r&&r.remove(),r=ba.instance(ma)):r=w;y&&xa.ia.qg(D,X);O&&(ia&&ia.remove(),ia=ba.instance(ma))},ll:function(w){var O=null;switch(e){case 0:O=w;break;case 2:M.bind(!1,!0);ia.o();E.set("s76");E.G("u13",k);w.h(1);Q.h(0);W.l(!0,!0);O=ia;break;case 1:O=Q}if(!G||1===e||!ea.aa())return O;O.Ka(0);B&&xa.oc.U(O,r);M.bind(!1,!B);f&&(B?O.h(0):(r.o(),E.set("s1"),W.l(!0,!0)),xa.sa.U());r.h(0);R.Ka(2);xa.ia.U();u.o();E.set("s1");B||f?r.h(0):O.h(0);W.l(!0,!V.ea);xa.ia.add();return u},ck:function(w,O){if(!G)return w;
R.Ka(2);xa.ia.U();Ba.$();E.set("s75");O.M();xa.ia.bm().h(0);W.l(!0,!0);E.set("s1");c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);w.h(0);W.l(!1,!1);c.disable(c.BLEND);return O},ql:function(w,O){if(!F)return!1;E.set("s93");E.G("u104",w*C);P.h(1);Wa.Je(2);r?r.h(3):O.h(3);return!0},v:function(){d=!1;k=e=0;h=x=q=-1;n=1;t=null;z=!1;H=null;B=g=f=v=G=y=!1;xa.ia.v();xa.Ia.v()}};return da}(),ya=function(){function a(){h.forEach(function(D){D.tl(u)})}function b(){h.forEach(function(D){D.sd(u)})}
function d(){h.forEach(function(D){D.rl(u)})}function e(){h.forEach(function(D){D.td(u)})}function k(){u?Wa.sl(h):h.forEach(function(D){D.ol()})}function q(){F&&clearTimeout(F);F=setTimeout(function(){m=!1;F=null},16)}function x(D){D()}var h=[],n=[],t={ga_:!1,position:!1,yb:!1},z=[],H=[],y=null,G=0,v=null,f=null,g=null,B=null,K=!1,l=!1,p=!1,m=!1,A=!1,J=!1,P=null,C=null,F=null,M=null,r=!1,u=!1,R=!1,Q=!1,ia=!0,aa=!1,N=!1,da=null,w=null,O={m:function(){c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clearDepth(1);
V.Yk?(c.enable(c.CULL_FACE),c.frontFace("CCW"===V.Zk?c.CCW:c.CW),c.cullFace(c.BACK)):c.disable(c.CULL_FACE);O.qh();var D={isPot:!1,isLinear:!1,width:ea.wb(),height:ea.vb(),J:4,isFloat:!1};v=ba.instance(D);D=Object.assign({},D,{isLinear:!0,width:ea.O(),height:ea.Y()});f=ba.instance(D);g=ba.instance(D);V.Pa&&(D=Object.assign({},D,{isLinear:!1}),B=ba.instance(D));J=Ga.fa();V.Pa||(y=jc.instance({Kb:V.Kb,uc:V.uc,vc:V.vc,tc:V.tc}));K=!0},qh:function(){ea.aa()?t=uc.instance({}):(t.ga_=Jb.instance({fc:V.Pa?
!1:"s105",isFloat:!1,Tb:!0,clearColor:[0,0,0,0],J:4}),t.position=Jb.instance({fc:V.Pa?!1:"s115",isFloat:!0,Tb:!0,clearColor:[0,0,0,0],J:4}),t.yb=Jb.instance({fc:!1,isFloat:!0,Tb:!0,clearColor:[0,0,0,0],J:4}),t.Mc=Jb.instance({fc:!1,isFloat:!1,Tb:!0,clearColor:[0,0,0,0],J:4}))},Ql:function(){return y},pa:function(D){y=D},Hq:function(){},Db:function(D){Wa.Db(D)},fj:function(D){Wa.m(D,z);ea.aa()||(t.ga_.qj(!1),t.position.qj("s108"));u=Q=!0},mq:function(){Wa.$i()},cp:function(D){Wa.bk(D)},Mn:function(D,
X,ma){Wa.eb(D,X,ma)},Nn:function(D,X,ma){Wa.fb(D,X,ma)},Kn:function(D,X){Wa.lj(D,X)},Ln:function(D){Wa.Yn(D)},On:function(D){Wa.pj(D)},cb:function(D){Wa.cb(D)},gj:function(D,X,ma,oa){Wa.fo(D,X,ma,oa);X&&O.pg(X,oa?!0:!1);R=!0},Fg:function(D){Wa.Fg(D)},rg:function(D){Wa.rg(D)},Eg:function(D){Wa.Eg(D)},wj:function(D){Wa.wj(D)},ep:function(D){r&&(N=!0,da&&da.remove(),da=ba.instance({width:M.O(),height:M.Y(),isPot:!1}),w=D)},pg:function(D,X){M="string"===typeof D?ba.instance({url:D,isFloat:!1}):D;u&&Wa.pg(M,
X);r=!0},ak:function(D){h.push(D);0!==z.length&&(z.forEach(function(X){X(D)}),z.splice(0,z.length))},wn:function(D){D=h.indexOf(D);-1!==D&&h.splice(D,1)},fp:function(D){n.push(D)},jq:function(D){D=n.indexOf(D);-1!==D&&n.splice(D,1)},le:function(D){u&&(l=D)},animate:function(D){!V.Pa||u&&R?l&&(m||G>V.Wm&&A?(P&&clearTimeout(P),++G,window.cancelAnimationFrame(O.animate),P=setTimeout(function(){window.requestAnimationFrame(O.animate)},16)):(O.Vi(D),++G,u||l&&window.requestAnimationFrame(O.animate))):
setTimeout(O.animate,100)},hp:function(D){H.push(D)},Vi:function(D){if((!V.Pa||u&&R)&&K){H.forEach(x);ea.aa()?t.set()||ea.la()?(u||Ac.yn(),k(),t.K(),J&&c.depthMask(!1)):(ea.yo(),O.qh(),Jb.ed(),E.$n(),V.Pa&&Wa.$i(),c.flush(),window.requestAnimationFrame(O.animate)):(u&&Wa.Je(1),t.ga_.set(!0,!0,!0),b(),t.ga_.K(),J&&c.depthMask(!1),t.Mc.set(!1,!J,!1),d(),t.Mc.K(),t.position.set(!0,!J,!1),tb.U(),a(),t.position.K(),t.yb.set(!1,!J,!1),e(),t.yb.K());c.disable(c.DEPTH_TEST);J||c.depthMask(!1);V.ea&&Cb.U();
var X=O.Mh();if(null!==X){X.h(7);E.set(V.ea?"s94":"s95");E.N("u14",1/ea.wb(),1/ea.vb());Jb.Ek();v.M();aa?(c.enable(c.BLEND),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),E.G("u123",1)):c.disable(c.BLEND);u||tb.df();t.position.h(0);t.yb.h(1);t.ga_.h(2);y.hd(3);t.Mc.h(6);y.jd(4);y.uh();V.ea&&Cb.h(5);W.l(!0,!0);aa&&E.G("u123",0);Ba.$();if(aa){c.disable(c.BLEND);var ma=Wa.ck(v,f);E.set("s83");g.M();ma.h(0);W.l(!1,!1);f.o();g.h(0);W.l(!1,!1);f.h(0)}else Wa.pl(v,
f)||(E.set("s1"),f.M(),v.h(0),W.l(!1,!1)),ia?(E.set("s82"),g.M(),f.h(0),W.l(!1,!1),f.o(),g.h(0),Q&&u?(E.set("s81"),B.h(1),Wa.Je(2),W.l(!1,!1),E.set("s1"),B.M(),f.h(0),W.l(!1,!1)):(E.set("s80"),W.l(!1,!1),f.h(0))):f.h(0);Ba.ba();c.viewport(0,0,ea.O(),ea.Y());!aa&&u&&Wa.ql(D,X)||E.set("s1");W.l(!1,!1);c.enable(c.DEPTH_TEST);c.depthMask(!0);c.flush()}}},Mh:function(){if(!r||aa)return ba.Yh();if(!u)return M;if(N&&!Wa.Fm()){E.set(w);Ba.$();da.Uc();da.o();M.h(0);var D=da;W.l(!0,!0)}else D=M;return Wa.ll(D)},
Dq:function(){V.cl||l||(l=!0,O.animate(Date.now()),p||vc.to(),p||Rb.ib(!1),C&&clearTimeout(C),V.ea&&Cb.ee(),C=setTimeout(O.ta,V.Ak),p||ea.jm(),p=!0)},Eq:function(){l&&(A=l=!1,cancelAnimationFrame(O.animate))},ta:function(){A||!p||m||V.sh||(A=m=!0,C&&clearTimeout(C),F&&clearTimeout(F),tb.kf().Xi(),C=setTimeout(function(){ea.Sg(V.bn);V.ea&&Cb.Lj();G=0;q()},24))},wake:function(){A&&p&&!m&&(m=!0,A=!1,G=0,tb.kf().Xi(),C&&clearTimeout(C),F&&clearTimeout(F),C=setTimeout(function(){ea.Sg(1);V.ea&&Cb.ee();
q()},16))},Rp:function(){},xp:function(){},ke:function(D){Q=D},Gq:function(D){ia=D},yj:function(D){aa=D},Lq:function(){E.j("s95",[{type:"1f",name:"u121",value:V.Pc},{type:"1f",name:"u122",value:V.fg}])},resize:function(D,X,ma){v.resize(D*ma,X*ma);f.resize(D,X);g.resize(D,X);V.Pa&&B.resize(D,X);Wa.resize(D,X,ma);D=[{type:"2f",name:"u14",value:[1/D,1/X]}];E.j("s82",D);E.j("s80",D);E.j("s83",D)},H:function(){P&&clearTimeout(P);C&&clearTimeout(C);F&&clearTimeout(F);h.concat(n).forEach(function(D){D.H()});
h.splice(0,h.length);n.splice(0,n.length);t.ga_.remove();t.yb.remove();t.Mc.remove();t.position.remove();v.remove();f.remove();g.remove();B&&B.remove();m=!0},v:function(){O.H();J=A=m=p=l=u=R=m=!1}};return O}(),xa={},ea=function(){function a(){Jb.resize(d*n,e*n);v.aa()&&uc.resize(d*n,e*n);ya.resize(d,e,n);V.ea&&Cb.resize(d*n,e*n,n);v.Qg()}var b=null,d=0,e=0,k=-1,q=!1,x={oe:!1,Ig:!1,Ij:!1,Bg:!1,drawBuffers:!1,zm:!1,mi:!1,Bm:!1,Ff:!1,Za:!1},h=Object.assign({},x),n=1,t=!1,z=!1,H=!1,y=!1,G=!1,v={m:function(f){void 0!==
f.onload&&f.onload&&(z=f.onload);void 0===f.expand&&(f.expand=!1);void 0===f.Jd&&(f.Jd=!1);void 0===f.qa&&(f.qa=!1);void 0===f.Qb&&(f.Qb=!1);void 0===f.alpha&&(f.alpha=!1);void 0===f.preserveDrawingBuffer&&(f.preserveDrawingBuffer=!1);f.Jd&&(q=!0);b=f.qa?f.qa:document.getElementById(f.Sk);f.expand&&v.expand();try{window.$o=f.Qb?f.Qb.Cl():b.getContext("webgl",{antialias:!1,alpha:f.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:f.preserveDrawingBuffer});y=f.Qb?f.Qb.la():!1;H=
!y;8>c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)&&v.pd("too few texture image units");if(!Ga.m())return v.pd("invalid config");V.Go&&(h.Ig=c.getExtension("EXT_texture_filter_anisotropic"),h.Ig&&(h.mi=!0));V.Ho&&(h.oe=c.getExtension("WEBGL_compressed_texture_s3tc"),h.oe&&void 0!==h.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&h.oe.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(h.zm=!0));H&&(h.Ij=c.getExtension("OES_element_index_uint")||c.getExtension("MOZ_OES_element_index_uint")||c.getExtension("WEBKIT_OES_element_index_uint"),
h.Ij&&(h.Bm=!0));!y&&V.Io&&(h.Bg=c.getExtension("EXT_sRGB"),h.Bg&&(h.Ff=!0));H?(h.drawBuffers=c.getExtension("WEBGL_draw_buffers"),h.drawBuffers&&!V.rh&&(h.Za=!0)):h.Za=4<=c.getParameter(c.MAX_DRAW_BUFFERS);if(h.Za){var g=v.el();h.Za=h.Za&&g}}catch(B){return v.pd(B)}if(null===c||!c)return v.pd("NO_GL");f.expand&&window.addEventListener("resize",v.expand,!1);b.addEventListener("contextmenu",function(B){B.preventDefault();return!1},!1);d=b.width;e=b.height;v.Bf();return!0},Bf:function(){k=q?3:2;Ga.fa()||
(k=Math.min(k,1));Ga.Ok()||(k=Math.min(k,0));Gc.m();Jb.m();for(var f in xa)xa[f].Qc();E.m();tb.m();Rb.m();ya.m();vc.m();V.ea&&Cb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();v.Qg();v.gl();t=!0;z&&z();return!0},gl:function(){if(h.Za){var f=uc.instance({width:256,height:1});f.bind();c.viewport(0,0,256,1);E.set("s103");E.xa("color",[1,0,0,1]);W.l(!0,!0);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT||c.DEPTH_BUFFER_BIT);Ba.ba();E.set("s1");f.yb.h(0);W.l(!1,!1);f=new Uint8Array(1024);c.readPixels(0,
0,256,1,c.RGBA,c.UNSIGNED_BYTE,f);G=1>=f[1020]}},el:function(){var f=uc.instance({width:1,height:1});if(!f.set())return f.remove(),!1;E.co(c);W.Ob(c);c.bindFramebuffer(c.FRAMEBUFFER,null);E.Bb(c);f.ga_.Ka(0);W.Ob(c);var g=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,g);f.remove();return 3<Math.abs(g[0]-127)?!1:!0},la:function(){return y},O:function(){return d},Y:function(){return e},wb:function(){return n*v.O()},vb:function(){return n*v.Y()},Dl:function(){return d/e},V:function(){return k},
Yp:function(){return 3===k},pi:function(){return G},aa:function(){return h.Za},yo:function(){h.Za=!1},aq:function(){return!1},Qk:function(){return 0<v.V()},np:function(){return v.aa()&&0<v.V()},jf:function(f){var g=c,B="";y||(g=h.drawBuffers,B="_WEBGL");return[g["COLOR_ATTACHMENT0"+B],g["COLOR_ATTACHMENT1"+B],g["COLOR_ATTACHMENT2"+B],g["COLOR_ATTACHMENT3"+B]].splice(0,f)},Ad:function(f){return v.jf(4)[f]},em:function(){return y?c.SRGB?c.SRGB:c.RGBA:h.Ff?h.Bg.SRGB_ALPHA_EXT:c.RGBA},Cm:function(){return h.mi},
Il:function(){return h.Ig},Pm:function(f){v.la()?c.drawBuffers(v.jf(f)):h.drawBuffers.drawBuffersWEBGL(v.jf(f))},expand:function(){ya.wake();v.resize(window.innerWidth,window.innerHeight);ya.ta()},resize:function(f,g){!b||f===d&&g===e||(d=f,e=g,b.width=d,b.height=e,t&&(tb.resize(),a()))},Qg:function(){var f=[{type:"2f",name:"u14",value:[1/ea.wb(),1/ea.vb()]}];E.j("s82",f);E.j("s80",f)},Sg:function(f){n=f;a()},Ja:function(f,g){b.addEventListener(f,g,!1)},pd:function(){k=-1;return!1},lh:function(){return 0<=
k},eq:function(){},nq:function(){},Bq:function(){var f=document.getElementById("loading");f&&(f.style.display="block")},jm:function(){var f=document.getElementById("loading");f&&(f.style.display="none")},H:function(){v.lh()&&(ba.Jj(),ya.H(),W.H(),Jb.H(),V.ea&&Cb.H(),jc.H(),vc.H(),E.H(),ba.H(),c.flush(),c=null)},v:function(){ya.v();Wa.v();E.v();Object.assign(h,x);t=!1}};return v}(),tb=function(){var a=!1,b=!1,d=[];return{m:function(){},instance:function(e){void 0===e.Yi&&(e.Yi=!0);void 0===e.Ce&&(e.Ce=
.1);void 0===e.Be&&(e.Be=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Pb&&(e.Pb=45);var k=new Zb,q=new Va(50,-50,-400),x=null;k.setPosition(q);var h=new Int8Array(20),n=new Int8Array(20),t=0,z=0,H=0,y=0,G={U:function(){n[E.Bd()]||(E.Tc("u124",k.elements),n[E.Bd()]=1);h[E.Bd()]||(E.Tc("u136",x),h[E.Bd()]=1)},cf:function(){z||(E.Tc("u124",k.elements),z=1);t||(E.N("u125",x[0],x[5]),t=1)},df:function(){H||(E.xg("u113",q.x,q.y,q.z),H=1)},Mb:function(){y||(E.xg("u154",q.x,q.y,q.z),y=1)},
nh:function(){var v=e.Ce,f=e.Be,g=Math.tan(.5*e.Pb*Math.PI/180);x=[.5/g,0,0,0,0,.5*ea.Dl()/g,0,0,0,0,-(f+v)/(f-v),-1,0,0,-2*f*v/(f-v),0];for(v=0;20>v;++v)h[v]=0;t=0},Zn:function(v,f){q.dj(f[0]).ej(f[1]).z=f[2];k.elements.set(v);for(v=0;20>v;++v)n[v]=0;y=H=z=0},Xi:function(){for(var v=y=H=0;20>v;++v)n[v]=0}};G.nh();a=G;b=!0;e.Yi&&d.push(G);return G},U:function(){b&&a.U()},cf:function(){b&&a.cf()},df:function(){b&&a.df()},Mb:function(){b&&a.Mb()},resize:function(){d.forEach(function(e){e.nh()})},kf:function(){return a}}}(),
Jb=function(){var a=[],b=null;return{m:function(){b=Ba.instance({width:ea.wb(),height:ea.vb(),Ec:!ea.aa()})},instance:function(d){void 0===d.width&&(d.width=ea.wb());void 0===d.height&&(d.height=ea.vb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Tb&&(d.Tb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.J&&(d.J=4);var e=ba.instance({isFloat:d.isFloat&&Ga.fa(),T:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,J:d.J}),k=void 0!==d.fc&&d.fc?!0:!1,q=d.fc,x={set:function(h,
n,t){t&&b.bind(!1,t);e.o();h&&(c.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),b.Qe());n&&b.mh();k&&E.set(q)},qj:function(h){k=(q=h)?!0:!1},K:function(){e.qe()},h:function(h){e.h(h)},resize:function(h,n){e.resize(h,n)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Tb&&a.push(x);return x},resize:function(d,e){b.resize(d,e);a.forEach(function(k){k.resize(d,e)})},Ek:function(){b.fh()},ed:function(){b.ed()},Uc:function(){b.Uc()},qp:function(){b.mh()},pp:function(){b.Qe()},
op:function(){b.clear()},H:function(){b.remove()}}}(),uc=function(){var a=[];return{instance:function(b){void 0===b.width&&(b.width=ea.wb());void 0===b.height&&(b.height=ea.vb());var d=c.createFramebuffer(),e=b.width,k=b.height,q=!0;b={isFloat:Ga.fa(),T:!0,width:e,height:k,isPot:!1,isLinear:!1,J:4};var x=ba.instance(b),h=ba.instance(b),n=ba.instance(b),t=ba.instance(b),z=Ba.Jl(),H=Ba.Rh();c.bindFramebuffer(z,d);var y=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,e,k);c.framebufferRenderbuffer(z,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,y);c.clearDepth(1);c.framebufferTexture2D(z,ea.Ad(0),c.TEXTURE_2D,x.get(),0);c.framebufferTexture2D(z,ea.Ad(1),c.TEXTURE_2D,h.get(),0);c.framebufferTexture2D(z,ea.Ad(2),c.TEXTURE_2D,t.get(),0);c.framebufferTexture2D(z,ea.Ad(3),c.TEXTURE_2D,n.get(),0);ea.Pm(4);c.bindFramebuffer(z,null);Ba.reset();var G={position:x,yb:h,Mc:n,ga_:t,bind:function(){c.bindFramebuffer(z,d);Ba.reset()},set:function(){q&&c.checkFramebufferStatus(H);
c.bindFramebuffer(z,d);Ba.reset();if(q){if(c.checkFramebufferStatus(H)!==c.FRAMEBUFFER_COMPLETE)return!1;q=!1}c.viewport(0,0,e,k);c.clearColor(0,0,0,0);E.Xb()&&!ea.pi()&&(E.set("s102"),W.l(!1,!1));c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);return!0},K:function(){},resize:function(v,f){e=v;k=f;x.resize(v,f);h.resize(v,f);t.resize(v,f);n.resize(v,f);c.bindRenderbuffer(c.RENDERBUFFER,y);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,k);c.bindRenderbuffer(c.RENDERBUFFER,null)},remove:function(){x.remove();
h.remove();t.remove();n.remove();c.deleteRenderbuffer(y);c.deleteFramebuffer(d);var v=a.indexOf(G);-1!==v&&a.splice(v,1)}};a.push(G);return G},resize:function(b,d){a.forEach(function(e){e.resize(b,d)})}}}(),jc=function(){var a=[],b=V.eh;return{instance:function(d){function e(){n?k():(g=xd.instance({ha:H,ym:b}),h=V.Bk[ea.V()],y=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:h,height:h/2,J:3}),G=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,isLinear:!1,isMirrorY:!0,width:h,height:h/
2,J:3}),v=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!0,width:1,height:h/2,J:3}),f=ba.instance({isFloat:Ga.fa()&&!b,T:!b,isPot:!1,isLinear:!0,isMirrorY:!0,isMipmap:!1,width:h,height:h/2,J:b?4:3}),n=!0,k(),K.forEach(function(l){l()}),K.splice(0,K.length))}function k(){if(n){Ba.$();g.Tn(H);g.un();y.M();E.set("s85");H.h(0);E.G("u91",V.Pc);ba.Jk(1);W.l(!0,!0);for(var l=V.qm[ea.V()],p=0;p<l;++p)G.o(),E.set("s88"),E.N("u14",1/h,0),y.h(0),W.l(!1,!1),y.o(),E.N("u14",0,2/h),G.h(0),W.l(!1,!1);v.M();E.set("s90");
y.h(0);W.l(!1,!1);E.set(b?"s92":"s91");f.M();y.h(0);v.h(1);W.l(!1,!1);ba.ba(0);ba.ba(1)}}var q=Object.assign({Kb:null,uc:null,tc:0,vc:0},d),x=0,h=0,n=!1,t=null,z=null,H=null,y=null,G=null,v=null,f=null,g=null,B=0,K=[];d={m:function(){function l(){2===++p&&(H=ba.instance({isFloat:Ga.fa(),T:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:x,height:x/2,J:3}),Ba.$(),H.M(),E.set("s84"),E.G("u96",q.vc),E.G("u97",q.tc),t.h(0),z.h(1),W.l(!0,!0),e())}var p=0;x=V.Ck[ea.V()];B=Math.log2(x)-1;q.Kb&&(t=
ba.instance({isPot:!1,url:q.Kb,B:l,J:3,isFlipY:!1}),z=ba.instance({isPot:!1,url:q.uc,B:l,J:3,isFlipY:!1}))},mj:function(l){H=l;e()},hd:function(l){n&&(g.h(l),E.G("u114",g.O()))},jd:function(l){n&&f.h(l)},uh:function(){E.G("u3",B)},Nh:function(){return B},O:function(){return x},ld:function(l){n?l():K.push(l)},H:function(){t&&t.remove();z&&z.remove();y.remove();v.remove();G.remove();g.remove();f.remove();H.remove()}};a.push(d);d.m();return d},H:function(){a.forEach(function(d){d.H()})}}}(),dd={instance:function(a){var b=
a.Jm,d=a.Hm,e=0,k=b.O();a=V.eh;var q=ba.instance({isFloat:Ga.fa()&&!a,T:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:k,J:a?4:3,isFlipY:!1}),x=ba.instance({isFloat:Ga.fa()&&!a,T:!a,isPot:!1,isLinear:!0,Up:!0,isMipmap:!1,width:k,height:k/2,J:a?4:3}),h=Ba.instance({width:k,height:k}),n=a?"s77":"s76";return{eo:function(t){e=t;E.set(n);c.viewport(0,0,k,k);h.o();q.o();E.G("u13",e);b.hd(1);d.hd(0);W.l(!0,!0);c.viewport(0,0,k,k/2);x.o();b.jd(1);d.jd(0);W.l(!1,!1);c.flush()},hd:function(t){q.h(t)},jd:function(t){x.h(t)},
uh:function(){E.G("u3",b.Nh()*(1-e)+d.Nh()*e)}}}},Rb=function(){function a(M){var r=(m-V.Oe)/(V.ih-V.Oe);r=1-Math.pow(1-r,V.Yo);m+=M*(1+r*V.Zo);m=Math.min(Math.max(m,V.Oe),V.ih);F.ib()}function b(M){-1!==h&&(B=g=0,x(),a(V.Xo*M.deltaY/window.innerHeight),M.preventDefault())}function d(){l+=g;p+=B;p=Math.min(Math.max(p,V.fn),V.en);F.ib()}function e(M){if(0===h||-1===h)return!1;var r=void 0!==M.touches&&M.touches.length;M.preventDefault();if(2===h){var u=Vc(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,
M.touches[1].pageY);a(-(v-u)*V.gn);v=u}else u=r?M.touches[0].clientX:M.clientX,M=r?M.touches[0].clientY:M.clientY,g=2*(u-y)*Math.PI/ea.O(),B=2*(M-G)*Math.PI/ea.Y(),4===h?(C[0]+=g*V.Ki,C[1]-=B*V.Ki,C[0]=Math.min(Math.max(C[0],-V.Ni),V.Ni),C[1]=Math.min(Math.max(C[1],-V.Oi),V.Oi),F.ib()):d(),y=u,G=M}function k(){0!==h&&-1!==h&&(0===g&&0===B||1!==h||!J?ya.ta():(x(),f=Date.now(),A=setInterval(F.Gm,K)),h=0)}function q(M){if(2!==h&&-1!==h){B=g=0;x();ya.wake();var r=void 0!==M.changedTouches&&M.touches.length;
M.preventDefault();r&&2===M.touches.length?(h=2,v=Vc(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY)):(h=r||2!==M.button?1:4,y=r?M.touches[0].clientX:M.clientX,G=r?M.touches[0].clientY:M.clientY);return!1}}function x(){A&&(clearInterval(A),A=!1)}var h=0,n=!1,t=!1,z=!1,H=1,y=0,G=0,v=0,f=0,g=0,B=0,K=16,l=V.Dj,p=V.Mi,m=V.Ne,A=!1,J=0,P=new Float32Array([0,0,0,0,0]),C=[V.Mk,V.Nk],F={m:function(){J=V.ek[ea.V()];K=V.ud[ea.V()];ea.Ja("mousedown",q);ea.Ja("mouseup",k);ea.Ja("mouseout",
k);ea.Ja("mousemove",e);ea.Ja("mousemove",e);ea.Ja("wheel",b);ea.Ja("touchstart",q);ea.Ja("touchend",k);ea.Ja("touchmove",e)},ib:function(M){n?(t[0]=-p,t[1]=l,z[1].value=H/V.Ne*m,Wa.Cb(z)):(P[0]=l,P[1]=p,P[2]=m,P[3]=C[0],P[4]=C[1],vc.In(P,M))},Gm:function(){if(1E-4>g&&1E-4>B||-1===h)x(),B=g=0,0===h&&ya.ta();var M=Date.now(),r=M-f;f=M;M=Math.pow(J,r/K);g*=M;B*=M;d()},ef:function(M){n||(n=!0,h=-1,t=[0,0,0],z=[{name:"u82",type:"3f",value:t},{name:"u86",type:"1f",value:1}],H=M)},xj:function(M){-1===h&&
M&&(h=0);M||(h=-1)},Bn:function(){B=g=0;l=V.Dj;p=V.Mi;m=V.Ne;F.ib()},sq:function(M){m=M},tq:function(M){C[0]=M[0];C[1]=M[1];V.jh=M[2]},rq:function(M,r){l=M;p=r}};return F}(),Ac=function(){var a={s104:!1,s104color:!1,s104NormalMap:!1,s104ParamsMap:!1,s104NormalParamsMap:!1};return{instance:function(b){function d(w){if(da){w.tweaker&&window.JEELIZVTO&&"undefined"!==typeof T&&T.dh(w.tweaker);F=w.partsNames||[];C.splice(0);C.push({n:0,offset:0});A.min.set(Infinity,Infinity,Infinity);A.max.set(-Infinity,
-Infinity,-Infinity);var O=w.uvs;O&&(O=O.filter(function(ka){return ka}));aa=O&&0<O.length&&0<O[0].length?!0:!1;"undefined"!==typeof zb&&"string"===typeof w.faces&&(w.faces=zb(w.faces));"undefined"!==typeof Ob&&("string"===typeof w.vertices&&(w.vertices=Ob(w.vertices)),O&&O.length&&O.forEach(function(ka,Sa){"string"===typeof ka&&(O[Sa]=Ob(ka))}));var D=w.metadata.faces,X=1+(aa?1:0);D=(w.faces.length-D)/(w.metadata.faces*X);6!==D&&8!==D||aa||(++X,D/=2);if(4===D){D=6*X+2;for(var ma=4*X+1,oa=Array(w.metadata.faces*
D),za=0;za<w.metadata.faces;++za)for(var Fa=0;Fa<X;++Fa)oa[za*D+4*Fa]=w.faces[za*ma+5*Fa],oa[za*D+4*Fa+1]=w.faces[za*ma+5*Fa+1],oa[za*D+4*Fa+2]=w.faces[za*ma+5*Fa+2],0===Fa&&(oa[za*D+3]=w.faces[za*ma+4]),oa[za*D+4*Fa+3*X+1]=w.faces[za*ma+5*Fa],oa[za*D+4*Fa+3*X+2]=w.faces[za*ma+5*Fa+2],oa[za*D+4*Fa+3*X+3]=w.faces[za*ma+5*Fa+3],0===Fa&&(oa[za*D+3*X+4]=w.faces[za*ma+4]);w.faces=oa;w.metadata.faces*=2}G=Array(w.metadata.vertices);for(D=0;D<w.metadata.vertices;++D)G[D]=new Va(w.vertices[3*D],w.vertices[3*
D+1],w.vertices[3*D+2]),id(A,G[D]);v=Array(w.metadata.faces);X=3*X+1;for(D=0;D<w.metadata.faces;++D)v[D]=new Cc(w.faces[X*D],w.faces[X*D+1],w.faces[X*D+2]),v[D].Zb=w.faces[X*D+3];r=3<G.length;da&&(da.visible=r);ld(G,v);f=md(G,v);if(aa){X=Array(G.length);D=["a","b","c"];for(ma=0;ma<w.metadata.faces;++ma)for(oa=0;3>oa;++oa)if(za=w.faces[7*ma+oa],Fa=w.faces[7*ma+1+oa+3],"undefined"===typeof X[za])X[za]=[[za,Fa]];else if(X[za][0][1]!==Fa){for(var ja=-1,ta=1;ta<X[za].length;++ta)if(X[za][ta][1]===Fa){ja=
X[za][ta][0];break}ta=-1;-1===ja?(ta=G.length,G.push(G[za].clone()),f.push(f[za].clone()),X[za].push([ta,Fa]),X[ta]=[[ta,Fa]]):ta=ja;w.faces[7*ma+oa]=ta;v[ma][D[oa]]=ta}g=Array(G.length);for(w=0;w<G.length;++w)D="undefined"===typeof X[w]?w:X[w][0][1],g[w]=new Xb(O[0][2*D],O[0][2*D+1])}var Ia=tc(A);b.Ib&&(G.forEach(function(ka){ka.x-=Ia.x;ka.z-=Ia.z;ka.y-=A.min.y}),A.min.x-=Ia.x,A.max.x-=Ia.x,A.min.z-=Ia.z,A.max.z-=Ia.z,A.max.y-=A.min.y,A.min.y=0);if(b.Jb){var Y=V.zk/Math.max(A.max.x-A.min.x,A.max.y-
A.min.y,A.max.z-A.min.z);G.forEach(function(ka){ka.Ca(Y)});A.min.Ca(Y);A.max.Ca(Y)}w=aa?8:6;X=new Float32Array(G.length*w);for(D=0;D<G.length;++D)X[w*D]=G[D].x,X[w*D+1]=G[D].y,X[w*D+2]=G[D].z,X[w*D+3]=f[D].x,X[w*D+4]=f[D].y,X[w*D+5]=f[D].z,aa&&(X[w*D+6]=g[D].x,X[w*D+7]=g[D].y);v.sort(function(ka,Sa){return ka.Zb-Sa.Zb});var pa=new (65536>3*v.length?Uint16Array:Uint32Array)(3*v.length),fa=0;v.forEach(function(ka,Sa){ka.Zb===fa?C[fa].n+=3:(C.push({n:3,offset:3*Sa}),++fa);pa[3*Sa]=ka.a;pa[3*Sa+1]=ka.b;
pa[3*Sa+2]=ka.c});B&&B.remove();B=W.instance({ja:X,indices:pa});p=l=!1;ia&&da.oh();u=!0;da.bf();b.B&&(b.B(da),b.B=null)}}function e(w){B.La(w.n,w.offset)}function k(w,O){Q[O]&&(E.set(Q[O].$l()),B.bind(!1),aa?(E.Qa(),E.jj()):(E.bb(),E.kj()),Q[O].Jc()&&(E.Sc(),l.wc(!1),E.de(),tb.Mb()),Q[O].jl(),Q[O].td(),B.La(w.n,w.offset))}function q(w,O){Q[O]&&(E.set(Q[O].am()),B.bind(!1),aa?(E.Qa(),E.jj()):(E.bb(),E.kj()),Q[O].Jc()&&(E.Sc(),l.wc(!1),E.de(),tb.Mb()),da.Ac(),Q[O].td(),B.La(w.n,w.offset))}function x(w,
O){N&&Q[O]&&(Q[O].kl(),B.La(w.n,w.offset))}function h(w,O){N&&Q[O]&&(Q[O].ml(aa),B.La(w.n,w.offset))}function n(w,O){Q[O]&&(E.set(Q[O].Wl()),Q[O].zh(),B.La(w.n,w.offset))}function t(w,O){Q[O]&&(E.set(Q[O].Xl()),da.Ac(),Q[O].zh(),B.La(w.n,w.offset))}function z(w,O){Q[O]&&(E.set(Q[O].Yl()),Q[O].Jc()&&(l.wc(!1),E.de(),tb.Mb()),B.bind(!1),Q[O].wh(aa),B.La(w.n,w.offset))}function H(w,O){if(Q[O]){var D=Q[O].Zl();E.set(D);Q[O].Jc()&&(l.wc(!1),E.de(),tb.Mb(),B.bind(!1));a[D]||(da.Ac(),B.bind(!1),a[D]=!0);
Q[O].wh(aa);B.La(w.n,w.offset)}}function y(w,O){return new Promise(function(D,X){w?(w.B=function(ma){Q[O]&&Q[O].H();Q[O]=ma;ia=ia||ma.Jc();D()},Gc.instance(w)):X()})}if(!ea.lh())return!1;void 0===b.Ib&&(b.Ib=!1);void 0===b.Jb&&(b.Jb=!1);void 0===b.Me&&(b.Me=!1);var G=null,v=null,f=null,g=null,B=null,K=null,l=null,p=!1,m=new Zb,A=new Bc,J=[],P=null,C=[{n:0,offset:0}],F=[],M=[],r=!1,u=!1,R=[],Q=[],ia=!1,aa=!1,N=!1,da={visible:r,Xk:function(){return C.length},Tl:function(){return F},oh:function(){!p&&
aa&&(v=v.filter(function(w){return null!==w}),K=nd(G,f,g,v),l=W.instance({ja:K,indices:!1}),g=f=v=G=K=null,p=!0)},Ac:function(){tb.U();da.yh()},yh:function(){E.Tc("u137",m.elements)},yp:function(){r&&(da.yh(),B.bind(!1),aa?E.Qa():E.bb(),B.U())},tl:function(w){r&&(w||da.Ac(),B.bind(!1),aa?E.Qa():E.bb(),B.U())},ul:function(){r&&(B.bind(!1),aa?E.Qa():E.bb(),C.forEach(x))},vh:function(){r&&(B.bind(!1),aa?E.Qa():E.bb(),M.forEach(e))},rl:function(w){N&&r&&(B.bind(!1),aa?E.Qa():E.bb(),w?C.forEach(n):C.forEach(t))},
sd:function(w){r&&(w||da.Ac(),B.bind(!1),w||(E.Qa(),E.Sc()),N&&C.forEach(h))},td:function(w){N&&r&&(w?C.forEach(k):C.forEach(q))},ol:function(){N&&r&&C.forEach(H)},nl:function(){N&&r&&C.forEach(z)},Wh:function(){return P},Uh:function(){return R},Fo:function(w,O){Q[w].update(O);da.Nj()},sg:function(w,O){R=w;N=!1;Q.forEach(function(D){D.H()});Q=Array(w.length);ia=!1;w=w.map(function(D,X){return"string"===typeof D?kd(-1===D.indexOf(".json")?D+".json":D).then(function(ma){ma.name=D;return y(ma,X,D)}):
y(D,X,!1)});Promise.all(w).then(function(){N=!0;da.ld(function(){ia&&da.oh();da.Nj();ya.Db(da);ya.le(!0);O&&O(da)},4);da.bf()})},Nj:function(){M.splice(0);C.forEach(function(w,O){Q[O]&&Q[O].Em()&&M.push(w)})},ld:function(w,O){u&&N?w(da):J.push({tb:w,order:O?O:0})},bf:function(){u&&N&&(J.sort(function(w,O){return 0>w.order-O.order?1:-1}),J.forEach(function(w){w.tb(da)}),J.splice(0))},remove:function(){da.H();da=null},H:function(){r=u=!1;B&&B.remove();Q.forEach(function(w){w.H()});p&&l.remove();C.splice(0)},
cm:function(){return A.size().x},dm:function(){return A.size().y},Pp:function(){return A.size().z},Fl:function(){return tc(A).x},Gl:function(){return tc(A).y},Dp:function(){return tc(A).z},Lp:function(){return A.min.y},replace:function(w,O,D){if(w===P)return O&&da&&(da.bf(),O(da)),!1;P=w;ya.le(!1);Dc(w,function(X){d(X);O&&O(da)},D);return!0}};b.Nc&&da.sg(b.Nc,b.Me);P=b.url;Dc(b.url,d);return da},yn:function(){a.s104=!1;a.s104color=!1;a.s104NormalMap=!1;a.s104ParamsMap=!1;a.s104NormalParamsMap=!1}}}(),
vc=function(){var a=null,b=!1,d=!1,e=null,k=new Float32Array(16),q=new Float32Array(3),x={data:0},h={m:function(){a=V.Nb?new Worker("js/worker.php"):{postMessage:function(n){x.data=n;Hc.$m(x)},terminate:function(){}};a.onmessage=function(n){switch(n.data[0]){case 3:for(var t=0;16>t;++t)k[t]=n.data[t+1];for(t=0;3>t;++t)q[t]=n.data[t+17];tb.kf().Zn(k,q);break;case 6:h.Un(),b=!0,Rb.ib(!1),V.ea&&(Cb.enable(),Cb.ee())}};e=new Float32Array(6);e[0]=2;V.Nb||Hc.Wn(a)},to:function(){V.th||(d=!0)},Fq:function(){d=
!1},In:function(n,t){if(t||b&&d)e[1]=n[0],e[2]=n[1],e[3]=n[2],e[4]=n[3],e[5]=n[4],a.postMessage(e)},Un:function(){a.postMessage([5,V.jh])},H:function(){V.Nb&&a.terminate()}};return h}(),Hc=function(){var a=0,b=0,d=0,e=[0,0],k=new Zb,q=new sc,x=new sc,h=new Va,n=new Va,t=new Yb,z=0,H=new Float32Array(20);H[0]=3;var y=null,G={data:!1},v={m:function(){"undefined"===typeof V&&(self.ap={Nb:!0});V.Nb&&v.gg([6])},$m:function(f){switch(f.data[0]){case 2:v.tg(f.data);break;case 5:z=f.data[1]}},gg:function(f){V.Nb?
postMessage(f):(G.data=f,y.onmessage(G))},tg:function(f){a=f[1];b=f[2];d=f[3];e[0]=f[4];e[1]=f[5];h.set(e[0],e[1],-d);t.set(b,a,0,"XYZ");if(!1===t instanceof Yb)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");f=Math.cos(t.C/2);var g=Math.cos(t.D/2),B=Math.cos(t.F/2),K=Math.sin(t.C/2),l=Math.sin(t.D/2),p=Math.sin(t.F/2),m=t.order;"XYZ"===m?(q.C=K*g*B+f*l*p,q.D=f*l*B-K*g*p,q.F=f*g*p+K*l*B,q.S=f*g*B-K*l*p):"YXZ"===m?(q.C=K*g*B+f*l*p,q.D=
f*l*B-K*g*p,q.F=f*g*p-K*l*B,q.S=f*g*B+K*l*p):"ZXY"===m?(q.C=K*g*B-f*l*p,q.D=f*l*B+K*g*p,q.F=f*g*p+K*l*B,q.S=f*g*B-K*l*p):"ZYX"===m?(q.C=K*g*B-f*l*p,q.D=f*l*B+K*g*p,q.F=f*g*p-K*l*B,q.S=f*g*B+K*l*p):"YZX"===m?(q.C=K*g*B+f*l*p,q.D=f*l*B+K*g*p,q.F=f*g*p-K*l*B,q.S=f*g*B-K*l*p):"XZY"===m&&(q.C=K*g*B-f*l*p,q.D=f*l*B-K*g*p,q.F=f*g*p+K*l*B,q.S=f*g*B+K*l*p);h.y-=z;f=k.elements;p=q.x;var A=q.y,J=q.z;K=q.w;var P=p+p,C=A+A;l=J+J;g=p*P;B=p*C;p*=l;m=A*C;A*=l;J*=l;P*=K;C*=K;K*=l;f[0]=1-(m+J);f[4]=B-K;f[8]=p+C;f[1]=
B+K;f[5]=1-(g+J);f[9]=A-P;f[2]=p-C;f[6]=A+P;f[10]=1-(g+m);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;k.setPosition(h);x.L(q).inverse();f=n.L(h);A=f.x;P=f.y;J=f.z;g=x.x;B=x.y;K=x.z;l=x.w;p=l*A+B*J-K*P;m=l*P+K*A-g*J;C=l*J+g*P-B*A;A=-g*A-B*P-K*J;f.x=p*l+A*-g+m*-K-C*-B;f.y=m*l+A*-B+C*-g-p*-K;f.z=C*l+A*-K+p*-B-m*-g;for(f=1;17>f;++f)H[f]=k.elements[f-1];H[17]=n.x;H[18]=n.y;H[19]=n.z;v.gg(H)},Wn:function(f){y=f;v.gg([6])}};return v}();Hc.m();var Gc=function(){function a(x){var h=x.split(":").shift();
return"data"===h||"blob"===h?x:("undefined"!==typeof I&&I.ca?I:V).ca+V.Di+x}function b(x,h){return Math.min(h+x+h*x,1)}var d=!1,e=null,k=1,q={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],B:null};return{m:function(){e=ba.instance({width:1,height:1,isMipmap:!1,J:4,array:new Uint8Array([255,255,255,255]),Ff:!1})},ef:function(){d=!0;k=2},instance:function(x){function h(){"number"===
typeof g.alpha?(v[0]=g.alpha,v[1]=0,v[2]=0,v[3]=0):(v[0]=g.alpha[0],v[1]=g.alpha[1]-g.alpha[0],v[2]=g.alpha[2],v[3]=g.alpha[3]);var u=1<=g.fresnelPow?g.fresnelMin:g.fresnelMax;f[0]=b(v[0],u);f[1]=b(v[1],u);f[2]=v[2];f[3]=v[3];m={Li:g.fresnelMax,zi:[g.fresnelMin,g.roughness,g.fresnelPow/15,g.metalness],Ci:g.paramsMapMask}}function n(){return new Promise(function(u){(y=g.normalTexture&&ea.Qk()?!0:!1)&&!l.Da?l.Da=ba.instance({url:a(g.normalTexture),isLinear:!0,isMipmap:!0,isAnisotropicFiltering:!1,isPot:!0,
J:3,B:u}):u()})}function t(){return new Promise(function(u){(G=g.diffuseTexture&&""!==g.diffuseTexture?!0:!1)&&!l.ga_?(l.ga_=ba.instance({url:a(g.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!0,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:u}),K="s109"):(l.ga_||(K="s110",l.ga_=e),u());B=[g.diffuseColor[0]/255,g.diffuseColor[1]/255,g.diffuseColor[2]/255]})}function z(){return new Promise(function(u){(p=g.paramsTexture?!0:!1)&&!l.$a?g.paramsTexture===g.diffuseTexture?(l.$a=l.ga_,
u()):l.$a=ba.instance({url:a(g.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,isAnisotropicFiltering:!1,isSrgb:!1,isMirrorY:!1,isMirrorX:!1,J:4,B:u}):u()})}function H(u){h();Promise.all([n(),t(),z()]).then(function(){y||p||G?y||p?y&&!p?(A="s104NormalMap",J="s104NNGLtextureNormalMap"):!y&&p?(A="s104ParamsMap",J="s104NNGLtextureParamsMap"):(A="s104NormalParamsMap",J="s104NNGLtextureNormalParamsMap"):(A="s104",J="s104NNGLtexture"):(A="s104color",J="s104NNGLcolor");P=y?"s112":"s111";C=y?"s106":"s116";
F=p?"s114":"s113";M=p?"s107":"s117";g.B&&setTimeout(g.B.bind(null,u),1)})}var y,G,v=[1,0,0,0],f=[0,0,0,0],g=Object.assign({},q,x),B=null,K=null,l={ga_:null,Da:null,$a:null},p=y=G=!1,m=null,A=null,J=null,P=null,C=null,F=null,M=null,r={update:function(u){r.H();Object.assign(g,u);H()},Jc:function(){return y},Em:function(){return.99>v[0]},am:function(){return C},$l:function(){return P},Xl:function(){return M},Wl:function(){return F},Zl:function(){return A},Yl:function(){return J},td:function(){y&&l.Da.h(0)},
ml:function(u){d&&E.set(K);u?E.Qa():E.bb();G&&E.Sc();r.sd()},sd:function(){G&&(E.G("u73",g.colorTextureUsage),l.ga_.h(0));E.yg("u147",B)},zh:function(){p&&(l.$a.h(0),E.xa("u75",m.Ci),E.Sc());E.xa("u111",m.zi);E.G("u148",m.Li)},wh:function(u){p&&!y?l.$a.h(k):y&&(G||e.h(0),l.Da.h(k),p&&l.$a.h(k+1));p&&E.xa("u75",m.Ci);G||y?E.Qn():u?E.Rn():E.Sn();r.sd();E.xa("u13",v);E.xa("u111",m.zi);E.G("u148",m.Li)},jl:function(){E.xa("u13",v)},kl:function(){E.xa("u13",f)},H:function(){G&&l.ga_.remove();y&&l.Da.remove();
p&&g.paramsTexture!==g.diffuseTexture&&l.$a.remove();Object.assign(l,{ga_:null,Da:null,$a:null})}};H(r);return r}}}(),Cb=function(){var a=0,b=0,d=0,e=0,k=0,q=0,x=V.xk,h=V.wk,n=V.yk,t=0,z=0,H=null,y=null,G=0,v=0,f=0,g=0,B=0,K=null,l=0,p=0,m=0,A=Date.now(),J=null,P=!1,C=!1,F=!1,M=1,r=!1,u={m:function(){a=V.sk[ea.V()];b=V.rk[ea.V()];d=V.qk[ea.V()];p=V.tk[ea.V()];e=V.jk[ea.V()];k=V.nk[ea.V()];f=V.pk[ea.V()];g=ea.O();B=ea.Y();t=Math.round(g*a);z=Math.round(B*a);y=Ba.instance({width:t,height:z,Ec:!1});
H=ba.instance({width:t,height:z,isPot:!1,isLinear:!0});K=ba.instance({width:t,height:z,isPot:!1,isLinear:!0,J:1});P=!0},resize:function(R,Q,ia){M=ia;g=R;B=Q;t=Math.round(R*a);z=Math.round(Q*a);y.resize(t,z);C=!0},U:function(){var R=Math.exp(-(Date.now()-A)/p);l=F?m+(1-R)*(1-m):m*R;G=b+l*(d-b);v=e+(1-l)*(1-e);q=k+(1-l)*(1-k);ba.ba(5);if(C&&P)ba.ba(6),K.resize(t,z),E.set("s0"),E.ge("u1",6),y.bind(!1,!0),K.o(),y.Qe(),H.h(6),W.l(!0,!0),H.resize(t,z),H.o(),K.h(6),W.l(!1,!1),E.ge("u1",0),C=!1;else{c.enable(c.BLEND);
c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA);R=G/f;c.blendColor(R,R,R,R);c.colorMask(!0,!1,!1,!0);E.set("s96");tb.cf();E.G("u128",G);p&&(E.G("u129",v),E.G("u120",q));var Q=M*(x+Math.pow(Math.random(),n)*(h-x));E.N("u14",Q/g,Q/B);y.fh();y.Uc();H.o();Q=2*Math.PI*Math.random();for(var ia=!0,aa=0;aa<f;++aa)1===aa&&(c.blendFunc(c.SRC_ALPHA,c.ONE),E.G("u128",R)),E.G("u127",Q+aa/f*(Math.PI/2)),E.N("u126",(Math.random()-.5)/g,(Math.random()-.5)/B),W.l(ia,ia),ia=!1;c.disable(c.BLEND);E.set("s97");E.N("u14",
1/t,1/z);K.o();H.h(7);W.l(!1,!1);c.colorMask(!0,!0,!0,!0)}},h:function(R){K.h(R)},enable:function(){r=!0},jn:function(){if(F||!r)return!1;J&&clearTimeout(J);u.ee();J=setTimeout(u.Lj,400)},ee:function(){J&&(clearTimeout(J),J=!1);!F&&r&&(window.Wj.disable(),F=!0,A=Date.now(),m=l)},Lj:function(){F&&r&&(J&&(clearTimeout(J),J=null),window.Wj.enable(),F=!1,A=Date.now(),m=l)},H:function(){H.remove();K.remove();y.remove()}};u.jn();return u}(),xd={instance:function(a){var b=a.ha.O(),d=a.ym?!0:!1,e=d?"s78":
"s12",k=ba.instance({isFloat:a.ha.ri()&&Ga.fa()&&!d,T:a.ha.si()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,width:b,height:b,J:d?4:3}),q=ba.instance({isFloat:a.ha.ri()&&Ga.fa(),T:a.ha.si(),isPot:!0,width:1,height:b/2,J:3});q.o();E.set("s90");a.ha.h(0);W.l(!0,!0);var x=Math.round(Math.log(b)/Math.log(2));k.Tn=function(h){a.ha=h};k.un=function(){k.o();E.set(e);E.G("u91",V.Pc);a.ha.h(0);q.h(1);for(var h=0,n=0;n<=x;++n){var t=Math.pow(2,x-n),z=t/2;c.viewport(0,h,b,z);E.N("u89",b/t,1);E.G("u90",Math.min(6/z,
.6));h+=t/2;W.l(0===n,0===n)}};k.xn=k.remove;k.remove=function(){k.xn();q.remove()};return k}};xa.Ia=function(){var a={Rc:45,og:1,Ab:"../../images/debug/picsou.png",ce:.8,Mf:3.14/6,Nf:.314,Od:4,Nd:.5,Lf:-.25,Im:1,Z:256,Kf:.15},b={Va:null,Bc:null,screen:null},d=!1,e=!1,k=-1,q=null,x=null,h=null,n=Math.PI/180,t=[1,1],z=!1,H={m:function(y){k=y.width;y={isFloat:Ga.fa(),T:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:k,height:k/2,J:3};b.Va&&(b.Va.remove(),b.Bc.remove());b.Va=ba.instance(y);b.Bc=
ba.instance(y);E.j("s118",[{type:"1i",name:"u155",value:0}]);E.j("s119",[{type:"1i",name:"u160",value:0}]);H.Oj();z=!0},Oj:function(){E.j("s119",[{type:"1f",name:"u161",value:a.Mf},{type:"1f",name:"u162",value:a.Nf},{type:"1f",name:"u163",value:a.Od},{type:"1f",name:"u164",value:a.Nd},{type:"1f",name:"u165",value:a.Lf}])},bq:function(){return e},pa:function(y){q=y},Qc:function(){x="uniform sampler2D u155;uniform vec2 u156,u157,u10;uniform int u158;uniform float u159,u141;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u10*(c-u156)/u157;float b=1.;if(u158==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u159*g,texture2D(u155,a).rgb*u141,b*g);gl_FragColor=vec4(d,1.);}";
h="uniform sampler2D u160;uniform float u161,u162,u163,u164,u165;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u160,vec2(.5,.5));float d=a.r,j=u163*a.g,k=u164*(a.b+u165),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u161-u162,u161+u162,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";E.ma("s118",{name:"_",
g:x,i:"u155 u156 u158 u157 u159 u141 u10".split(" "),precision:"highp"});E.ma("s119",{name:"_",g:h,i:"u160 u161 u162 u163 u164 u165".split(" "),precision:"highp"})},Dg:function(y,G,v,f,g,B,K){E.N("u156",G,v);E.ge("u158",f?1:0);E.N("u157",g,g/B);E.wg("u10",K);y.h(0);W.l(!1,!1)},$j:function(y){c.viewport(0,0,a.Z,a.Z/2);E.set("s119");y.h(0);W.l(!1,!1)},Xh:function(){return b.Va},hh:function(y){H.m({width:a.Z});H.Pj(y,!1,1);e=!0},gh:function(){d&&b.screen.fm()===a.Ab||(d=!1,b.screen&&b.screen.remove(),
b.screen=ba.instance({url:a.Ab,isFloat:!1,B:function(){d=!0}}))},tg:function(y){Object.assign(a,y)},ib:function(y){H.tg(y);z&&(H.Oj(),H.gh())},Pj:function(y,G,v){var f=a.Z;Ba.$();b.Bc.M();E.set("s0");b.Va.h(0);W.l(!0,!0);b.Va.o();E.set("s118");E.G("u159",a.Kf);E.G("u141",a.Im);H.Dg(y,Math.PI,0,!0,90*n,y.O()/y.Y(),t);d&&(E.G("u141",a.ce),c.viewport(0,0,f/2,f/2),H.Dg(b.screen,0,0,!1,2*a.Rc*n,2*a.og,t),c.viewport(f/2,0,f/2,f/2),H.Dg(b.screen,2*Math.PI,0,!1,2*a.Rc*n,2*a.og,t));c.enable(c.BLEND);c.blendFunc(c.ONE,
c.ONE);G&&H.$j(G);E.set("s0");c.blendColor(0,0,0,1-v);c.blendFunc(c.CONSTANT_ALPHA,c.ONE_MINUS_CONSTANT_ALPHA);b.Bc.h(0);W.l(!1,!1);c.disable(c.BLEND);q.mj(b.Va)},v:function(){Object.assign(b,{Va:null,Bc:null,screen:null});e=d=!1;k=-1;q=null}};return H}();xa.pb=function(){var a=!1,b=!0,d=null,e=null,k=1,q=null,x={Qc:function(){ea.aa()&&(E.ma("s120",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform float u144;uniform vec2 u42;uniform vec3 u143;const float l=0.,m=0.,D=1.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 E=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u85*e;vec3 c=u85*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u79,0.,0.),u82,c);float t=mix(texture2D(u41,q).r,0.,u85);a.z+=t;mat3 u=r(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 j=u80/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u85);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u41","u42","u78","u143","u144"].concat(E.Dd(),E.Ed()),I:["a0"],R:[3],da:!0}),a=!0)},m:function(h){a&&E.j("s120",[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:h.Ea},{type:"1f",name:"u144",value:1},{type:"1f",name:"u79",value:0},{type:"1f",name:"u87",value:1}].concat(h.Og))},fb:function(h,n){e=h;k=n;x.ci()},eb:function(h,n){d=h;q=n;x.ci()},
ci:function(){if(ea.aa()&&e&&d){var h=[d[0]*e,d[1]*e,d[2]*e],n=q;h[0]+=n[0];h[1]+=n[1];h[2]+=n[2];E.j("s120",[{type:"1f",name:"u144",value:k},{type:"3f",name:"u143",value:h}]);E.K()}},pm:function(h){for(var n=h.width/2,t=h.height/2,z=h.depth,H=h.vl,y=h.height/4,G=h.$k,v=2*G+4,f=[],g=[],B=-n+h.Ua,K=-H-h.Ua,l=n-h.Ua,p=-H-h.Ua,m=0;m<v;++m){var A=0,J=0;0===m?(A=-n,J=-H-z):1<=m&&m<=1+G?(J=(m-1)/G*Math.PI/2,A=B-Math.cos(J)*h.Ua,J=K+Math.sin(J)*h.Ua):m>=2+G&&m<=2+2*G?(J=(m-2-G)/G*Math.PI/2,A=l+Math.sin(J)*
h.Ua,J=p+Math.cos(J)*h.Ua):m===v-1&&(A=n,J=-H-z);f.push(A,t+y,J,A,-t+y,J);0!==m&&g.push(2*m,2*m-2,2*m-1,2*m,2*m-1,2*m+1)}return x.instance({ja:f,indices:g})},toggle:function(h){b=h},instance:function(h){var n=W.instance({ja:h.ja,indices:h.indices});return{U:function(){a&&b&&(E.set("s120"),n.bind(!0),n.U())}}}};return x}();xa.ia=function(){function a(r){E.j("s123",r);E.j("s124",r)}var b={uf:-87,im:[85,95],bi:[90,90],ai:[85,70],md:24,sp:12,al:2,hg:[-80,40],Hi:[0,-10],Xm:40,Zm:20,Ii:[70,50],Ym:90,Bo:2,
ie:[0,-15],Ae:1024,lb:512,Vd:4,ro:[6,30],Gi:1.2};b.Ri=b.hg;var d=!1,e=!1,k=!1,q=null,x=null,h=null,n=null,t=null,z=null,H=!1,y=!1,G=null,v=null,f=null,g=null,B=.5,K=[{type:"1f",name:"u167",value:1}],l=null,p=null,m=0,A=["u41","u42","u144","u143"],J=null,P=null,C=null,F=null,M={Qc:function(){E.ma("s121",{name:"_",u:"attribute vec3 a0;uniform vec3 u143;uniform vec2 u168,u169;uniform float u144,u170,u171,u172;varying float vv0,vv1;void main(){vec3 a=(a0+u143)*u144;float b=atan(a.x,a.z-u170),d=2.*(a.y-u171)/(u172-u171)-1.;vv0=a0.y;float g=1.-u168.x*u168.x/(u168.y*u168.y),c=u168.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u170);vv1=smoothstep(u169.x,u169.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u173;uniform vec4 u13;varying float vv0,vv1;void main(){float a=u13.x+u13.y*smoothstep(-u13.w,-u13.z,vv0),b=min(a,1.)*u173;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u144 u143 u168 u169 u170 u171 u172 u13 u173".split(" "),I:["a0"],R:[3],precision:"highp"});E.ma("s122",{name:"_",g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u14),c=texture2D(u1,vv0-2.*u14),d=texture2D(u1,vv0-u14),f=texture2D(u1,vv0+u14),g=texture2D(u1,vv0+2.*u14),h=texture2D(u1,vv0+3.*u14);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u14"],precision:"lowp"});E.ma("s123",{name:"_",u:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,r);vec2 g=u85*e;vec3 c=u85*q;vec2 v=mix(d.a*u42,e,g),h=(2.*d.gb-e)*(1.-g);h.x*=-1.;vec3 a=mix(texture2D(u41,s).rgb+vec3(u79,0.,0.),u82,c);float w=mix(texture2D(u41,t).r,0.,u85);a.z+=w;mat3 i=u(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float j=cos(a.z),k=sin(a.z);mat2 z=mat2(j,k,-k,j);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 l=u80/v;vec3 m=a0;float B=max(0.,-a0.z-o)*p;m.x+=B*sign(a0.x)*(1.-u85);vec3 C=i*(m+x)*y+b;vec2 D=l*A;vec3 E=vec3(h*D,-l)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=i*a2;vv1=-F.z,vv1*=vv1*1e-5+smoothstep(5.,50.,abs(a0.x));}",
g:"uniform sampler2D u174,u160;uniform vec2 u89,u175;uniform float u176,u167;varying vec2 vv0;varying float vv1;void main(){vec2 b=u175*u176+u89*vv0;vec4 a=u167*texture2D(u174,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u174 u160 u78 u176 u175 u89 u167".split(" ").concat(E.Dd(),E.Ed(),A),I:["a0","a2","a1"],R:[3,3,2],precision:"lowp"});E.ma("s124",{name:"_",u:"attribute vec3 a0;uniform sampler2D u41;uniform vec2 u42;uniform float u144;uniform vec3 u143;const float l=0.,m=0.;const vec2 e=vec2(1.);const vec3 n=vec3(1.);const vec2 D=vec2(-1.,1.),o=vec2(.16,.5),p=vec2(.5,.5),q=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 r(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,o);vec2 f=u85*e;vec3 c=u85*n;vec2 s=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,p).rgb+vec3(u79,0.,0.),u82,c);float t=mix(texture2D(u41,q).r,0.,u85);a.z+=t;mat3 u=r(a);vec3 v=mix(u143,u83,c);float w=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 x=mat2(h,i,-i,h);b.xy=x*b.xy;float y=mix(u81,1.,u85);vec2 j=u80/s;vec3 k=a0;float z=max(0.,-a0.z-l)*m;k.x+=z*sign(a0.x)*(1.-u85);vec3 A=u*(k+v)*w+b;vec2 B=j*y;vec3 C=vec3(g*B,-j)+A*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(C,1.)),gl_Position*=vec4(-1.,1.,1.,1.);}",
g:"void main(){gl_FragColor=vec4(0.);}",i:["u78"].concat(E.Dd(),E.Ed(),A),I:["a0"],R:[3],precision:"lowp"});d=!0},m:function(r){if(d){if(void 0===r.hc||!r.hc)return!1;if(e)M.hj(r);else{n=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.Ae,height:b.Ae/4});var u=b.lb/4,R={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:b.lb,height:u};h=ba.instance(R);z=ba.instance(R);t=ba.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:b.lb,height:u*b.Vd});u=[];R=[];var Q=b.Hi[0],ia=b.Hi[1],
aa=b.Xm,N=b.Zm,da=-b.Ii[0]+Q,w=b.Ii[1]+ia,O=b.Ym;u.push(0,Q,ia,.5*-N,da,w,.5*N,da,w,.5*-aa,Q-O,ia,.5*aa,Q-O,ia);R.push(0,2,1,0,1,3,1,4,3,1,2,4,0,4,2);C=W.instance({ja:new Float32Array(u),indices:new Uint16Array(R)});u=.5-.5/r.ic[1];R=.5+.5/r.ic[1];Q=new Float32Array(16*b.md);ia=new Uint16Array(6*(b.md-1));for(aa=0;aa<b.md;++aa){N=2*aa/(b.md-1)-1;N=Math.sign(N)*Math.pow(Math.abs(N),b.al);O=Math.PI*(N+1)/2-Math.PI/2;N=Math.sin(O);var D=Math.cos(O);da=Math.sin(O*b.Gi);w=Math.cos(O*b.Gi);var X=O/(Math.PI*
r.ic[0])+.5;O=b.ai[0]*N;var ma=b.Ri[0],oa=b.ai[1]*D+b.uf,za=X,Fa=u,ja=b.Ri[1];D=b.bi[1]*D+b.uf;var ta=R,Ia=16*aa;Q[Ia]=b.bi[0]*N;Q[Ia+1]=ja;Q[Ia+2]=D;Q[Ia+3]=da;Q[Ia+4]=0;Q[Ia+5]=w;Q[Ia+6]=X;Q[Ia+7]=ta;Q[Ia+8]=O;Q[Ia+9]=ma;Q[Ia+10]=oa;Q[Ia+11]=da;Q[Ia+12]=0;Q[Ia+13]=w;Q[Ia+14]=za;Q[Ia+15]=Fa;0!==aa&&(N=2*aa,da=6*(aa-1),ia[da]=N,ia[da+1]=N-1,ia[da+2]=N-2,ia[da+3]=N,ia[da+4]=N+1,ia[da+5]=N-1)}F=W.instance({ja:Q,indices:ia});M.hj(r);E.j("s122",[{type:"1i",name:"u1",value:0}]);e=!0}}},hj:function(r){B=
r.mo;g=r.je;var u=[{type:"1i",name:"u41",value:1},{type:"3f",name:"u78",value:[r.Ea[0],r.Ea[1]-b.ie[0],r.Ea[2]+b.ie[1]]}].concat(r.Og,r.Kj);l=[{type:"1i",name:"u174",value:0},{type:"1i",name:"u160",value:2},{type:"1f",name:"u176",value:r.no},{type:"2f",name:"u89",value:[1,1/b.Vd]},{type:"2f",name:"u175",value:[0,1/b.Vd]},{type:"1f",name:"u167",value:1}].concat(u);p=u;E.j("s123",l);E.j("s124",p)},cc:function(r){q=r},bc:function(r){J=r;J.ld(M.xc)},ti:function(){return k&&null!==J&&null!==P},xc:function(){if(!(k||
y&&H)||null===J||null===P)return!1;m=0;c.viewport(0,0,b.Ae,b.Ae/4);Ba.$();n.o();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);E.j("s121",[{type:"1f",name:"u170",value:b.uf},{type:"1f",name:"u171",value:b.hg[0]},{type:"1f",name:"u172",value:b.hg[1]},{type:"3f",name:"u143",value:[G[0]+v[0],G[1]+v[1],G[2]+v[2]]},{type:"1f",name:"u173",value:B},{type:"2f",name:"u168",value:b.im},{type:"2f",name:"u169",value:b.ro}]);J.ul();E.set("s1");var r=b.lb/4;c.viewport(0,0,b.lb,r);h.o();n.h(0);n.zd();W.l(!0,
!0);for(var u=0;u<b.Vd;++u)E.set("s122"),0!==u&&c.viewport(0,0,b.lb,r),z.o(),h.h(0),E.N("u14",1/b.lb,0),W.l(!1,!1),h.o(),z.h(0),E.N("u14",0,1/r),W.l(!1,!1),b.bl&&c.colorMask(0===u,1===u,2===u,!0),E.set("s1"),t.o(),h.h(0),c.viewport(0,u*r,b.lb,r),W.l(!1,!1),b.bl&&c.colorMask(!0,!0,!0,!0);return k=!0},U:function(){M.ti()&&0===m++%b.Bo&&(P.bind(!1,!1),x.M(),c.clearColor(0,0,0,0),c.enable(c.DEPTH_TEST),c.depthMask(!0),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),E.set("s124"),q.h(1),C.bind(!0),C.U(),
E.set("s123"),t.h(0),F.bind(!0),F.U(),c.disable(c.DEPTH_TEST),c.depthMask(!1))},bm:function(){return x},add:function(){M.ti()&&(c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),x.h(0),W.l(!1,!1),c.disable(c.BLEND))},qg:function(r,u){P&&P.remove();P=Ba.instance({width:r,height:u,Ec:!0});x&&x.remove();x=ba.instance({width:r,height:u,isFloat:!1,isPot:!1});M.xc()},eb:function(r,u,R){r||(r=G,u=v,R=f);a([{type:"3f",name:"u143",value:[R[0]+g[0],R[1]+g[1]-b.ie[0],R[2]+g[2]+b.ie[1]]}]);G=r;v=u;f=
R;y=!0;!k&&H&&M.xc();E.K()},fb:function(r,u){E.j("s121",[{type:"1f",name:"u144",value:r}]);a([{type:"1f",name:"u144",value:u}]);H=!0;!k&&y&&M.xc();E.K()},ug:function(r){a([{type:"1f",name:"u79",value:r}]);E.K()},Db:function(r){r&&(J=r);M.xc()},vg:function(r,u){K[0].value=1-r;a(K);a(u)},H:function(){},v:function(){k=e=d=!1;z=t=n=h=x=q=null}};return M}();xa.sa=function(){var a=!1,b=null,d=0,e=0,k=0,q=[{type:"1f",name:"u167",value:1}],x=null,h=null,n=null,t={Qc:function(){E.ma("s125",{name:"_",u:"attribute vec3 a0;uniform vec2 u177,u178;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u178)/u177;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",
g:"uniform vec2 u179;uniform float u180,u181,u182;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u180,u181),a=vv0-b,c=u182*a,d=(c-a)*u179;gl_FragColor=vec4(d,0.,1.);}",i:"u177 u178 u180 u181 u182 u179".split(" "),I:["a0"],R:[3],precision:"highp"});E.ma("s126",{name:"_",u:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u41;uniform vec3 u143;uniform vec2 u42,u177,u178;uniform float u144;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u76;uniform vec3 u78,u82,u83,u84;uniform float u77,u85,u86,u79,u80,u81,u87;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u41,q);vec2 f=u85*e;vec3 c=u85*p;vec2 u=mix(d.a*u42,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u41,r).rgb+vec3(u79,0.,0.),u82,c);float v=mix(texture2D(u41,s).r,0.,u85);a.z+=v;mat3 w=t(a);vec3 x=mix(u143,u83,c);float y=mix(u144,u86,u85);vec3 b=mix(u78,u84,c);b.x+=u77*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u81,1.,u85);vec2 j=u80/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u85);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u76*(vec4(u87*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u178)/u177,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u183,u184;uniform float u167;varying vec2 vv0,vv1;void main(){vec2 a=u167*texture2D(u183,vv0).rg;gl_FragColor=texture2D(u184,a+vv1);}",i:"u167 u41 u183 u184 u177 u178 u42 u78 u144 u143".split(" ").concat(E.Dd(),E.Ed()),I:["a0"],R:[3],precision:"lowp"});a=!0},m:function(z){if(a){if(void 0===z.hc||!z.od)return!1;h=ba.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,J:4});n=Ba.instance({width:256,height:128});E.j("s126",[{type:"1i",name:"u41",value:1},{type:"1i",
name:"u183",value:2},{type:"1i",name:"u184",value:0},{type:"3f",name:"u78",value:z.Ea},{type:"1f",name:"u167",value:1}].concat(z.Kj,z.Og));e=z.Xe;k=z.We;d=z.Ye}},cc:function(z){b=z},bc:function(z){x=z;x.ld(t.Te)},Te:function(){c.viewport(0,0,256,128);n.o();h.o();var z=x.cm(),H=x.dm(),y=[{type:"2f",name:"u177",value:[z,H]},{type:"2f",name:"u178",value:[x.Fl(),x.Gl()]}];E.j("s125",y.concat([{type:"1f",name:"u180",value:e},{type:"1f",name:"u181",value:k},{type:"1f",name:"u182",value:d},{type:"2f",name:"u179",
value:[1/z,-1/H]}]));x.vh();E.j("s126",y)},U:function(){E.set("s126");b.h(1);h.h(2);x.vh()},eb:function(z){E.j("s126",[{type:"3f",name:"u143",value:z}]);E.K()},fb:function(z){E.j("s126",[{type:"1f",name:"u144",value:z}]);E.K()},ug:function(z){E.j("s126",[{type:"1f",name:"u79",value:z}]);E.K()},ko:function(z){d=z;t.Te();E.K();ya.animate(Date.now())},Db:function(z){z&&(x=z);t.Te()},vg:function(z,H){q.u167=1-z;E.j("s126",q);E.j("s126",H)},H:function(){}};return t}();xa.oc=function(){var a=[0,-.5],b=
!1,d=!1,e=null,k=null,q=null,x=null,h=null,n=-1,t=-1;return{Qc:function(){E.ma("s127",{name:"_",u:"attribute vec2 a0;uniform sampler2D u41;uniform vec2 u42,u11;uniform float u10;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u41,vec2(.25,.5));vec2 b=a.a*u42,c=2.*a.gb-f,d=u11+a0*u10;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u185;varying vec2 vv0;void main(){gl_FragColor=texture2D(u185,vv0);}",i:["u41","u185","u42","u11","u10"],precision:"lowp"});
E.ma("s128",{name:"_",g:"uniform sampler2D u2,u186,u187;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u187,vv0).rgb,c=texture2D(u186,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u187","u186"],precision:"lowp"});b=!0},m:function(z){b&&(h=ba.instance({isFloat:!1,isPot:!0,url:z.Ke,B:function(){d=!0}}),E.j("s127",[{type:"1i",name:"u41",value:1},{type:"1i",name:"u185",value:0},{type:"2f",name:"u42",value:z.Tj},{type:"2f",name:"u11",value:a},
{type:"1f",name:"u10",value:3.8}]),E.j("s128",[{type:"1i",name:"u186",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u187",value:2}]))},cc:function(z){k=z},qg:function(z,H){var y={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:z,height:H,J:4};n=2/z;t=2/H;q=ba.instance(y);x=ba.instance(y);e=Ba.instance({width:z,height:H})},U:function(z,H){if(d){e.bind(!1,!0);E.set("s89");for(var y=0;2>y;++y){E.N("u14",n,0);q.o();0!==y&&x.h(0);var G=0===y&&!V.ea;W.l(G,G);E.N("u14",0,t);x.o();q.h(0);W.l(!1,
!1)}E.set("s127");k.h(1);h.h(0);q.o();c.clearColor(1,0,0,1);c.clear(c.COLOR_BUFFER_BIT);W.l(!1,!1);E.set("s128");H.o();x.h(0);q.h(1);z.h(2);W.l(!1,!1)}},H:function(){}}}();var Kc=function(){var a={instance:function(b){var d=b.Wf,e=b.Sf,k=b.nd,q=b.background?b.background:ba.Yh(),x=b.Oa,h={scale:1,offsetX:0,offsetY:0},n=null;b.Rf&&(h.scale=b.Rf.scale,h.offsetY=b.Rf.offsetY);return{Th:function(){return x},Mh:function(){return q},set:function(){n=eb.Rl();eb.oj(h);eb.se();eb.te();ya.gj(k,q,!1,!1)},K:function(){eb.oj(n)},
ac:function(){return{modelURL:d,materialsURLs:e,background:q.ac(!1),nd:k.ac(!1),Oa:x.ac(!0)}},Vl:function(){return k.ac(!1)},gp:function(t){q.h(t)},H:function(){k.remove();x.remove();b.background&&q.remove()}}},Xc:function(b,d,e){function k(){if(3===++n&&d){var t=a.instance({Wf:b.modelURL,Sf:b.materialsURLs,background:q,nd:x,Oa:h});d(t)}}var q=null,x=null,h=null,n=0;ba.Xc(b.background,function(t){!t&&e?e():(q=t,k())});ba.Xc(b.dataState,function(t){!t&&e?e():(x=t,k())});ba.Xc(b.light,function(t){!t&&
e?e():(h=t,k())})}};return a}();return Ta||window.JEELIZVTO}();(function(U,ua){"function"===typeof define&&define.amd?define(ua):"object"===typeof exports?module.exports=ua():U.ResizeSensor=ua()})("undefined"!==typeof window?window:this,function(){function U(Ka,Za){var cb=Object.prototype.toString.call(Ka),Eb=0,La=Ka.length;if("[object Array]"===cb||"[object NodeList]"===cb||"[object HTMLCollection]"===cb||"[object Object]"===cb||"undefined"!==typeof jQuery&&Ka instanceof jQuery||"undefined"!==typeof Elements&&
Ka instanceof Elements)for(;Eb<La;Eb++)Za(Ka[Eb]);else Za(Ka)}if("undefined"===typeof window)return null;var ua=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(Ka){return window.setTimeout(Ka,20)},Na=function(Ka,Za){function cb(){var La=[];this.add=function(Kb){La.push(Kb)};var ib,rb;this.call=function(){ib=0;for(rb=La.length;ib<rb;ib++)La[ib].call()};this.remove=function(Kb){var zb=[];ib=0;for(rb=La.length;ib<rb;ib++)La[ib]!==Kb&&zb.push(La[ib]);
La=zb};this.length=function(){return La.length}}function Eb(La,ib){if(La)if(La.resizedAttached)La.resizedAttached.add(ib);else{La.resizedAttached=new cb;La.resizedAttached.add(ib);La.resizeSensor=document.createElement("div");La.resizeSensor.className="resize-sensor";La.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";La.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
La.appendChild(La.resizeSensor);La.resizeSensor.offsetParent!==La&&(La.style.position="relative");var rb=La.resizeSensor.childNodes[0],Kb=rb.childNodes[0],zb=La.resizeSensor.childNodes[1],Ob,ac,Fb,bc,cc=La.offsetWidth,dc=La.offsetHeight,ec=function(){Kb.style.width="100000px";Kb.style.height="100000px";rb.scrollLeft=1E5;rb.scrollTop=1E5;zb.scrollLeft=1E5;zb.scrollTop=1E5};ec();var yc=function(){ac=0;Ob&&(cc=Fb,dc=bc,La.resizedAttached&&La.resizedAttached.call())};ib=function(){Fb=La.offsetWidth;bc=
La.offsetHeight;(Ob=Fb!=cc||bc!=dc)&&!ac&&(ac=ua(yc));ec()};var fc=function(gc,ic,hc){gc.attachEvent?gc.attachEvent("on"+ic,hc):gc.addEventListener(ic,hc)};fc(rb,"scroll",ib);fc(zb,"scroll",ib)}}U(Ka,function(La){Eb(La,Za)});this.detach=function(La){Na.detach(Ka,La)}};Na.detach=function(Ka,Za){U(Ka,function(cb){if(cb){if(cb.resizedAttached&&"function"==typeof Za&&(cb.resizedAttached.remove(Za),cb.resizedAttached.length()))return;cb.resizeSensor&&(cb.contains(cb.resizeSensor)&&cb.removeChild(cb.resizeSensor),
delete cb.resizeSensor,delete cb.resizedAttached)}})};return Na});var oc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},lb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Qa={isRT:!0,sku:void 0,materialsReplacements:"",mode:lb.notLoaded},hb={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Yc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},Aa=Object.assign({},Yc),yd={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Ic=null,Ub={enabled:!1,callback:null,interval:1E3},wc={error:!1},mc=null,$b=null,xc="undef",xb={start:function(U){console.log("INFO in JeelizVTOWidget.js: start()");if(Qa.mode!==lb.notLoaded)xb.resume();else{na();if(U.settings)for(var ua in U.settings)oc[ua]=U.settings[ua];U.NNCPath&&Ta.set_NNCPath(U.NNCPath);U.faceDetectionCallback&&(Ub.enabled=!0,Ub.callback=U.faceDetectionCallback,Ub.interval="undefined"===typeof U.faceDetectionInterval?1E3:
U.faceDetectionInterval);Ic=Object.assign({},yd,U.callbacks||{});Aa.container=U.placeHolder||document.getElementById("JeelizVTOWidget");if(!Aa.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");Aa.cv=U.canvas||document.getElementById("JeelizVTOWidgetCanvas");Aa.cv||(Aa.cv=document.createElement("canvas"),Aa.container.appendChild(Aa.cv));Aa.cv.style.position="absolute";Aa.loading=document.getElementById("JeelizVTOWidgetLoading");U.onError&&(wc.error=
U.onError);Db();ua=nb(Aa.container);if(!ua.width)return Promise.reject("PLACEHOLDER_NULL_WIDTH");if(!ua.height)return Promise.reject("PLACEHOLDER_NULL_HEIGHT");ob();new ResizeSensor(Aa.container,function(Na){ob()});(U.searchImageMask||U.searchImageColor||U.searchImageRotationSpeed)&&Ta.set_loading(U.searchImageMask,U.searchImageColor,U.searchImageRotationSpeed);U.callbackReady&&($b=U.callbackReady);Qa.mode=lb.init;xc="undefined"===typeof U.assetsPath?oc.appstaticURL+"jeefit/":U.assetsPath;"undefined"!==
typeof U.catalog&&(mc=U.catalog);if(U.onWebcamGet)Ta.onWebcamGet(U.onWebcamGet);return new Promise(function(Na,Ka){Ta.init(xc,la,function(){Qa.isRT=!1;db("NO_ERROR_LABEL");Ka()},Aa.cv);var Za=U.sku?U.sku:null;Ta.onHalfLoad(function(){!1===U.isShadow&&Ta.switch_shadow(!1);xb.load(Za,Na,U.materialsReplacements)})})}},destroy:function(){return Ta.destroy().then(function(){Qa.mode=lb.notLoaded;Qa.sku=void 0;Qa.materialsReplacements="";$b=mc=null;Object.assign(Aa,Yc)})},pause:function(U){if(!Qa.isRT)return Promise.reject();
Qa.mode=lb.paused;var ua=Ta.switch_sleep(!0,U);return U?ua:Promise.resolve(ua)},resume:function(U){if(!Qa.isRT)return Promise.reject();Qa.mode=lb.realtime;var ua=Ta.switch_sleep(!1,U);return U?ua:Promise.resolve(ua)},set_videoRotation:function(U){Qa.isRT&&Ta.set_videoRotation(U)},set_videoSizes:function(U,ua,Na,Ka,Za,cb){Qa.isRT&&Ta.set_videoSizes(U,ua,Na,Ka,Za,cb)},resize:function(){ob()},set_scale:function(U){Ta.set_scale(U)},capture_image:function(U,ua,Na){Ta&&Ta.ready?Ta.capture_image(U,ua,Na,
!1):ua(!1)},toggle_loading:function(U){U?(qa(Aa.loading),nc("LOADING_START")):(Ma(Aa.loading),nc("LOADING_END"))},load_modelStandalone:function(U,ua){if(!Qa.isRT)throw Error("Loading standalone models is only available in RT mode");Qa.mode===lb.paused&&xb.resume();Qa.mode=lb.loadingModel;if("string"===typeof U){var Na=U;Ha(U,Na).then(ua).catch(Ra)}else{var Ka=Na="RANDOM_SKU_"+Date.now().toString();Ta.set_modelStandalone(U,Nb.bind(null,Ka,ua),Ka)}Qa.sku=Na;Qa.materialsReplacements=""},load:function(U,
ua,Na){xb.toggle_loading(!0);Qa.isRT&&xb.load_RT(U,ua,Na)},load_RT:function(U,ua,Na){var Ka=Na?JSON.stringify(Na):"";U===Qa.sku&&Ka===Qa.materialsReplacements?xb.toggle_loading(!1):(Qa.sku=U,Qa.materialsReplacements=Ka,Qa.mode=lb.loadingModel,Qa.mode===lb.paused&&xb.resume(),U?mc&&mc[U]?Sb(U,mc[U],ua,Na):sa(oc.glassesDBURL+U).then(function(Za){if(Za.error)return Ra();Sb(U,Za.intrinsic,ua,Na)}).catch(Ra):(Qa.mode=lb.realtime,xb.toggle_loading(!1),Ta.start_rendering(),ua&&ua()))},enter_adjustMode:Tb,
exit_adjustMode:ub,set_LUT:function(U){return Ta&&Ta.ready?Ta.set_LUT(U||null):Promise.reject("NOT_READY")}};return xb}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"4.0.0",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
